const _0x2d7db4=_0x1974;(function(_0x320d65,_0x211a0f){const _0x17b51a=_0x1974,_0x40a0d6=_0x320d65();while(!![]){try{const _0x5dbba6=-parseInt(_0x17b51a(0x10a))/0x1+parseInt(_0x17b51a(0xdf))/0x2+parseInt(_0x17b51a(0xf7))/0x3+parseInt(_0x17b51a(0x17c))/0x4*(-parseInt(_0x17b51a(0x14a))/0x5)+parseInt(_0x17b51a(0x104))/0x6*(-parseInt(_0x17b51a(0x11e))/0x7)+parseInt(_0x17b51a(0x14d))/0x8+-parseInt(_0x17b51a(0x124))/0x9*(-parseInt(_0x17b51a(0x12d))/0xa);if(_0x5dbba6===_0x211a0f)break;else _0x40a0d6['push'](_0x40a0d6['shift']());}catch(_0x5ddd71){_0x40a0d6['push'](_0x40a0d6['shift']());}}}(_0x3ad4,0x8ab8f));import{LGT}from'./Util.js';import{Vetools}from'./Vetools.js';import{UtilActors}from'./UtilActors.js';import{DataConverter}from'./DataConverter.js';import{Config}from'./Config.js';import{UtilList2}from'./UtilList2.js';import{DataConverterRace}from'./DataConverterRace.js';import{UtilApplications}from'./UtilApplications.js';import{Charactermancer_AbilityScoreSelect}from'./UtilCharactermancer.js';function _0x3ad4(){const _0x12736b=['sizeAbvToFull','DataSourceSpecial','_pImportEntry_pFillSkillsAndTraits','vulnerable','Import\x20Races','Savage\x20Attacks','_pImportEntry_fillAttributes','ImportEntryOpts','level','_versions','1398526MVoKAb','_pImportEntry_pFillAbilities','_pImportEntry_fillFlags','string','_pGetSources','itemData','forEach','pUpdateDocument','_pFnPostProcessEntries','join','pFillActorImmunityData','name','DISPLAY_NAME_TYPE_PLURAL','pGetRaceFeatureItem','immune','_dataList','_actor','size','isCancelled','med','expertise','_pImportEntry_getUserVersion','_pPostLoad','races-and-subraces','1769868FAyVbs','_isSkippableFeature','cancelled','_vSize','_pImportEntry_pHandleSize','weaponProf','ability','armorProficiencies','DataSourceFile','get','pFillActorArmorProfData','pFillActorAbilityData','click','1473726LYbdvS','log','[name=\x22btn-run\x22]','isStreamerMode','_pImportActorAdditionalFeats','length','234256PqEAPC','_activateListeners_absorbListItems','text-center','$selVersion','_titleSearch','_activateListeners_initRunButtonsAdditional','languages','vision','_vAbility','languageProficiencies','bind','pAddActorEffects','pGetRaces','raceFeature','Upload\x20File','movement','PG_RACES','proxy','spell','darkvision','21rjLkoU','Powerful\x20Build','SOURCE_TYP_OFFICIAL_ALL','getData','resist','URL_TO_HASH_BUILDER','8012079eJqCHL','attributes','ImportCustomizer','[name=\x22sel-version\x22]','_content','__prop','pGetRaceFeatureItemEffects','weaponProficiencies','_pApplyAllAdditionalSpellsToActor','10vgsVmd','reset','Lucky','getAbilityData','some','isToken','pFillActorSkillData','document','sourceShort','skillToolLanguageProficiencies','Customize\x20Import','init','isCharactermancer','[name=\x22btn-reset\x22]','_pImportEntry_fillToken','toolProficiencies','push','getFauxRaceFeature','pFillActorToolProfData','_versionBase_isVersion','VET_SIZE_TO_ABV','skills','value','sourceClassName','skillProficiencies','asTextShort','registerImpl','pGetWithDescriptionPlugins','entries','3319435nnskVn','set','data','190104hRsqgb','_pImportEntry_pFillItems','getVersions','_activateListeners_bindControls','sheet','dimSight','absorbFnBindListenersRadio','absorbFnBindListeners','RaceFeatureRequiresEffects','pFillActorVulnerabilityData','sourceJsonToAbv','_pImportEntry_pImportToDirectoryGeneric','importRace','val','race','_list','source','completedStub','sourceJsonToStylePart','_pGetSourcesHomebrew','Halfling','pFillActorExpertiseData','sourceLong','/template/ImportListRaceCustomizer.hbs','traits','sourceJsonToFull','sourceJsonToColor','races','traitTags','pGetSpeedEffects','toolProf','_activateListeners_initRunButtonsAdditional_genericMods','armorProf','pAddActorItems','map','SYM_UI_SKIP','speed','absorbFnGetData','pGetRaceItem','Race','pFillActorConditionImmunityData','Customize\x20and\x20Import...','conditionImmune','find','constructor','render','5etools','4WEigSF','actor','_activateListeners_initList','btn-run-mods','DataSourceUrl','token','SRD','mutateForFilters','senses','items','_pImportEntry_pImportToActor','doAbsorbItems','flags','ele','pFillActorSkillToolLanguageData'];_0x3ad4=function(){return _0x12736b;};return _0x3ad4();}import{Charactermancer_Race_SizeSelect,Charactermancer_Race_Util}from'./UtilCharactermancerRace.js';import{UtilDataSource}from'./UtilDataSource.js';import{ImportListCharacter}from'./ImportListCharacter.js';import{ImportedDocument,ImportSummary,ImportCustomizer}from'./ImportList.js';import{UtilDataConverter}from'./UtilDataConverter.js';import{SharedConsts}from'../shared/SharedConsts.js';import{UtilDocuments}from'./UtilDocuments.js';class ImportListRace extends ImportListCharacter{static ['ID']=_0x2d7db4(0xf6);static [_0x2d7db4(0xeb)]='Races\x20&\x20Subraces';static ['_']=this[_0x2d7db4(0x147)](this);static[_0x2d7db4(0x138)](){const _0x3cb545=_0x2d7db4;this['_initCreateSheetItemHook']({'prop':_0x3cb545(0x15b),'importerName':_0x3cb545(0x174)});}constructor(_0x4d3fe2){const _0x4b0d2e=_0x2d7db4;_0x4d3fe2=_0x4d3fe2||{},super({'title':_0x4b0d2e(0x18f)},_0x4d3fe2,{'props':['race'],'dirsHomebrew':[_0x4b0d2e(0x15b),'subrace'],'titleSearch':_0x4b0d2e(0x168),'sidebarTab':'items','gameProp':_0x4b0d2e(0x185),'defaultFolderPath':['Races'],'pageFilter':new PageFilterRaces(),'isActorRadio':!![],'page':UrlUtil[_0x4b0d2e(0x11a)],'isPreviewable':!![],'isDedupable':!![],'configGroup':_0x4b0d2e(0x159)});}async[_0x2d7db4(0xf5)](_0x56034b,_0x45325b){return Charactermancer_Race_Util['pPostLoadBrew'](_0x45325b);}async[_0x2d7db4(0xe3)](){const _0x44fb89=_0x2d7db4,_0x3f78f9={'pPostLoad':this['_pPostLoad'][_0x44fb89(0x114)](this)};return[new UtilDataSource[(_0x44fb89(0x18c))](Config['get']('ui',_0x44fb89(0x107))?_0x44fb89(0x182):_0x44fb89(0x17b),async()=>(await Vetools[_0x44fb89(0x116)]())[_0x44fb89(0x15b)],{'cacheKey':'5etools-races','filterTypes':[UtilDataSource[_0x44fb89(0x120)]],'isDefault':!![]}),new UtilDataSource[(_0x44fb89(0x180))]('Custom\x20URL','',{..._0x3f78f9,'filterTypes':[UtilDataSource['SOURCE_TYP_CUSTOM']]}),new UtilDataSource[(_0x44fb89(0xff))](_0x44fb89(0x118),{..._0x3f78f9,'filterTypes':[UtilDataSource['SOURCE_TYP_CUSTOM']]}),...await this[_0x44fb89(0x160)](_0x3f78f9)];}[_0x2d7db4(0x121)](){const _0xd390e3=_0x2d7db4;return{...super[_0xd390e3(0x121)](),'buttonsAdditional':[this['_content']['some'](_0x2c4137=>_0x2c4137[_0xd390e3(0xde)])?{'name':_0xd390e3(0x17f),'text':_0xd390e3(0x176)}:null]['filter'](Boolean),'cols':[{'name':'Name','width':0x4,'field':_0xd390e3(0xea)},{'name':'Ability','width':0x5,'field':'ability'},{'name':'Size','width':0x1,'field':_0xd390e3(0xf0)},{'name':'Source','width':0x1,'field':'source','titleProp':_0xd390e3(0x163),'displayProp':_0xd390e3(0x135),'classNameProp':_0xd390e3(0x144),'styleProp':'sourceStyle','rowClassName':_0xd390e3(0x10c)}],'rows':this[_0xd390e3(0x128)][_0xd390e3(0x16f)]((_0x102bf2,_0x339d8b)=>{const _0x17ccea=_0xd390e3;return this['_pageFilter'][_0x17ccea(0x179)][_0x17ccea(0x183)](_0x102bf2),_0x102bf2[_0x17ccea(0x112)]=_0x102bf2[_0x17ccea(0xfd)]?Renderer[_0x17ccea(0x130)](_0x102bf2[_0x17ccea(0xfd)])[_0x17ccea(0x146)]:'None',_0x102bf2[_0x17ccea(0xfa)]=(_0x102bf2[_0x17ccea(0xf0)]||[SZ_VARIES])[_0x17ccea(0x16f)](_0xc4e86a=>Parser[_0x17ccea(0x18b)](_0xc4e86a))[_0x17ccea(0xe8)]('/'),{'name':_0x102bf2[_0x17ccea(0xea)],'ability':_0x102bf2[_0x17ccea(0x112)],'size':_0x102bf2[_0x17ccea(0xfa)],'source':_0x102bf2['source'],'sourceShort':Parser[_0x17ccea(0x157)](_0x102bf2['source']),'sourceLong':Parser['sourceJsonToFull'](_0x102bf2[_0x17ccea(0x15d)]),'sourceClassName':Parser[_0x17ccea(0x167)](_0x102bf2[_0x17ccea(0x15d)]),'sourceStyle':BrewUtil[_0x17ccea(0x15f)](_0x102bf2[_0x17ccea(0x15d)]),'isVersion':!!_0x102bf2[_0x17ccea(0x140)],'ix':_0x339d8b};})};}[_0x2d7db4(0x10b)](){const _0x4e375f=_0x2d7db4;this[_0x4e375f(0x15c)][_0x4e375f(0x187)](this[_0x4e375f(0x128)],{'fnGetName':_0x3d2e54=>_0x3d2e54['name'],'fnGetValues':_0x3ea47d=>({'source':_0x3ea47d[_0x4e375f(0x15d)],'ability':_0x3ea47d[_0x4e375f(0x112)],'size':_0x3ea47d[_0x4e375f(0xfa)],'hash':UrlUtil[_0x4e375f(0x123)][this['_page']](_0x3ea47d)}),'fnGetData':UtilList2[_0x4e375f(0x172)],'fnBindListeners':_0x539435=>this['_isRadio']?UtilList2[_0x4e375f(0x153)](this[_0x4e375f(0x15c)],_0x539435):UtilList2[_0x4e375f(0x154)](this['_list'],_0x539435)});}[_0x2d7db4(0x10f)](){const _0x30305c=_0x2d7db4;this[_0x30305c(0x16c)]();}[_0x2d7db4(0xe7)](_0x31fa6f,{isUseMods:isUseMods=![]}={}){if(!isUseMods)return _0x31fa6f;return new Promise(_0x46bd76=>{const _0x2d7559=_0x1974,_0x3d480b=new ImportListRace[(_0x2d7559(0x126))](_0x31fa6f,_0x46bd76,{'titleSearch':this[_0x2d7559(0x10e)],'isActor':!!this['_actor']});_0x3d480b[_0x2d7559(0x17a)](!![]);});}async['_pImportEntry'](_0x5594f9,_0x57779d){const _0xe0e699=_0x2d7db4;_0x57779d=_0x57779d||{},console[_0xe0e699(0x105)](...LGT,'Importing\x20race\x20\x22'+_0x5594f9['name']+'\x22\x20(from\x20\x22'+Parser[_0xe0e699(0x157)](_0x5594f9[_0xe0e699(0x15d)])+'\x22)');if(DataConverterRace['isStubRace'](_0x5594f9))return ImportSummary[_0xe0e699(0x15e)]();if(_0x57779d['isTemp'])return this[_0xe0e699(0x158)](_0x5594f9,_0x57779d);if(this['_actor'])return this[_0xe0e699(0x186)](_0x5594f9,_0x57779d);return this[_0xe0e699(0x158)](_0x5594f9,_0x57779d);}async['_pImportEntry_pImportToActor'](_0x14d5df,_0x204ced){const _0xbfad28=_0x2d7db4;_0x14d5df=await this[_0xbfad28(0xf4)](_0x14d5df);const _0x3198e2={'data':{'details':{'race':_0x14d5df[_0xbfad28(0xea)]}},'token':{}},_0xf695dc=MiscUtil[_0xbfad28(0x100)](this['_actor'],_0xbfad28(0x14c),_0xbfad28(0x14c),'details',_0xbfad28(0x193),_0xbfad28(0x143))||0x1,_0x44899a=new ImportListRace[(_0xbfad28(0x192))]({'isCharactermancer':_0x204ced[_0xbfad28(0x139)],'pb':Math['floor']((_0xf695dc-0x1)/0x4)+0x2});this[_0xbfad28(0xe1)](_0x14d5df,_0x3198e2,_0x44899a),await this[_0xbfad28(0xe0)](_0x14d5df,_0x3198e2,_0x44899a);if(_0x44899a['isCancelled'])return ImportSummary[_0xbfad28(0xf9)]();this[_0xbfad28(0x191)](_0x14d5df,_0x3198e2[_0xbfad28(0x14c)],_0x44899a),await this[_0xbfad28(0x18d)](_0x14d5df,_0x3198e2[_0xbfad28(0x14c)],_0x44899a);if(_0x44899a['isCancelled'])return ImportSummary[_0xbfad28(0xf9)]();await this[_0xbfad28(0x13b)](_0x14d5df,_0x3198e2['token'],_0x44899a);if(_0x44899a[_0xbfad28(0xf1)])return ImportSummary[_0xbfad28(0xf9)]();await this[_0xbfad28(0x14e)](_0x14d5df,_0x3198e2,_0x44899a);if(_0x44899a[_0xbfad28(0xf1)])return ImportSummary['cancelled']();await UtilDocuments[_0xbfad28(0xe6)](this[_0xbfad28(0xef)],_0x3198e2);if(this[_0xbfad28(0xef)][_0xbfad28(0x132)])this[_0xbfad28(0xef)][_0xbfad28(0x151)]['render']();await this[_0xbfad28(0x108)](_0x14d5df,_0x204ced,_0x44899a);if(_0x44899a[_0xbfad28(0xf1)])return ImportSummary[_0xbfad28(0xf9)]();return new ImportSummary({'status':UtilApplications['TASK_EXIT_COMPLETE'],'imported':[new ImportedDocument({'name':_0x14d5df[_0xbfad28(0xea)],'actor':this[_0xbfad28(0xef)]})]});}['_pImportEntry_pImportToDirectoryGeneric_pGetImportableData'](_0x2bc03b,_0x4b7808){const _0x700c4c=_0x2d7db4;return DataConverterRace[_0x700c4c(0x173)](_0x2bc03b,_0x4b7808);}[_0x2d7db4(0xe1)](_0x4b389d,_0x12a332,_0x464874){const _0x53ff1f=_0x2d7db4,_0x10b2d2={},_0xbf6c44={},_0x3c2fd4=_0x4b389d[_0x53ff1f(0x169)]&&_0x4b389d[_0x53ff1f(0x169)]['includes'](_0x53ff1f(0x11f))||_0x4b389d['entries'][_0x53ff1f(0x131)](_0xf97771=>_0xf97771[_0x53ff1f(0xea)]===_0x53ff1f(0x11f));if(_0x3c2fd4)_0xbf6c44['powerfulBuild']=!![];if(_0x4b389d[_0x53ff1f(0x149)][_0x53ff1f(0x131)](_0x102727=>_0x102727[_0x53ff1f(0xea)]===_0x53ff1f(0x190)))_0xbf6c44['savageAttacks']=!![];if(_0x4b389d[_0x53ff1f(0x149)][_0x53ff1f(0x131)](_0x534232=>_0x534232[_0x53ff1f(0xea)]===_0x53ff1f(0x12f))&&_0x4b389d['_baseName']===_0x53ff1f(0x161))_0xbf6c44['halflingLucky']=!![];if(Object['keys'](_0xbf6c44)[_0x53ff1f(0x109)])_0x10b2d2['dnd5e']=_0xbf6c44;if(Object['keys'](_0x10b2d2)[_0x53ff1f(0x109)])_0x12a332[_0x53ff1f(0x188)]=_0x10b2d2;}async[_0x2d7db4(0xe0)](_0x4e2574,_0x1a6b63,_0x1ce6b8){const _0x5ecd77=_0x2d7db4;await Charactermancer_AbilityScoreSelect[_0x5ecd77(0x102)](this[_0x5ecd77(0xef)],_0x4e2574[_0x5ecd77(0xfd)],_0x1a6b63,_0x1ce6b8);}[_0x2d7db4(0x191)](_0x451674,_0x2313f6,_0x8d5c37){const _0x4f2bcd=_0x2d7db4,_0xe1a79c={};if(_0x451674[_0x4f2bcd(0x171)]!=null)_0xe1a79c[_0x4f2bcd(0x119)]=DataConverter['getMovement'](_0x451674[_0x4f2bcd(0x171)],{'configGroup':_0x4f2bcd(0x159)});_0x451674[_0x4f2bcd(0x11d)]&&_0x451674['darkvision']>(this[_0x4f2bcd(0xef)][_0x4f2bcd(0x14c)][_0x4f2bcd(0x14c)][_0x4f2bcd(0x125)]?.['senses']?.[_0x4f2bcd(0x11d)]||0x0)&&(_0xe1a79c[_0x4f2bcd(0x184)]={'darkvision':_0x451674['darkvision'],'units':'ft'}),_0x2313f6[_0x4f2bcd(0x125)]=_0xe1a79c;}async[_0x2d7db4(0x18d)](_0x1b7c5d,_0x55a383,_0xfe9218){const _0x4a178a=_0x2d7db4;_0x55a383[_0x4a178a(0x165)]={},await this[_0x4a178a(0xfb)](_0x1b7c5d,_0x55a383,_0xfe9218);if(_0xfe9218[_0x4a178a(0xf1)])return;await DataConverter[_0x4a178a(0x18a)]({'existingProficienciesSkills':MiscUtil[_0x4a178a(0x100)](this[_0x4a178a(0xef)],_0x4a178a(0x14c),_0x4a178a(0x14c),_0x4a178a(0x142)),'existingProficienciesTools':MiscUtil[_0x4a178a(0x100)](this[_0x4a178a(0xef)],_0x4a178a(0x14c),_0x4a178a(0x14c),_0x4a178a(0x165),_0x4a178a(0x16b)),'existingProficienciesLanguages':MiscUtil[_0x4a178a(0x100)](this['_actor'],_0x4a178a(0x14c),_0x4a178a(0x14c),_0x4a178a(0x165),'languages'),'skillToolLanguageProficiencies':_0x1b7c5d[_0x4a178a(0x136)],'actorData':_0x55a383,'importOpts':_0xfe9218});if(_0xfe9218['isCancelled'])return;await DataConverter[_0x4a178a(0x133)](MiscUtil['get'](this[_0x4a178a(0xef)],'data',_0x4a178a(0x14c),_0x4a178a(0x142)),_0x1b7c5d[_0x4a178a(0x145)],_0x55a383,_0xfe9218);if(_0xfe9218[_0x4a178a(0xf1)])return;await DataConverter['pFillActorLanguageData'](MiscUtil[_0x4a178a(0x100)](this[_0x4a178a(0xef)],'data',_0x4a178a(0x14c),_0x4a178a(0x165),_0x4a178a(0x110)),_0x1b7c5d[_0x4a178a(0x113)],_0x55a383,_0xfe9218);if(_0xfe9218[_0x4a178a(0xf1)])return;await DataConverter[_0x4a178a(0x13f)](MiscUtil[_0x4a178a(0x100)](this[_0x4a178a(0xef)],_0x4a178a(0x14c),_0x4a178a(0x14c),_0x4a178a(0x165),'toolProf'),_0x1b7c5d[_0x4a178a(0x13c)],_0x55a383,_0xfe9218);if(_0xfe9218[_0x4a178a(0xf1)])return;await DataConverter[_0x4a178a(0x101)](MiscUtil[_0x4a178a(0x100)](this['_actor'],'data','data',_0x4a178a(0x165),_0x4a178a(0x16d)),_0x1b7c5d[_0x4a178a(0xfe)],_0x55a383,_0xfe9218);if(_0xfe9218[_0x4a178a(0xf1)])return;await DataConverter['pFillActorWeaponProfData'](MiscUtil[_0x4a178a(0x100)](this[_0x4a178a(0xef)],_0x4a178a(0x14c),'data',_0x4a178a(0x165),_0x4a178a(0xfc)),_0x1b7c5d[_0x4a178a(0x12b)],_0x55a383,_0xfe9218);if(_0xfe9218[_0x4a178a(0xf1)])return;await DataConverter[_0x4a178a(0xe9)](MiscUtil['get'](this[_0x4a178a(0xef)],_0x4a178a(0x14c),'data','traits','di'),_0x1b7c5d[_0x4a178a(0xed)],_0x55a383,_0xfe9218);if(_0xfe9218[_0x4a178a(0xf1)])return;await DataConverter['pFillActorResistanceData'](MiscUtil[_0x4a178a(0x100)](this[_0x4a178a(0xef)],_0x4a178a(0x14c),_0x4a178a(0x14c),_0x4a178a(0x165),'dr'),_0x1b7c5d[_0x4a178a(0x122)],_0x55a383,_0xfe9218);if(_0xfe9218[_0x4a178a(0xf1)])return;await DataConverter[_0x4a178a(0x156)](MiscUtil[_0x4a178a(0x100)](this[_0x4a178a(0xef)],_0x4a178a(0x14c),_0x4a178a(0x14c),_0x4a178a(0x165),'dv'),_0x1b7c5d[_0x4a178a(0x18e)],_0x55a383,_0xfe9218);if(_0xfe9218[_0x4a178a(0xf1)])return;await DataConverter[_0x4a178a(0x175)](MiscUtil[_0x4a178a(0x100)](this['_actor'],_0x4a178a(0x14c),_0x4a178a(0x14c),_0x4a178a(0x165),'ci'),_0x1b7c5d[_0x4a178a(0x177)],_0x55a383,_0xfe9218);if(_0xfe9218[_0x4a178a(0xf1)])return;await DataConverter[_0x4a178a(0x162)]({'existingProficienciesSkills':MiscUtil['get'](this['_actor'],_0x4a178a(0x14c),_0x4a178a(0x14c),_0x4a178a(0x142)),'existingProficienciesTools':MiscUtil[_0x4a178a(0x100)](this[_0x4a178a(0xef)],_0x4a178a(0x14c),_0x4a178a(0x14c),'traits',_0x4a178a(0x16b)),'expertise':_0x1b7c5d[_0x4a178a(0xf3)],'actorData':_0x55a383,'importOpts':_0xfe9218});}[_0x2d7db4(0x13b)](_0x71ab1b,_0x2c75e0,_0x1f797e){const _0x48a7ca=_0x2d7db4;let {dimSight:_0x29f472}=this[_0x48a7ca(0xef)][_0x48a7ca(0x14c)][_0x48a7ca(0x181)]||{};if(_0x29f472===0x3e7)_0x29f472=0x0;if(!_0x29f472)_0x29f472=0x0;if(isNaN(_0x29f472))_0x29f472=0x0;_0x29f472=Number(_0x29f472);if(!_0x29f472)_0x2c75e0[_0x48a7ca(0x152)]=_0x29f472;_0x2c75e0[_0x48a7ca(0x111)]=!![];if(_0x71ab1b['darkvision']){if(_0x29f472<_0x71ab1b[_0x48a7ca(0x11d)])_0x2c75e0[_0x48a7ca(0x152)]=_0x71ab1b[_0x48a7ca(0x11d)];}}static[_0x2d7db4(0xf8)](_0x2146ae){const _0x4894b3=_0x2d7db4;if(typeof _0x2146ae===_0x4894b3(0xe2))return!![];if(!_0x2146ae[_0x4894b3(0xea)])return!![];if(_0x2146ae[_0x4894b3(0xea)]==='Size')return!![];return![];}async['_pImportEntry_pFillItems'](_0x31a842,_0x2bb55e,_0x34dee9){const _0x5eeb10=_0x2d7db4,_0x658a54={},_0x2c0c65=[];await this[_0x5eeb10(0x12c)]({'entity':_0x31a842,'dataBuilderOpts':_0x34dee9,'spellHashToItemPosMap':_0x658a54});if(_0x34dee9['isCancelled'])return;for(const _0x4220d2 of _0x31a842[_0x5eeb10(0x149)]){if(this['constructor'][_0x5eeb10(0xf8)](_0x4220d2))continue;const _0xc2bab3=DataConverterRace[_0x5eeb10(0x13e)](_0x31a842,_0x4220d2);await DataConverterRace['pMutActorUpdateRaceFeature'](this[_0x5eeb10(0xef)],_0x2bb55e,_0xc2bab3,_0x34dee9);if(_0x34dee9[_0x5eeb10(0xf1)])return;}const _0x11bffd={};Object['entries'](_0x658a54)[_0x5eeb10(0xe5)](([_0x3ad490,_0x4a447a])=>MiscUtil[_0x5eeb10(0x14b)](_0x11bffd,_0x5eeb10(0x11c),_0x3ad490,_0x4a447a)),await UtilDataConverter[_0x5eeb10(0x148)](async()=>{const _0x4408f0=_0x5eeb10;for(const _0x4ddf03 of _0x31a842[_0x4408f0(0x149)]){if(this['constructor'][_0x4408f0(0xf8)](_0x4ddf03))continue;const _0x5b30c9=DataConverterRace[_0x4408f0(0x13e)](_0x31a842,_0x4ddf03),_0x454e16=await DataConverterRace[_0x4408f0(0xec)](_0x31a842,_0x5b30c9,{'actor':this['_actor']});_0x34dee9[_0x4408f0(0x185)]['push'](_0x454e16),await DataConverterRace['pHasRaceFeatureSideLoadedEffects'](this[_0x4408f0(0xef)],_0x5b30c9)&&_0x2c0c65[_0x4408f0(0x13d)](new ImportListRace[(_0x4408f0(0x155))]({'actor':this[_0x4408f0(0xef)],'raceFeature':_0x5b30c9,'itemData':_0x454e16}));}},{'actorId':this[_0x5eeb10(0xef)]['id'],'tagHashItemIdMap':_0x11bffd});const _0x123bd9=await UtilActors[_0x5eeb10(0x16e)](this[_0x5eeb10(0xef)],_0x34dee9[_0x5eeb10(0x185)]),_0xfb738=[];if(_0x2c0c65[_0x5eeb10(0x109)])for(const _0x395178 of _0x2c0c65){const _0x38dbd8=DataConverter['getImportedEmbed'](_0x123bd9,_0x395178[_0x5eeb10(0xe4)]);if(!_0x38dbd8)continue;_0xfb738[_0x5eeb10(0x13d)](...await DataConverterRace[_0x5eeb10(0x12a)](this[_0x5eeb10(0xef)],_0x31a842,_0x395178['raceFeature'],_0x38dbd8[_0x5eeb10(0x134)]));}_0xfb738['push'](...await DataConverterRace[_0x5eeb10(0x16a)](_0x31a842[_0x5eeb10(0x171)],{'actor':this['_actor'],'iconEntity':_0x31a842,'iconPropCompendium':_0x5eeb10(0x15b)})),await UtilActors[_0x5eeb10(0x115)](this[_0x5eeb10(0xef)],_0xfb738);}async[_0x2d7db4(0xfb)](_0x4cfb83,_0xed23d8,_0x1ac57c){const _0x41f83f=_0x2d7db4,_0x59ba38=await Charactermancer_Race_SizeSelect['pGetUserInput']({'sizes':_0x4cfb83[_0x41f83f(0xf0)]});if(_0x59ba38==null)return _0x1ac57c[_0x41f83f(0xf1)]=!![];if(_0x59ba38===VeCt[_0x41f83f(0x170)])return;_0xed23d8[_0x41f83f(0x165)]['size']=UtilActors[_0x41f83f(0x141)][_0x59ba38[_0x41f83f(0x14c)]||SZ_MEDIUM]||_0x41f83f(0xf2);}}function _0x1974(_0x2776ec,_0x2b25be){const _0x3ad480=_0x3ad4();return _0x1974=function(_0x197430,_0x479088){_0x197430=_0x197430-0xde;let _0x474f42=_0x3ad480[_0x197430];return _0x474f42;},_0x1974(_0x2776ec,_0x2b25be);}ImportListRace[_0x2d7db4(0x192)]=class extends ImportListCharacter['ImportEntryOpts']{constructor(_0x525211){_0x525211=_0x525211||{},super(_0x525211),this['pb']=_0x525211['pb'];}},ImportListRace[_0x2d7db4(0x155)]=class{constructor({actor:_0x57d637,raceFeature:_0x219e3f,itemData:_0x7b5c89}){const _0x3bf14f=_0x2d7db4;this[_0x3bf14f(0x17d)]=_0x57d637,this[_0x3bf14f(0x117)]=_0x219e3f,this['itemData']=_0x7b5c89;}},ImportListRace[_0x2d7db4(0x126)]=class extends ImportCustomizer{constructor(_0x18e6ec,_0x191eef,_0x3cd378){const _0x1b50dd=_0x2d7db4;super(_0x18e6ec,_0x191eef,{..._0x3cd378,'title':_0x1b50dd(0x137),'template':SharedConsts['MODULE_LOCATION']+_0x1b50dd(0x164)});}['getData'](){const _0x2f4204=_0x2d7db4;return{...super[_0x2f4204(0x121)](),'rows':this[_0x2f4204(0xee)][_0x2f4204(0x16f)]((_0x2ae74b,_0x269084)=>({'name':_0x2ae74b[_0x2f4204(0xea)],'source':_0x2ae74b['source'],'sourceShort':Parser[_0x2f4204(0x157)](_0x2ae74b[_0x2f4204(0x15d)]),'sourceLong':Parser[_0x2f4204(0x166)](_0x2ae74b[_0x2f4204(0x15d)]),'sourceClassName':Parser['sourceJsonToColor'](_0x2ae74b[_0x2f4204(0x15d)]),'sourceStyle':BrewUtil[_0x2f4204(0x15f)](_0x2ae74b[_0x2f4204(0x15d)]),'hasVersions':_0x2ae74b[_0x2f4204(0xde)]?.[_0x2f4204(0x109)],'availableVersions':DataUtil[_0x2f4204(0x11b)][_0x2f4204(0x14f)](_0x2ae74b['__prop'],_0x2ae74b)[_0x2f4204(0x16f)]((_0x460fc6,_0x2cfc56)=>({'ix':_0x2cfc56,'name':_0x460fc6['name']})),'ix':_0x269084}))};}[_0x2d7db4(0x17e)]({$html:_0x15bb3b}){const _0x5a7743=_0x2d7db4;this[_0x5a7743(0x15c)]=new List({'$iptSearch':_0x15bb3b['find']('.search'),'$wrpList':_0x15bb3b['find']('.veapp__list'),'valueNames':[_0x5a7743(0xea),'source','ix']}),this[_0x5a7743(0x15c)]['doAbsorbItems'](this[_0x5a7743(0xee)],{'fnGetName':_0x54ad85=>_0x54ad85[_0x5a7743(0xea)],'fnGetValues':_0x8990b4=>({'source':_0x8990b4[_0x5a7743(0x15d)]}),'fnGetData':_0x3f4d04=>{const _0x7fdd4c=_0x5a7743,_0x57c0cb=$(_0x3f4d04[_0x7fdd4c(0x189)]);return{'$selVersion':_0x57c0cb[_0x7fdd4c(0x178)](_0x7fdd4c(0x127))};}}),this[_0x5a7743(0x15c)][_0x5a7743(0x138)]();}[_0x2d7db4(0x150)]({$html:_0x29304a,$wrpBtnsSort:_0x5e5dda}){const _0x4cf34c=_0x2d7db4;this['_$btnReset']=_0x29304a[_0x4cf34c(0x178)](_0x4cf34c(0x13a))[_0x4cf34c(0x103)](()=>{const _0x4a66ce=_0x4cf34c;_0x29304a[_0x4a66ce(0x178)]('.search')['val']('');if(this[_0x4a66ce(0x15c)])this[_0x4a66ce(0x15c)][_0x4a66ce(0x12e)]();}),_0x29304a['find'](_0x4cf34c(0x106))['click'](async()=>{const _0x10660a=_0x4cf34c,_0x131a11=this['_list'][_0x10660a(0x185)]['map'](_0x16014c=>{const _0x1f441f=_0x10660a,_0x1c93e4=_0x16014c[_0x1f441f(0x14c)][_0x1f441f(0x10d)][_0x1f441f(0x109)]?Number(_0x16014c[_0x1f441f(0x14c)]['$selVersion'][_0x1f441f(0x15a)]())===-0x1?null:Number(_0x16014c[_0x1f441f(0x14c)][_0x1f441f(0x10d)][_0x1f441f(0x15a)]()):null;if(!~_0x1c93e4)return this['_dataList'][_0x16014c['ix']];const _0xd84147=DataUtil[_0x1f441f(0x11b)][_0x1f441f(0x14f)](this[_0x1f441f(0xee)][_0x16014c['ix']]?.[_0x1f441f(0x129)],this[_0x1f441f(0xee)][_0x16014c['ix']]);return _0xd84147[_0x1c93e4];});this['_resolve'](_0x131a11),this['close']();});}};export{ImportListRace};