const _0x3b1c7b=_0x1b33;(function(_0x2d05f7,_0x183f2b){const _0x4e81b3=_0x1b33,_0x4209a8=_0x2d05f7();while(!![]){try{const _0x3d6902=parseInt(_0x4e81b3(0xf6))/0x1+parseInt(_0x4e81b3(0xc9))/0x2+parseInt(_0x4e81b3(0xf9))/0x3+-parseInt(_0x4e81b3(0xe7))/0x4+parseInt(_0x4e81b3(0xe3))/0x5*(parseInt(_0x4e81b3(0xda))/0x6)+-parseInt(_0x4e81b3(0xec))/0x7+parseInt(_0x4e81b3(0xd2))/0x8*(-parseInt(_0x4e81b3(0xf7))/0x9);if(_0x3d6902===_0x183f2b)break;else _0x4209a8['push'](_0x4209a8['shift']());}catch(_0x4b9860){_0x4209a8['push'](_0x4209a8['shift']());}}}(_0x48a1,0x63797));function _0x1b33(_0x3759e1,_0x46e2ef){const _0x48a10e=_0x48a1();return _0x1b33=function(_0x1b33d7,_0x2fe2df){_0x1b33d7=_0x1b33d7-0xc7;let _0x2b7796=_0x48a10e[_0x1b33d7];return _0x2b7796;},_0x1b33(_0x3759e1,_0x46e2ef);}import{SharedConsts}from'../shared/SharedConsts.js';import{Config}from'./Config.js';import{UtilCompat}from'./UtilCompat.js';function _0x48a1(){const _0x166184=['user','getWalker','_PLAYER_CONTROLLED_NON_CHARS_SENTINEL','_getUserChar','_source','resources','msak','308982RcfsOL','entries','length','character','bonuses','walk','movement','int','prof','45VkAOCM','actors','attack','contents','1072624RwTFUM','actor','skills','sheet','attributes','2202606Ivbndd','init','originalName','element','data','getFlag','permission','name','rsak','replace','396438lvMLKy','126MdTazw','_PLAYER_CONTROLLED_NON_CHARS_WALKER','1958250sYioOM','users','filter','isBabeleActive','isRefreshOtherOwnedSheets','MODULE_NAME_FAKE','traits','forEach','mod','.userchar.','isGM','spellcasting','prepareData','class','set','spells','OWNER','1004576CwSVPx','get','classes','map','updateActor','_init_player_bindCharacterUpdateHook','parent','addBabeleCompatibilityRollData','abilities','585536IlmMjX'];_0x48a1=function(){return _0x166184;};return _0x48a1();}class Patcher_RollData{static[_0x3b1c7b(0xed)](){const _0x71e72e=_0x3b1c7b;if(game[_0x71e72e(0xd3)][_0x71e72e(0x103)])return;this[_0x71e72e(0xce)]();}static['_init_player_bindCharacterUpdateHook'](){const _0x1ec243=_0x3b1c7b;Hooks['on'](_0x1ec243(0xcd),_0x9a7b1=>{const _0x4a6626=_0x1ec243;if(!Config['get'](_0x4a6626(0xe8),_0x4a6626(0xfd)))return;if(game['user'][_0x4a6626(0xdd)]?.['id']!==_0x9a7b1?.['id'])return;const _0x695e35=game[_0x4a6626(0xe4)][_0x4a6626(0xe6)][_0x4a6626(0xfb)](_0xbf1ccb=>{const _0x430d9f=_0x4a6626;if(game[_0x430d9f(0xd3)][_0x430d9f(0xdd)]['id']===_0xbf1ccb['id']||!_0xbf1ccb['isOwner'])return![];let _0x50f129=![];return Patcher_RollData[_0x430d9f(0xf8)][_0x430d9f(0xdf)](_0xbf1ccb['data'][_0x430d9f(0xd7)],{'string':_0x1f78db=>{if(!_0x1f78db['includes'](Patcher_RollData['_PLAYER_CONTROLLED_NON_CHARS_SENTINEL']))return;return _0x50f129=!![];}}),_0x50f129;});_0x695e35['forEach'](_0x313e01=>{const _0x3b0be9=_0x4a6626;_0x313e01[_0x3b0be9(0x105)]();if(_0x313e01[_0x3b0be9(0xea)]?.[_0x3b0be9(0xef)]?.[_0x3b0be9(0xdc)])_0x313e01['sheet']['render']();});});}static['getAdditionalRollDataBase'](_0x11c2a6){const _0x4f2980=_0x3b1c7b,_0x463507=Patcher_RollData[_0x4f2980(0xd6)](_0x11c2a6),_0x59f7f3=_0x463507?.['data']?.[_0x4f2980(0xf0)]?.[_0x4f2980(0xeb)]?.[_0x4f2980(0xe2)];let _0x572ed6,_0x24df64=null;if(_0x463507){const _0x5d302b=_0x463507?_0x463507[_0x4f2980(0xf0)]?.[_0x4f2980(0xf0)][_0x4f2980(0xeb)][_0x4f2980(0x104)]||_0x4f2980(0xe1):null,_0x93cea7=(_0x463507['data']?.['data']?.[_0x4f2980(0xd1)]?.[_0x5d302b][_0x4f2980(0x101)]??0x0)+(_0x59f7f3??0x0);_0x572ed6=_0x93cea7+Number(_0x463507['data']?.['data']?.[_0x4f2980(0xde)]?.[_0x4f2980(0xf4)]?.[_0x4f2980(0xe5)])||0x0,_0x24df64=_0x93cea7+Number(_0x463507['data']?.[_0x4f2980(0xf0)]?.[_0x4f2980(0xde)]?.[_0x4f2980(0xd9)]?.[_0x4f2980(0xe5)])||0x0;}return{'name':_0x11c2a6['name'],[SharedConsts[_0x4f2980(0xfe)]]:{'name':{[_0x11c2a6[_0x4f2980(0xf3)]['toLowerCase']()[_0x4f2980(0xf5)](/[^a-zA-Z0-9]/g,'')]:0x1},'user':{'id':game[_0x4f2980(0xd3)]['id']},'userchar':{'id':_0x463507?.['id'],'pb':_0x59f7f3,'spellAttackRanged':_0x572ed6,'spellAttackMelee':_0x24df64,...['abilities',_0x4f2980(0xeb),'details',_0x4f2980(0xff),'currency',_0x4f2980(0xe9),_0x4f2980(0xc7),_0x4f2980(0xde),_0x4f2980(0xd8),_0x4f2980(0xe0)]['mergeMap'](_0x3375f7=>({[_0x3375f7]:MiscUtil[_0x4f2980(0xca)](_0x463507,_0x4f2980(0xf0),'data',_0x3375f7)}))}}};}static[_0x3b1c7b(0xd6)](_0x272211){const _0x4a5d2b=_0x3b1c7b;if(!game[_0x4a5d2b(0xd3)]['isGM'])return game['user'][_0x4a5d2b(0xdd)];for(let _0x678618=0x0;_0x678618<0x64&&_0x272211?.[_0x4a5d2b(0xcf)];++_0x678618)_0x272211=_0x272211['parent'];if(!_0x272211)return null;if(game[_0x4a5d2b(0xfa)][_0x4a5d2b(0xe6)]['some'](_0xdec321=>_0xdec321[_0x4a5d2b(0xdd)]?.['id']===_0x272211['id']))return _0x272211;const _0x4bf7a7=_0x272211['data']?.[_0x4a5d2b(0xf2)],_0x8fd6cd=Object[_0x4a5d2b(0xdb)](_0x4bf7a7)[_0x4a5d2b(0xfb)](([_0x1b5da8,_0x3fd7eb])=>_0x3fd7eb>=CONST['ENTITY_PERMISSIONS'][_0x4a5d2b(0xc8)]&&!game[_0x4a5d2b(0xfa)][_0x4a5d2b(0xca)](_0x1b5da8)?.['isGM'])[_0x4a5d2b(0xcc)](([_0x366b97])=>_0x366b97);if(_0x8fd6cd[_0x4a5d2b(0xdc)]!==0x1)return null;return game[_0x4a5d2b(0xfa)][_0x4a5d2b(0xca)](_0x8fd6cd[0x0])?.[_0x4a5d2b(0xdd)];}static[_0x3b1c7b(0xd0)](_0xb0ba8,_0x518165){const _0x3f5817=_0x3b1c7b;if(!UtilCompat[_0x3f5817(0xfc)]())return;_0x518165['items'][_0x3f5817(0xfb)](_0x3f550d=>_0x3f550d['type']===_0x3f5817(0x106))[_0x3f5817(0x100)](_0x32f0c2=>{const _0x43745d=_0x3f5817,_0x25378b=_0x32f0c2[_0x43745d(0xf1)]('babele',_0x43745d(0xee));if(!_0x25378b||_0x25378b===_0x32f0c2[_0x43745d(0xf3)])return;const _0x2392fc=_0x25378b['slugify']({'strict':!![]});if(_0xb0ba8?.[_0x43745d(0xcb)]?.[_0x2392fc])return;MiscUtil[_0x43745d(0x107)](_0xb0ba8,_0x43745d(0xcb),_0x2392fc,_0x32f0c2[_0x43745d(0xf0)][_0x43745d(0xf0)]);});}}Patcher_RollData['_PLAYER_CONTROLLED_NON_CHARS_WALKER']=MiscUtil[_0x3b1c7b(0xd4)]({'isNoModification':!![],'isBreakOnReturn':!![]}),Patcher_RollData[_0x3b1c7b(0xd5)]='@'+SharedConsts[_0x3b1c7b(0xfe)]+_0x3b1c7b(0x102);export{Patcher_RollData};