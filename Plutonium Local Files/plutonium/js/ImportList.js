const _0x22f42b=_0x1874;function _0xad68(){const _0x1dc9fa=['name','api_pImportEntry','_listInitialSortBy','_initCreateSheetItemHook','items','First\x20Letter\x20of\x20Name','isDedupable','ActiveEffect','register','_suppressCreateSheetItemHookTimeStart','_activateListeners_initPreviewImportButton','Either\x20\x22name\x22\x20and\x20\x22source\x22,\x20or\x20\x22entity\x22,\x20must\x20be\x20provided!','You\x20do\x20not\x20have\x20sufficient\x20permissions!','set','then','documentName','C_IMPORT_DRAG_DROP_MODE_NEVER','Mismatched\x20number\x20of\x20properties!\x20This\x20is\x20a\x20bug!','_$btnRun','Task','results','Only\x20one\x20of\x20\x22actor\x22\x20and\x20\x22pack\x22\x20may\x20be\x20specified!','EVT_DATA_SUBTYPE__HOVER','packUid','values','_gameProp','_isFolderOnly','_fnLoadSideData','isNonCacheableInstance','element','_fnResolve','_table','getValues','hash','setData','details','callAll','resultId','rollOnArray','_isResolveOnClose','[name=\x22cb-select-all\x22]','activateTab','[name=\x22btn-feeling-lucky\x22]','_pInit_folderPathSpec','Continue\x20and\x20Remember','pInit','_isDedupable','[name=\x22btn-filter\x22]','render','documentClass','_$btnTogglePreviewAll','13684YBtdPh','?\x20Note\x20that\x20this\x20will\x20ignore\x20any\x20in-Foundry\x20modifications\x20made\x20to\x20the\x20item.','filter','mutateForFilters','drop','_pack','initBtnSortHandlers','importDocument','getFolderPathMeta','flags','updated','_pImportEntry_getUserVersion','scenes','Name','_$wrpList','_folderPathSpecKeyConstructorName','.lst__wrp-search-visible','sidebar','_content','sourceJsonToAbv','isDisableLargeImportWarning','bindSelectAllCheckbox','entity','bindPreviewButton','_activateListeners_initRunButtonsAdditional_genericMods','EVNT_VALCHANGE','pImportEntry','create','status','each','\x20Importer','\x20to\x20import.<br>Importing\x20a\x20large\x20number\x20of\x20entities\x20may\x20degrade\x20game\x20performance\x20(consider\x20importing\x20to\x20a\x20compendium\x20instead).<br>Do\x20you\x20wish\x20to\x20continue?','_titleSearch','generic','.<br>Importing\x20a\x20large\x20number\x20of\x20documents\x20to\x20a\x20single\x20compendium\x20may\x20degrade\x20game\x20performance.<br>Do\x20you\x20wish\x20to\x20continue?','stringify','close','164vGWQXX','pGetChooseImporterUserDataForSources','./ChooseImporter.js','_$dispNumVisible','Unimplemented!','No,\x20use\x20normal\x20drag-drop','URL_TO_HASH_BUILDER','isStreamerMode','_pageFilter','TABLE_RESULT_TYPES','warn','firstElementChild','_fnReject','_getDuplicateMeta_getEntityKey','_getImportOpts','pGetAllContent','text/plain','pGetCompendiumData','subType','Source\x20(Abbreviation)','pSetFolderPathSpec','isSkip','648780CIpbkf','canUserCreateFolders','text-center','Imported\x20\x22','IMPLS','LIBWRAPPER_MODE_MIXED','isFiltered','\x20The\x20original\x20entity\x20could\x20not\x20be\x20found.','isEscapeable','_pImportEntry_pImportToDirectoryGeneric','_isRadio','map','toString','_isForceImportToTempDirectory','val','_pImportEntry_pGetFolderId','pSetContent','_props','activateListeners','Import\x20exited\x20with\x20status\x20\x22','Source\x20(Full)','__prop','mix','sourceJsonToFull','_$btnToggleSummary','replace','_activateListeners_initPreviewButton','namespace','listInitialSortBy','user','hideVe','_getDuplicateMeta_getCleanName','imported','Options\x20\x22isTemp\x22\x20and\x20\x22packId\x22\x20are\x20mutually\x20exclusive!','_activateListeners_initPreviewsAndQuicksImportsAndDroppables','init','_getFilterNamespace','document','setCheckboxes','pGetUserEnum','getContent','existing','bind','propsBrewAdditionalData','pGetUserBoolean','_getAsTag','pDoQuickOpenUsingExistingSourceSelection','_getFullFolderPathSpecKey','_activateListeners_initList','_dirsHomebrew','_resolve','_uploadedFile','Unimplemented','\x22\x20ID\x20was\x20\x22','with','TableResult','(Base\x20version)','_isNotDroppable','TASK_EXIT_FAILED','_pImportEntry','props','EVT_DATA_SUBTYPE__IMPORT','TASK_EXIT_SKIPPED_DUPLICATE','_isInit','pUpdateDocument','visibleItems','_getBlacklistFilteredData','_pHandleClickRunButton_pDoPreCachePack','Warning:\x20Large\x20Import','pRunTasks','copy','pPreRender','MODULE_TITLE','_activateListeners_initRunButtonsAdditional','_$wrpRun','absorbFnGetData','parent','pInitIsSubSkippable','FOLDER_TYPE','find','4476512BLYZEx','pForceRenderApp','2153550rilIQA','showVe','_pHandleDropGetImportedDoc','Game\x20property\x20\x22','directory','sidebarTab','Actor','_activateListeners_initRunButton','click','source','Item','defaultPermission','configGroup','_activateListeners_bindControls','pCacheAndGet','_isNonCacheableInstance','preventDefault','C_IMPORT_DEDUPE_MODE_NONE','_page','hover','TASK_EXIT_CANCELLED','6599892MBiMil','list-multi-selected','\x20to\x20a\x20compendium\x20with\x20','STR_SEE_CONSOLE','_getDuplicateMeta_isFlagMatch','length','index','import','pGetHomebrewSources','TASK_EXIT_COMPLETE_UPDATE_OVERWRITE','getSourceWithPagePart','_activateListeners_absorbListItems','_pHandleSidebarDrop','Failed\x20to\x20import\x20\x22','Scene','_pImportEntry_pAddToTargetTableIfRequired','_pImportEntry_pImportToDirectoryGeneric_pGetImportableData','fnListSort','COMPENDIUM','_pHandleClickRunButton_doDumpPackCache','join','constructor','preCreateItem','_actor','pSerialAwaitMap','pCreateEmbeddedDocuments','Fvtt','pCreateFoldersGetId','isImportToTempDirectory','RollTable','sourceJsonToColor','effects','addToFilters','getData','_$iptSearch','page','_isPreviewable','pGetLocalHomebrewSources','SOURCE_TYP_BREW_LOCAL','[name=\x22btn-toggle-all-previews\x22]','cancelled','You\x20have\x20selected\x20','getNameWithSourcePart','isTemp','size','_pImportEntry_pDoUpdateExistingDirectoryEntity','mode','Continue','_isClosable','_pFnPostProcessEntries','isStrictMatching','HK_IMPORT_COMPLETE','/template/ImportList.hbs','MODULE_NAME_FAKE','propDroppable','gameProp','pGetUserChoice','_pImportEntry_pDoUpdateExistingPackEntity','_getDuplicateMeta_getExisting','getImporter','toLowerCase','prePreInit','prop','Actor.fromDropData','journal','\x22\x20is\x20not\x20supported!','_activateListeners_initDroppable','_$btnsRunAdditional','classList','MODULE_LOCATION','sourceShort','folderId','notifications','_getDedupedData','TASK_EXIT_COMPLETE_DATA_ONLY','Import\x20via\x20','center','DataSourceUrl','SOURCE_TYP_BREW','btn-run','_configGroup','registerImpl','showAndRender','_activateListeners_doFindUiElements','getPropTag','deleteEmbeddedDocuments','isNotDroppable','_packCache','assign','get','addEventListener','pResult','table','_isImporterDropEvent','_pPostRenderOrShow','btn-run-mods','_$wrpBtnsSort','setCheckbox','_userData','_pHandleClickRunButton','Select\x20the\x20Version\x20to\x20Import','completedStub','some','dragDropMode','_STO_K_FOLDER_PATH_SPEC','_fnListSort','collection','_isImportSuccess','JournalEntry.fromDropData','ele','packs','importer_','TASK_EXIT_COMPLETE','embeddedDocument','_isHidden','.search','_list','_sidebarTab','absorbFnBindListenersRadio','isExisting','C_IMPORT_DEDUPE_MODE_SKIP','pInitFilterBox','forEach','entries','importOpts','getVersions','_defaultFolderPath','isClosable','Import','_propsBrewAdditionalData','isOverwrite','sorting','trim','_activateListeners_pInitFilteredList','tables','_activateListeners_initFeelingLuckyButton','_onDrop','push','filterBox','Source','doAbsorbItems','_$bntFilter','_foundryIsIgnoreVersions','isStandardDragDrop','children','trimState','_handleFilterChange','actors','getDropJson','dataTransfer','slice','8873606cqQbys','_packCacheFlat','isFolderOnly','C_IMPORT_DRAG_DROP_MODE_PROMPT','actor','_pPostFilterRender','_$btnReset','_$cbAll','_$btnFeelingLucky','data','6033448wiBpUq','JournalEntry','sourceStyle','fnLoadSideData','remove','stopPropagation','_pGetSources','_isActor','_$wrpMiniPills','dirsHomebrew','activateSidebarTab','_namespace','titleSearch','Could\x20not\x20find\x20pack\x20\x22','titleButtonRun','getMaxWindowHeight','Cancel','_pGetUseImporterDragDrop','doShowImportedNotification','deduplicationMode','SRD\x20Importer','[data-name=\x22wrp-btns-sort\x22]','_titleButtonRun','_propGroups','compendium','Item.fromDropData','info','checked','pack','cbSel','error','\x22!\x20','bindPreviewAllButton','pAddActorItems','_getDuplicateMeta','MODULE_NAME'];_0xad68=function(){return _0x1dc9fa;};return _0xad68();}(function(_0x128ec7,_0x28917c){const _0x442390=_0x1874,_0x199310=_0x128ec7();while(!![]){try{const _0x1b662f=-parseInt(_0x442390(0x1f7))/0x1*(-parseInt(_0x442390(0x21c))/0x2)+-parseInt(_0x442390(0x284))/0x3+parseInt(_0x442390(0x282))/0x4+parseInt(_0x442390(0x232))/0x5+parseInt(_0x442390(0x299))/0x6+-parseInt(_0x442390(0x330))/0x7+-parseInt(_0x442390(0x1a0))/0x8;if(_0x1b662f===_0x28917c)break;else _0x199310['push'](_0x199310['shift']());}catch(_0x195c39){_0x199310['push'](_0x199310['shift']());}}}(_0xad68,0xb2881));import{SharedConsts}from'../shared/SharedConsts.js';import{UtilApplications}from'./UtilApplications.js';import{Util}from'./Util.js';import{UtilList2}from'./UtilList2.js';import{MixinFolderPathBuilder}from'./FolderPathBuilder.js';import{Config}from'./Config.js';import{Vetools}from'./Vetools.js';import{UtilCompendium}from'./UtilCompendium.js';import{ConfigConsts}from'./ConfigConsts.js';import{UtilDataSource}from'./UtilDataSource.js';import{DataConverterTable}from'./DataConverterTable.js';import{UtilFolders}from'./UtilFolders.js';import{UtilDataConverter}from'./UtilDataConverter.js';import{UtilHooks}from'./UtilHooks.js';import{UtilActors}from'./UtilActors.js';import{UtilDocuments}from'./UtilDocuments.js';function _0x1874(_0x5138e6,_0x20882e){const _0xad6895=_0xad68();return _0x1874=function(_0x187469,_0x528d26){_0x187469=_0x187469-0x197;let _0x47b54e=_0xad6895[_0x187469];return _0x47b54e;},_0x1874(_0x5138e6,_0x20882e);}import{UtilWorldDataSourceSelector}from'./UtilWorldDataSourceSelector.js';import{UtilEvents}from'./UtilEvents.js';import{libWrapper,UtilLibWrapper}from'./PatcherLibWrapper.js';class ImportList extends MiscUtil[_0x22f42b(0x248)](Application)[_0x22f42b(0x268)](MixinFolderPathBuilder){static async[_0x22f42b(0x1c5)](_0x2ab040,{isTemp:isTemp=![],packId:packId=null}={}){const _0x36447b=_0x22f42b;if(game[_0x36447b(0x24f)]['role']<Config[_0x36447b(0x2f2)]('import','minimumRole'))throw new Error(_0x36447b(0x1d0));const _0x49a9b8=packId?game[_0x36447b(0x307)][_0x36447b(0x2f2)](packId):null;if(!_0x49a9b8&&packId)throw new Error(_0x36447b(0x1ad)+_0x49a9b8+'\x22');if(isTemp&&packId)throw new Error(_0x36447b(0x253));_0x2ab040=await _0x2ab040;if(_0x2ab040==null)throw new Error('Entry\x20cannot\x20be\x20null/undefined!');const _0x151ba9=new this();return await _0x151ba9[_0x36447b(0x1f1)](),_0x151ba9[_0x36447b(0x1bc)]=_0x49a9b8,_0x151ba9[_0x36447b(0x211)](_0x2ab040,{'isTemp':isTemp});}static[_0x22f42b(0x255)](){const _0x1285cb=_0x22f42b;libWrapper['register'](SharedConsts[_0x1285cb(0x1c3)],_0x1285cb(0x2d8),async function(_0x41690c,..._0x4afded){const _0x123683=_0x1285cb,_0x4ceb3e=await ImportList[_0x123683(0x286)](_0x4afded[0x0]);if(_0x4ceb3e)return _0x4ceb3e;return _0x41690c(..._0x4afded);},UtilLibWrapper[_0x1285cb(0x237)]),libWrapper[_0x1285cb(0x1cc)](SharedConsts[_0x1285cb(0x1c3)],_0x1285cb(0x1b9),async function(_0x4a9732,..._0x2bb78f){const _0xb9de4a=_0x1285cb,_0x559711=await ImportList[_0xb9de4a(0x286)](_0x2bb78f[0x0]);if(_0x559711)return _0x559711;return _0x4a9732(..._0x2bb78f);},UtilLibWrapper[_0x1285cb(0x237)]),libWrapper[_0x1285cb(0x1cc)](SharedConsts[_0x1285cb(0x1c3)],_0x1285cb(0x305),async function(_0x5e6b8d,..._0x1c2b82){const _0xd3d729=await ImportList['_pHandleDropGetImportedDoc'](_0x1c2b82[0x0]);if(_0xd3d729)return _0xd3d729;return _0x5e6b8d(..._0x1c2b82);},UtilLibWrapper[_0x1285cb(0x237)]),libWrapper[_0x1285cb(0x1cc)](SharedConsts[_0x1285cb(0x1c3)],'RollTable.fromDropData',async function(_0xf4514d,..._0x1d9bf7){const _0x1af9c4=_0x1285cb,_0x21da58=await ImportList[_0x1af9c4(0x286)](_0x1d9bf7[0x0]);if(_0x21da58)return _0x21da58;return _0xf4514d(..._0x1d9bf7);},UtilLibWrapper['LIBWRAPPER_MODE_MIXED']);}static[_0x22f42b(0x2d6)](){const _0x2ca462=_0x22f42b;libWrapper[_0x2ca462(0x1cc)](SharedConsts['MODULE_NAME'],'ActorDirectory.prototype._onDrop',async function(_0x560863,..._0x2829fd){if(await ImportList['_pHandleSidebarDrop'](this,..._0x2829fd))return;return _0x560863(..._0x2829fd);},UtilLibWrapper[_0x2ca462(0x237)]),libWrapper[_0x2ca462(0x1cc)](SharedConsts[_0x2ca462(0x1c3)],'Compendium.prototype._onDrop',async function(_0x580e67,..._0x35f2c4){const _0x497f16=_0x2ca462,_0x3e3737=UtilEvents[_0x497f16(0x32d)](_0x35f2c4[0x0]),_0x598531=await ImportList[_0x497f16(0x286)](_0x3e3737,{'pack':this[_0x497f16(0x303)]});if(_0x598531)return _0x598531;return _0x580e67(..._0x35f2c4);},UtilLibWrapper[_0x2ca462(0x237)]);}static ['ID']='';static ['DISPLAY_NAME_TYPE_PLURAL']='';static ['IMPLS']=new Map();static[_0x22f42b(0x2ea)](_0x39ac54){const _0x11df73=_0x22f42b;if(!_0x39ac54['ID']||this[_0x11df73(0x236)][_0x11df73(0x2f2)](_0x39ac54['ID']))throw new Error('Duplicate\x20or\x20missing\x20importer\x20ID!\x20Importer\x20\x22'+_0x39ac54[_0x11df73(0x1c4)]+_0x11df73(0x267)+_0x39ac54['ID']+'\x22.');return this[_0x11df73(0x236)]['set'](_0x39ac54['ID'],_0x39ac54),this['IMPLS'];}static get['FOLDER_TYPE'](){const _0x442fc4=_0x22f42b;return _0x442fc4(0x28e);}static[_0x22f42b(0x2f6)]({evt:_0x128710,data:_0x1f68c4}){const _0x592be7=_0x22f42b;if(!_0x128710&&!_0x1f68c4)return![];if(!_0x1f68c4)_0x1f68c4=UtilEvents[_0x592be7(0x32d)](_0x128710);if(_0x1f68c4['subType']!==UtilEvents[_0x592be7(0x1da)]&&_0x1f68c4[_0x592be7(0x22e)]!==UtilEvents[_0x592be7(0x26f)])return![];return _0x1f68c4[_0x592be7(0x2bc)]&&_0x1f68c4[_0x592be7(0x28d)]&&_0x1f68c4[_0x592be7(0x1e5)];}static async['patcher_pHandleActorDrop'](_0x4b51f9){const _0xa92078=_0x22f42b,_0x23530b=UtilEvents['getDropJson'](_0x4b51f9);if(!ImportList[_0xa92078(0x2f6)]({'evt':_0x4b51f9}))return;const _0x2f55cf=await ImportList['_pHandleDropGetImportedDoc'](_0x23530b);if(!_0x2f55cf)return;ImportList[_0xa92078(0x1cd)]=Date['now']();const _0x422128=new DragEvent(_0xa92078(0x1fb),{'dataTransfer':new DataTransfer()});return _0x422128[_0xa92078(0x32e)][_0xa92078(0x1e6)](_0xa92078(0x22c),JSON[_0xa92078(0x21a)]({'type':_0x2f55cf['documentName'],'id':_0x2f55cf['id']})),this[_0xa92078(0x321)](_0x422128);}static async[_0x22f42b(0x2a5)](_0x3162a3,_0x38cabb){const _0x13a33c=_0x22f42b,_0x21c64c=UtilEvents[_0x13a33c(0x32d)](_0x38cabb);if(!ImportList[_0x13a33c(0x2f6)]({'evt':_0x38cabb}))return;return await ImportList[_0x13a33c(0x286)](_0x21c64c,{'requiresDocumentName':_0x3162a3['constructor'][_0x13a33c(0x1d3)]}),!![];}static async['_pHandleDropGetImportedDoc'](_0x548595,{requiresDocumentName:requiresDocumentName=null,pack:pack=null}={}){const _0xed7ce4=_0x22f42b;if(!ImportList[_0xed7ce4(0x2f6)]({'data':_0x548595}))return null;const _0x28c1b1=await Renderer[_0xed7ce4(0x297)][_0xed7ce4(0x292)](_0x548595[_0xed7ce4(0x2bc)],_0x548595['source'],_0x548595['hash'],{'isCopy':!![]}),{ChooseImporter:_0x4a9d35}=await import(_0xed7ce4(0x21e)),_0x147ce2=_0x4a9d35[_0xed7ce4(0x2d4)](_0x28c1b1?.[_0xed7ce4(0x247)]||_0x548595[_0xed7ce4(0x2bc)]);if(pack)_0x147ce2[_0xed7ce4(0x1bc)]=pack;if(requiresDocumentName!=null&&_0x147ce2[_0xed7ce4(0x2ae)]['FOLDER_TYPE']!==requiresDocumentName)return null;return(await _0x147ce2[_0xed7ce4(0x211)](_0x28c1b1))[_0xed7ce4(0x252)][0x0]?.['document'];}static[_0x22f42b(0x1c7)]({prop:_0xf72944,importerName:_0x21a6e3,isForce:_0xc15f92,pFnGetEntity:_0x5b44f8,pFnImport:_0x37a993,fnGetSuccessMessage:_0x47779b,fnGetFailedMessage:_0xb6dd4f}){const _0xe7290=_0x22f42b;Hooks['on'](_0xe7290(0x2af),(_0x1c41d6,_0x4abc1d,_0x5c266e,_0x4b502b)=>{const _0x5664e5=_0xe7290;if(_0x1c41d6[_0x5664e5(0x27e)]?.['documentName']!==_0x5664e5(0x28a))return;const _0x1ad47a=_0x4abc1d['flags']?.[SharedConsts[_0x5664e5(0x2ce)]]||_0x4abc1d[_0x5664e5(0x200)]?.[SharedConsts['MODULE_NAME']];if(!_0x1ad47a||_0x1ad47a?.[_0x5664e5(0x2cf)]!==_0xf72944)return;if(_0x1ad47a[_0x5664e5(0x328)])return;if(ImportList[_0x5664e5(0x1cd)]!=null&&Date['now']()-ImportList['_suppressCreateSheetItemHookTimeStart']<0x2710){ImportList[_0x5664e5(0x1cd)]=null;return;}ImportList['_suppressCreateSheetItemHookTimeStart']=null;const _0x5da150=_0x1c41d6[_0x5664e5(0x27e)];return this[_0x5664e5(0x1b1)]({'isForce':_0xc15f92})[_0x5664e5(0x1d2)](async _0x142303=>{const _0x38b6d2=_0x5664e5;if(_0x142303==null)return;let _0x29fa7b;try{if(_0x5b44f8)_0x29fa7b=await _0x5b44f8(_0x1ad47a);else _0x29fa7b=await Renderer[_0x38b6d2(0x297)]['pCacheAndGet'](_0x1ad47a[_0x38b6d2(0x2bc)],_0x1ad47a[_0x38b6d2(0x28d)],_0x1ad47a[_0x38b6d2(0x1e5)]);}catch(_0x2e1905){ui['notifications'][_0x38b6d2(0x1be)](_0x38b6d2(0x2a6)+(_0x29fa7b?.[_0x38b6d2(0x1c4)]??_0x1ad47a[_0x38b6d2(0x1e5)])+_0x38b6d2(0x1bf)+VeCt[_0x38b6d2(0x29c)]);throw _0x2e1905;}if(!_0x29fa7b){const _0x310d76=_0x38b6d2(0x2a6)+_0x1ad47a[_0x38b6d2(0x1e5)]+'\x22!';ui[_0x38b6d2(0x2e1)][_0x38b6d2(0x1be)](_0x310d76+'\x20'+VeCt[_0x38b6d2(0x29c)]);throw new Error(_0x310d76+_0x38b6d2(0x239));}try{if(_0x142303){const _0xbe832e=new this({'actor':_0x5da150});await _0xbe832e[_0x38b6d2(0x1f1)]();if(_0x37a993)await _0x37a993({'ent':_0x29fa7b,'imp':_0xbe832e,'flags':_0x1ad47a});else await _0xbe832e['pImportEntry'](_0x29fa7b,{'filterValues':_0x1ad47a['filterValues']});const _0x2000dd=_0x47779b?_0x47779b({'ent':_0x29fa7b,'flags':_0x1ad47a}):_0x38b6d2(0x235)+_0x29fa7b['name']+'\x22\x20via\x20'+_0x21a6e3+_0x38b6d2(0x215);ui[_0x38b6d2(0x2e1)][_0x38b6d2(0x1ba)](_0x2000dd);return;}_0x4abc1d=MiscUtil[_0x38b6d2(0x278)](_0x4abc1d),MiscUtil['set'](_0x4abc1d[_0x38b6d2(0x200)],SharedConsts[_0x38b6d2(0x2ce)],_0x38b6d2(0x328),!![]),await UtilActors[_0x38b6d2(0x1c1)](_0x5da150,[_0x4abc1d]);}catch(_0x234d7c){const _0x517085=_0xb6dd4f?_0xb6dd4f({'ent':_0x29fa7b,'flags':_0x1ad47a}):'Failed\x20to\x20import\x20\x22'+_0x29fa7b[_0x38b6d2(0x1c4)]+_0x38b6d2(0x1bf)+VeCt[_0x38b6d2(0x29c)];ui[_0x38b6d2(0x2e1)]['error'](_0x517085);throw _0x234d7c;}}),![];});}static async[_0x22f42b(0x1b1)]({isForce:_0xe923b9}){const _0x3f4d39=_0x22f42b;if(_0xe923b9)return!![];const _0x3aaf68=Config[_0x3f4d39(0x2f2)](_0x3f4d39(0x2a0),_0x3f4d39(0x300));if(_0x3aaf68===ConfigConsts[_0x3f4d39(0x1d4)])return![];if(_0x3aaf68===ConfigConsts[_0x3f4d39(0x199)])return InputUiUtil['pGetUserBoolean']({'title':_0x3f4d39(0x2e4)+(Config[_0x3f4d39(0x2f2)]('ui',_0x3f4d39(0x223))?_0x3f4d39(0x1b4):SharedConsts[_0x3f4d39(0x27a)])+_0x3f4d39(0x1f8),'textYes':'Yes,\x20use\x20the\x20importer','textNo':_0x3f4d39(0x221)});return!![];}constructor(_0x4dc3b9,_0x19fe74,_0x2acdec){const _0x32645e=_0x22f42b;_0x2acdec=_0x2acdec||{};if(!_0x2acdec[_0x32645e(0x26e)]&&!_0x2acdec[_0x32645e(0x24d)])throw new Error('One\x20of\x20\x22props\x22\x20or\x20\x22namespace\x22\x20must\x20be\x20provided!');const _0xacdcce={'template':SharedConsts[_0x32645e(0x2de)]+_0x32645e(0x2cd),'width':0x3c0,'height':Util['getMaxWindowHeight'](),'resizable':!![]};Object[_0x32645e(0x2f1)](_0xacdcce,_0x4dc3b9||{}),super(_0xacdcce),this[_0x32645e(0x243)]=_0x2acdec['props'],this[_0x32645e(0x31a)]=_0x2acdec[_0x32645e(0x25d)];if(this[_0x32645e(0x243)]&&this[_0x32645e(0x31a)]&&this['_props']['length']!==this[_0x32645e(0x31a)][_0x32645e(0x29e)])throw new Error(_0x32645e(0x1d5));this[_0x32645e(0x263)]=_0x2acdec[_0x32645e(0x1a9)],this[_0x32645e(0x217)]=_0x2acdec[_0x32645e(0x1ac)]||'entries',this[_0x32645e(0x30e)]=_0x2acdec[_0x32645e(0x289)],this[_0x32645e(0x1dd)]=_0x2acdec['gameProp'],this[_0x32645e(0x317)]=_0x2acdec['defaultFolderPath'],this[_0x32645e(0x302)]=_0x2acdec[_0x32645e(0x2aa)],this[_0x32645e(0x1c6)]=_0x2acdec[_0x32645e(0x24e)],this[_0x32645e(0x224)]=_0x2acdec['pageFilter'],this[_0x32645e(0x1ab)]=_0x2acdec['namespace'],this[_0x32645e(0x1de)]=!!_0x2acdec[_0x32645e(0x198)],this['_isNonCacheableInstance']=_0x2acdec[_0x32645e(0x1e0)],this[_0x32645e(0x296)]=_0x2acdec[_0x32645e(0x2bc)],this[_0x32645e(0x2bd)]=!!_0x2acdec['isPreviewable'],this['_isNotDroppable']=!!_0x2acdec[_0x32645e(0x2ef)],this[_0x32645e(0x1b6)]=_0x2acdec[_0x32645e(0x1ae)]||_0x32645e(0x319),this[_0x32645e(0x1f2)]=!!_0x2acdec[_0x32645e(0x1ca)],this[_0x32645e(0x1df)]=_0x2acdec[_0x32645e(0x1a3)],this['_configGroup']=_0x2acdec['configGroup'],this[_0x32645e(0x2b0)]=_0x19fe74?.[_0x32645e(0x19a)],this[_0x32645e(0x1e3)]=_0x19fe74?.[_0x32645e(0x2f5)],this[_0x32645e(0x23c)]=!!_0x19fe74?.[_0x32645e(0x19a)]&&_0x2acdec['isActorRadio'],this[_0x32645e(0x1fc)]=null,this[_0x32645e(0x2f0)]=null,this['_packCacheFlat']=null,this[_0x32645e(0x2c9)]=!![],this['_isHidden']=![],this[_0x32645e(0x271)]=![],this['_content']=null,this[_0x32645e(0x30d)]=null,this[_0x32645e(0x265)]=null,this[_0x32645e(0x326)]=null,this[_0x32645e(0x19c)]=null,this[_0x32645e(0x19e)]=null,this['_$btnToggleSummary']=null,this[_0x32645e(0x2bb)]=null,this[_0x32645e(0x21f)]=null,this[_0x32645e(0x19d)]=null,this[_0x32645e(0x1f6)]=null,this[_0x32645e(0x27c)]=null,this['_$btnRun']=null,this['_$btnsRunAdditional']={},this[_0x32645e(0x2f9)]=null,this['_$wrpList']=null,this[_0x32645e(0x1a8)]=null,this[_0x32645e(0x2fb)]=null;}get[_0x22f42b(0x2bc)](){return this['_page'];}set[_0x22f42b(0x318)](_0x1eb836){const _0x12c322=_0x22f42b;this[_0x12c322(0x2c9)]=_0x1eb836;}get[_0x22f42b(0x24d)](){return this['_namespace'];}get['props'](){const _0x157e0=_0x22f42b;return this[_0x157e0(0x243)];}set[_0x22f42b(0x1bc)](_0x588b5e){const _0x25a9fa=_0x22f42b;this[_0x25a9fa(0x1fc)]=_0x588b5e;}get['isFolderOnly'](){const _0x3a90cb=_0x22f42b;return this[_0x3a90cb(0x1de)];}get[_0x22f42b(0x1e0)](){return!!this['_isNonCacheableInstance'];}get[_0x22f42b(0x1ca)](){return!!this['_isDedupable'];}set['userData'](_0x2f9f31){this['_userData']=_0x2f9f31;}get[_0x22f42b(0x2d0)](){const _0x55b929=_0x22f42b;return this[_0x55b929(0x1dd)];}get['actor'](){return this['_actor'];}get[_0x22f42b(0x2f5)](){const _0x16d776=_0x22f42b;return this[_0x16d776(0x1e3)];}get[_0x22f42b(0x290)](){const _0x55a803=_0x22f42b;return this[_0x55a803(0x2e9)];}get[_0x22f42b(0x23a)](){const _0x39cc96=_0x22f42b;if(this[_0x39cc96(0x2c9)])return!![];else return!this['_isHidden'];}get[_0x22f42b(0x1b7)](){const _0x3b184b=_0x22f42b;return this[_0x3b184b(0x243)][_0x3b184b(0x23d)]((_0x463c96,_0x51facd)=>({'prop':_0x463c96,'propBrewAdditionalData':this[_0x3b184b(0x31a)]?.[_0x51facd]}));}async[_0x22f42b(0x242)](_0xb890e){this['_content']=_0xb890e;}async['pSyncStateFrom'](_0x48c03a){const _0x4bbdde=_0x22f42b;this[_0x4bbdde(0x2b0)]=_0x48c03a[_0x4bbdde(0x2b0)],this['_table']=_0x48c03a[_0x4bbdde(0x1e3)],this[_0x4bbdde(0x1fc)]=_0x48c03a[_0x4bbdde(0x1fc)],await this[_0x4bbdde(0x230)](_0x48c03a['_folderPathSpec']);}[_0x22f42b(0x21b)](..._0x1e97ba){const _0x4447ca=_0x22f42b;if(this[_0x4447ca(0x293)]){if(this[_0x4447ca(0x224)]&&this['_pageFilter']['filterBox'])this[_0x4447ca(0x224)]['filterBox']['teardown']();return super[_0x4447ca(0x21b)](..._0x1e97ba);}if(!this['_isClosable']){this[_0x4447ca(0x30b)]=!![],this[_0x4447ca(0x1e1)][_0x4447ca(0x250)]();return;}if(this['_pageFilter']&&this[_0x4447ca(0x224)][_0x4447ca(0x323)])this[_0x4447ca(0x224)][_0x4447ca(0x323)]['teardown']();return super[_0x4447ca(0x21b)](..._0x1e97ba);}async[_0x22f42b(0x279)](){}['render'](..._0x58200b){const _0x11296d=_0x22f42b;if(this[_0x11296d(0x30b)]){this[_0x11296d(0x1e1)][_0x11296d(0x285)](),this[_0x11296d(0x30b)]=![],this[_0x11296d(0x2f7)]();return;}return super[_0x11296d(0x1f4)](..._0x58200b);}async[_0x22f42b(0x2eb)](_0x45042a,_0x5a5827){const _0x5def36=_0x22f42b;this[_0x5def36(0x30b)]&&(this['element'][_0x5def36(0x285)](),this[_0x5def36(0x30b)]=![]),await UtilApplications[_0x5def36(0x283)](this,_0x45042a,_0x5a5827);}[_0x22f42b(0x1aa)]({sidebarTab:sidebarTab=null}={}){const _0x36d402=_0x22f42b;sidebarTab=sidebarTab||this['_sidebarTab'];if(this[_0x36d402(0x1e3)])ui[_0x36d402(0x208)][_0x36d402(0x1ed)](_0x36d402(0x31f));if(this[_0x36d402(0x1fc)])ui['sidebar'][_0x36d402(0x1ed)](_0x36d402(0x1b8));else{if(!this['_actor']&&!this[_0x36d402(0x1e3)]&&sidebarTab)ui[_0x36d402(0x208)]['activateTab'](sidebarTab);}}async[_0x22f42b(0x1f1)](){const _0x3f9c3c=_0x22f42b;if(this[_0x3f9c3c(0x271)])return;this[_0x3f9c3c(0x271)]=!![],await this[_0x3f9c3c(0x1ef)]();}[_0x22f42b(0x261)](){const _0xcafde0=_0x22f42b;return ImportList[_0xcafde0(0x301)]+'.'+this[_0xcafde0(0x206)];}get['_folderPathSpecKeyConstructorName'](){const _0x429d31=_0x22f42b;return this['constructor'][_0x429d31(0x1c4)];}[_0x22f42b(0x2ba)](){const _0x10540d=_0x22f42b;return{'isRadio':this[_0x10540d(0x23c)],'isPreviewable':this[_0x10540d(0x2bd)],'isNotDroppable':this['_isNotDroppable'],'titleButtonRun':this[_0x10540d(0x1b6)],'titleSearch':this[_0x10540d(0x217)],'cols':[{'name':_0x10540d(0x204),'width':0x9,'field':_0x10540d(0x1c4)},{'name':_0x10540d(0x324),'width':0x2,'field':_0x10540d(0x28d),'titleProp':'sourceLong','displayProp':_0x10540d(0x2df),'classNameProp':'sourceClassName','styleProp':_0x10540d(0x1a2),'rowClassName':_0x10540d(0x234)}],'rows':this[_0x10540d(0x209)]['map']((_0x524c40,_0x5a749e)=>{const _0x1c6dd1=_0x10540d;if(this[_0x1c6dd1(0x224)])this[_0x1c6dd1(0x224)]['constructor'][_0x1c6dd1(0x1fa)](_0x524c40);return{'name':_0x524c40['name'],'source':_0x524c40[_0x1c6dd1(0x28d)],'sourceShort':Parser[_0x1c6dd1(0x20a)](_0x524c40['source']),'sourceLong':Parser['sourceJsonToFull'](_0x524c40[_0x1c6dd1(0x28d)]),'sourceClassName':Parser[_0x1c6dd1(0x2b7)](_0x524c40[_0x1c6dd1(0x28d)]),'sourceStyle':BrewUtil['sourceJsonToStylePart'](_0x524c40[_0x1c6dd1(0x28d)]),'ix':_0x5a749e};})};}[_0x22f42b(0x2ec)](_0x2e8b88){const _0x53b1a6=_0x22f42b,_0x46ffe9=_0x2e8b88[0x0],_0x4f8cd4=$(_0x46ffe9[_0x53b1a6(0x329)][0x0]);this[_0x53b1a6(0x326)]=_0x4f8cd4['find'](_0x53b1a6(0x1f3)),this[_0x53b1a6(0x19c)]=_0x4f8cd4['find']('[name=\x22btn-reset\x22]'),this[_0x53b1a6(0x19e)]=_0x4f8cd4[_0x53b1a6(0x281)](_0x53b1a6(0x1ee)),this[_0x53b1a6(0x24a)]=_0x4f8cd4[_0x53b1a6(0x281)]('[name=\x22btn-toggle-summary\x22]'),this['_$iptSearch']=_0x4f8cd4[_0x53b1a6(0x281)](_0x53b1a6(0x30c)),this[_0x53b1a6(0x21f)]=_0x4f8cd4['find'](_0x53b1a6(0x207)),this[_0x53b1a6(0x1a8)]=$(_0x46ffe9['children'][0x1]);const _0x20f670=$(_0x46ffe9[_0x53b1a6(0x329)][0x2]);this[_0x53b1a6(0x19d)]=_0x20f670[_0x53b1a6(0x281)](_0x53b1a6(0x1ec)),this[_0x53b1a6(0x1f6)]=_0x20f670[_0x53b1a6(0x281)](_0x53b1a6(0x2c0)),this['_$wrpBtnsSort']=_0x20f670,this[_0x53b1a6(0x205)]=$(_0x46ffe9['children'][0x3]),this[_0x53b1a6(0x27c)]=$(_0x46ffe9[_0x53b1a6(0x329)][0x4]),this[_0x53b1a6(0x1d6)]=this[_0x53b1a6(0x27c)][_0x53b1a6(0x281)]('[name=\x22btn-run\x22]'),this['_$wrpRun']['find']('[name]')[_0x53b1a6(0x214)]((_0x237e90,_0x28d9f6)=>{const _0x4df902=_0x53b1a6;if(_0x28d9f6[_0x4df902(0x1c4)]===_0x4df902(0x2e8))return;this[_0x4df902(0x2dc)][_0x28d9f6[_0x4df902(0x1c4)]]=$(_0x28d9f6);});}[_0x22f42b(0x244)](_0x3f9f49){const _0xc3083d=_0x22f42b;super[_0xc3083d(0x244)](_0x3f9f49),this[_0xc3083d(0x2ec)](_0x3f9f49),this[_0xc3083d(0x28b)](),this[_0xc3083d(0x27b)](),this[_0xc3083d(0x19c)][_0xc3083d(0x28c)](()=>{const _0x59c089=_0xc3083d;this[_0x59c089(0x2bb)][_0x59c089(0x240)]('');if(this['_list'])this[_0x59c089(0x30d)]['reset']();}),this[_0xc3083d(0x320)]();let _0x12028c;this[_0xc3083d(0x224)]?_0x12028c=this['_activateListeners_pInitFilteredList']()['then'](()=>this[_0xc3083d(0x254)]()):this['_activateListeners_initList']();this[_0xc3083d(0x30d)]['on'](_0xc3083d(0x201),()=>this[_0xc3083d(0x21f)]['html'](this[_0xc3083d(0x30d)][_0xc3083d(0x273)]['length']+'/'+this[_0xc3083d(0x30d)]['items'][_0xc3083d(0x29e)])),ListUiUtil[_0xc3083d(0x20c)](this[_0xc3083d(0x19d)],this[_0xc3083d(0x30d)]),ListUiUtil[_0xc3083d(0x1c0)](this[_0xc3083d(0x1f6)],this[_0xc3083d(0x30d)]);if(this['_$btnReset'])this[_0xc3083d(0x19c)][_0xc3083d(0x28c)]();if(_0x12028c)_0x12028c['then'](()=>this[_0xc3083d(0x2f7)]());else this[_0xc3083d(0x2f7)]();}[_0x22f42b(0x320)](){const _0x505640=_0x22f42b;this['_$btnFeelingLucky'][_0x505640(0x28c)](()=>{const _0x43fcf3=_0x505640;if(!this[_0x43fcf3(0x30d)]||!this[_0x43fcf3(0x30d)]['visibleItems'][_0x43fcf3(0x29e)])return;ListUiUtil[_0x43fcf3(0x258)]({'isChecked':![],'isIncludeHidden':!![],'list':this[_0x43fcf3(0x30d)]});const _0x419f70=RollerUtil[_0x43fcf3(0x1ea)](this[_0x43fcf3(0x30d)]['visibleItems']);if(!_0x419f70)return;ListUiUtil[_0x43fcf3(0x2fa)](_0x419f70,{'toVal':!![]}),_0x419f70[_0x43fcf3(0x306)]['scrollIntoView']({'block':_0x43fcf3(0x2e5)});});}[_0x22f42b(0x254)](){const _0x2c4f4a=_0x22f42b;if(!this[_0x2c4f4a(0x2bd)]&&this[_0x2c4f4a(0x26b)])return;const _0x6c614f=this[_0x2c4f4a(0x30d)][_0x2c4f4a(0x1c8)],_0xea2016=_0x6c614f['length'];for(let _0x28cb26=0x0;_0x28cb26<_0xea2016;++_0x28cb26){const _0x55f528=_0x6c614f[_0x28cb26];if(this[_0x2c4f4a(0x2bd)]){const _0x60ef5b=_0x55f528['ele'][_0x2c4f4a(0x227)][_0x2c4f4a(0x329)][0x1],_0x61b188=_0x60ef5b[_0x2c4f4a(0x329)][0x0],_0x5b8efe=_0x60ef5b[_0x2c4f4a(0x329)][0x1];this['_activateListeners_initPreviewButton'](_0x55f528,_0x61b188),this['_activateListeners_initPreviewImportButton'](_0x55f528,_0x5b8efe);}!this['_isNotDroppable']&&this['_activateListeners_initDroppable'](_0x55f528);}}[_0x22f42b(0x24c)](_0x1af39d,_0x35b021){const _0x117e5b=_0x22f42b;ListUiUtil[_0x117e5b(0x20e)](this['_page'],this[_0x117e5b(0x209)],_0x1af39d,_0x35b021);}[_0x22f42b(0x1ce)](_0x3fde8f,_0x522c90){const _0x3d7d39=_0x22f42b;_0x522c90['addEventListener'](_0x3d7d39(0x28c),async _0x488d17=>{const _0x39e4d9=_0x3d7d39;_0x488d17[_0x39e4d9(0x1a5)](),_0x488d17[_0x39e4d9(0x294)]();if(this['_isRadio'])this[_0x39e4d9(0x21b)]();const _0x38fee4=this['_content'][_0x3fde8f['ix']];try{await this[_0x39e4d9(0x275)]();let _0x1c5fbf;try{_0x1c5fbf=await this[_0x39e4d9(0x211)](_0x38fee4);}finally{this[_0x39e4d9(0x2ac)]();}if(!_0x1c5fbf)return;UtilApplications[_0x39e4d9(0x1b2)](_0x1c5fbf);}catch(_0x303354){setTimeout(()=>{throw _0x303354;}),UtilApplications[_0x39e4d9(0x1b2)]({'entity':_0x38fee4,'status':UtilApplications[_0x39e4d9(0x26c)]});}});}[_0x22f42b(0x2db)](_0x1d4e86){const _0x3b703e=_0x22f42b;_0x1d4e86[_0x3b703e(0x306)]['addEventListener']('dragstart',_0x520f92=>{const _0x1b6e4b=_0x3b703e,_0x500279={'type':this[_0x1b6e4b(0x2ae)][_0x1b6e4b(0x280)],'subType':UtilEvents[_0x1b6e4b(0x26f)],'page':this[_0x1b6e4b(0x296)],'source':_0x1d4e86['values']['source'],'hash':_0x1d4e86[_0x1b6e4b(0x1dc)][_0x1b6e4b(0x1e5)],'name':_0x1d4e86[_0x1b6e4b(0x1c4)],'tag':this[_0x1b6e4b(0x25f)](_0x1d4e86)};_0x520f92['dataTransfer']['setData']('text/plain',JSON[_0x1b6e4b(0x21a)](_0x500279));});}[_0x22f42b(0x28b)](){const _0x1daf84=_0x22f42b;this['_$btnRun'][_0x1daf84(0x28c)](()=>this[_0x1daf84(0x2fc)]());}['_activateListeners_initRunButtonsAdditional'](){}[_0x22f42b(0x20f)](){const _0x2f1ad7=_0x22f42b;if(this[_0x2f1ad7(0x2dc)][_0x2f1ad7(0x2f8)])this[_0x2f1ad7(0x2dc)][_0x2f1ad7(0x2f8)][_0x2f1ad7(0x28c)](()=>this['_pHandleClickRunButton']({'optsPostProcessing':{'isUseMods':!![]}}));}async[_0x22f42b(0x2ca)](_0xf01e5f){return _0xf01e5f;}async[_0x22f42b(0x2fc)]({gameProp:gameProp=null,sidebarTab:sidebarTab=null,optsPostProcessing:optsPostProcessing={},optsImportEntry:optsImportEntry={}}={}){const _0x42951f=_0x22f42b;gameProp=gameProp||this[_0x42951f(0x1dd)],sidebarTab=sidebarTab||this[_0x42951f(0x30e)];if(!this[_0x42951f(0x30d)])return;const _0x11559c=this[_0x42951f(0x30d)]['items'][_0x42951f(0x1f9)](_0x2134e7=>_0x2134e7['data'][_0x42951f(0x1bd)][_0x42951f(0x1bb)])['map'](_0x2b4fed=>_0x2b4fed['ix']);if(!_0x11559c['length'])return ui[_0x42951f(0x2e1)][_0x42951f(0x226)]('Please\x20select\x20something\x20to\x20import!');if(!this[_0x42951f(0x1fc)]&&_0x11559c[_0x42951f(0x29e)]>0x64&&!Config[_0x42951f(0x2f2)]('ui',_0x42951f(0x20b))){const _0x132310=await InputUiUtil[_0x42951f(0x25e)]({'title':_0x42951f(0x276),'htmlDescription':_0x42951f(0x2c2)+_0x11559c[_0x42951f(0x29e)]+'\x20'+(_0x11559c[_0x42951f(0x29e)]===0x1?_0x42951f(0x20d):'entities')+_0x42951f(0x216),'textYesRemember':_0x42951f(0x1f0),'textYes':_0x42951f(0x2c8),'textNo':_0x42951f(0x1b0),'fnRemember':_0x15e5f0=>Config[_0x42951f(0x1d1)]('ui',_0x42951f(0x20b),_0x15e5f0)});if(_0x132310==null||_0x132310===![])return;}if(this[_0x42951f(0x1fc)]&&!Config['get']('ui',_0x42951f(0x20b))&&this[_0x42951f(0x1fc)][_0x42951f(0x29f)][_0x42951f(0x2c5)]+_0x11559c['length']>0x1f4){const _0x38d4b6=await InputUiUtil['pGetUserBoolean']({'title':'Warning:\x20Large\x20Compendium','htmlDescription':_0x42951f(0x2c2)+_0x11559c[_0x42951f(0x29e)]+'\x20'+(_0x11559c['length']===0x1?_0x42951f(0x20d):'entities')+'\x20to\x20import'+(this[_0x42951f(0x1fc)][_0x42951f(0x29f)][_0x42951f(0x2c5)]?_0x42951f(0x29b)+this['_pack'][_0x42951f(0x29f)][_0x42951f(0x2c5)]+'\x20existing\x20document'+(this[_0x42951f(0x1fc)]['index'][_0x42951f(0x2c5)]!==0x1?'s':''):'')+_0x42951f(0x219),'textYesRemember':_0x42951f(0x1f0),'textYes':'Continue','textNo':'Cancel','fnRemember':_0x259c22=>Config['set']('ui','isDisableLargeImportWarning',_0x259c22)});if(_0x38d4b6==null||_0x38d4b6===![])return;}this[_0x42951f(0x21b)]();let _0x239fb4=_0x11559c[_0x42951f(0x23d)](_0x1b9ab8=>this['_content'][_0x1b9ab8]);_0x239fb4=await this[_0x42951f(0x2ca)](_0x239fb4,optsPostProcessing);if(_0x239fb4==null)return;this[_0x42951f(0x1aa)]({'sidebarTab':sidebarTab}),await this[_0x42951f(0x275)]({'gameProp':gameProp});const _0x12baec=_0x239fb4['map'](_0xfb3c57=>{const _0x1e6338=_0x42951f;return new Util[(_0x1e6338(0x1d7))]((_0xfb3c57['_displayName']||_0xfb3c57['name'])+'\x20('+Parser['sourceJsonToAbv'](_0xfb3c57[_0x1e6338(0x28d)])+')',()=>this[_0x1e6338(0x211)](_0xfb3c57,optsImportEntry));});await UtilApplications[_0x42951f(0x277)](_0x12baec);if(!this[_0x42951f(0x2b0)]&&!this[_0x42951f(0x1e3)]&&!this[_0x42951f(0x1fc)])game[gameProp]['render']();this[_0x42951f(0x2ac)](),this[_0x42951f(0x19d)][_0x42951f(0x2d7)](_0x42951f(0x1bb),![]),this[_0x42951f(0x30d)]['items']['forEach'](_0x561a9c=>{const _0x1f0bec=_0x42951f;_0x561a9c[_0x1f0bec(0x19f)][_0x1f0bec(0x1bd)][_0x1f0bec(0x1bb)]=![],_0x561a9c[_0x1f0bec(0x306)][_0x1f0bec(0x2dd)]['remove']('list-multi-selected');});}[_0x22f42b(0x31e)](){const _0x379704=_0x22f42b;return this[_0x379704(0x30d)]=new List({'$iptSearch':this['_$iptSearch'],'$wrpList':this[_0x379704(0x205)],'fnSort':this[_0x379704(0x302)],'sortByInitial':this[_0x379704(0x1c6)]}),SortUtil['initBtnSortHandlers'](this[_0x379704(0x2f9)],this[_0x379704(0x30d)]),this[_0x379704(0x224)][_0x379704(0x312)]({'$iptSearch':this['_$iptSearch'],'$btnReset':this['_$btnReset'],'$btnOpen':this['_$bntFilter'],'$btnToggleSummaryHidden':this[_0x379704(0x24a)],'$wrpMiniPills':this[_0x379704(0x1a8)],'namespace':this[_0x379704(0x256)]()})[_0x379704(0x1d2)](async()=>{const _0x2b2faa=_0x379704;this[_0x2b2faa(0x209)][_0x2b2faa(0x313)](_0x58c658=>this[_0x2b2faa(0x224)][_0x2b2faa(0x2b9)](_0x58c658)),this['_activateListeners_absorbListItems'](),this['_list'][_0x2b2faa(0x255)](),this[_0x2b2faa(0x224)][_0x2b2faa(0x32a)](),this['_pageFilter'][_0x2b2faa(0x323)][_0x2b2faa(0x1f4)](),await this[_0x2b2faa(0x19b)](),this[_0x2b2faa(0x224)][_0x2b2faa(0x323)]['on'](FilterBox[_0x2b2faa(0x210)],this[_0x2b2faa(0x32b)]['bind'](this)),this[_0x2b2faa(0x32b)]();});}async[_0x22f42b(0x19b)](){}[_0x22f42b(0x2f7)](){}[_0x22f42b(0x262)](){const _0x3913f8=_0x22f42b;this[_0x3913f8(0x30d)]=new List({'$iptSearch':this[_0x3913f8(0x2bb)],'$wrpList':this[_0x3913f8(0x205)],'fnSort':this[_0x3913f8(0x302)]}),SortUtil['initBtnSortHandlers'](this[_0x3913f8(0x2f9)],this['_list']),this[_0x3913f8(0x2a4)](),this[_0x3913f8(0x30d)][_0x3913f8(0x255)]();}[_0x22f42b(0x2a4)](){const _0x25a055=_0x22f42b;this[_0x25a055(0x30d)][_0x25a055(0x325)](this[_0x25a055(0x209)],{'fnGetName':_0x5c663c=>_0x5c663c['name'],'fnGetValues':_0x32aad1=>({'source':_0x32aad1[_0x25a055(0x28d)],'hash':UrlUtil[_0x25a055(0x222)][this[_0x25a055(0x296)]](_0x32aad1)}),'fnGetData':UtilList2[_0x25a055(0x27d)],'fnBindListeners':_0x15e46f=>this[_0x25a055(0x23c)]?UtilList2[_0x25a055(0x30f)](this['_list'],_0x15e46f):UtilList2['absorbFnBindListeners'](this[_0x25a055(0x30d)],_0x15e46f)});}[_0x22f42b(0x32b)](){const _0x172cde=_0x22f42b,_0x5c36a6=this[_0x172cde(0x224)][_0x172cde(0x323)][_0x172cde(0x1e4)]();this[_0x172cde(0x30d)][_0x172cde(0x1f9)](_0x2610f8=>this['_pageFilter']['toDisplay'](_0x5c36a6,this['_content'][_0x2610f8['ix']]));}async[_0x22f42b(0x211)](..._0x61f461){const _0x5129e4=_0x22f42b,_0x578afd=await this[_0x5129e4(0x26d)](..._0x61f461);return UtilHooks[_0x5129e4(0x1e8)](UtilHooks[_0x5129e4(0x2cc)],_0x578afd),_0x578afd;}async[_0x22f42b(0x26d)](){const _0xaabd75=_0x22f42b;throw new Error(_0xaabd75(0x220));}async['pGetSources']({isApplyWorldDataSourceFilter:isApplyWorldDataSourceFilter=!![]}={}){const _0x19594c=_0x22f42b;return(await this[_0x19594c(0x1a6)]())['filter'](_0x3b2233=>!isApplyWorldDataSourceFilter||!UtilWorldDataSourceSelector[_0x19594c(0x238)](_0x3b2233));}async[_0x22f42b(0x1a6)](){const _0x47be8d=_0x22f42b;throw new Error(_0x47be8d(0x220));}async[_0x22f42b(0x22b)]({sources:_0x2edc36,uploadedFiles:_0xcfdc77,customUrls:_0x370d26,isBackground:isBackground=![]}){const _0x50a204=_0x22f42b,_0x35185e=await this[_0x50a204(0x21d)](_0x2edc36),_0x14855a=[];return UtilDataSource[_0x50a204(0x22b)]({'sources':_0x2edc36,'uploadedFiles':_0xcfdc77,'customUrls':_0x370d26,'isBackground':isBackground,'props':this[_0x50a204(0x243)],'userData':_0x35185e,'cacheKeys':_0x14855a,'page':this[_0x50a204(0x296)],'isDedupable':this[_0x50a204(0x1f2)],'fnGetDedupedData':this[_0x50a204(0x2e2)]?this[_0x50a204(0x2e2)][_0x50a204(0x25c)](this):null,'fnGetBlacklistFilteredData':this[_0x50a204(0x274)]?this[_0x50a204(0x274)][_0x50a204(0x25c)](this):null});}async[_0x22f42b(0x202)](_0x12b29){const _0x123977=_0x22f42b;if(_0x12b29[_0x123977(0x327)])return _0x12b29;const _0x2655ea=DataUtil['proxy'][_0x123977(0x316)](_0x12b29[_0x123977(0x247)],_0x12b29);if(!_0x2655ea[_0x123977(0x29e)])return _0x12b29;const _0x3eebb1=await InputUiUtil[_0x123977(0x259)]({'values':_0x2655ea,'placeholder':'Select\x20Version...','title':_0x123977(0x2fd),'fnDisplay':_0xa9f057=>{const _0x35f843=_0x123977;if(_0xa9f057==null)return _0x35f843(0x26a);return''+_0xa9f057[_0x35f843(0x1c4)]+(_0x12b29[_0x35f843(0x28d)]!==_0xa9f057[_0x35f843(0x28d)]?'\x20('+Parser[_0x35f843(0x20a)](_0xa9f057[_0x35f843(0x28d)])+')':'');},'isAllowNull':!![]});if(_0x3eebb1==null){const _0x57fd02=MiscUtil['copy'](_0x12b29);return _0x57fd02['_foundryIsIgnoreVersions']=!![],_0x57fd02;}return _0x2655ea[_0x3eebb1];}async['_pGetSourcesHomebrew'](_0xe44d07={}){const _0x55bd5a=_0x22f42b;return[...(await Vetools[_0x55bd5a(0x2be)](...this[_0x55bd5a(0x263)]))[_0x55bd5a(0x23d)](({name:_0x3e202e,url:_0x3ef841,abbreviations:_0x54c09e})=>new UtilDataSource[(_0x55bd5a(0x2e6))](_0x3e202e,_0x3ef841,{..._0xe44d07,'filterTypes':[UtilDataSource['SOURCE_TYP_BREW'],UtilDataSource[_0x55bd5a(0x2bf)]],'abbreviations':_0x54c09e})),...(await Vetools[_0x55bd5a(0x2a1)](...this[_0x55bd5a(0x263)]))[_0x55bd5a(0x23d)](({name:_0x115953,url:_0x340914,abbreviations:_0x5bfa4a})=>new UtilDataSource[(_0x55bd5a(0x2e6))](_0x115953,_0x340914,{..._0xe44d07,'filterTypes':[UtilDataSource[_0x55bd5a(0x2e7)]],'abbreviations':_0x5bfa4a}))];}[_0x22f42b(0x1ff)](){const _0x59aef3=_0x22f42b;return{'alpha':{'label':_0x59aef3(0x1c9),'getter':_0x323764=>_0x323764[_0x59aef3(0x1c4)][_0x59aef3(0x32f)](0x0,0x1)['toUpperCase']()},'source':{'label':_0x59aef3(0x246),'getter':_0x4b8bb6=>Parser[_0x59aef3(0x249)](_0x4b8bb6[_0x59aef3(0x28d)])},'sourceAbbreviation':{'label':_0x59aef3(0x22f),'getter':_0x48ef8c=>Parser[_0x59aef3(0x20a)](_0x48ef8c[_0x59aef3(0x28d)])}};}async['_pImportEntry_pGetFolderId'](_0x5e35d5,_0x177ef4){const _0x544831=_0x22f42b;return _0x177ef4=_0x177ef4||{},this['_pGetCreateFoldersGetIdFromObject']({'folderType':this[_0x544831(0x2ae)]['FOLDER_TYPE'],'obj':_0x5e35d5,'sorting':_0x177ef4[_0x544831(0x31c)]});}async['_pImportEntry_pCreateTempDirectoryGetId'](){const _0x4e6602=_0x22f42b;if(!Util[_0x4e6602(0x2b3)][_0x4e6602(0x233)]())return null;return UtilFolders[_0x4e6602(0x2b4)]({'folderType':this[_0x4e6602(0x2ae)][_0x4e6602(0x280)],'folderNames':[Config[_0x4e6602(0x2f2)]('import','tempFolderName')]});}[_0x22f42b(0x25a)](_0x406201){const _0x4037b2=_0x22f42b;return Vetools[_0x4037b2(0x25a)](_0x406201,this[_0x4037b2(0x243)]);}[_0x22f42b(0x256)](){const _0x1624b6=_0x22f42b;return _0x1624b6(0x308)+(this[_0x1624b6(0x2b0)]?_0x1624b6(0x19a):_0x1624b6(0x288))+'_'+(this[_0x1624b6(0x1ab)]||this[_0x1624b6(0x243)][_0x1624b6(0x2ad)]('_'));}[_0x22f42b(0x1c2)](_0x126183){const _0x497c86=_0x22f42b;_0x126183=_0x126183||{};const _0x3750c7=this[_0x497c86(0x2d3)](_0x126183),_0x495426=Config['get']('import','deduplicationMode');return{'mode':_0x495426,'existing':_0x3750c7,'isSkip':_0x495426===ConfigConsts['C_IMPORT_DEDUPE_MODE_SKIP']&&_0x3750c7!=null,'isOverwrite':_0x495426===ConfigConsts['C_IMPORT_DEDUPE_MODE_OVERWRITE']&&_0x3750c7!=null};}['_getDuplicateMeta_getExisting'](_0x5b0df8){const _0x3563e4=_0x22f42b;if(_0x5b0df8?.[_0x3563e4(0x315)]?.[_0x3563e4(0x2c4)]||_0x5b0df8?.[_0x3563e4(0x315)]?.[_0x3563e4(0x2b5)])return null;const _0x25954f=_0x5b0df8[_0x3563e4(0x2d0)]||this['_gameProp'],_0x33c56f=_0x25954f===this[_0x3563e4(0x1dd)]?this[_0x3563e4(0x1fc)]:null;let _0x5360fc=null;switch(_0x25954f){case'actors':case'items':{if(!(_0x5b0df8[_0x3563e4(0x1c4)]&&_0x5b0df8['source']||_0x5b0df8[_0x3563e4(0x20d)]))throw new Error(_0x3563e4(0x1cf));const _0x1d91d3=(_0x5b0df8[_0x3563e4(0x1c4)]||UtilDataConverter[_0x3563e4(0x2c3)](_0x5b0df8[_0x3563e4(0x20d)]))[_0x3563e4(0x2d5)]()['trim'](),_0x5e8882=(_0x5b0df8[_0x3563e4(0x28d)]||UtilDataConverter[_0x3563e4(0x2a3)](_0x5b0df8[_0x3563e4(0x20d)]))[_0x3563e4(0x2d5)]()[_0x3563e4(0x31d)]();switch(_0x25954f){case _0x3563e4(0x32c):{if(_0x33c56f){const _0x189436=this[_0x3563e4(0x229)]({'name':_0x1d91d3,'source':_0x5e8882});_0x5360fc=(this[_0x3563e4(0x2f0)]||{})[_0x189436];}else _0x5360fc=game[_0x25954f]['find'](_0x5ea74c=>this[_0x3563e4(0x2ae)][_0x3563e4(0x251)](_0x5ea74c)===_0x1d91d3&&(!Config[_0x3563e4(0x2f2)](_0x3563e4(0x2a0),_0x3563e4(0x2cb))||(MiscUtil[_0x3563e4(0x2f2)](_0x5ea74c,_0x3563e4(0x19f),_0x3563e4(0x19f),'details',_0x3563e4(0x28d))||'')[_0x3563e4(0x2d5)]()[_0x3563e4(0x31d)]()===_0x5e8882));break;}case'items':{if(_0x33c56f){const _0x1a5241=this[_0x3563e4(0x229)]({'name':_0x1d91d3,'source':_0x5e8882});_0x5360fc=(this[_0x3563e4(0x2f0)]||{})[_0x1a5241];}else _0x5360fc=game[_0x25954f][_0x3563e4(0x281)](_0x51be4d=>this['constructor']['_getDuplicateMeta_getCleanName'](_0x51be4d)===_0x1d91d3&&(!Config['get'](_0x3563e4(0x2a0),_0x3563e4(0x2cb))||(MiscUtil['get'](_0x51be4d,_0x3563e4(0x19f),_0x3563e4(0x19f),_0x3563e4(0x28d))||'')[_0x3563e4(0x2d5)]()['trim']()===_0x5e8882));break;}}break;}case'journal':case _0x3563e4(0x31f):case _0x3563e4(0x203):{const _0x3ae583=_0x5b0df8[_0x3563e4(0x1c4)][_0x3563e4(0x2d5)]()[_0x3563e4(0x31d)]();_0x33c56f?_0x5360fc=(this[_0x3563e4(0x197)]||[])[_0x3563e4(0x281)](_0x42872d=>this[_0x3563e4(0x2ae)]['_getDuplicateMeta_getCleanName'](_0x42872d)===_0x3ae583&&this[_0x3563e4(0x2ae)]['_getDuplicateMeta_isFlagMatch'](_0x5b0df8['flags'],_0x42872d)):_0x5360fc=game[_0x25954f]['find'](_0x4a73a2=>this[_0x3563e4(0x2ae)][_0x3563e4(0x251)](_0x4a73a2)===_0x3ae583&&this[_0x3563e4(0x2ae)][_0x3563e4(0x29d)](_0x5b0df8[_0x3563e4(0x200)],_0x4a73a2));break;}default:throw new Error('Game\x20property\x20\x22'+_0x25954f+'\x22\x20is\x20not\x20supported!');}return _0x5360fc;}static[_0x22f42b(0x251)](_0x2771d2){const _0x488bfd=_0x22f42b;let _0x391803=(MiscUtil['get'](_0x2771d2,_0x488bfd(0x19f),_0x488bfd(0x1c4))||'')['toLowerCase']()[_0x488bfd(0x31d)]();return _0x391803=_0x391803[_0x488bfd(0x24b)](/\[[^\]]+]/g,'')[_0x488bfd(0x31d)](),_0x391803;}static['_getDuplicateMeta_isFlagMatch'](_0x58785a,_0x3e938b){const _0x37c6ae=_0x22f42b;if(!_0x58785a)return!![];if(!_0x3e938b)return![];if(!_0x3e938b[_0x37c6ae(0x19f)]['flags'])return![];for(const [_0x211f1c,_0x5ad4e5]of Object[_0x37c6ae(0x314)](_0x58785a)){if(_0x3e938b[_0x37c6ae(0x19f)][_0x37c6ae(0x200)][_0x211f1c]==null)return![];for(const [_0x252b4b,_0x8ccaec]of Object[_0x37c6ae(0x314)](_0x5ad4e5)){if(!CollectionUtil['deepEquals'](_0x8ccaec,_0x3e938b[_0x37c6ae(0x19f)][_0x37c6ae(0x200)][_0x211f1c]?.[_0x252b4b]))return![];}}return!![];}[_0x22f42b(0x229)](_0x446e62){const _0x23c3da=_0x22f42b;return Object[_0x23c3da(0x314)](_0x446e62)['sort'](([_0x2fdbc],[_0x2ec129])=>SortUtil['ascSortLower'](_0x2fdbc,_0x2ec129))[_0x23c3da(0x23d)](([_0x44f008,_0x4ca3c3])=>(_0x44f008+'='+(''+_0x4ca3c3)['trim']())['toLowerCase']())[_0x23c3da(0x2ad)]('::');}async[_0x22f42b(0x275)]({gameProp:gameProp=null}={}){const _0xc7ed1=_0x22f42b;gameProp=gameProp||this[_0xc7ed1(0x1dd)];if(!this[_0xc7ed1(0x1fc)]||Config[_0xc7ed1(0x2f2)](_0xc7ed1(0x2a0),_0xc7ed1(0x1b3))===ConfigConsts[_0xc7ed1(0x295)])return;this[_0xc7ed1(0x2f0)]={},this[_0xc7ed1(0x197)]=[];const _0x2060db=await UtilCompendium[_0xc7ed1(0x22d)](this[_0xc7ed1(0x1fc)],!![]);_0x2060db[_0xc7ed1(0x313)](_0x275ef5=>{const _0x2fcfb7=_0xc7ed1;switch(gameProp){case'actors':{const _0x2ad261=(MiscUtil['get'](_0x275ef5,'data','name')||'')[_0x2fcfb7(0x2d5)]()[_0x2fcfb7(0x31d)](),_0x4e2f42=(MiscUtil[_0x2fcfb7(0x2f2)](_0x275ef5,_0x2fcfb7(0x19f),'data',_0x2fcfb7(0x1e7),_0x2fcfb7(0x28d))||'')[_0x2fcfb7(0x2d5)]()['trim'](),_0x3fcc52=this[_0x2fcfb7(0x229)]({'name':_0x2ad261,'source':_0x4e2f42});this['_packCache'][_0x3fcc52]=_0x275ef5;break;}case _0x2fcfb7(0x1c8):{const _0x5eaea2=(MiscUtil[_0x2fcfb7(0x2f2)](_0x275ef5,_0x2fcfb7(0x19f),_0x2fcfb7(0x1c4))||'')[_0x2fcfb7(0x2d5)]()[_0x2fcfb7(0x31d)](),_0xb8bc1=(MiscUtil[_0x2fcfb7(0x2f2)](_0x275ef5,'data',_0x2fcfb7(0x19f),_0x2fcfb7(0x28d))||'')['toLowerCase']()['trim'](),_0x5b7827=this['_getDuplicateMeta_getEntityKey']({'name':_0x5eaea2,'source':_0xb8bc1});this['_packCache'][_0x5b7827]=_0x275ef5;break;}case _0x2fcfb7(0x2d9):case _0x2fcfb7(0x31f):case'scenes':{const _0x16d79c=(MiscUtil['get'](_0x275ef5,_0x2fcfb7(0x19f),_0x2fcfb7(0x1c4))||'')['toLowerCase']()[_0x2fcfb7(0x31d)](),_0x74bad2=this['_getDuplicateMeta_getEntityKey']({'name':_0x16d79c});this[_0x2fcfb7(0x2f0)][_0x74bad2]=_0x275ef5;break;}default:throw new Error(_0x2fcfb7(0x287)+gameProp+_0x2fcfb7(0x2da));}this[_0x2fcfb7(0x197)][_0x2fcfb7(0x322)](_0x275ef5);});}[_0x22f42b(0x2ac)](){const _0x1a9a72=_0x22f42b;this['_packCache']=null,this[_0x1a9a72(0x197)]=null;}async[_0x22f42b(0x2d2)](_0x4d29af,_0xa11bd0){const _0x2fea69=_0x22f42b;if(_0x4d29af[_0x2fea69(0x25b)][_0x2fea69(0x2b8)]?.['length'])await _0x4d29af['existing']['deleteEmbeddedDocuments'](_0x2fea69(0x1cb),_0x4d29af['existing'][_0x2fea69(0x2b8)][_0x2fea69(0x23d)](_0x5318b8=>_0x5318b8['id']));if(this[_0x2fea69(0x1dd)]===_0x2fea69(0x31f)&&_0x4d29af[_0x2fea69(0x25b)][_0x2fea69(0x1d8)]?.[_0x2fea69(0x2c5)])await _0x4d29af[_0x2fea69(0x25b)][_0x2fea69(0x2ee)](_0x2fea69(0x269),_0x4d29af[_0x2fea69(0x25b)][_0x2fea69(0x1d8)][_0x2fea69(0x23d)](_0x1206b2=>_0x1206b2['id']));return await UtilDocuments[_0x2fea69(0x272)](_0x4d29af['existing'],_0xa11bd0),await this[_0x2fea69(0x2a8)]([_0x4d29af[_0x2fea69(0x25b)]],_0x4d29af),new ImportSummary({'status':UtilApplications[_0x2fea69(0x2a2)],'imported':[new ImportedDocument({'isExisting':!![],'document':_0x4d29af[_0x2fea69(0x25b)],'pack':this['_pack']})]});}async[_0x22f42b(0x2c6)](_0x3d45e5,_0x1a6e4a){const _0x78a39f=_0x22f42b;if(this[_0x78a39f(0x1dd)]===_0x78a39f(0x31f)&&_0x3d45e5[_0x78a39f(0x25b)][_0x78a39f(0x1d8)]?.[_0x78a39f(0x2c5)])await _0x3d45e5[_0x78a39f(0x25b)][_0x78a39f(0x2ee)](_0x78a39f(0x269),_0x3d45e5['existing'][_0x78a39f(0x1d8)][_0x78a39f(0x23d)](_0x59079d=>_0x59079d['id']));return await UtilDocuments[_0x78a39f(0x272)](_0x3d45e5[_0x78a39f(0x25b)],_0x1a6e4a),new ImportSummary({'status':UtilApplications[_0x78a39f(0x2a2)],'imported':[new ImportedDocument({'isExisting':!![],'document':_0x3d45e5['existing']})]});}async[_0x22f42b(0x23b)](_0x3e123b,_0x1eb92c,_0x3fff1e={},{docData:docData=null,isSkipDuplicateHandling:isSkipDuplicateHandling=![]}={}){const _0x3bfb40=_0x22f42b;docData=docData||await this[_0x3bfb40(0x2a9)](_0x3e123b,{'isAddDataFlags':!![],'filterValues':_0x1eb92c['filterValues'],..._0x3fff1e,'isAddPermission':!![],'defaultPermission':_0x1eb92c[_0x3bfb40(0x28f)]},_0x1eb92c);const _0x5d8284=isSkipDuplicateHandling?null:this['_getDuplicateMeta']({'name':docData[_0x3bfb40(0x1c4)],'source':MiscUtil[_0x3bfb40(0x2f2)](docData,_0x3bfb40(0x19f),_0x3bfb40(0x28d)),'importOpts':_0x1eb92c});if(_0x5d8284?.[_0x3bfb40(0x231)])return new ImportSummary({'status':UtilApplications[_0x3bfb40(0x270)],'imported':[new ImportedDocument({'isExisting':!![],'document':_0x5d8284['existing']})]});let _0x14cbc0;switch(this[_0x3bfb40(0x1dd)]){case _0x3bfb40(0x1c8):_0x14cbc0=CONFIG[_0x3bfb40(0x28e)][_0x3bfb40(0x1f5)];break;case _0x3bfb40(0x2d9):_0x14cbc0=CONFIG[_0x3bfb40(0x1a1)][_0x3bfb40(0x1f5)];break;case'tables':_0x14cbc0=CONFIG[_0x3bfb40(0x2b6)][_0x3bfb40(0x1f5)];break;case _0x3bfb40(0x203):_0x14cbc0=CONFIG[_0x3bfb40(0x2a7)]['documentClass'];break;}if(_0x1eb92c[_0x3bfb40(0x2c4)]){const _0x414165=await _0x14cbc0[_0x3bfb40(0x212)](docData,{'renderSheet':!![],'temporary':!![]});return new ImportSummary({'status':UtilApplications[_0x3bfb40(0x309)],'imported':[new ImportedDocument({'document':_0x414165})]});}if(this['_pack']){if(_0x5d8284?.[_0x3bfb40(0x31b)])return this[_0x3bfb40(0x2d2)](_0x5d8284,docData);const _0x267346=new _0x14cbc0(docData),_0x139d27=await this['_pack'][_0x3bfb40(0x1fe)](_0x267346);return await this['_pImportEntry_pAddToTargetTableIfRequired']([_0x139d27],_0x5d8284),new ImportSummary({'status':UtilApplications[_0x3bfb40(0x309)],'imported':[new ImportedDocument({'document':_0x139d27,'pack':this[_0x3bfb40(0x1fc)]})]});}if(_0x5d8284?.['isOverwrite'])return this[_0x3bfb40(0x2c6)](_0x5d8284,docData);const _0x1f4f50=_0x1eb92c['folderId']!==undefined?_0x1eb92c[_0x3bfb40(0x2e0)]:await this[_0x3bfb40(0x241)](_0x3e123b);if(_0x1f4f50)docData['folder']=_0x1f4f50;const _0x2e25a8=await _0x14cbc0[_0x3bfb40(0x212)](docData,{'renderSheet':![],'temporary':![]});return await game[this[_0x3bfb40(0x1dd)]]['set'](_0x2e25a8['id'],_0x2e25a8),new ImportSummary({'status':UtilApplications['TASK_EXIT_COMPLETE'],'imported':[new ImportedDocument({'document':_0x2e25a8})]});}async['_pImportEntry_pAddToTargetTableIfRequired'](_0x246b7a,_0x1ea645){const _0x4cfa03=_0x22f42b;if(!this[_0x4cfa03(0x1e3)])return;const _0x2c9541=_0x1ea645?.[_0x4cfa03(0x2c7)]===ConfigConsts[_0x4cfa03(0x311)]||_0x1ea645?.[_0x4cfa03(0x31b)];_0x246b7a=_0x2c9541?_0x246b7a[_0x4cfa03(0x1f9)](_0x3d6687=>!this[_0x4cfa03(0x1e3)][_0x4cfa03(0x1d8)][_0x4cfa03(0x2ff)](_0x3df3b9=>_0x3df3b9[_0x4cfa03(0x19f)][_0x4cfa03(0x1e9)]===_0x3d6687['id'])):_0x246b7a;if(!_0x246b7a[_0x4cfa03(0x29e)])return;const _0xf08750=DataConverterTable['getMaxTableRange'](this['_table'])+0x1;await UtilDocuments[_0x4cfa03(0x2b2)](this[_0x4cfa03(0x1e3)],await _0x246b7a[_0x4cfa03(0x2b1)](_0x4fab2b=>DataConverterTable['pGetTableResult']({'type':CONST[_0x4cfa03(0x225)][_0x4cfa03(0x2ab)],'text':_0x4fab2b[_0x4cfa03(0x1c4)],'resultId':_0x4fab2b['id'],'collection':this[_0x4cfa03(0x1fc)]['collection'],'rangeExact':_0xf08750,'img':_0x4fab2b['img']})),{'propData':_0x4cfa03(0x1d8),'ClsEmbed':TableResult});}[_0x22f42b(0x2a9)](_0x19a96f,_0x2cc62c){const _0x7435b2=_0x22f42b;throw new Error(_0x7435b2(0x220));}async['pGetChooseImporterUserDataForSources'](){}[_0x22f42b(0x25f)](_0x594c76){const _0x2979ce=_0x22f42b,_0x101248=Parser[_0x2979ce(0x2ed)](this['_content'][_0x594c76['ix']][_0x2979ce(0x247)]),_0x5d77a6=DataUtil[_0x2979ce(0x218)][_0x2979ce(0x1db)](this[_0x2979ce(0x209)][_0x594c76['ix']],_0x101248);return'@'+_0x101248+'['+_0x5d77a6+']';}}ImportList['_STO_K_FOLDER_PATH_SPEC']='ImportList.folderKeyPathSpec',ImportList['_suppressCreateSheetItemHookTimeStart']=null;const MixinUserChooseImporter=_0x245637=>class extends _0x245637{constructor(_0x394492,_0x7ee64e,_0x23a054,_0x5841e6={}){const _0x18042c=_0x22f42b;super(_0x394492,_0x7ee64e,_0x23a054),this['_isRadio']=!![],this['_isResolveOnClose']=!![],this[_0x18042c(0x1e2)]=null,this[_0x18042c(0x228)]=null,this[_0x18042c(0x2f4)]=null,this['_isForceImportToTempDirectory']=!!_0x5841e6['isForceImportToTempDirectory'];}[_0x22f42b(0x22a)](){const _0x4e3ee0=_0x22f42b;return this[_0x4e3ee0(0x23f)]?{'isImportToTempDirectory':!![]}:{'isTemp':!![],'isDataOnly':!![]};}['_isImportSuccess'](_0x495c5e){const _0xd3d3b=_0x22f42b;return!this[_0xd3d3b(0x23f)]&&_0x495c5e[_0xd3d3b(0x213)]===UtilApplications[_0xd3d3b(0x2e3)]||this[_0xd3d3b(0x23f)]&&_0x495c5e['status']===UtilApplications[_0xd3d3b(0x309)];}async[_0x22f42b(0x2fc)](){const _0x1dd2b6=_0x22f42b;if(!this[_0x1dd2b6(0x30d)])return;try{const _0x44db75=this[_0x1dd2b6(0x30d)]['items']['find'](_0x2f3cfa=>_0x2f3cfa[_0x1dd2b6(0x19f)]['cbSel'][_0x1dd2b6(0x1bb)]);if(!_0x44db75)return ui[_0x1dd2b6(0x2e1)][_0x1dd2b6(0x226)]('Please\x20select\x20something\x20from\x20the\x20list!');this[_0x1dd2b6(0x1eb)]=![],this[_0x1dd2b6(0x21b)]();let _0x226b44=[this[_0x1dd2b6(0x209)][_0x44db75['ix']]];_0x226b44=await this[_0x1dd2b6(0x2ca)](_0x226b44);if(_0x226b44==null)return;const _0x4c9cfa=this[_0x1dd2b6(0x22a)](),_0x122322=await this[_0x1dd2b6(0x211)](_0x226b44[0x0],_0x4c9cfa);if(this['_isImportSuccess'](_0x122322))this['_fnResolve'](_0x122322?.[_0x1dd2b6(0x252)]?.[0x0]?.[_0x1dd2b6(0x257)]);else this[_0x1dd2b6(0x228)](new Error('Import\x20exited\x20with\x20status\x20\x22'+_0x122322[_0x1dd2b6(0x213)]['toString']()+'\x22'));_0x44db75[_0x1dd2b6(0x19f)]['cbSel'][_0x1dd2b6(0x1bb)]=![],_0x44db75[_0x1dd2b6(0x306)][_0x1dd2b6(0x2dd)][_0x1dd2b6(0x1a4)](_0x1dd2b6(0x29a));}catch(_0x196820){this[_0x1dd2b6(0x228)](_0x196820);}}[_0x22f42b(0x1ce)](_0x2068c6,_0x53cac1){const _0x494ac0=_0x22f42b;_0x53cac1[_0x494ac0(0x2f3)](_0x494ac0(0x28c),async _0x1a8268=>{const _0x1be45b=_0x494ac0;_0x1a8268['stopPropagation'](),_0x1a8268[_0x1be45b(0x294)]();try{let _0x11cdb7=[this[_0x1be45b(0x209)][_0x2068c6['ix']]];_0x11cdb7=await this[_0x1be45b(0x2ca)](_0x11cdb7);if(_0x11cdb7==null)return;const _0x2e6702=this[_0x1be45b(0x22a)](),_0x1401c7=await this[_0x1be45b(0x211)](_0x11cdb7[0x0],_0x2e6702);if(this[_0x1be45b(0x304)](_0x1401c7))this[_0x1be45b(0x1e2)](_0x1401c7?.[_0x1be45b(0x252)]?.[0x0]?.[_0x1be45b(0x257)]);else this[_0x1be45b(0x228)](new Error(_0x1be45b(0x245)+_0x1401c7[_0x1be45b(0x213)][_0x1be45b(0x23e)]()+'\x22'));this[_0x1be45b(0x21b)]();}catch(_0x5c9b7a){this[_0x1be45b(0x228)](_0x5c9b7a);}});}async[_0x22f42b(0x21b)](..._0x504150){const _0xd235b1=_0x22f42b;await super[_0xd235b1(0x21b)](..._0x504150);if(this['_isResolveOnClose'])this['_fnResolve'](null);}async[_0x22f42b(0x279)](..._0x26183a){const _0x4ed5bb=_0x22f42b;await super['pPreRender'](..._0x26183a);if(!_0x26183a?.[_0x4ed5bb(0x29e)])return;const [{fnResolve:_0x1796f2,fnReject:_0x3b9396,pResult:_0x4ad50c}]=_0x26183a;this[_0x4ed5bb(0x1eb)]=!![],this['_fnResolve']=_0x1796f2,this[_0x4ed5bb(0x228)]=_0x3b9396,this[_0x4ed5bb(0x2f4)]=_0x4ad50c;}static async[_0x22f42b(0x2d1)](_0x3e6ce8,_0x5eddcb){const _0x3a6680=_0x22f42b,{ChooseImporter:_0x489e59}=await import(_0x3a6680(0x21e)),_0x28b566=new this({});await _0x28b566[_0x3a6680(0x1f1)]();let _0x5042e5=null,_0x5380dc=null;const _0x318d2e=new Promise((_0x6ca0f8,_0x36da37)=>{_0x5042e5=_0x6ca0f8,_0x5380dc=_0x36da37;}),_0x27a4e3=new _0x489e59({'mode':new _0x489e59['Mode']({..._0x3e6ce8,'importerInstance':_0x28b566}),'namespace':_0x5eddcb,'isAlwaysCloseWindow':!![],'isTemp':!![],'importerPreRenderArgs':{'fnResolve':_0x5042e5,'fnReject':_0x5380dc,'pResult':_0x318d2e}});if(_0x27a4e3['isMaybeSkippable']()){if(await _0x27a4e3[_0x3a6680(0x27f)]())return _0x27a4e3[_0x3a6680(0x260)]({'isSilent':!![],'isBackground':!![]})['then'](null),_0x318d2e;}return _0x27a4e3['render'](!![]),_0x318d2e;}};class ImportSummary{constructor({imported:_0x118e09,status:_0x25161c}){const _0x2a7db4=_0x22f42b;this['imported']=_0x118e09,this[_0x2a7db4(0x213)]=_0x25161c;}static[_0x22f42b(0x2c1)](){const _0x54463e=_0x22f42b;return new this({'status':UtilApplications[_0x54463e(0x298)]});}static[_0x22f42b(0x2fe)](){const _0x45b122=_0x22f42b;return new this({'imported':[],'status':UtilApplications[_0x45b122(0x309)]});}}class ImportedDocument{constructor({name:name=null,isExisting:isExisting=![],document:document=null,actor:actor=null,embeddedDocument:embeddedDocument=null,pack:pack=null}){const _0x164f2b=_0x22f42b;if(document&&embeddedDocument)throw new Error('Only\x20one\x20of\x20\x22document\x22\x20and\x20\x22embeddedDocument\x22\x20may\x20be\x20specified!');if(actor&&pack)throw new Error(_0x164f2b(0x1d9));this[_0x164f2b(0x1c4)]=name,this[_0x164f2b(0x310)]=isExisting,this[_0x164f2b(0x257)]=document,this[_0x164f2b(0x19a)]=actor,this[_0x164f2b(0x30a)]=embeddedDocument,this[_0x164f2b(0x1bc)]=pack;}}class ImportCustomizer extends Application{constructor(_0x15154a,_0x63c9d3,{title:_0x1cc545,template:_0x146a70,titleSearch:_0x4e89cc,isActor:_0x4cef27}){const _0x312f0d=_0x22f42b;super({'title':_0x1cc545,'template':_0x146a70,'width':0x3c0,'height':Util[_0x312f0d(0x1af)](),'resizable':!![]}),this['_dataList']=_0x15154a,this[_0x312f0d(0x264)]=_0x63c9d3,this[_0x312f0d(0x217)]=_0x4e89cc,this[_0x312f0d(0x1a7)]=_0x4cef27,this[_0x312f0d(0x30d)]=null,this['_$btnReset']=null;}['getData'](){const _0x40a5cd=_0x22f42b;return{'titleSearch':this[_0x40a5cd(0x217)],'isActor':this[_0x40a5cd(0x1a7)]};}[_0x22f42b(0x244)](_0x308c9f){const _0x4baaaa=_0x22f42b;super[_0x4baaaa(0x244)](_0x308c9f),this[_0x4baaaa(0x262)]({'$html':_0x308c9f});const _0x5d8e88=_0x308c9f[_0x4baaaa(0x281)](_0x4baaaa(0x1b5));SortUtil[_0x4baaaa(0x1fd)](_0x5d8e88,this[_0x4baaaa(0x30d)]),this[_0x4baaaa(0x291)]({'$html':_0x308c9f,'$wrpBtnsSort':_0x5d8e88});if(this['_$btnReset'])this[_0x4baaaa(0x19c)][_0x4baaaa(0x28c)]();}[_0x22f42b(0x262)]({$html:_0x307d0a}){const _0x7f518d=_0x22f42b;throw new Error(_0x7f518d(0x266));}[_0x22f42b(0x291)]({$html:_0x3c9dff,$wrpBtnsSort:_0x2eec51}){throw new Error('Unimplemented');}async[_0x22f42b(0x21b)](){const _0x2a8fbe=_0x22f42b;return this[_0x2a8fbe(0x264)](null),super['close']();}}export{ImportList,MixinUserChooseImporter,ImportSummary,ImportedDocument,ImportCustomizer};