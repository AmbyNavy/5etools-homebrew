const _0x38a3d8=_0x457e;(function(_0xc543bd,_0x460278){const _0x5a8cb6=_0x457e,_0x184285=_0xc543bd();while(!![]){try{const _0xf3182d=parseInt(_0x5a8cb6(0x1e1))/0x1+-parseInt(_0x5a8cb6(0x1b4))/0x2*(-parseInt(_0x5a8cb6(0x1a6))/0x3)+parseInt(_0x5a8cb6(0x16b))/0x4*(-parseInt(_0x5a8cb6(0x1dc))/0x5)+parseInt(_0x5a8cb6(0x17f))/0x6+parseInt(_0x5a8cb6(0x1c7))/0x7*(-parseInt(_0x5a8cb6(0x170))/0x8)+parseInt(_0x5a8cb6(0x1c8))/0x9+-parseInt(_0x5a8cb6(0x176))/0xa*(parseInt(_0x5a8cb6(0x1b9))/0xb);if(_0xf3182d===_0x460278)break;else _0x184285['push'](_0x184285['shift']());}catch(_0x10f973){_0x184285['push'](_0x184285['shift']());}}}(_0x28e4,0xbcd6a));import{Config}from'./Config.js';import{SharedConsts}from'../shared/SharedConsts.js';import{ConfigConsts}from'./ConfigConsts.js';function _0x457e(_0x2d71ae,_0x143661){const _0x28e456=_0x28e4();return _0x457e=function(_0x457ea1,_0x2560ee){_0x457ea1=_0x457ea1-0x16a;let _0x240bf0=_0x28e456[_0x457ea1];return _0x240bf0;},_0x457e(_0x2d71ae,_0x143661);}import{UtilCompat}from'./UtilCompat.js';import{UtilHooks}from'./UtilHooks.js';import{LGT}from'./Util.js';function _0x28e4(){const _0x5003cd=['\x22\x20Compendium\x20Name','pGetUserCreatePack','importVehicle','metadata','_COMPENDIUM_CACHES_LOCK','pGetActorItemCompendiumImage','3328590ObLWmQ','length','pGetCompendiumImage','SRD_COMPENDIUMS_CREATURES','importSpell','getIndex','_pGetCacheAndGetActorItemCompendiumData','_COMPENDIUM_CACHE_KEY_DATA','MODULE_NAME_FAKE','world','ascSortLower','monsterFeature','baseCacheId','_pCacheCompendium','_pGetCacheAndGetCompendiumData','packs','Unknown\x20cache\x20ID\x20\x22','unshift','monster','pGetUserString','forEach','stringToSlug','map','PACK_NAME_ITEMS','PG_SPELLS','srd','cacheId','importRace','classFeature','Item','join','_pGetPlutoniumCompendiumId_generic','additionalDataCompendium','isIgnoreSrd','find','img','string','get','data','1113wauZDq','_state','race','system','\x0a\x09\x09</select>','item','entries','collection','_COMPENDIUM_CACHE_KEY_IMAGE','_COMPENDIUM_IMAGE_LAST_VALUES','page','flags','optionalfeature','___','5578mAAneb','_COMPENDIUM_ACTOR_CACHES','babele','importClass','PG_BESTIARY','44QdrFxI','unlock','PG_ITEMS','warn','_getCompendiumDocOriginalName','_getCachedCompendiumData','name','push','toLowerCase','pLock','PACK_NAME_CREATURES','items','_pHandleConfigUpdate_pFlushCompendiumImageCaches','init','4088ayWNmB','12828051cgLtKc','_COMPENDIUM_ACTOR_CACHES_LOCK','filter','fnGetAliases','_isCompendiumCached','pGetPlutoniumCompendiumId','Loading\x20of\x20','<option\x20value=\x22','importItem','_displayName','$getSelCompendium','getOrSet','text','getAvailablePacks','class','raceFeature','importOptionalFeature','importCreature','replace','_COMPENDIUM_CACHES','2973860xQQRMH','pGetCompendiumData','hash','sort','_PLUT_CACHES','1112667bhVwAl','<div\x20class=\x22w-100\x20italic\x22></div>','deepKeys','_PLUT_CACHES_LOCKS','4WJVRVX','MODULE_NAME','\x20seconds!\x20This\x20usually\x20means\x20the\x20compendium\x20is\x20inaccessible.\x20Cancelling\x20compendium\x20load.','_pHandleConfigUpdate','spell','11096kUGrkY','copy','_getCleanCompendiumContentName','getDocuments','_pGetCacheAndGetCompendiumData_getCompendiums','createCompendium','4873070zYJXOJ','trim','additionalDataCompendiumFeatures'];_0x28e4=function(){return _0x5003cd;};return _0x28e4();}class UtilCompendium{static[_0x38a3d8(0x1c6)](){const _0x5cab3f=_0x38a3d8;UtilHooks['on'](UtilHooks['HK_CONFIG_UPDATE'],()=>this['_pHandleConfigUpdate']()),this[_0x5cab3f(0x16e)]();}static async[_0x38a3d8(0x16e)](){const _0x6cf488=_0x38a3d8;await this[_0x6cf488(0x1c5)]();}static async[_0x38a3d8(0x1c5)](){const _0x16e20a=_0x38a3d8,_0x259557=[['importCreature','additionalDataCompendium'],[_0x16e20a(0x1d9),_0x16e20a(0x178)],[_0x16e20a(0x17b),_0x16e20a(0x19f)],[_0x16e20a(0x1b7),_0x16e20a(0x19f)],[_0x16e20a(0x1b7),_0x16e20a(0x178)],['importItem',_0x16e20a(0x19f)],[_0x16e20a(0x19a),_0x16e20a(0x19f)],[_0x16e20a(0x19a),_0x16e20a(0x178)],[_0x16e20a(0x183),_0x16e20a(0x19f)],['importOptionalFeature','additionalDataCompendium']];await this[_0x16e20a(0x17d)][_0x16e20a(0x1c2)]();try{_0x259557['forEach'](_0x505a67=>{const _0x7470f9=_0x16e20a,_0x5317d2=_0x505a67[_0x7470f9(0x19d)](_0x7470f9(0x1b3)),_0x3ecc86=this[_0x7470f9(0x1af)][_0x5317d2]||'',_0x4ced0c=Config[_0x7470f9(0x1a4)](_0x505a67[0x0],_0x505a67[0x1])||'';if(_0x3ecc86['trim']()!==_0x4ced0c['trim']()){if(this['_COMPENDIUM_CACHES'][this[_0x7470f9(0x1ae)]])delete this[_0x7470f9(0x1db)][this['_COMPENDIUM_CACHE_KEY_IMAGE']][_0x5317d2];}this[_0x7470f9(0x1af)][_0x5317d2]=_0x4ced0c;});}finally{this['_COMPENDIUM_CACHES_LOCK']['unlock']();}}static async[_0x38a3d8(0x1dd)](_0x39b89e,_0x3dcf13){const _0x3fc44e=_0x38a3d8;_0x3dcf13=_0x3dcf13||UtilCompat['isBabeleActive']();const _0xf0d72f=0xa,_0x750639=await Promise[_0x3fc44e(0x1a8)]([_0x3dcf13?_0x39b89e[_0x3fc44e(0x173)]():_0x39b89e[_0x3fc44e(0x184)](),MiscUtil['pDelay'](_0xf0d72f*0x3e8,null)]);if(!_0x750639)return console[_0x3fc44e(0x1bc)](...LGT,_0x3fc44e(0x1ce)+_0x39b89e?.['metadata']?.[_0x3fc44e(0x1a9)]+'.'+_0x39b89e?.[_0x3fc44e(0x17c)]?.[_0x3fc44e(0x1bf)]+'\x20took\x20more\x20than\x20'+_0xf0d72f+_0x3fc44e(0x16d)),[];return _0x750639;}static async[_0x38a3d8(0x181)](_0x284b57,_0x46664f,_0x492db3){const _0x5b799c=_0x38a3d8;return this['_pGetCacheAndGetCompendiumData'](this[_0x5b799c(0x1ae)],_0x284b57,_0x46664f,_0x492db3);}static async[_0x38a3d8(0x18d)](_0x338ac5,_0x2d6e0e,_0x54c953,_0x2ed5eb){const _0x2d5bf1=_0x38a3d8;_0x2ed5eb=_0x2ed5eb||{};if(!_0x2ed5eb[_0x2d5bf1(0x1a0)]&&!_0x54c953[_0x2d5bf1(0x198)])return null;let _0x1ee44c=[];if(_0x54c953[_0x2d5bf1(0x1bf)])_0x1ee44c[_0x2d5bf1(0x1c0)]((typeof _0x54c953[_0x2d5bf1(0x198)]===_0x2d5bf1(0x1a3)?_0x54c953[_0x2d5bf1(0x198)]:_0x54c953[_0x2d5bf1(0x1bf)])[_0x2d5bf1(0x1c1)]()[_0x2d5bf1(0x177)]());if(_0x54c953[_0x2d5bf1(0x1d1)])_0x1ee44c[_0x2d5bf1(0x1c0)](_0x54c953[_0x2d5bf1(0x1d1)]['toLowerCase']()[_0x2d5bf1(0x177)]());if(_0x2ed5eb[_0x2d5bf1(0x1e3)]){_0x1ee44c=_0x1ee44c['map'](_0x59b088=>({'name':_0x59b088}));if(_0x2ed5eb[_0x2d5bf1(0x1cb)]){const _0x1fc74f=_0x2ed5eb[_0x2d5bf1(0x1cb)](_0x54c953);_0x1fc74f[_0x2d5bf1(0x193)](_0x22631f=>_0x22631f[_0x2d5bf1(0x1bf)]=_0x22631f[_0x2d5bf1(0x1bf)]?_0x22631f[_0x2d5bf1(0x1bf)]['toLowerCase']()[_0x2d5bf1(0x177)]():_0x22631f[_0x2d5bf1(0x1bf)]),_0x1ee44c[_0x2d5bf1(0x190)](..._0x1fc74f);}}else{if(_0x2ed5eb['fnGetAliases'])_0x1ee44c[_0x2d5bf1(0x1c0)](..._0x2ed5eb[_0x2d5bf1(0x1cb)](_0x54c953)[_0x2d5bf1(0x195)](_0x4ecd55=>_0x4ecd55[_0x2d5bf1(0x1c1)]()['trim']()));}let _0x12af95;switch(_0x2d6e0e){case _0x2d5bf1(0x16f):_0x12af95=this['_pGetCacheAndGetCompendiumData_getCompendiums'](Config[_0x2d5bf1(0x1a4)](_0x2d5bf1(0x183),'additionalDataCompendium'));break;case _0x2d5bf1(0x191):_0x12af95=this[_0x2d5bf1(0x174)](Config[_0x2d5bf1(0x1a4)](_0x2d5bf1(0x1d9),_0x2d5bf1(0x19f)));break;case _0x2d5bf1(0x1ab):_0x12af95=this[_0x2d5bf1(0x174)](Config[_0x2d5bf1(0x1a4)](_0x2d5bf1(0x1d0),_0x2d5bf1(0x19f)));break;case _0x2d5bf1(0x1d6):_0x12af95=this[_0x2d5bf1(0x174)](Config['get'](_0x2d5bf1(0x1b7),_0x2d5bf1(0x19f)));break;case _0x2d5bf1(0x19b):_0x12af95=this[_0x2d5bf1(0x174)](Config[_0x2d5bf1(0x1a4)](_0x2d5bf1(0x1b7),_0x2d5bf1(0x178)));break;case'subclassFeature':_0x12af95=this['_pGetCacheAndGetCompendiumData_getCompendiums'](Config[_0x2d5bf1(0x1a4)](_0x2d5bf1(0x1b7),_0x2d5bf1(0x178)));break;case _0x2d5bf1(0x1b2):_0x12af95=this[_0x2d5bf1(0x174)](Config[_0x2d5bf1(0x1a4)](_0x2d5bf1(0x1d8),_0x2d5bf1(0x19f)));break;case'race':_0x12af95=this[_0x2d5bf1(0x174)](Config['get'](_0x2d5bf1(0x19a),_0x2d5bf1(0x19f)));break;case _0x2d5bf1(0x1d7):_0x12af95=this[_0x2d5bf1(0x174)](Config[_0x2d5bf1(0x1a4)](_0x2d5bf1(0x19a),_0x2d5bf1(0x178)));break;case _0x2d5bf1(0x18a):_0x12af95=this['_pGetCacheAndGetCompendiumData_getCompendiums'](Config[_0x2d5bf1(0x1a4)](_0x2d5bf1(0x1d9),_0x2d5bf1(0x178)));break;default:return null;}if(!_0x12af95[_0x2d5bf1(0x180)])return null;_0x2ed5eb[_0x2d5bf1(0x1e3)]&&(_0x338ac5={'baseCacheId':_0x338ac5,'deepKeys':_0x2ed5eb[_0x2d5bf1(0x1e3)],'cacheId':[_0x338ac5,..._0x2ed5eb[_0x2d5bf1(0x1e3)][_0x2d5bf1(0x1df)](SortUtil[_0x2d5bf1(0x189)])][_0x2d5bf1(0x19d)]('__')});await this[_0x2d5bf1(0x17d)][_0x2d5bf1(0x1c2)]();try{for(const _0x59bd9c of _0x1ee44c){for(const _0x1a9ae7 of _0x12af95){!this[_0x2d5bf1(0x1cc)](this['_COMPENDIUM_CACHES'],_0x338ac5,_0x1a9ae7)&&await this['_pCacheCompendium'](this[_0x2d5bf1(0x1db)],_0x338ac5,_0x1a9ae7);const _0x22b059=this[_0x2d5bf1(0x1be)](this[_0x2d5bf1(0x1db)],_0x338ac5,_0x1a9ae7,_0x59bd9c);if(_0x22b059)return _0x22b059;}}}finally{this['_COMPENDIUM_CACHES_LOCK'][_0x2d5bf1(0x1ba)]();}}static['_pGetCacheAndGetCompendiumData_getCompendiums'](_0xfecf46){const _0x44ffea=_0x38a3d8;return _0xfecf46=typeof _0xfecf46===_0x44ffea(0x1a3)?_0xfecf46['split'](',')[_0x44ffea(0x195)](_0x189ea1=>_0x189ea1[_0x44ffea(0x177)]()[_0x44ffea(0x1c1)]()):_0xfecf46[_0x44ffea(0x195)](_0x28c95c=>_0x28c95c['toLowerCase']()),_0xfecf46['map'](_0x2f5fda=>game[_0x44ffea(0x18e)][_0x44ffea(0x1a1)](_0x19a0a2=>_0x19a0a2['collection'][_0x44ffea(0x1c1)]()===_0x2f5fda))[_0x44ffea(0x1ca)](Boolean);}static async[_0x38a3d8(0x17e)](_0x381f0f,_0x31b305,_0x15ca45){const _0x211bb8=_0x38a3d8;return this['_pGetCacheAndGetActorItemCompendiumData'](this[_0x211bb8(0x1ae)],_0x381f0f,_0x31b305,_0x15ca45);}static async[_0x38a3d8(0x185)](_0xccfad7,_0x413e37,_0xe57613,_0x504a2d){const _0x51848c=_0x38a3d8;_0x504a2d=_0x504a2d||{};let _0x28310b=[];if(_0xe57613[_0x51848c(0x1bf)])_0x28310b[_0x51848c(0x1c0)]((typeof _0xe57613[_0x51848c(0x198)]===_0x51848c(0x1a3)?_0xe57613[_0x51848c(0x198)]:_0xe57613['name'])[_0x51848c(0x1c1)]()[_0x51848c(0x177)]());if(_0xe57613[_0x51848c(0x1d1)])_0x28310b[_0x51848c(0x1c0)](_0xe57613['_displayName'][_0x51848c(0x1c1)]()[_0x51848c(0x177)]());if(_0x504a2d[_0x51848c(0x1cb)])_0x28310b[_0x51848c(0x1c0)](..._0x504a2d[_0x51848c(0x1cb)](_0xe57613)[_0x51848c(0x195)](_0x45d072=>_0x45d072[_0x51848c(0x1c1)]()[_0x51848c(0x177)]()));let _0x6019f0;switch(_0xccfad7){case this[_0x51848c(0x1ae)]:{switch(_0x413e37){case'monsterFeature':_0x6019f0=this[_0x51848c(0x174)](Config[_0x51848c(0x1a4)]('importCreature',_0x51848c(0x19f)));break;default:return null;}break;}case this[_0x51848c(0x186)]:{switch(_0x413e37){case _0x51848c(0x18a):_0x6019f0=this[_0x51848c(0x174)](ConfigConsts[_0x51848c(0x182)]);break;default:return null;}break;}default:throw new Error(_0x51848c(0x18f)+_0xccfad7+'\x22');}if(!_0x6019f0['length'])return null;await this[_0x51848c(0x1c9)][_0x51848c(0x1c2)]();try{for(const _0x526712 of _0x28310b){for(const _0x1f531b of _0x6019f0){!this[_0x51848c(0x1cc)](this['_COMPENDIUM_ACTOR_CACHES'],_0xccfad7,_0x1f531b)&&await this['_pCacheActorItemCompendium'](this[_0x51848c(0x1b5)],_0xccfad7,_0x1f531b);const _0x4d9159=this[_0x51848c(0x1be)](this[_0x51848c(0x1b5)],_0xccfad7,_0x1f531b,_0x526712);if(_0x4d9159)return _0x4d9159;}}}finally{this[_0x51848c(0x1c9)][_0x51848c(0x1ba)]();}}static async['getSrdCompendiumEntity'](_0x256c6c,_0x54a897,_0x50114c){const _0x2b3820=_0x38a3d8;return this[_0x2b3820(0x18d)](this[_0x2b3820(0x186)],_0x256c6c,_0x54a897,_0x50114c);}static['_isCompendiumCached'](_0x4c5082,_0x223059,_0x429a7b){const _0x3203ac=_0x38a3d8;return _0x223059=_0x223059[_0x3203ac(0x199)]||_0x223059,!!MiscUtil[_0x3203ac(0x1a4)](_0x4c5082,_0x223059,_0x429a7b[_0x3203ac(0x1ad)]);}static async[_0x38a3d8(0x18c)](_0x179ba5,_0x1d0e1d,_0x2c150c){const _0x1ca2b2=_0x38a3d8;let _0x38b1e7;if(_0x1d0e1d['baseCacheId'])_0x38b1e7=!![];else switch(_0x1d0e1d){case this['_COMPENDIUM_CACHE_KEY_IMAGE']:_0x38b1e7=![];break;case this[_0x1ca2b2(0x186)]:_0x38b1e7=!![];break;default:throw new Error('Unknown\x20cache\x20ID\x20\x22'+_0x1d0e1d+'\x22');}const _0x3ed4d2=await this[_0x1ca2b2(0x1dd)](_0x2c150c,_0x38b1e7),_0x406457=MiscUtil[_0x1ca2b2(0x1d3)](_0x179ba5,_0x1d0e1d[_0x1ca2b2(0x199)]||_0x1d0e1d,_0x2c150c[_0x1ca2b2(0x1ad)],{});if(!_0x3ed4d2)return;if(_0x1d0e1d[_0x1ca2b2(0x18b)])_0x3ed4d2[_0x1ca2b2(0x193)](_0x1d4b58=>_0x406457[this[_0x1ca2b2(0x172)](this[_0x1ca2b2(0x1bd)](_0x1d4b58))]=MiscUtil[_0x1ca2b2(0x171)](_0x1d4b58[_0x1ca2b2(0x1a5)]));else switch(_0x1d0e1d){case this['_COMPENDIUM_CACHE_KEY_IMAGE']:_0x3ed4d2[_0x1ca2b2(0x193)](_0x211858=>_0x406457[this[_0x1ca2b2(0x172)](this['_getCompendiumDocOriginalName'](_0x211858))]=_0x211858[_0x1ca2b2(0x1a2)]);break;case this[_0x1ca2b2(0x186)]:_0x3ed4d2[_0x1ca2b2(0x193)](_0xbaf583=>_0x406457[this[_0x1ca2b2(0x172)](this[_0x1ca2b2(0x1bd)](_0xbaf583))]=MiscUtil['copy'](_0xbaf583['data']));break;default:throw new Error(_0x1ca2b2(0x18f)+_0x1d0e1d+'\x22');}}static async['_pCacheActorItemCompendium'](_0x4c0222,_0x48080e,_0x26aa2){const _0x591131=_0x38a3d8,_0x492a24=await this[_0x591131(0x1dd)](_0x26aa2,!![]),_0x22d774=MiscUtil[_0x591131(0x1d3)](_0x4c0222,_0x48080e[_0x591131(0x199)]||_0x48080e,_0x26aa2[_0x591131(0x1ad)],{});if(!_0x492a24)return;_0x492a24['forEach'](_0x37579a=>{const _0x34ee28=_0x591131;_0x37579a[_0x34ee28(0x1c4)][_0x34ee28(0x193)](_0x2a8635=>{const _0x3b2227=_0x34ee28,_0x27219f=this[_0x3b2227(0x172)](this[_0x3b2227(0x1bd)](_0x2a8635));switch(_0x48080e){case this[_0x3b2227(0x1ae)]:{if(!_0x2a8635['img']||_0x2a8635[_0x3b2227(0x1a2)][_0x3b2227(0x1c1)]()['includes']('mystery-man.svg'))return;_0x22d774[_0x27219f]=_0x22d774[_0x27219f]||_0x2a8635[_0x3b2227(0x1a2)];break;}case this[_0x3b2227(0x186)]:_0x22d774[_0x27219f]=_0x22d774[_0x27219f]||MiscUtil[_0x3b2227(0x171)](_0x2a8635[_0x3b2227(0x1a5)]);break;default:throw new Error(_0x3b2227(0x18f)+_0x48080e+'\x22');}});});}static[_0x38a3d8(0x1be)](_0x36930d,_0x56c748,_0x58507a,_0x1bec3a){const _0xd2bbaf=_0x38a3d8,_0x588e61=MiscUtil['get'](_0x36930d,_0x56c748[_0xd2bbaf(0x199)]||_0x56c748,_0x58507a[_0xd2bbaf(0x1ad)]);if(!_0x588e61)return null;const _0x6018df=_0x588e61[_0x1bec3a[_0xd2bbaf(0x1bf)]||_0x1bec3a];if(!_0x6018df||typeof _0x1bec3a==='string')return _0x6018df;const _0xcce0fc=Object[_0xd2bbaf(0x1ac)](_0x1bec3a)[_0xd2bbaf(0x1ca)](([_0x103952])=>_0x103952!==_0xd2bbaf(0x1bf))['every'](([_0x309578,_0x22c842])=>{const _0x5cfb31=_0xd2bbaf;if(typeof _0x22c842===_0x5cfb31(0x1a3))_0x22c842=_0x22c842[_0x5cfb31(0x1c1)]()['trim']();let _0xf3c8b3;const _0x24a240=_0x309578['split']('.');for(const _0x130a3d of _0x24a240){_0xf3c8b3=(_0xf3c8b3||_0x6018df)[_0x130a3d];if(_0xf3c8b3===undefined)return![];}if(typeof _0xf3c8b3==='string')_0xf3c8b3=this['_getCleanCompendiumContentName'](_0xf3c8b3);return _0xf3c8b3===_0x22c842;});if(!_0xcce0fc)return null;switch(_0x56c748[_0xd2bbaf(0x18b)]){case this[_0xd2bbaf(0x1ae)]:return _0x6018df['img'];case this[_0xd2bbaf(0x186)]:return _0x6018df;default:throw new Error(_0xd2bbaf(0x18f)+_0x56c748[_0xd2bbaf(0x18b)]+'\x22');}}static[_0x38a3d8(0x1bd)](_0x3e47ba){const _0x2a81bc=_0x38a3d8;if(!UtilCompat['isBabeleActive']())return _0x3e47ba[_0x2a81bc(0x1bf)];return _0x3e47ba['getFlag'](_0x2a81bc(0x1b6),'originalName')||_0x3e47ba[_0x2a81bc(0x1bf)];}static[_0x38a3d8(0x172)](_0x6a2ab){const _0x24f069=_0x38a3d8;return _0x6a2ab[_0x24f069(0x177)]()[_0x24f069(0x1c1)]()[_0x24f069(0x1da)](CleanUtil['SHARED_REPLACEMENTS_REGEX'],_0x19ae66=>CleanUtil['SHARED_REPLACEMENTS'][_0x19ae66]);}static[_0x38a3d8(0x1cd)](_0x33d27a,_0x30957a){const _0x515d43=_0x38a3d8;switch(_0x33d27a){case UrlUtil[_0x515d43(0x1b8)]:return this[_0x515d43(0x19e)]({'page':_0x33d27a,'hash':_0x30957a,'packName':SharedConsts[_0x515d43(0x1c3)]});case UrlUtil[_0x515d43(0x1bb)]:return this[_0x515d43(0x19e)]({'page':_0x33d27a,'hash':_0x30957a,'packName':SharedConsts[_0x515d43(0x196)]});case UrlUtil[_0x515d43(0x197)]:return this['_pGetPlutoniumCompendiumId_generic']({'page':_0x33d27a,'hash':_0x30957a,'packName':SharedConsts['PACK_NAME_SPELLS']});default:throw new Error('Unhandled\x20page\x20\x22'+_0x33d27a+'\x22');}}static async['_pGetPlutoniumCompendiumId_generic']({page:_0x1db574,hash:_0x54f52f,packName:_0x215b63}){const _0x52125e=_0x38a3d8,_0x48a89b=game['packs'][_0x52125e(0x1a4)](SharedConsts[_0x52125e(0x16c)]+'.'+_0x215b63);if(!_0x48a89b)return null;if(!UtilCompendium[_0x52125e(0x1e0)][_0x215b63]){const _0x1d8c18=UtilCompendium[_0x52125e(0x16a)][_0x215b63]||new VeLock();try{await _0x1d8c18[_0x52125e(0x1c2)]();if(!UtilCompendium[_0x52125e(0x1e0)][_0x215b63])UtilCompendium['_PLUT_CACHES'][_0x215b63]=await _0x48a89b[_0x52125e(0x173)]();}finally{_0x1d8c18[_0x52125e(0x1ba)]();}}const _0x45803d=UtilCompendium[_0x52125e(0x1e0)][_0x215b63]['find'](_0x156578=>_0x156578[_0x52125e(0x1a5)]?.[_0x52125e(0x1b1)]?.[SharedConsts[_0x52125e(0x187)]]?.[_0x52125e(0x1b0)]===_0x1db574&&_0x156578['data']?.[_0x52125e(0x1b1)]?.[SharedConsts[_0x52125e(0x187)]]?.[_0x52125e(0x1de)]===_0x54f52f);if(!_0x45803d)return null;return{'packName':_0x215b63,'packPackage':SharedConsts[_0x52125e(0x16c)],'packId':_0x45803d['id']};}static[_0x38a3d8(0x1d5)]({folderType:_0x5b8463}){const _0x2e89ab=_0x38a3d8;return game[_0x2e89ab(0x18e)]['filter'](_0x275801=>!_0x275801['locked']&&_0x275801[_0x2e89ab(0x17c)]['type']===_0x5b8463);}static async[_0x38a3d8(0x17a)]({folderType:_0x2f9572}){const _0x1f2647=_0x38a3d8,_0x1e047d=$(_0x1f2647(0x1e2)),_0x33b90d=await InputUiUtil[_0x1f2647(0x192)]({'title':'Enter\x20New\x20\x22'+_0x2f9572+_0x1f2647(0x179),'fnIsValid':_0xffec8e=>Parser[_0x1f2647(0x194)](_0xffec8e)[_0x1f2647(0x180)],'$elePost':$$`<label class="mb-2 split-v-center ve-muted">
					<div class="mr-2 bold no-wrap">Compendium ID:</div>
					${_0x1e047d}
				</label>`,'cbPostRender':({comp:_0x4a11b3,propValue:_0x37ed4f})=>{const _0x2f391e=_0x1f2647,_0x8f78b1=()=>_0x1e047d[_0x2f391e(0x1d4)](_0x4a11b3[_0x2f391e(0x1a7)][_0x37ed4f]?Parser[_0x2f391e(0x194)](_0x4a11b3[_0x2f391e(0x1a7)][_0x37ed4f])||'(Invalid)':'â€”');_0x4a11b3['_addHookBase'](_0x37ed4f,_0x8f78b1),_0x8f78b1();}});if(!_0x33b90d||!_0x33b90d[_0x1f2647(0x177)]())return null;return CompendiumCollection[_0x1f2647(0x175)]({'entity':_0x1f2647(0x19c),'label':_0x33b90d,'name':Parser['stringToSlug'](_0x33b90d),'package':_0x1f2647(0x188)});}static[_0x38a3d8(0x1d2)]({availablePacks:availablePacks=null,folderType:folderType=null}){const _0xa58b65=_0x38a3d8;return availablePacks=availablePacks||this[_0xa58b65(0x1d5)]({'folderType':folderType}),$('<select\x20class=\x22block\x20ve-foundry-button\x20m-0\x22>\x0a\x09\x09\x09'+availablePacks[_0xa58b65(0x195)](_0x5ca86c=>_0xa58b65(0x1cf)+_0x5ca86c[_0xa58b65(0x1ad)]+'\x22>'+_0x5ca86c[_0xa58b65(0x17c)]['label']+'</option>')['join']('')+_0xa58b65(0x1aa));}static['getPackByCollection']({collection:_0x5b9236}){const _0x1cf97d=_0x38a3d8;if(_0x5b9236==null)return null;return game[_0x1cf97d(0x18e)][_0x1cf97d(0x1a1)](_0x5b9bcf=>_0x5b9bcf['collection']===_0x5b9236);}}UtilCompendium['_COMPENDIUM_CACHE_KEY_IMAGE']='img',UtilCompendium[_0x38a3d8(0x186)]='data',UtilCompendium[_0x38a3d8(0x1af)]={},UtilCompendium[_0x38a3d8(0x1db)]={},UtilCompendium[_0x38a3d8(0x17d)]=new VeLock(),UtilCompendium['_COMPENDIUM_ACTOR_IMAGE_LAST_VALUES']={},UtilCompendium['_COMPENDIUM_ACTOR_CACHES']={},UtilCompendium['_COMPENDIUM_ACTOR_CACHES_LOCK']=new VeLock(),UtilCompendium[_0x38a3d8(0x1e0)]={},UtilCompendium[_0x38a3d8(0x16a)]={};export{UtilCompendium};