const _0x53deae=_0x35b1;(function(_0x2286a6,_0xc6dfff){const _0x46fe9c=_0x35b1,_0x44072b=_0x2286a6();while(!![]){try{const _0x36eceb=parseInt(_0x46fe9c(0x15c))/0x1*(parseInt(_0x46fe9c(0x146))/0x2)+parseInt(_0x46fe9c(0x10b))/0x3*(-parseInt(_0x46fe9c(0x11d))/0x4)+-parseInt(_0x46fe9c(0x103))/0x5*(-parseInt(_0x46fe9c(0xf8))/0x6)+-parseInt(_0x46fe9c(0x13c))/0x7+-parseInt(_0x46fe9c(0x126))/0x8+-parseInt(_0x46fe9c(0x13e))/0x9*(-parseInt(_0x46fe9c(0x16f))/0xa)+-parseInt(_0x46fe9c(0x108))/0xb*(parseInt(_0x46fe9c(0x124))/0xc);if(_0x36eceb===_0xc6dfff)break;else _0x44072b['push'](_0x44072b['shift']());}catch(_0x22a6e2){_0x44072b['push'](_0x44072b['shift']());}}}(_0x2d0b,0xba502));import{SharedConsts}from'../shared/SharedConsts.js';function _0x35b1(_0x467414,_0x58b7af){const _0x2d0be6=_0x2d0b();return _0x35b1=function(_0x35b11f,_0x5410ac){_0x35b11f=_0x35b11f-0xf8;let _0x478f57=_0x2d0be6[_0x35b11f];return _0x478f57;},_0x35b1(_0x467414,_0x58b7af);}import{Util}from'./Util.js';function _0x2d0b(){const _0x1b10bc=['1606dcHsfk','_$btnRun','render','7887wSoHMN','_entities','_pHandleBtnClick_run','Fvtt','doAbsorbItems','then','getValues','name','[name=\x22btn-reset\x22]','type','scrollLeft','_setMassCheckboxValues','[name=\x22btn-save\x22]','Task','ascSortLower','cbEachPlayer','entityMeta','metasPlayerUpdates','76vChnLH','[name=btn-filter]','Failed\x20to\x20update\x20','.permu__row-ent','trimState','value','STR_SEE_CONSOLE','74328dgYckk','playerPermissions','6234304STgvOx','/template/CollectionPermissionUpdater.hbs','text','_collection','teardown','disabled','data-permu-entity-id','...','_$btnReset','_collectionName','tagName','closest','click','scroll','label[data-permu-type=\x22lbl-entity-each-player\x22]','getFolderPath','filter','map','getData','.veapp__list','data','Updating\x20','4357388vAKZzt','getPermissionsEnum','1689759bJHyzL','select[name=\x22permu__sel-all-players-all-entities\x22]','_$rowMass','children','contents','_list','.search','_$cbEach','74RwNnim','addToFilters','bind','values','input[name=\x22permu__cb-all-players-all-entities\x22]','MODULE_LOCATION','push','SELECT','_pageFilter','ele','filterBox','_pUpdateItemPermissions','users','Updating...','getMaxWindowHeight','init','.fltr__mini-view','change','_absorbFnGetData','allPlayerUpdate','deepEquals','select[data-permu-type=\x22sel-entity-each-player\x22]','37203TFfDOb','items','val','_$iptSearch','[name=btn-toggle-summary]','Saving...','Save','_pHandleBtnClick_reset','length','visibleItems','_setMassAllPlayerCheckboxValues','data-permu-value','checked','Updated\x20','folder','forEach','find','permission','cbAllPlayers','60scYrRf','data-permu-player-id','path','prop','attr','default','toDisplay','handleSelectClick','setAttribute','findIndex','target','style','activateListeners','input','tool-permissions_','336qFYQlx','pInitFilterBox','input[name=\x22permu__cb-each-player-all-entities\x22]','cbsPlayers','selAllPlayers','Bulk\x20Permission\x20Editor','mergeMap','get','slice','.permu__cell-player','label[data-permu-type=\x22lbl-entity-player\x22]','55015LdgnRb','allPlayerPermissions','selsPlayers','_players','_sortEntities'];_0x2d0b=function(){return _0x1b10bc;};return _0x2d0b();}import{BaseCollectionTool}from'./BaseCollectionTool.js';import{UtilApplications}from'./UtilApplications.js';import{AppFilterBasic}from'./FilterApplications.js';class CollectionPermissionUpdater extends BaseCollectionTool{constructor(_0x33a70d){const _0x37bfb0=_0x35b1;super({'title':_0x37bfb0(0xfd),'template':SharedConsts[_0x37bfb0(0x14b)]+_0x37bfb0(0x127),'width':0x3c0,'height':Util[_0x37bfb0(0x154)](),'resizable':!![]},_0x33a70d),this[_0x37bfb0(0x14e)]=new AppFilterBasic(),this[_0x37bfb0(0x143)]=null,this['_$cbAll']=null,this[_0x37bfb0(0x140)]=null,this[_0x37bfb0(0x145)]=null,this['_$btnRun']=null,this[_0x37bfb0(0x15f)]=null,this[_0x37bfb0(0x12e)]=null,this[_0x37bfb0(0x106)]=null,this['_entities']=null;}['activateListeners'](_0x4a2b72){const _0x3d63e7=_0x35b1;super[_0x3d63e7(0x17b)](_0x4a2b72);const _0x4e18eb='-2',_0x45ac94=_0x4a2b72[0x0][_0x3d63e7(0x141)][0x2],_0x243324=$(_0x45ac94)[_0x3d63e7(0x16c)]('.permu__cell-ent-name')[_0x3d63e7(0x137)]((_0x129f59,_0x2f2c77)=>_0x2f2c77)[_0x3d63e7(0xff)]();_0x45ac94['addEventListener'](_0x3d63e7(0x133),()=>{const _0x53d1ba=_0x3d63e7,_0x5952c5=_0x45ac94[_0x53d1ba(0x115)];_0x243324[_0x53d1ba(0x16b)](_0x53642=>_0x53642[_0x53d1ba(0x17a)]['left']=_0x5952c5+'px');});const _0x538bbe=_0x45ac94['children'][0x1];this[_0x3d63e7(0x140)]=$(_0x538bbe);const _0x592300=this[_0x3d63e7(0x140)][_0x3d63e7(0x16c)](_0x3d63e7(0x13f))[_0x3d63e7(0x157)](()=>{const _0x194ceb=_0x3d63e7,_0x1472cb=_0x592300[_0x194ceb(0x15e)]();this[_0x194ceb(0x143)][_0x194ceb(0x165)][_0x194ceb(0x16b)](_0x59c9d7=>{const _0x3c603b=_0x194ceb;if(!_0x59c9d7[_0x3c603b(0x13a)][_0x3c603b(0x16e)][_0x3c603b(0x168)])return;_0x59c9d7[_0x3c603b(0x13a)][_0x3c603b(0xfc)][_0x3c603b(0x122)]=_0x1472cb,_0x59c9d7['data'][_0x3c603b(0xfc)]['setAttribute'](_0x3c603b(0x167),_0x1472cb);}),_0x592300[_0x194ceb(0x15e)](_0x4e18eb);});this['_$cbAll']=this['_$rowMass'][_0x3d63e7(0x16c)](_0x3d63e7(0x14a))[_0x3d63e7(0x157)](()=>{const _0xe9782=_0x3d63e7,_0x3ed72b=this['_$cbAll'][_0xe9782(0x172)](_0xe9782(0x168));this[_0xe9782(0x166)](_0x3ed72b),this[_0xe9782(0x143)]['visibleItems'][_0xe9782(0x16b)](_0x4258c0=>{const _0x4190e1=_0xe9782;_0x4258c0['data']['cbAllPlayers'][_0x4190e1(0x168)]=_0x3ed72b;});});const _0x164952=this[_0x3d63e7(0x140)]['find']('select[name=\x22permu__sel-each-player-all-entities\x22]')[_0x3d63e7(0x157)](()=>{const _0x324e69=_0x3d63e7,_0x6efce1=_0x164952['val'](),_0x588e46=this[_0x324e69(0x143)][_0x324e69(0x15d)][0x0]?this['_list']['items'][0x0]['data'][_0x324e69(0xfb)]['length']:0x0;for(let _0x3bfa9f=0x0;_0x3bfa9f<_0x588e46;++_0x3bfa9f){this[_0x324e69(0x143)][_0x324e69(0x165)][_0x324e69(0x16b)](_0x9eb287=>{const _0x11bdad=_0x324e69;if(!_0x9eb287[_0x11bdad(0x13a)][_0x11bdad(0xfb)][_0x3bfa9f][_0x11bdad(0x168)])return;_0x9eb287[_0x11bdad(0x13a)][_0x11bdad(0x105)][_0x3bfa9f][_0x11bdad(0x122)]=_0x6efce1,_0x9eb287[_0x11bdad(0x13a)][_0x11bdad(0x105)][_0x3bfa9f][_0x11bdad(0x177)](_0x11bdad(0x167),_0x6efce1);});}_0x164952['val'](_0x4e18eb);});this[_0x3d63e7(0x145)]=this['_$rowMass'][_0x3d63e7(0x16c)](_0x3d63e7(0xfa))[_0x3d63e7(0x157)](()=>{const _0x54f73f=_0x3d63e7,_0x719888=this[_0x54f73f(0x145)][_0x54f73f(0x172)](_0x54f73f(0x168));this['_setMassCheckboxValues'](_0x719888),this[_0x54f73f(0x143)]['visibleItems'][_0x54f73f(0x16b)](_0x21e9ae=>{const _0x3c4f2b=_0x54f73f;_0x21e9ae[_0x3c4f2b(0x13a)][_0x3c4f2b(0x11a)][_0x3c4f2b(0x168)]=_0x719888,_0x21e9ae[_0x3c4f2b(0x13a)][_0x3c4f2b(0xfb)][_0x3c4f2b(0x16b)](_0x48d67f=>_0x48d67f[_0x3c4f2b(0x168)]=_0x719888);});}),this['_$rowMass']['on'](_0x3d63e7(0x157),'select[data-permu-type=\x22sel-player-all-entities\x22]',_0x91b241=>{const _0x142edd=_0x3d63e7,_0x2b7df6=$(_0x91b241[_0x142edd(0x179)]),_0xd5fe3a=_0x2b7df6[_0x142edd(0x15e)](),_0x4b6f9c=_0x2b7df6['attr'](_0x142edd(0x170)),_0x36ebcd=this['_players'][_0x142edd(0x178)](_0x3b214e=>_0x3b214e['id']===_0x4b6f9c);this['_list']['visibleItems'][_0x142edd(0x16b)](_0x5d3777=>{const _0x4af827=_0x142edd;if(!_0x5d3777[_0x4af827(0x13a)]['cbsPlayers'][_0x36ebcd][_0x4af827(0x168)])return;_0x5d3777[_0x4af827(0x13a)][_0x4af827(0x105)][_0x36ebcd][_0x4af827(0x122)]=_0xd5fe3a,_0x5d3777[_0x4af827(0x13a)][_0x4af827(0x105)][_0x36ebcd][_0x4af827(0x177)](_0x4af827(0x167),_0xd5fe3a);}),_0x2b7df6[_0x142edd(0x15e)](_0x4e18eb);}),this[_0x3d63e7(0x140)]['on'](_0x3d63e7(0x132),'label[data-permu-type=\x22lbl-player-all-entities\x22]',_0x4ab9c8=>{const _0x13e05d=_0x3d63e7;if(_0x4ab9c8[_0x13e05d(0x179)][_0x13e05d(0x130)]==='SELECT')return;const _0x4bfca1=$(_0x4ab9c8[_0x13e05d(0x179)])['closest'](_0x13e05d(0x101)),_0x34abb3=_0x4bfca1[_0x13e05d(0x16c)](_0x13e05d(0x17c)),_0x33e860=_0x34abb3[_0x13e05d(0x172)](_0x13e05d(0x168)),_0x60ac44=_0x34abb3[_0x13e05d(0x173)](_0x13e05d(0x170)),_0x2b57b5=this[_0x13e05d(0x106)][_0x13e05d(0x178)](_0x3b734c=>_0x3b734c['id']===_0x60ac44);this[_0x13e05d(0x143)][_0x13e05d(0x165)][_0x13e05d(0x16b)](_0x332f8f=>{const _0x3c9ddc=_0x13e05d;_0x332f8f[_0x3c9ddc(0x13a)][_0x3c9ddc(0xfb)][_0x2b57b5][_0x3c9ddc(0x168)]=_0x33e860;});}),_0x4a2b72['on'](_0x3d63e7(0x157),'select[data-permu-type=\x22sel-entity-all-players\x22]',_0x92dc69=>{const _0x16eac2=_0x3d63e7,_0x265b32=$(_0x92dc69[_0x16eac2(0x179)]);_0x265b32[_0x16eac2(0x173)](_0x16eac2(0x167),_0x265b32[_0x16eac2(0x15e)]());}),_0x4a2b72['on'](_0x3d63e7(0x132),'label[data-permu-type=\x22lbl-entity-all-players\x22]',_0x3106b4=>{const _0x2aa506=_0x3d63e7;if(_0x3106b4['target'][_0x2aa506(0x130)]===_0x2aa506(0x14d))return;const _0x42dca2=$(_0x3106b4[_0x2aa506(0x179)])[_0x2aa506(0x131)](_0x2aa506(0x120)),_0x133ddc=_0x42dca2['attr'](_0x2aa506(0x12c)),_0x40d68a=this[_0x2aa506(0x143)][_0x2aa506(0x15d)]['find'](_0x251a4f=>_0x251a4f[_0x2aa506(0x149)]['id']===_0x133ddc);ListUiUtil[_0x2aa506(0x176)](this['_list'],_0x40d68a,_0x3106b4,{'fnGetCb':_0x1641f9=>_0x1641f9[_0x2aa506(0x13a)][_0x2aa506(0x16e)],'isNoHighlightSelection':!![],'fnOnSelectionChange':(_0x175eda,_0x422632)=>{const _0x2534cb=_0x2aa506;_0x175eda['data'][_0x2534cb(0x16e)]['checked']=_0x422632;}});}),_0x4a2b72['on']('change',_0x3d63e7(0x15b),_0x4db17a=>{const _0xfe3b2c=_0x3d63e7,_0x40a0da=$(_0x4db17a[_0xfe3b2c(0x179)]),_0x2a26de=_0x40a0da['val'](),_0x40e723=_0x40a0da[_0xfe3b2c(0x131)]('.permu__row-ent'),_0x203899=_0x40e723[_0xfe3b2c(0x173)](_0xfe3b2c(0x12c)),_0x3add58=this[_0xfe3b2c(0x143)]['items']['find'](_0x3e6df0=>_0x3e6df0[_0xfe3b2c(0x149)]['id']===_0x203899),_0xca8bd0=_0x3add58[_0xfe3b2c(0x13a)][_0xfe3b2c(0xfb)]['length'];for(let _0x171f85=0x0;_0x171f85<_0xca8bd0;++_0x171f85){if(!_0x3add58['data']['cbsPlayers'][_0x171f85]['checked'])continue;_0x3add58['data']['selsPlayers'][_0x171f85][_0xfe3b2c(0x122)]=_0x2a26de,_0x3add58[_0xfe3b2c(0x13a)][_0xfe3b2c(0x105)][_0x171f85][_0xfe3b2c(0x177)](_0xfe3b2c(0x167),_0x2a26de);}_0x40a0da[_0xfe3b2c(0x15e)](_0x4e18eb);}),_0x4a2b72['on'](_0x3d63e7(0x132),_0x3d63e7(0x134),_0x47145c=>{const _0x325f40=_0x3d63e7;if(_0x47145c[_0x325f40(0x179)][_0x325f40(0x130)]===_0x325f40(0x14d))return;const _0x1e5f08=$(_0x47145c[_0x325f40(0x179)])[_0x325f40(0x131)](_0x325f40(0x120)),_0x38e310=_0x1e5f08[_0x325f40(0x173)](_0x325f40(0x12c)),_0x50fb33=this[_0x325f40(0x143)][_0x325f40(0x15d)]['find'](_0x4d4d49=>_0x4d4d49[_0x325f40(0x149)]['id']===_0x38e310);ListUiUtil[_0x325f40(0x176)](this[_0x325f40(0x143)],_0x50fb33,_0x47145c,{'fnGetCb':_0x2448ca=>_0x2448ca[_0x325f40(0x13a)][_0x325f40(0x11a)],'isNoHighlightSelection':!![],'fnOnSelectionChange':(_0x392339,_0x51fc44)=>{const _0x2ed97c=_0x325f40;_0x392339[_0x2ed97c(0x13a)][_0x2ed97c(0xfb)][_0x2ed97c(0x16b)](_0x2f229a=>_0x2f229a['checked']=_0x51fc44);}});}),_0x4a2b72['on']('change','select[data-permu-type=\x22sel-entity\x22]',_0x437e3f=>{const _0x4a5e86=_0x3d63e7,_0x53f70b=$(_0x437e3f[_0x4a5e86(0x179)]);_0x53f70b[_0x4a5e86(0x173)](_0x4a5e86(0x167),_0x53f70b[_0x4a5e86(0x15e)]());}),_0x4a2b72['on'](_0x3d63e7(0x132),_0x3d63e7(0x102),_0x4c73bd=>{const _0x58f12e=_0x3d63e7;if(_0x4c73bd[_0x58f12e(0x179)][_0x58f12e(0x130)]==='SELECT')return;const _0x4c4d31=$(_0x4c73bd['target'])[_0x58f12e(0x131)](_0x58f12e(0x120)),_0x5b4e1c=$(_0x4c73bd[_0x58f12e(0x179)])['closest'](_0x58f12e(0x101))[_0x58f12e(0x16c)]('input[data-permu-player-id]'),_0x3cb0cf=_0x4c4d31['attr'](_0x58f12e(0x12c)),_0x59c198=_0x5b4e1c[_0x58f12e(0x173)](_0x58f12e(0x170)),_0x56dadb=this[_0x58f12e(0x106)][_0x58f12e(0x178)](_0x50d76c=>_0x50d76c['id']===_0x59c198),_0x23bf32=this['_list'][_0x58f12e(0x15d)][_0x58f12e(0x16c)](_0x60bf69=>_0x60bf69[_0x58f12e(0x149)]['id']===_0x3cb0cf);ListUiUtil[_0x58f12e(0x176)](this[_0x58f12e(0x143)],_0x23bf32,_0x4c73bd,{'fnGetCb':_0x142390=>_0x142390[_0x58f12e(0x13a)][_0x58f12e(0xfb)][_0x56dadb],'isNoHighlightSelection':!![],'fnOnSelectionChange':(_0x5925fe,_0x13516d)=>{const _0x51e1fc=_0x58f12e;_0x5925fe['data'][_0x51e1fc(0xfb)][_0x56dadb][_0x51e1fc(0x168)]=_0x13516d;}});}),this[_0x3d63e7(0x109)]=_0x4a2b72[_0x3d63e7(0x16c)](_0x3d63e7(0x117))[_0x3d63e7(0x132)](async()=>this[_0x3d63e7(0x10d)]()),this[_0x3d63e7(0x15f)]=_0x4a2b72[_0x3d63e7(0x16c)](_0x3d63e7(0x144)),this[_0x3d63e7(0x12e)]=_0x4a2b72[_0x3d63e7(0x16c)](_0x3d63e7(0x113))[_0x3d63e7(0x132)](()=>this[_0x3d63e7(0x163)]()),this[_0x3d63e7(0x143)]=new List({'$iptSearch':_0x4a2b72[_0x3d63e7(0x16c)](_0x3d63e7(0x144)),'$wrpList':_0x4a2b72[_0x3d63e7(0x16c)](_0x3d63e7(0x139)),'fnSort':CollectionPermissionUpdater['_sortEntities']}),this[_0x3d63e7(0x14e)][_0x3d63e7(0xf9)]({'$iptSearch':this['_$iptSearch'],'$btnReset':this[_0x3d63e7(0x12e)],'$btnOpen':_0x4a2b72['find'](_0x3d63e7(0x11e)),'$btnToggleSummaryHidden':_0x4a2b72[_0x3d63e7(0x16c)](_0x3d63e7(0x160)),'$wrpMiniPills':_0x4a2b72[_0x3d63e7(0x16c)](_0x3d63e7(0x156)),'namespace':_0x3d63e7(0x17d)+this[_0x3d63e7(0x12f)]})[_0x3d63e7(0x110)](()=>{const _0x48790b=_0x3d63e7;this[_0x48790b(0x10c)][_0x48790b(0x16b)](_0x2d8e73=>this[_0x48790b(0x14e)][_0x48790b(0x147)](_0x2d8e73)),this[_0x48790b(0x143)][_0x48790b(0x10f)](this[_0x48790b(0x10c)],{'fnGetName':_0x451485=>_0x451485[_0x48790b(0x112)],'fnGetValues':_0x358b27=>({'id':_0x358b27['id'],'path':_0x358b27[_0x48790b(0x171)]}),'fnGetData':CollectionPermissionUpdater[_0x48790b(0x158)]}),this[_0x48790b(0x143)][_0x48790b(0x155)](),this['_pageFilter'][_0x48790b(0x121)](),this[_0x48790b(0x14e)][_0x48790b(0x150)][_0x48790b(0x10a)](),this['_pageFilter'][_0x48790b(0x150)]['on'](FilterBox['EVNT_VALCHANGE'],this['_handleFilterChange'][_0x48790b(0x148)](this)),this['_handleFilterChange']();});}async[_0x53deae(0x10d)](){const _0x273933=_0x53deae;if(!this['_list'])return;const _0xc55c62=[];this[_0x273933(0x10c)][_0x273933(0x16b)](_0x28089f=>{const _0x4bf87e=_0x273933,_0x2b656a=this[_0x4bf87e(0x143)][_0x4bf87e(0x15d)][_0x4bf87e(0x16c)](_0x3ca61f=>_0x3ca61f[_0x4bf87e(0x149)]['id']===_0x28089f['id']);let _0x2c7f0f=null;const _0x1d81c8=[],_0x356395=''+_0x28089f[_0x4bf87e(0x104)];if(_0x2b656a[_0x4bf87e(0x13a)][_0x4bf87e(0xfc)][_0x4bf87e(0x122)]!==_0x356395)_0x2c7f0f=_0x2b656a[_0x4bf87e(0x13a)]['selAllPlayers'][_0x4bf87e(0x122)];_0x2b656a[_0x4bf87e(0x13a)][_0x4bf87e(0x105)][_0x4bf87e(0x16b)]((_0x434790,_0x21dce7)=>{const _0x309c5f=_0x4bf87e,_0x228a20=this['_players'][_0x21dce7]['id'],_0x28a9b9=''+_0x28089f['playerPermissions'][_0x228a20];if(_0x434790[_0x309c5f(0x122)]!==_0x28a9b9)_0x1d81c8[_0x309c5f(0x14c)]({'value':_0x434790['value'],'playerId':_0x228a20});});if(_0x2c7f0f!=null||_0x1d81c8[_0x4bf87e(0x164)])_0xc55c62[_0x4bf87e(0x14c)]({'entityMeta':_0x28089f,'metasPlayerUpdates':_0x1d81c8,'allPlayerUpdate':_0x2c7f0f});});if(!_0xc55c62)return ui['notifications']['warn']('Please\x20make\x20some\x20changes\x20first!');this[_0x273933(0x109)][_0x273933(0x173)]('disabled',!![])[_0x273933(0x128)](_0x273933(0x161));const _0x4a2ec7=_0xc55c62['map'](_0x12f884=>new Util[(_0x273933(0x118))](''+_0x12f884[_0x273933(0x11b)]['path']+_0x12f884[_0x273933(0x11b)][_0x273933(0x112)],()=>this[_0x273933(0x151)](_0x12f884)));await UtilApplications['pRunTasks'](_0x4a2ec7,{'titleInitial':_0x273933(0x153),'titleComplete':'Update\x20Complete','fnGetRowRunningText':_0x3f62d9=>_0x273933(0x13b)+_0x3f62d9+_0x273933(0x12d),'fnGetRowSuccessText':_0x4e537f=>_0x273933(0x169)+_0x4e537f+'.','fnGetRowErrorText':_0x5565e1=>_0x273933(0x11f)+_0x5565e1+'!\x20'+VeCt[_0x273933(0x123)]}),this[_0x273933(0x109)][_0x273933(0x173)](_0x273933(0x12b),![])[_0x273933(0x128)]('Saved!'),setTimeout(()=>this[_0x273933(0x109)][_0x273933(0x128)](_0x273933(0x162)),VeCt['DUR_INLINE_NOTIFY']);}async[_0x53deae(0x151)](_0x1c1bf4){const _0x56f2b9=_0x53deae,_0xcf333d=this['_collection']['get'](_0x1c1bf4[_0x56f2b9(0x11b)]['id']),_0x55e91d={..._0xcf333d[_0x56f2b9(0x13a)][_0x56f2b9(0x16d)]};_0x1c1bf4[_0x56f2b9(0x159)]!=null&&(_0x55e91d[_0x56f2b9(0x174)]=Number(_0x1c1bf4[_0x56f2b9(0x159)])),(_0x1c1bf4[_0x56f2b9(0x11c)]||[])['forEach'](_0x3e0938=>{const {playerId:_0x38661a,value:_0x45e910}=_0x3e0938;if(!~_0x45e910)return delete _0x55e91d[_0x38661a];_0x55e91d[_0x38661a]=Number(_0x45e910);}),!CollectionUtil[_0x56f2b9(0x15a)](_0xcf333d['data'][_0x56f2b9(0x16d)],_0x55e91d)&&await _0xcf333d['update']({'permission':_0x55e91d},{'diff':![],'recursive':![],'noHook':!![]}),_0x1c1bf4[_0x56f2b9(0x159)]!=null&&(_0x1c1bf4[_0x56f2b9(0x11b)][_0x56f2b9(0x104)]=''+_0x1c1bf4[_0x56f2b9(0x159)]),(_0x1c1bf4[_0x56f2b9(0x11c)]||[])['forEach'](_0x59085d=>{const _0x1bf1f6=_0x56f2b9,{playerId:_0xba6cf3,value:_0x38bcc4}=_0x59085d;_0x1c1bf4[_0x1bf1f6(0x11b)]['playerPermissions'][_0xba6cf3]=''+_0x38bcc4;});}async[_0x53deae(0x163)](){const _0x138d7f=_0x53deae;this[_0x138d7f(0x15f)][_0x138d7f(0x15e)](''),this['_$cbAll'][_0x138d7f(0x172)]('checked',![]),this[_0x138d7f(0x166)](![]),this['_$cbEach'][_0x138d7f(0x172)](_0x138d7f(0x168),![]),this['_setMassCheckboxValues'](![]),this[_0x138d7f(0x10c)][_0x138d7f(0x16b)](_0x284e80=>{const _0x14d0d8=_0x138d7f,_0x399c3f=this['_list'][_0x14d0d8(0x15d)]['find'](_0x10141f=>_0x10141f[_0x14d0d8(0x149)]['id']===_0x284e80['id']);_0x399c3f[_0x14d0d8(0x13a)]['cbEachPlayer']['checked']=![],_0x399c3f[_0x14d0d8(0x13a)][_0x14d0d8(0xfb)]['forEach'](_0x4278db=>_0x4278db[_0x14d0d8(0x168)]=![]),_0x399c3f[_0x14d0d8(0x13a)][_0x14d0d8(0x105)][_0x14d0d8(0x16b)]((_0x3c8975,_0x332246)=>{const _0x320145=_0x14d0d8,_0x4225c9=this[_0x320145(0x106)][_0x332246]['id'],_0x390c8a=''+_0x284e80[_0x320145(0x125)][_0x4225c9];_0x3c8975[_0x320145(0x122)]=_0x390c8a,_0x3c8975[_0x320145(0x177)](_0x320145(0x167),_0x390c8a);});});}['_setMassAllPlayerCheckboxValues'](_0x30d301){const _0x3a853c=_0x53deae;this[_0x3a853c(0x143)][_0x3a853c(0x165)][_0x3a853c(0x16b)](_0x37ac2e=>_0x37ac2e['data']['cbAllPlayers'][_0x3a853c(0x168)]=_0x30d301);}[_0x53deae(0x116)](_0x4a3295){const _0x3eb033=_0x53deae;this[_0x3eb033(0x140)][_0x3eb033(0x16c)]('input[data-permu-player-id]')[_0x3eb033(0xff)]()['forEach'](_0x224b2b=>_0x224b2b[_0x3eb033(0x168)]=_0x4a3295);}['_handleFilterChange'](){const _0x300260=_0x53deae,_0xdc82ae=this['_pageFilter'][_0x300260(0x150)][_0x300260(0x111)]();this[_0x300260(0x143)][_0x300260(0x136)](_0x54549e=>this[_0x300260(0x14e)][_0x300260(0x175)](_0xdc82ae,this[_0x300260(0x10c)][_0x54549e['ix']]));}static[_0x53deae(0x158)](_0x287146){const _0x3d54e1=_0x53deae,_0x39abb9=_0x287146[_0x3d54e1(0x14f)][_0x3d54e1(0x141)][0x2],_0x3be39c=_0x287146[_0x3d54e1(0x14f)][_0x3d54e1(0x141)][0x3],_0x14f636=[..._0x287146['ele']['children']][_0x3d54e1(0x100)](0x4);return{'cbAllPlayers':_0x39abb9[_0x3d54e1(0x141)][0x0],'selAllPlayers':_0x39abb9[_0x3d54e1(0x141)][0x1],'cbEachPlayer':_0x3be39c[_0x3d54e1(0x141)][0x0],'selEachPlayer':_0x3be39c[_0x3d54e1(0x141)][0x1],'cbsPlayers':_0x14f636[_0x3d54e1(0x137)](_0x240fe6=>_0x240fe6[_0x3d54e1(0x141)][0x0]),'selsPlayers':_0x14f636[_0x3d54e1(0x137)](_0x5743f3=>_0x5743f3[_0x3d54e1(0x141)][0x1])};}static[_0x53deae(0x107)](_0x37ce7d,_0x47b0bf){const _0x2c3bf3=_0x53deae,_0x4b857b=_0x37ce7d[_0x2c3bf3(0x149)]?_0x37ce7d[_0x2c3bf3(0x149)][_0x2c3bf3(0x171)]:_0x37ce7d[_0x2c3bf3(0x171)],_0x24bb6d=_0x47b0bf[_0x2c3bf3(0x149)]?_0x47b0bf[_0x2c3bf3(0x149)][_0x2c3bf3(0x171)]:_0x47b0bf[_0x2c3bf3(0x171)];if(_0x4b857b&&!_0x24bb6d)return-0x1;if(!_0x4b857b&&_0x24bb6d)return 0x1;return SortUtil[_0x2c3bf3(0x119)](_0x4b857b,_0x24bb6d)||SortUtil[_0x2c3bf3(0x119)](_0x37ce7d['name'],_0x47b0bf[_0x2c3bf3(0x112)]);}[_0x53deae(0x138)](){const _0x1b97aa=_0x53deae;return this[_0x1b97aa(0x106)]=game[_0x1b97aa(0x152)][_0x1b97aa(0x142)][_0x1b97aa(0x137)](_0x4fd07c=>({'id':_0x4fd07c['id'],'name':_0x4fd07c['name']})),this[_0x1b97aa(0x10c)]=this[_0x1b97aa(0x129)][_0x1b97aa(0x142)][_0x1b97aa(0x137)]((_0x2513ed,_0x2f6e3d)=>{const _0xcc669d=_0x1b97aa,_0x38a092=UtilApplications[_0xcc669d(0x135)](_0x2513ed,{'isAddTrailingSlash':!![]}),_0x1d61ff=(_0x2513ed[_0xcc669d(0x13a)]||{})[_0xcc669d(0x16d)]||{},_0x1a2474=_0x1d61ff[_0xcc669d(0x174)]!=null?_0x1d61ff['default']:0x0;return{'id':_0x2513ed['id'],'name':_0x2513ed[_0xcc669d(0x112)],'allPlayerPermissions':_0x1a2474,'playerPermissions':this[_0xcc669d(0x106)][_0xcc669d(0x137)](_0x266949=>_0x266949['id'])[_0xcc669d(0xfe)](_0x814131=>{const _0x1f3792=_0x1d61ff[_0x814131]!=null?_0x1d61ff[_0x814131]:-0x1;return{[_0x814131]:_0x1f3792};}),'type':MiscUtil['get'](_0x2513ed,_0xcc669d(0x13a),_0xcc669d(0x114))||'unknown','folderId':_0x2513ed[_0xcc669d(0x16a)]?_0x2513ed['folder']['id']:null,'path':_0x38a092||'','ix':_0x2f6e3d};}),this['_entities']['sort'](CollectionPermissionUpdater[_0x1b97aa(0x107)]),{...super['getData'](),'titleSearch':this[_0x1b97aa(0x12f)]+'s','players':this['_players'],'entities':this[_0x1b97aa(0x10c)],'permissionsAll':Util[_0x1b97aa(0x10e)]['getPermissionsEnum'](),'permissions':Util['Fvtt'][_0x1b97aa(0x13d)]({'isIncludeDefault':!![]})};}['close'](..._0x36942a){const _0x4e742a=_0x53deae;return this[_0x4e742a(0x14e)][_0x4e742a(0x12a)](),super['close'](..._0x36942a);}}export{CollectionPermissionUpdater};