const _0x28a447=_0x1b61;(function(_0x49ad62,_0xc65efb){const _0x4a8c71=_0x1b61,_0x28c429=_0x49ad62();while(!![]){try{const _0x20ea03=parseInt(_0x4a8c71(0x121))/0x1+-parseInt(_0x4a8c71(0x134))/0x2+-parseInt(_0x4a8c71(0x13a))/0x3+-parseInt(_0x4a8c71(0x136))/0x4+parseInt(_0x4a8c71(0x14b))/0x5*(-parseInt(_0x4a8c71(0x131))/0x6)+-parseInt(_0x4a8c71(0x127))/0x7*(-parseInt(_0x4a8c71(0x146))/0x8)+parseInt(_0x4a8c71(0x130))/0x9;if(_0x20ea03===_0xc65efb)break;else _0x28c429['push'](_0x28c429['shift']());}catch(_0x28d6cd){_0x28c429['push'](_0x28c429['shift']());}}}(_0x5515,0xb644e));import{Config}from'./Config.js';function _0x1b61(_0x510b5,_0x2e8da9){const _0x55151a=_0x5515();return _0x1b61=function(_0x1b61a5,_0xb5f5f1){_0x1b61a5=_0x1b61a5-0x11b;let _0x520abb=_0x55151a[_0x1b61a5];return _0x520abb;},_0x1b61(_0x510b5,_0x2e8da9);}import{ConfigConsts}from'./ConfigConsts.js';import{UtilApplications}from'./UtilApplications.js';function _0x5515(){const _0x33ab91=['isOrderingPrefixJournalNames','permission','7UjWFVd','WALKER_GENERIC','getFlatEntries','replace','FolderizedJournalEntryBuilder','SORT_INTEGER_DENSITY','_getAdventureBookJournalPrefix','SYM_AT','C_IMPORT_ADVBOOK_JOURNAL_SPLIT_STRATEGY_CONTENTS','29224359CfeaCB','494526DjUUDQ','pGetAdventureJournals','name','1506784ITYhdo','_pGetAdventureBookJournals_byContents','4198496fcoOEZ','pGetWithDescriptionPlugins','setFirstSection','filter','1335714ZMCZyW','IX_FLAT_REF','render','slice','forEach','</div>','utils','padStart','_pGetFlatEntryJournalEntries','encodeForHash','<div\x20class=\x22w-100\x20h-100\x20overflow-x-hidden\x22>','importAdventure','1589472WqEqmD','C_IMPORT_ADVBOOK_JOURNAL_SPLIT_STRATEGY_HEADINGS','now','isDiscrete','sum','85EtekKc','Unhandled\x20journal\x20entry\x20split\x20mode\x20\x22','collection','book','_getEntryIds','pGetBookJournals','key','instance','defaultPermission','ordinal','index','headers','contents','bookOrdinalToAbv','entry','length','getCleanEntityName','get','adventure','folderNames','permissions','_pGetAdventureBookJournals','_pGetAdventureBookJournals_byHeader','header','isAddPermission','walk','_pGetAdventureBookJournals_byChapter','some','MODULE_NAME_FAKE','_getPerChapterFolderNames','JournalEntry','950150XPlkuH','push','source','map'];_0x5515=function(){return _0x33ab91;};return _0x5515();}import{DataConverter}from'./DataConverter.js';import{SharedConsts}from'../shared/SharedConsts.js';import{UtilDataConverter}from'./UtilDataConverter.js';class DataConverterAdventureBook extends DataConverter{static[_0x28a447(0x132)](_0x3fd2c2,_0x327538,_0x2637b3){const _0x54f273=_0x28a447;return this['_pGetAdventureBookJournals'](_0x3fd2c2,_0x327538,_0x54f273(0x15d),_0x2637b3);}static[_0x28a447(0x150)](_0x48a087,_0xd33841,_0x1b48b1){const _0x1303d7=_0x28a447;return this['_pGetAdventureBookJournals'](_0x48a087,_0xd33841,_0x1303d7(0x14e),_0x1b48b1);}static async[_0x28a447(0x160)](_0x5c23a3,_0x3a7987,_0x5d5949,_0x1a24b9){const _0x1a7029=_0x28a447,_0xa6062d=_0x5d5949===_0x1a7029(0x15d)?_0x1a7029(0x145):'importBook',_0x1ee2ef=Config[_0x1a7029(0x15c)](_0xa6062d,'journalEntrySplitMode'),_0x4bd858=[],_0x3390ec=_0x3a7987[_0x1a7029(0x157)],_0x2c9863=Math['min'](_0x3390ec[_0x1a7029(0x15a)],_0x5c23a3[_0x1a7029(0x15a)]);switch(_0x1ee2ef){case ConfigConsts['C_IMPORT_ADVBOOK_JOURNAL_SPLIT_STRATEGY_CHAPTER']:{for(let _0x467d44=0x0;_0x467d44<_0x2c9863;++_0x467d44){const _0x531d32=_0x3390ec[_0x467d44],_0x5bc97e=_0x5c23a3[_0x467d44];await this[_0x1a7029(0x11c)]({'contentsItem':_0x531d32,'chapter':_0x5bc97e,'out':_0x4bd858,'opts':_0x1a24b9,'configGroup':_0xa6062d,'indexData':_0x3a7987,'ixChapter':_0x467d44,'ixChapterMax':_0x2c9863,'totalEntries':_0x2c9863});}break;}case ConfigConsts[_0x1a7029(0x12f)]:{const _0x36cc70=_0x5c23a3[_0x1a7029(0x13d)](0x0,_0x2c9863)['map'](_0xf641a2=>Renderer[_0x1a7029(0x140)][_0x1a7029(0x129)](_0xf641a2)[_0x1a7029(0x15a)])['sum']();for(let _0x54bcb2=0x0;_0x54bcb2<_0x2c9863;++_0x54bcb2){const _0x24dbe1=_0x3390ec[_0x54bcb2],_0x3292f2=_0x5c23a3[_0x54bcb2];await this[_0x1a7029(0x135)]({'contentsItem':_0x24dbe1,'chapter':_0x3292f2,'out':_0x4bd858,'opts':_0x1a24b9,'configGroup':_0xa6062d,'indexData':_0x3a7987,'ixChapter':_0x54bcb2,'ixChapterMax':_0x2c9863,'totalEntries':_0x36cc70});}break;}case ConfigConsts[_0x1a7029(0x147)]:{const _0x2a8ed3=_0x5c23a3[_0x1a7029(0x13d)](0x0,_0x2c9863)[_0x1a7029(0x124)](_0x50ce6c=>Renderer['utils']['getFlatEntries'](_0x50ce6c)[_0x1a7029(0x15a)])[_0x1a7029(0x14a)]();for(let _0x3e1553=0x0;_0x3e1553<_0x2c9863;++_0x3e1553){const _0x916ed7=_0x3390ec[_0x3e1553],_0x279b8f=_0x5c23a3[_0x3e1553];await this[_0x1a7029(0x161)]({'contentsItem':_0x916ed7,'chapter':_0x279b8f,'out':_0x4bd858,'opts':_0x1a24b9,'configGroup':_0xa6062d,'indexData':_0x3a7987,'ixChapter':_0x3e1553,'ixChapterMax':_0x2c9863,'totalEntries':_0x2a8ed3});}break;}default:throw new Error(_0x1a7029(0x14c)+_0x1ee2ef+'\x22');}return _0x4bd858;}static async[_0x28a447(0x11c)]({contentsItem:_0x48e92d,chapter:_0x3e0618,out:_0x2b64e5,opts:_0x24af87,configGroup:_0x560008,indexData:_0x29b370,totalEntries:_0x4fd925,folderNames:_0x79adad,isNested:_0x14d9c1}){const _0xa58e54=_0x28a447,_0x8e03ac=await UtilDataConverter[_0xa58e54(0x137)](()=>{const _0x54fe16=_0xa58e54;return(_0x54fe16(0x144)+Renderer[_0x54fe16(0x15c)]()[_0x54fe16(0x138)](!![])[_0x54fe16(0x13c)](_0x3e0618)+_0x54fe16(0x13f))[_0x54fe16(0x12a)](new RegExp(DataConverter[_0x54fe16(0x12e)],'g'),'@');}),_0x466265=_0x2b64e5[_0xa58e54(0x15a)],_0x12087f=_0x14d9c1?UtilApplications[_0xa58e54(0x15b)](''+this[_0xa58e54(0x12d)]({'configGroup':_0x560008,'numEntry':_0x466265,'totalEntries':_0x4fd925})+_0x48e92d[_0xa58e54(0x133)]):UtilApplications[_0xa58e54(0x15b)](''+this['_getAdventureBookJournalPrefix']({'configGroup':_0x560008,'source':_0x29b370[_0xa58e54(0x123)],'numEntry':_0x466265,'totalEntries':_0x4fd925})+Parser[_0xa58e54(0x158)](_0x48e92d[_0xa58e54(0x154)])+_0x48e92d[_0xa58e54(0x133)]),_0x33796c={'name':_0x12087f,'permission':{'default':0x0},'entryTime':Date[_0xa58e54(0x148)](),'content':_0x8e03ac,'sort':CONFIG[_0xa58e54(0x120)][_0xa58e54(0x14d)][_0xa58e54(0x152)][_0xa58e54(0x157)][_0xa58e54(0x15a)]+CONST[_0xa58e54(0x12c)]*_0x466265,'flags':{[SharedConsts[_0xa58e54(0x11e)]]:{'source':_0x29b370['source'],'entryIds':this[_0xa58e54(0x14f)]({'entry':_0x3e0618})}}};if(_0x24af87[_0xa58e54(0x153)]!=null)_0x2b64e5[_0xa58e54(0x126)]={'default':_0x24af87['defaultPermission']};else{if(_0x24af87[_0xa58e54(0x163)])_0x33796c[_0xa58e54(0x126)]={'default':Config[_0xa58e54(0x15c)](_0x560008,_0xa58e54(0x15f))};}_0x2b64e5[_0xa58e54(0x122)](new DataConverterAdventureBook[(_0xa58e54(0x12b))]({'journalEntry':_0x33796c,'folderNames':_0x79adad}));}static async[_0x28a447(0x135)]({contentsItem:_0x5af67e,chapter:_0x4c5703,out:_0x3542b5,opts:_0x485bcf,configGroup:_0x493367,indexData:_0x5b3c7b,ixChapter:_0x2563a2,ixChapterMax:_0x372b1a,totalEntries:_0x40c98a}){const _0x51320f=_0x28a447;if(!_0x5af67e[_0x51320f(0x156)]?.[_0x51320f(0x15a)]){const _0x52b4ea=this[_0x51320f(0x11f)]({'configGroup':_0x493367,'indexData':_0x5b3c7b,'ixChapter':_0x2563a2,'ixChapterMax':_0x372b1a,'contentsItem':_0x5af67e});return this[_0x51320f(0x11c)]({'contentsItem':_0x5af67e,'chapter':_0x4c5703,'out':_0x3542b5,'opts':_0x485bcf,'configGroup':_0x493367,'indexData':_0x5b3c7b,'totalEntries':_0x40c98a,'folderNames':_0x52b4ea,'isNested':!![]});}let _0x5b76b8=Renderer[_0x51320f(0x140)]['getFlatEntries'](_0x4c5703);const _0x496af0={};_0x5b76b8[_0x51320f(0x13e)]((_0x2669f9,_0x9b2fde)=>{const _0x42090e=_0x51320f,_0x26997d=_0x2669f9[_0x42090e(0x159)][_0x42090e(0x133)];if(_0x496af0[_0x26997d]==null)_0x496af0[_0x26997d]=-0x1;const _0x4ac77c=++_0x496af0[_0x26997d],_0x3f6a77=_0x9b2fde===0x0||_0x5af67e[_0x42090e(0x156)][_0x42090e(0x11d)](_0x527722=>{const _0x350508=_0x42090e,_0x15f088=_0x527722[_0x350508(0x155)]??0x0,_0x33d23d=_0x527722[_0x350508(0x162)]??_0x527722;return _0x15f088===_0x4ac77c&&UrlUtil['encodeForHash'](_0x33d23d)===UrlUtil[_0x350508(0x143)](_0x26997d);});if(_0x3f6a77)_0x2669f9[_0x42090e(0x149)]=!![];}),_0x5b76b8['forEach'](_0xf3eb11=>{const _0x17957d=_0x51320f;if(!_0xf3eb11[_0x17957d(0x159)][_0xf3eb11[_0x17957d(0x151)]])return;_0xf3eb11['entry'][_0xf3eb11[_0x17957d(0x151)]]=_0xf3eb11[_0x17957d(0x159)][_0xf3eb11[_0x17957d(0x151)]][_0x17957d(0x124)](_0x315c65=>{const _0x5e8781=_0x17957d;if(!_0x315c65[_0x5e8781(0x13b)])return _0x315c65;if(_0x5b76b8[_0x315c65[_0x5e8781(0x13b)]]['isDiscrete'])return _0x315c65;return _0x5b76b8[_0x315c65[_0x5e8781(0x13b)]][_0x5e8781(0x159)];});}),_0x5b76b8=_0x5b76b8[_0x51320f(0x139)](_0x3f7a07=>_0x3f7a07[_0x51320f(0x149)]),await this['_pGetFlatEntryJournalEntries']({'contentsItem':_0x5af67e,'chapter':_0x4c5703,'out':_0x3542b5,'opts':_0x485bcf,'configGroup':_0x493367,'indexData':_0x5b3c7b,'ixChapter':_0x2563a2,'ixChapterMax':_0x372b1a,'totalEntries':_0x40c98a,'flatEntries':_0x5b76b8});}static async[_0x28a447(0x161)]({contentsItem:_0x7047dc,chapter:_0x3a0c65,out:_0x2fc515,opts:_0xf5eb34,configGroup:_0x561139,indexData:_0x205bf9,ixChapter:_0x36bdcd,ixChapterMax:_0x2f62ac,totalEntries:_0x109f5f}){const _0x51ccfa=_0x28a447,_0x1c9555=Renderer[_0x51ccfa(0x140)][_0x51ccfa(0x129)](_0x3a0c65);await this[_0x51ccfa(0x142)]({'contentsItem':_0x7047dc,'chapter':_0x3a0c65,'out':_0x2fc515,'opts':_0xf5eb34,'configGroup':_0x561139,'indexData':_0x205bf9,'ixChapter':_0x36bdcd,'ixChapterMax':_0x2f62ac,'totalEntries':_0x109f5f,'flatEntries':_0x1c9555});}static async['_pGetFlatEntryJournalEntries']({contentsItem:_0x2b53e8,chapter:_0x5b3649,out:_0x1a3a7b,opts:_0x552ab5,configGroup:_0x4e5679,indexData:_0x4bfb57,ixChapter:_0x3670a4,ixChapterMax:_0x2fcafc,totalEntries:_0x244f41,flatEntries:_0x47dd90}){const _0x39d279=_0x28a447;_0x47dd90=UtilDataConverter['WALKER_GENERIC'][_0x39d279(0x11b)](_0x47dd90,{'array':_0xe4cea4=>{const _0x8a76b8=_0x39d279;return _0xe4cea4[_0x8a76b8(0x124)](_0x1a4991=>{const _0x5240ce=_0x8a76b8;if(_0x1a4991[_0x5240ce(0x13b)]==null)return _0x1a4991;return'%'+SharedConsts[_0x5240ce(0x11e)]+'_'+_0x3670a4+'__'+_0x1a4991['IX_FLAT_REF']+'_'+SharedConsts[_0x5240ce(0x11e)]+'%';});}}),await _0x47dd90['pSerialAwaitMap'](async _0x37c16c=>{const _0x456896=_0x39d279,_0x132f6a=await UtilDataConverter[_0x456896(0x137)](()=>{const _0x5b18e5=_0x456896;return(_0x5b18e5(0x144)+Renderer[_0x5b18e5(0x15c)]()[_0x5b18e5(0x138)](!![])['render'](_0x37c16c[_0x5b18e5(0x159)])+_0x5b18e5(0x13f))['replace'](new RegExp(DataConverter['SYM_AT'],'g'),'@');}),_0x43e5a4=this['_getPerChapterFolderNames']({'configGroup':_0x4e5679,'indexData':_0x4bfb57,'ixChapter':_0x3670a4,'ixChapterMax':_0x2fcafc,'contentsItem':_0x2b53e8}),_0x115541=_0x1a3a7b[_0x456896(0x15a)],_0x196ff7={'name':UtilApplications[_0x456896(0x15b)](''+this['_getAdventureBookJournalPrefix']({'configGroup':_0x4e5679,'numEntry':_0x115541,'totalEntries':_0x244f41})+_0x37c16c['name']),'permission':{'default':0x0},'entryTime':Date[_0x456896(0x148)](),'content':_0x132f6a,'sort':CONFIG[_0x456896(0x120)][_0x456896(0x14d)]['instance'][_0x456896(0x157)]['length']+CONST[_0x456896(0x12c)]*_0x115541,'flags':{[SharedConsts[_0x456896(0x11e)]]:{'source':_0x4bfb57[_0x456896(0x123)],'ixChapter':_0x3670a4,'ixFlat':_0x37c16c['ix'],'entryIds':this[_0x456896(0x14f)]({'entry':_0x37c16c['entry']})}}};if(_0x552ab5['defaultPermission']!=null)_0x1a3a7b['permission']={'default':_0x552ab5[_0x456896(0x153)]};else{if(_0x552ab5['isAddPermission'])_0x196ff7[_0x456896(0x126)]={'default':Config[_0x456896(0x15c)](_0x4e5679,_0x456896(0x15f))};}_0x1a3a7b[_0x456896(0x122)](new DataConverterAdventureBook[(_0x456896(0x12b))]({'journalEntry':_0x196ff7,'folderNames':_0x43e5a4}));});}static[_0x28a447(0x14f)]({entry:_0x551913}){const _0x3f1dcf=_0x28a447;if(!_0x551913)return[];const _0x1467de=[];return UtilDataConverter[_0x3f1dcf(0x128)][_0x3f1dcf(0x11b)](_0x551913,{'object':_0x23a03d=>{const _0x4fea3f=_0x3f1dcf;if(_0x23a03d['id'])_0x1467de[_0x4fea3f(0x122)](_0x23a03d['id']);return _0x23a03d;}}),_0x1467de;}static['_getAdventureBookJournalPrefix']({configGroup:_0xd2d83,source:_0x29df8c,numEntry:_0x3726ba,totalEntries:_0x553361}){const _0x5e0445=_0x28a447;if(!Config[_0x5e0445(0x15c)](_0xd2d83,_0x5e0445(0x125)))return'';const _0x7fc264=(''+_0x553361)['length'];return''+(_0x29df8c?Parser['sourceJsonToAbv'](_0x29df8c)[_0x5e0445(0x13d)](0x0,0x3):'')+(''+_0x3726ba)[_0x5e0445(0x141)](_0x7fc264,'0')+'\x20';}static[_0x28a447(0x11f)]({configGroup:_0xdf0453,indexData:_0x346bfc,ixChapter:_0x231f71,ixChapterMax:_0x302bd3,contentsItem:_0x5c0d40}){const _0x1df2e8=_0x28a447;return[''+this['_getAdventureBookJournalPrefix']({'configGroup':_0xdf0453,'source':_0x346bfc[_0x1df2e8(0x123)],'numEntry':_0x231f71,'totalEntries':_0x302bd3})+Parser[_0x1df2e8(0x158)](_0x5c0d40['ordinal'])+_0x5c0d40['name']];}}DataConverterAdventureBook[_0x28a447(0x12b)]=class{constructor({journalEntry:_0x4b31c2,folderNames:folderNames=[]}={}){const _0x579863=_0x28a447;this['journalEntry']=_0x4b31c2,this[_0x579863(0x15e)]=folderNames;}};export{DataConverterAdventureBook};