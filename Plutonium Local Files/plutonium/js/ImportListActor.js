const _0x2afd10=_0x22f5;(function(_0x1c3adc,_0x5439db){const _0x308129=_0x22f5,_0x19d1ec=_0x1c3adc();while(!![]){try{const _0x349e64=-parseInt(_0x308129(0x158))/0x1+parseInt(_0x308129(0x15b))/0x2+parseInt(_0x308129(0x15e))/0x3+-parseInt(_0x308129(0xfd))/0x4+-parseInt(_0x308129(0x14f))/0x5+-parseInt(_0x308129(0x11f))/0x6*(-parseInt(_0x308129(0x14c))/0x7)+parseInt(_0x308129(0x152))/0x8;if(_0x349e64===_0x5439db)break;else _0x19d1ec['push'](_0x19d1ec['shift']());}catch(_0x4d99f6){_0x19d1ec['push'](_0x19d1ec['shift']());}}}(_0x2ae4,0x5a893));import{ImportedDocument,ImportList,ImportSummary}from'./ImportList.js';import{DataConverter}from'./DataConverter.js';import{Vetools}from'./Vetools.js';import{Config}from'./Config.js';import{UtilApplications}from'./UtilApplications.js';import{UtilActors}from'./UtilActors.js';import{LGT}from'./Util.js';import{Consts}from'./Consts.js';import{UtilCompendium}from'./UtilCompendium.js';function _0x22f5(_0x26cffa,_0x4c75f5){const _0x2ae4ca=_0x2ae4();return _0x22f5=function(_0x22f582,_0x2ea30f){_0x22f582=_0x22f582-0xd5;let _0x10de10=_0x2ae4ca[_0x22f582];return _0x10de10;},_0x22f5(_0x26cffa,_0x4c75f5);}import{SharedConsts}from'../shared/SharedConsts.js';import{DataConverterItem}from'./DataConverterItem.js';import{UtilGameSettings}from'./UtilGameSettings.js';import{ConfigConsts}from'./ConfigConsts.js';function _0x2ae4(){const _0x3f9153=['getSrdCompendiumEntity','mystery-man.svg','Unimplemented!','importDocument','defaultToken','max','join','substring','_DataConverter','name','TASK_EXIT_COMPLETE_UPDATE_OVERWRITE','vision','slice','img','pHasTokenUrl','_actorType','TASK_EXIT_COMPLETE','_configGroup','_pImportEntry_pFillFolder','constructor','existing','getSourceWithPagePart','_pImportEntry_pCreateTempDirectoryGetId','create','tokenNameDisplay','isTokenMetric','_pImportEntry_pFillBase','FOLDER_TYPE','log','Option\x20\x22isImportToTempDirectory\x22\x20cannot\x20be\x20used\x20in\x20conjunction\x20with\x20compendium\x20imports!','sourceJsonToAbv','_pImportEntry_pFillBase_pGetPortraitImagePath','ATTUNED','images','entries','weapon','bar2','actor','pGetImageUrlFromFluff','render','isTemp','attribute','folder','isImportToTempDirectory','Actor','Importing\x20','_pImportEntry_fillData_getAbilitySaveMeta','assign','TASK_EXIT_COMPLETE_DATA_ONLY','_pFillWeaponItem','_pImportEntry_fillData_Abilities','_pImportEntry_pHasTokenImage','get','_displayName','1567156tqjwvT','size','reverse','getFluffTabContent','tokenIsAddVision','_getActorFlags','token','_pImportEntry_pApplyEffects','map','pGetActionWeaponDetails','_pImportEntry_pAddToTargetTableIfRequired','getMetricNumberDistance','_pImportEntry_pGetFolderId','_pGetDataSideLoaded','ACTOR_TEMP_NAME','spell','_getDuplicateMeta','tokenScale','data','core','save','copy','tokenDisposition','isPreferFoundryTokens','actors','_pImportEntry_pGetTokenImage','tremorsense','abilities','getCombinedFoundryFlags','push','getSafe','getCleanEntityName','isImporterTempActor','isDataOnly','3278178WceTMG','_getActorSheetName','pSerialAwaitFind','displayBars','type','tokenBarDisplay','ActiveEffect','truesight','_pGetCompendiumToken','flags','number','senses','object','items','_pImportEntry','_pImportEntry_pFillBase_pGetCompendiumImage','Incompatible\x20options\x20\x22isTemp\x22/\x22isDataOnly\x22\x20and\x20\x22isImportToTempDirectory\x22\x20supplied!','isSkip','_props','includes','fluff','scale','MODULE_NAME_FAKE','_pImportEntry_pFillBase_pGetPortraitImagePath_fromFoundry','pUpdateDocument','setFirstSection','import','source','pGetCompendiumImage','_pImportEntry_pGetTokenImage_fromFoundry','isOverwrite','_getMergedTokenData','disposition','Cannot\x20import\x20','TASK_EXIT_SKIPPED_DUPLICATE','_pImportEntry_pFillBase_pGetPortraitImagePath_fromPlutonium','_pImportEntry_pFillItems','displayName','effects','bar1','foundryImg','assumedPb','expandObject','isSkipFolder','attunement','7rARXDf','_pImportEntry_pFillToken','getAbilityModNumber','3602665JnnUzB','blindsight','utils','4160712TPZDCT','tokenBar1Attribute','forEach','attunementTypes','bind','_pImportEntry_pHandlePostItemItemUpdates','395038eWzeWO','_pack','dimSight','981198IQCNrE','flattenObject','tokenBar2Attribute','963432VAfPVU','isPreferFoundryImages','pAddActorEffects','_numberCleanRegexp','C_BOOL_ENABLED','exec','deleteEmbeddedDocuments','_DEFAULT_SAVING_THROW_DATA','C_USE_GAME_DEFAULT','URL_TO_HASH_BUILDER','_page','pOptionallySaveImageToServerAndGetUrl','toLowerCase','tokenBrightSight','_pImportEntry_pGetImportMetadata','postItemItemUpdates','length','set','_pGetEffectsSideLoaded'];_0x2ae4=function(){return _0x3f9153;};return _0x2ae4();}import{UtilDataConverter}from'./UtilDataConverter.js';import{UtilDocuments}from'./UtilDocuments.js';class ImportListActor extends ImportList{static get[_0x2afd10(0xe2)](){const _0x4782ba=_0x2afd10;return _0x4782ba(0xf3);}constructor(_0x194220,_0x18b6e1,_0x4dd734,_0x35cc1f){const _0x9c08b=_0x2afd10;super(_0x194220,_0x18b6e1,_0x4dd734),this[_0x9c08b(0xd6)]=_0x35cc1f['actorType'],this[_0x9c08b(0x179)]=_0x35cc1f['DataConverter'];}async[_0x2afd10(0x12d)](_0x16fbd3,_0x25372b){const _0x578461=_0x2afd10;_0x25372b=_0x25372b||{};if((_0x25372b[_0x578461(0xef)]||_0x25372b[_0x578461(0x11e)])&&_0x25372b[_0x578461(0xf2)])throw new Error(_0x578461(0x12f));if(this['_pack']&&_0x25372b[_0x578461(0xf2)])throw new Error(_0x578461(0xe4));console[_0x578461(0xe3)](...LGT,_0x578461(0xf4)+this[_0x578461(0xd6)]+'\x20\x22'+_0x16fbd3[_0x578461(0x17a)]+'\x22\x20(from\x20\x22'+Parser[_0x578461(0xe5)](_0x16fbd3[_0x578461(0x13a)])+'\x22)');if(this['_actor'])throw new Error(_0x578461(0x140)+this[_0x578461(0xd6)]+'\x20to\x20actor!');let _0x4e6917;const _0x56c771=this[_0x578461(0x10d)]({'entity':_0x16fbd3,'importOpts':_0x25372b});if(_0x56c771[_0x578461(0x130)])return new ImportSummary({'status':UtilApplications[_0x578461(0x141)],'imported':[new ImportedDocument({'isExisting':!![],'document':_0x56c771[_0x578461(0xdb)]})]});else _0x56c771[_0x578461(0x13d)]?(_0x25372b[_0x578461(0x14a)]=!![],_0x4e6917=_0x56c771[_0x578461(0xdb)]):_0x4e6917=this['_pack']?null:await Actor['create']({'name':Consts[_0x578461(0x10b)],'type':this[_0x578461(0xd6)],'flags':{[SharedConsts['MODULE_NAME_FAKE']]:{'isImporterTempActor':!![]}}},{'renderSheet':!!_0x25372b[_0x578461(0xef)],'temporary':!!_0x25372b[_0x578461(0xef)]});const {dataBuilderOpts:_0x27b0cf,actorData:_0x18f80f}=await this[_0x578461(0x16c)](_0x4e6917,_0x16fbd3,_0x25372b),_0x3930c9=this[_0x578461(0x179)]?await this[_0x578461(0x179)][_0x578461(0x10a)](_0x16fbd3):null;if(_0x3930c9)Object['assign'](_0x18f80f[_0x578461(0x10f)]||{},_0x3930c9);const _0x36f375=this[_0x578461(0x179)]?await this[_0x578461(0x179)]['_pGetFlagsSideLoaded'](_0x16fbd3):null;if(_0x36f375)Object['assign'](_0x18f80f['flags']||{},_0x36f375);const _0x40c328=_0x18f80f[_0x578461(0x17e)]??_0x18f80f[_0x578461(0x103)]?.[_0x578461(0x17e)];if(_0x25372b[_0x578461(0xef)]){_0x4e6917=await Actor['create']({..._0x18f80f,'type':this[_0x578461(0xd6)]},{'renderSheet':!_0x25372b[_0x578461(0x11e)],'temporary':!![]}),_0x27b0cf[_0x578461(0xec)]=_0x4e6917;const _0x5af6a5=this[_0x578461(0x179)]?await this[_0x578461(0x179)][_0x578461(0x170)]({'ent':_0x16fbd3,'actor':_0x27b0cf[_0x578461(0xec)],'img':_0x40c328}):null;if(_0x5af6a5?.['length'])_0x27b0cf[_0x578461(0x145)]['push'](..._0x5af6a5);await this[_0x578461(0x143)](_0x16fbd3,_0x18f80f,_0x27b0cf,_0x25372b),await this['_pImportEntry_pApplyEffects'](_0x27b0cf,_0x25372b),await this[_0x578461(0x157)](_0x4e6917,_0x25372b,_0x27b0cf);if(_0x25372b['isDataOnly'])return new ImportSummary({'status':UtilApplications[_0x578461(0xf7)],'imported':[new ImportedDocument({'document':_0x4e6917})]});return new ImportSummary({'status':UtilApplications[_0x578461(0xd7)],'imported':[new ImportedDocument({'document':_0x4e6917})]});}else{if(this[_0x578461(0x159)]){if(_0x56c771['isOverwrite']){_0x27b0cf[_0x578461(0xec)]=_0x4e6917;const _0x5e7bc7=this[_0x578461(0x179)]?await this[_0x578461(0x179)][_0x578461(0x170)]({'ent':_0x16fbd3,'actor':_0x27b0cf[_0x578461(0xec)],'img':_0x40c328}):null;if(_0x5e7bc7?.['length'])_0x27b0cf['effects'][_0x578461(0x11a)](..._0x5e7bc7);return await _0x4e6917['deleteEmbeddedDocuments']('Item',_0x4e6917[_0x578461(0x12c)][_0x578461(0x105)](_0x245f65=>_0x245f65['id'])),await _0x4e6917['deleteEmbeddedDocuments'](_0x578461(0x125),_0x4e6917[_0x578461(0x145)][_0x578461(0x105)](_0x5d8797=>_0x5d8797['id'])),await this[_0x578461(0x143)](_0x16fbd3,_0x18f80f,_0x27b0cf,_0x25372b),await this[_0x578461(0x104)](_0x27b0cf,_0x25372b),await UtilDocuments[_0x578461(0x137)](_0x4e6917,_0x18f80f),await this[_0x578461(0x157)](_0x4e6917,_0x25372b,_0x27b0cf),await this[_0x578461(0x107)]([_0x4e6917],_0x56c771),new ImportSummary({'status':UtilApplications[_0x578461(0x17b)],'imported':[new ImportedDocument({'document':_0x4e6917})]});}else{_0x4e6917=await Actor[_0x578461(0xde)]({..._0x18f80f,'type':this[_0x578461(0xd6)]},{'temporary':!![]}),_0x27b0cf['actor']=_0x4e6917;const _0x3fe10c=this[_0x578461(0x179)]?await this[_0x578461(0x179)][_0x578461(0x170)]({'ent':_0x16fbd3,'actor':_0x27b0cf[_0x578461(0xec)],'img':_0x40c328}):null;if(_0x3fe10c?.['length'])_0x27b0cf[_0x578461(0x145)][_0x578461(0x11a)](..._0x3fe10c);await this[_0x578461(0x143)](_0x16fbd3,_0x18f80f,_0x27b0cf,_0x25372b),await this[_0x578461(0x104)](_0x27b0cf,_0x25372b);const _0x259882=await this[_0x578461(0x159)][_0x578461(0x174)](_0x4e6917);return await this['_pImportEntry_pHandlePostItemItemUpdates'](_0x259882,_0x25372b,_0x27b0cf),await this['_pImportEntry_pAddToTargetTableIfRequired']([_0x4e6917],_0x56c771),new ImportSummary({'status':UtilApplications[_0x578461(0xd7)],'imported':[new ImportedDocument({'document':_0x4e6917})]});}}else{const _0x1ed2e2=this[_0x578461(0x179)]?await this[_0x578461(0x179)][_0x578461(0x170)]({'ent':_0x16fbd3,'actor':_0x27b0cf[_0x578461(0xec)],'img':_0x40c328}):null;if(_0x1ed2e2?.[_0x578461(0x16e)])_0x27b0cf[_0x578461(0x145)]['push'](..._0x1ed2e2);return _0x56c771[_0x578461(0x13d)]&&(await _0x4e6917[_0x578461(0x164)]('Item',_0x4e6917['items'][_0x578461(0x105)](_0x532720=>_0x532720['id'])),await _0x4e6917[_0x578461(0x164)](_0x578461(0x125),_0x4e6917[_0x578461(0x145)][_0x578461(0x105)](_0x249276=>_0x249276['id']))),await this[_0x578461(0x143)](_0x16fbd3,_0x18f80f,_0x27b0cf,_0x25372b),await this[_0x578461(0x104)](_0x27b0cf,_0x25372b),await UtilDocuments[_0x578461(0x137)](_0x4e6917,_0x18f80f),await _0x4e6917['unsetFlag'](SharedConsts[_0x578461(0x135)],_0x578461(0x11d)),await game[_0x578461(0x115)][_0x578461(0x16f)](_0x4e6917['id'],_0x4e6917),await this['_pImportEntry_pHandlePostItemItemUpdates'](_0x4e6917,_0x25372b,_0x27b0cf),new ImportSummary({'status':_0x56c771['isOverwrite']?UtilApplications[_0x578461(0x17b)]:UtilApplications['TASK_EXIT_COMPLETE'],'imported':[new ImportedDocument({'isExisting':_0x56c771[_0x578461(0x13d)],'document':_0x4e6917})]});}}}async['_pImportEntry_pApplyEffects'](_0x7915e2,_0x34978c){const _0x3860a4=_0x2afd10;if(!_0x7915e2[_0x3860a4(0x145)]?.['length'])return;const _0x14bfd3=_0x34978c['isTemp']||this['_pack']!=null;await UtilActors[_0x3860a4(0x160)](_0x7915e2[_0x3860a4(0xec)],_0x7915e2[_0x3860a4(0x145)],{'isTemporary':_0x14bfd3});}async[_0x2afd10(0x157)](_0x22352b,_0x33cc75,_0xf7a0c6){const _0x49238c=_0x2afd10;if(!_0xf7a0c6[_0x49238c(0x16d)])return;for(const _0x3c7a32 of _0xf7a0c6['postItemItemUpdates']){await _0x3c7a32({'actor':_0x22352b,'isTemp':_0x33cc75['isTemp'],'isPack':this['_pack']!=null,'pack':this[_0x49238c(0x159)]});}}[_0x2afd10(0x16c)](){const _0x33c46a=_0x2afd10;throw new Error(_0x33c46a(0x173));}['_pImportEntry_pFillItems'](){throw new Error('Unimplemented!');}[_0x2afd10(0xfa)](_0x52d5f0){const _0x5c7d0d=_0x2afd10;return this[_0x5c7d0d(0x131)]['pSerialAwaitSome'](_0x2671da=>Vetools[_0x5c7d0d(0xd5)](_0x2671da,_0x52d5f0));}async[_0x2afd10(0x116)](_0x4260d7){const _0x3cb9f5=_0x2afd10,_0x11c9f8=[this['_pImportEntry_pGetTokenImage_fromPlutonium'][_0x3cb9f5(0x156)](this,_0x4260d7),this[_0x3cb9f5(0x13c)][_0x3cb9f5(0x156)](this,_0x4260d7)];if(Config[_0x3cb9f5(0xfb)]('import',_0x3cb9f5(0x114)))_0x11c9f8['reverse']();for(const _0x18d8ef of _0x11c9f8){const _0x1a6d98=await _0x18d8ef();if(_0x1a6d98)return _0x1a6d98;}return Vetools['getBlankTokenUrl']();}async['_pImportEntry_pGetTokenImage_fromPlutonium'](_0x2b919a){const _0x557e1b=_0x2afd10,_0x404a81=await this[_0x557e1b(0x131)][_0x557e1b(0x121)](_0x452c29=>Vetools['pHasTokenUrl'](_0x452c29,_0x2b919a));if(_0x404a81)return Vetools['pGetTokenUrl'](_0x404a81,_0x2b919a);}async[_0x2afd10(0x13c)](_0x252643){const _0x106dba=_0x2afd10;return this[_0x106dba(0x127)](_0x252643);}async[_0x2afd10(0xe1)](_0x370bbf,_0x29627a,_0x455175,_0x76249b){const _0x96939=_0x2afd10;_0x76249b=_0x76249b||{},_0x29627a[_0x96939(0x17a)]=this['_getActorSheetName'](_0x370bbf),_0x29627a[_0x96939(0x17e)]=_0x76249b['img']||await Vetools[_0x96939(0x169)](await this[_0x96939(0xe6)](_0x370bbf,_0x455175,_0x76249b)),_0x29627a[_0x96939(0x123)]=this[_0x96939(0xd6)],_0x29627a[_0x96939(0x128)]=this[_0x96939(0x102)](_0x370bbf);}async[_0x2afd10(0xe6)](_0x58a1dc,_0x283400,_0x150e29){const _0x3bf187=_0x2afd10;if(_0x58a1dc[_0x3bf187(0x147)])return _0x58a1dc[_0x3bf187(0x147)];const _0x567688=[this[_0x3bf187(0x142)][_0x3bf187(0x156)](this,_0x58a1dc,_0x283400,_0x150e29),this[_0x3bf187(0x136)][_0x3bf187(0x156)](this,_0x58a1dc,_0x150e29)];if(Config[_0x3bf187(0xfb)](_0x3bf187(0x139),_0x3bf187(0x15f)))_0x567688[_0x3bf187(0xff)]();for(const _0x2da195 of _0x567688){const _0x343e70=await _0x2da195();if(_0x343e70)return _0x343e70;}return this['_pImportEntry_pGetTokenImage'](_0x58a1dc);}async['_pImportEntry_pFillBase_pGetPortraitImagePath_fromPlutonium'](_0x1d4598,_0x596a61,_0x5c8fc7){const _0xb07baf=_0x2afd10,_0x2fa3a3=_0x5c8fc7['isUseTokenImageAsPortrait']?null:await Vetools[_0xb07baf(0xed)](_0x596a61);if(_0x2fa3a3)return _0x2fa3a3;if(await this[_0xb07baf(0xfa)](_0x1d4598))return this['_pImportEntry_pGetTokenImage'](_0x1d4598);}async[_0x2afd10(0x136)](_0x4d1f29,_0x4bd6df){const _0x4b0acc=_0x2afd10,_0x34b77a=_0x4bd6df['isUseTokenImageAsPortrait']?null:await this[_0x4b0acc(0x12e)](_0x4d1f29);if(_0x34b77a)return _0x34b77a;return this[_0x4b0acc(0x127)](_0x4d1f29);}async[_0x2afd10(0xd9)](_0x34b733,_0xa1ce42,_0x5a68f0){const _0x33feae=_0x2afd10;if(_0x5a68f0[_0x33feae(0x14a)])return;if(_0x5a68f0['isImportToTempDirectory']){const _0x36429d=await this[_0x33feae(0xdd)]();if(_0x36429d)_0xa1ce42[_0x33feae(0xf1)]=_0x36429d;return;}if(_0x5a68f0[_0x33feae(0xef)]||this['_pack'])return;const _0x4a8551=await this[_0x33feae(0x109)](_0x34b733);if(_0x4a8551)_0xa1ce42[_0x33feae(0xf1)]=_0x4a8551;}[_0x2afd10(0x120)](_0x3548a9){return UtilDataConverter['getNameWithSourcePart'](_0x3548a9);}[_0x2afd10(0x102)](_0xafef4){const _0x425d2f=_0x2afd10;return{[SharedConsts[_0x425d2f(0x135)]]:{'page':this[_0x425d2f(0x168)],'source':_0xafef4[_0x425d2f(0x13a)],'hash':UrlUtil[_0x425d2f(0x167)][this['_page']](_0xafef4)}};}async['_pImportEntry_pFillBase_pGetCompendiumImage'](_0x4b2f4e){const _0x3c0451=_0x2afd10;for(const _0x165fd7 of this['_props']){const _0x2f35b0=await UtilCompendium[_0x3c0451(0x13b)](_0x165fd7,_0x4b2f4e);if(_0x2f35b0&&!_0x2f35b0['toLowerCase']()[_0x3c0451(0x132)](_0x3c0451(0x172)))return _0x2f35b0;}return null;}async[_0x2afd10(0x127)](_0x36a788){const _0x89e6b2=_0x2afd10;for(const _0x5d7ddc of this['_props']){const _0x1dbcc6=await UtilCompendium[_0x89e6b2(0x171)](_0x5d7ddc,_0x36a788),_0x232c06=_0x1dbcc6?.['token']?.[_0x89e6b2(0x17e)];if(_0x232c06&&!_0x232c06[_0x89e6b2(0x16a)]()['includes'](_0x89e6b2(0x172)))return _0x232c06;}return null;}async[_0x2afd10(0x14d)]({importable:_0x155d8a,actor:_0x3b2ad4,img:img=null}){const _0x53bfb5=_0x2afd10;let _0x43dfd6=0x1;switch(_0x155d8a[_0x53bfb5(0xfe)]||SZ_MEDIUM){case'T':_0x43dfd6=0.5;break;case'L':_0x43dfd6=0x2;break;case'H':_0x43dfd6=0x3;break;case'G':_0x43dfd6=0x4;break;}let _0x2c9890=0x0,_0x3492f8=0x0;(_0x155d8a[_0x53bfb5(0x12a)]||[])[_0x53bfb5(0x154)](_0x4b7e37=>{const _0x1c543f=_0x53bfb5;_0x4b7e37=_0x4b7e37['replace'](Parser[_0x1c543f(0x161)],'');const _0x172f77=/(blindsight|darkvision|tremorsense|truesight)\s*(\d+)/i[_0x1c543f(0x163)](_0x4b7e37);if(_0x172f77){const _0x2086a8=Number(_0x172f77[0x2]);switch(_0x172f77[0x1]){case'darkvision':_0x2c9890=Math[_0x1c543f(0x176)](_0x2c9890,_0x2086a8);break;case _0x1c543f(0x150):case _0x1c543f(0x117):case _0x1c543f(0x126):_0x3492f8=Math[_0x1c543f(0x176)](_0x3492f8,_0x2086a8);break;}}}),_0x2c9890=Config[_0x53bfb5(0x108)]({'configGroup':this[_0x53bfb5(0xd8)],'configKey':_0x53bfb5(0xe0),'originalValue':_0x2c9890||0x0,'originalUnit':'ft'}),_0x3492f8=Config[_0x53bfb5(0x108)]({'configGroup':this[_0x53bfb5(0xd8)],'configKey':_0x53bfb5(0xe0),'originalValue':_0x3492f8||0x0,'originalUnit':'ft'}),_0x3b2ad4[_0x53bfb5(0x103)]={...this[_0x53bfb5(0xda)]['_getMergedTokenData']({'configGroup':this['_configGroup'],'maxDimSight':_0x2c9890,'maxBrightSight':_0x3492f8}),'name':UtilApplications[_0x53bfb5(0x11c)](_0x155d8a[_0x53bfb5(0xfc)]||_0x155d8a[_0x53bfb5(0x17a)]),'img':await Vetools[_0x53bfb5(0x169)](img||await this['_pImportEntry_pGetTokenImage'](_0x155d8a),{'imageType':_0x53bfb5(0x103)}),'width':_0x43dfd6,'height':_0x43dfd6,'elevation':0x0,'rotation':0x0,'actorLink':![],'actorData':{},'flags':{},'effects':[],'randomImg':![]};}static[_0x2afd10(0x13e)]({configGroup:_0x1ad2bb,maxDimSight:_0x4c8268,maxBrightSight:_0x4e3632}){const _0x1f0f59=_0x2afd10,_0x12824d=UtilGameSettings[_0x1f0f59(0x11b)](_0x1f0f59(0x110),_0x1f0f59(0x175))||{};if(Config[_0x1f0f59(0xfb)](_0x1ad2bb,'tokenNameDisplay')!==ConfigConsts['C_USE_GAME_DEFAULT'])_0x12824d[_0x1f0f59(0x144)]=Config['get'](_0x1ad2bb,_0x1f0f59(0xdf));if(Config['get'](_0x1ad2bb,_0x1f0f59(0x101))!==ConfigConsts[_0x1f0f59(0x166)])_0x12824d[_0x1f0f59(0x17c)]=Config['get'](_0x1ad2bb,_0x1f0f59(0x101))===ConfigConsts[_0x1f0f59(0x162)];if(Config[_0x1f0f59(0xfb)](_0x1ad2bb,_0x1f0f59(0x113))!==ConfigConsts[_0x1f0f59(0x166)])_0x12824d[_0x1f0f59(0x13f)]=Config[_0x1f0f59(0xfb)](_0x1ad2bb,_0x1f0f59(0x113));if(Config[_0x1f0f59(0xfb)](_0x1ad2bb,_0x1f0f59(0x124))!==ConfigConsts['C_USE_GAME_DEFAULT'])_0x12824d[_0x1f0f59(0x122)]=Config['get'](_0x1ad2bb,_0x1f0f59(0x124));if(Config['get'](_0x1ad2bb,_0x1f0f59(0x153))!==ConfigConsts[_0x1f0f59(0x166)])MiscUtil[_0x1f0f59(0x16f)](_0x12824d,_0x1f0f59(0x146),'attribute',Config[_0x1f0f59(0xfb)](_0x1ad2bb,_0x1f0f59(0x153)));if(Config[_0x1f0f59(0xfb)](_0x1ad2bb,_0x1f0f59(0x15d))!==ConfigConsts[_0x1f0f59(0x166)])MiscUtil['set'](_0x12824d,_0x1f0f59(0xeb),_0x1f0f59(0xf0),Config[_0x1f0f59(0xfb)](_0x1ad2bb,'tokenBar2Attribute'));if(Config['get'](_0x1ad2bb,'tokenDimSight')!==ConfigConsts[_0x1f0f59(0x166)])_0x12824d[_0x1f0f59(0x15a)]=_0x4c8268;if(Config['get'](_0x1ad2bb,_0x1f0f59(0x16b))!==ConfigConsts[_0x1f0f59(0x166)])_0x12824d['brightSight']=_0x4e3632;if(Config[_0x1f0f59(0xfb)](_0x1ad2bb,_0x1f0f59(0x10e))!=null)_0x12824d[_0x1f0f59(0x134)]=Config[_0x1f0f59(0xfb)](_0x1ad2bb,_0x1f0f59(0x10e));return _0x12824d;}[_0x2afd10(0xf9)](_0xe747ea,_0xc7c2f2,_0x4b1379){const _0x5e9651=_0x2afd10,_0x506111={};Parser['ABIL_ABVS'][_0x5e9651(0x154)](_0x59d86=>{const _0x59314a=_0x5e9651,_0x51ce83=_0xe747ea[_0x59d86]??0x0,_0xc943c0=Parser[_0x59314a(0x14e)](_0x51ce83),{profType:_0x1d1097,bonusCheck:_0xc0bfa4}=this[_0x59314a(0xf5)]({'imp':_0xe747ea,'impOpts':_0x4b1379,'score':_0x51ce83,'ab':_0x59d86});_0x506111[_0x59d86]={'value':_0x51ce83,'proficient':_0x1d1097??0x0,'mod':_0xc943c0,'bonuses':{'check':_0xc0bfa4??'','save':''}};}),_0xc7c2f2[_0x5e9651(0x118)]=_0x506111;}[_0x2afd10(0xf5)]({imp:_0x141a76,impOpts:_0x514492,score:_0x19f066,ab:_0x25891c}){const _0x418933=_0x2afd10;if(!_0x141a76[_0x418933(0x111)]?.[_0x25891c])return{'profType':0x0,'bonusCheck':0x0};const _0x3e5923=/^\s*(?<number>[-+]?\s*\d+)\s*(?:[-+]|$)/[_0x418933(0x163)](''+_0x141a76[_0x418933(0x111)][_0x25891c]);if(!_0x3e5923)return{'profType':0x0,'bonusCheck':0x0};const _0x485124=Number(_0x3e5923['groups'][_0x418933(0x129)]['replace'](/\s+/g,'')),_0x1c2bee=Parser[_0x418933(0x14e)](_0x19f066);if(_0x485124===_0x1c2bee)return{'profType':0x0,'bonusCheck':0x0};const _0x367485=_0x1c2bee+(_0x514492['assumedPb']||_0x514492['pb']),_0x27cabe=_0x1c2bee+0x2*(_0x514492[_0x418933(0x148)]||_0x514492['pb']);if(_0x367485===_0x485124)return{'profType':0x1,'bonusCheck':0x0};if(_0x27cabe===_0x485124)return{'profType':0x2,'bonusCheck':0x0};const _0x41bb07=_0x485124>=_0x27cabe?0x2:_0x485124>=_0x367485?0x1:0x0;return{'profType':_0x41bb07,'bonusCheck':_0x41bb07===0x0?_0x485124:_0x41bb07===0x1?_0x485124-_0x367485:_0x485124-_0x27cabe};}async['_pGetBiographyValue'](_0x32b012,_0x1f6723,{isImportText:_0x132a82,isImportImages:_0x500eef,additionalHtml:_0x10d03c}={}){const _0x1693e1=_0x2afd10;if(!_0x132a82&&!_0x500eef&&!_0x10d03c||![_0x1f6723?.[_0x1693e1(0xe9)]&&_0x132a82,_0x1f6723?.[_0x1693e1(0xe8)]&&_0x500eef,_0x10d03c]['some'](Boolean))return'';return UtilDataConverter['pGetWithDescriptionPlugins'](()=>{const _0x17677a=_0x1693e1;return[_0x500eef&&_0x1f6723?.[_0x17677a(0xe8)]?.[_0x17677a(0x16e)]?Renderer[_0x17677a(0xfb)]()[_0x17677a(0x138)](!![])['render']({'type':_0x17677a(0xe9),'entries':[_0x1f6723[_0x17677a(0xe8)][0x0]]}):null,_0x132a82&&_0x1f6723?.[_0x17677a(0xe9)]?.[_0x17677a(0x16e)]?Renderer[_0x17677a(0x151)][_0x17677a(0x100)]({'entity':_0x32b012,'fluff':_0x1f6723,'isImageTab':![]}):null,_0x10d03c||null,_0x500eef&&_0x1f6723?.[_0x17677a(0xe8)]&&_0x1f6723?.[_0x17677a(0xe8)]['length']>0x1?Renderer['get']()[_0x17677a(0x138)](!![])[_0x17677a(0xee)]({'type':_0x17677a(0xe9),'entries':[..._0x1f6723[_0x17677a(0xe8)][_0x17677a(0x17d)](0x1)]}):null]['filter'](Boolean)[_0x17677a(0x177)]('');});}['_pImportEntry_fillConditionsDamage'](_0x22592d,_0x5243ce){const _0xfdb63a=_0x2afd10;Object[_0xfdb63a(0xf6)](_0x5243ce,DataConverter['getActorDamageResImmVulnConditionImm'](_0x22592d));}async[_0x2afd10(0xf8)](_0x28eaef,_0x37f73b,_0x41b598,_0x3d45f9,{offensiveAbility:_0x3ec187,damageParts:_0x32a3e9,formula:_0x5ad1ba,rangeShort:_0x4deaad,rangeLong:_0x22e313,actionType:_0x23e51b,isProficient:_0x30fbf5,description:_0x1261b5,saveAbility:_0x3aa9a3,saveDc:_0x4ea010,saveScaling:_0x54c15a,attackBonus:_0x19d279,_foundryData:_0x3001dd,foundryData:_0x342e42,_foundryFlags:_0xd907a8,foundryFlags:_0x3c4117,img:_0x1e9b14,isSiegeWeapon:_0x3e708b,isMagical:_0x368d82}){const _0x1f7750=_0x2afd10,_0x260377=DataConverter['getCombinedFoundryData'](_0x342e42,_0x3001dd),_0x5ccd7c=DataConverter[_0x1f7750(0x119)](_0x3c4117,_0xd907a8),_0x4d6fff={'name':UtilApplications[_0x1f7750(0x11c)](Renderer['stripTags'](_0x41b598[_0x1f7750(0x17a)]||'')||'\x20'),'type':_0x1f7750(0xea),'data':{'source':UtilDataConverter[_0x1f7750(0xdc)](_0x28eaef),'description':{'value':_0x1261b5},'range':{'value':_0x4deaad,'long':_0x22e313,'units':'ft'},'actionType':_0x23e51b,'proficient':_0x30fbf5,'ability':_0x3ec187,'activation':{'type':'action','cost':0x1},'attackBonus':_0x19d279,'formula':_0x5ad1ba,'save':{'ability':_0x3aa9a3,'dc':_0x4ea010,'scaling':_0x54c15a},..._0x260377||{}},'img':_0x1e9b14,'flags':{..._0x5ccd7c||{}},'effects':[]};Object['entries'](_0x4d6fff)[_0x1f7750(0x154)](([_0x39da38,_0x4f655b])=>{const _0x3772bf=_0x1f7750;if(typeof _0x4f655b!==_0x3772bf(0x12b)||_0x4f655b instanceof Array){_0x4d6fff[_0x39da38]=MiscUtil['copy'](_0x4f655b);return;}_0x4d6fff[_0x39da38]=foundry['utils'][_0x3772bf(0x15c)](_0x4f655b);});const _0x97c03f=await DataConverterItem[_0x1f7750(0x106)]({'size':_0x28eaef[_0x1f7750(0xfe)],'action':_0x41b598,'damageParts':_0x32a3e9,'isSiegeWeapon':_0x3e708b,'isMagical':_0x368d82,'isInfiniteAmmo':!![]});delete _0x97c03f[_0x1f7750(0x145)];const _0x9c67d4=foundry[_0x1f7750(0x151)]['mergeObject'](MiscUtil[_0x1f7750(0x112)](_0x97c03f),MiscUtil[_0x1f7750(0x112)](_0x4d6fff));if(_0x97c03f['data'][_0x1f7750(0x14b)])_0x9c67d4['data']['attunement']=CONFIG['DND5E'][_0x1f7750(0x155)][_0x1f7750(0xe7)];if(_0x97c03f[_0x1f7750(0x17e)])_0x9c67d4['img']=_0x97c03f[_0x1f7750(0x17e)];_0x9c67d4[_0x1f7750(0x17e)]=await Vetools[_0x1f7750(0x169)](_0x9c67d4[_0x1f7750(0x17e)]);const _0x346212=foundry[_0x1f7750(0x151)][_0x1f7750(0x149)](_0x9c67d4);return _0x3d45f9['items'][_0x1f7750(0x11a)](_0x346212),_0x346212;}['_getSavingThrowData'](_0x537108){const _0x182238=_0x2afd10;if(!_0x537108)return MiscUtil[_0x182238(0x112)](ImportListActor['_DEFAULT_SAVING_THROW_DATA']);let _0x328db6=![],{saveAbility:_0x51c6d4,saveScaling:_0x48a267,saveDc:_0x58fdc7}=MiscUtil[_0x182238(0x112)](ImportListActor[_0x182238(0x165)]);const _0x13cd95=/(?:{@dc (\d+)}|DC\s*(\d+))\s*(Strength|Dexterity|Constitution|Intelligence|Wisdom|Charisma)/i[_0x182238(0x163)](_0x537108);return _0x13cd95&&(_0x58fdc7=Number(_0x13cd95[0x1]||_0x13cd95[0x2]),_0x51c6d4=_0x13cd95[0x3][_0x182238(0x16a)]()[_0x182238(0x178)](0x0,0x3),_0x48a267='flat',_0x328db6=!![]),{'saveAbility':_0x51c6d4,'saveScaling':_0x48a267,'saveDc':_0x58fdc7,'isFoundParse':_0x328db6};}}ImportListActor[_0x2afd10(0x165)]={'saveAbility':'','saveScaling':_0x2afd10(0x10c),'saveDc':null},ImportListActor['ImportEntryOpts']=class{constructor(_0x4baf97){const _0x51a628=_0x2afd10;_0x4baf97=_0x4baf97||{},this[_0x51a628(0xec)]=_0x4baf97[_0x51a628(0xec)],this['fluff']=_0x4baf97[_0x51a628(0x133)],this[_0x51a628(0x12c)]=[],this[_0x51a628(0x145)]=[],this[_0x51a628(0x16d)]=[];}};export{ImportListActor};