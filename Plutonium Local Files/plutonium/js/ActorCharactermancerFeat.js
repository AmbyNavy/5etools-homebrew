const _0x32b6a9=_0x52ef;function _0x41bc(){const _0x92ac4a=['map','feat_availableFromCustom','_addHookBase','Unhandled\x20feat\x20namespace\x20\x22','entries','custom','<div\x20class=\x22ve-flex-col\x20w-100\x22></div>','_tabFeats','ixFeat','8yzazOo','249PdFbEY','isAnyData','getFormDataAsi','1630wGFAVD','featureSourceTracker_','setIxFeat','feat_availableFromAsi','setIxFeatSet','_feat_renderAdditionalFeats','includes','modalFilterFeats','mergeMap','<button\x20class=\x22btn\x20btn-5et\x20btn-sm\x22>Add\x20Feat</button>','_modalFilterFeats','feat_availableFromBackground','<div><i\x20class=\x22ve-muted\x22>No\x20feats\x20are\x20available\x20for\x20your\x20current\x20class/race\x20combination.</i><hr\x20class=\x22hr-1\x22></div>','parent','_feat_addFeatSection','has','length','_data','compBackground','2195083IZLnTD','getFeatureCustomizedBackground_','_proxyAssignSimple','149416ISXoEi','appendTo','1422roTVvF','60wYcVFZ','some','remove','render','background_pulseBackground','cleanup','getFormDataReduced','_compAdditionalFeatsMetas','forEach','6397299SrVHRN','addCustomFeat','_feat_renderAdditionalFeats_addStatgenHandling','33352sfnVbR','compFeat','choose','renderTwoColumn','743950EMqZlU','data','compAbility','_state','feats','_isSuspendSyncToStatgen','2046919atUDCu','filter','_getDefaultState','feat','toggleVe','ixsStatgen','background','setAdditionalFeatStateFromStatgen_','compStatgen','pLoad','_parent','_actor','ability','getRace_','compRace','state','unregister','tabFeats','feat_availableFromRace','race','setStateFromStatgenFeatList_','feat_pGetAdditionalFeatFormData'];_0x41bc=function(){return _0x92ac4a;};return _0x41bc();}(function(_0x388e61,_0x553a79){const _0x3eb8b9=_0x52ef,_0x144750=_0x388e61();while(!![]){try{const _0x32c1ec=parseInt(_0x3eb8b9(0x84))/0x1+parseInt(_0x3eb8b9(0x97))/0x2+-parseInt(_0x3eb8b9(0xbd))/0x3*(-parseInt(_0x3eb8b9(0x93))/0x4)+-parseInt(_0x3eb8b9(0xc0))/0x5*(parseInt(_0x3eb8b9(0x86))/0x6)+parseInt(_0x3eb8b9(0x9d))/0x7*(-parseInt(_0x3eb8b9(0xbc))/0x8)+parseInt(_0x3eb8b9(0x90))/0x9+-parseInt(_0x3eb8b9(0x87))/0xa*(parseInt(_0x3eb8b9(0xd3))/0xb);if(_0x32c1ec===_0x553a79)break;else _0x144750['push'](_0x144750['shift']());}catch(_0x2f3d03){_0x144750['push'](_0x144750['shift']());}}}(_0x41bc,0x5738b));import{ActorCharactermancerBaseComponent}from'./ActorCharactermancerUtil.js';import{ModalFilterFeatsFvtt}from'./UtilModalFilter.js';import{Charactermancer_AdditionalFeatsSelect}from'./UtilCharactermancerAdditionalFeats.js';class ActorCharactermancerFeat extends ActorCharactermancerBaseComponent{constructor(_0x44d37e){const _0x53bcdb=_0x52ef;_0x44d37e=_0x44d37e||{},super(),this[_0x53bcdb(0xa8)]=_0x44d37e['actor'],this['_data']=_0x44d37e['data'],this[_0x53bcdb(0xa7)]=_0x44d37e[_0x53bcdb(0xcd)],this['_tabFeats']=_0x44d37e[_0x53bcdb(0xae)],this[_0x53bcdb(0xca)]=new ModalFilterFeatsFvtt({'namespace':'ActorCharactermancer.feats','isRadio':!![],'allData':this[_0x53bcdb(0xd1)][_0x53bcdb(0xa0)]}),this[_0x53bcdb(0x8e)]={},this['_isSuspendSyncToStatgen']=![];}get[_0x32b6a9(0xc7)](){const _0x88a630=_0x32b6a9;return this[_0x88a630(0xca)];}async[_0x32b6a9(0xa6)](){const _0x1b6bd5=_0x32b6a9;await this[_0x1b6bd5(0xca)]['pPreloadHidden']();}[_0x32b6a9(0xa4)](){const _0x29ed9b=_0x32b6a9,_0x4cee45=this[_0x29ed9b(0xa7)][_0x29ed9b(0x99)]['compStatgen'][_0x29ed9b(0xbf)]();if(!_0x4cee45['feats']){const _0x2e4e58=this[_0x29ed9b(0x9f)](),_0x2e96d6=[_0x29ed9b(0xc3),'feat_availableFromRace',_0x29ed9b(0xb4)][_0x29ed9b(0xc8)](_0xfd4c0e=>({'prop':_0x2e4e58[_0xfd4c0e]}));this[_0x29ed9b(0x83)](_0x29ed9b(0xac),_0x2e96d6);return;}const _0x4139ec={};Object['entries'](_0x4cee45['feats'])['forEach'](([_0x366192,_0x487848])=>{const _0x4fea76=_0x29ed9b,_0x120062=_0x487848['filter'](Boolean)[_0x4fea76(0xd0)];switch(_0x366192){case _0x4fea76(0xa9):_0x4139ec[_0x4fea76(0xc3)]=_0x120062?[{'any':_0x120062}]:[];break;case'race':_0x4139ec[_0x4fea76(0xaf)]=this['_parent'][_0x4fea76(0xab)][_0x4fea76(0xaa)]()?.['feats'];break;case'custom':_0x4139ec[_0x4fea76(0xb4)]=_0x120062?[{'any':_0x120062}]:[];break;default:throw new Error(_0x4fea76(0xb6)+_0x366192+'\x22');}}),this[_0x29ed9b(0xa7)][_0x29ed9b(0x94)]['proxyAssignSimple'](_0x29ed9b(0xac),_0x4139ec);try{this[_0x29ed9b(0x9c)]=!![],Object[_0x29ed9b(0xb7)](_0x4cee45[_0x29ed9b(0x9b)])[_0x29ed9b(0x8f)](([_0x4f0846,_0xad2999])=>{const _0x23b82c=_0x29ed9b,_0x4907d6=this[_0x23b82c(0x8e)][_0x4f0846]?.['comp'];if(!_0x4907d6)return;_0x4907d6[_0x23b82c(0xb1)](_0xad2999);});}finally{this[_0x29ed9b(0x9c)]=![];}}[_0x32b6a9(0x8a)](){const _0x38b6f5=_0x32b6a9,_0x4355b3=this[_0x38b6f5(0xba)]?.['$wrpTab'];if(!_0x4355b3)return;const _0x57bc0f=$$`<div class="ve-flex-col w-100 h-100 px-1 pt-1 overflow-y-auto ve-grow veapp__bg-foundry"></div>`,_0x19b5dd=$$`<div class="ve-flex-col w-100 h-100 px-1 overflow-y-auto ve-grow veapp__bg-foundry"></div>`,_0x8f1d18=$(_0x38b6f5(0xcc))[_0x38b6f5(0x85)](_0x57bc0f),_0x2a15a2=()=>{const _0x15153b=_0x38b6f5,_0x484fc3=[_0x15153b(0xc3),_0x15153b(0xaf),_0x15153b(0xcb),'feat_availableFromCustom'][_0x15153b(0x88)](_0x5f15e6=>this[_0x15153b(0x9a)][_0x5f15e6]?.[_0x15153b(0xd0)]);_0x8f1d18[_0x15153b(0xa1)](!_0x484fc3);};this[_0x38b6f5(0xb5)](_0x38b6f5(0xc3),_0x2a15a2),this[_0x38b6f5(0xb5)]('feat_availableFromRace',_0x2a15a2),this[_0x38b6f5(0xb5)](_0x38b6f5(0xcb),_0x2a15a2),this[_0x38b6f5(0xb5)]('feat_availableFromCustom',_0x2a15a2),_0x2a15a2(),this[_0x38b6f5(0xce)](_0x57bc0f,_0x19b5dd,'feat_availableFromAsi',_0x38b6f5(0xa9)),this[_0x38b6f5(0xce)](_0x57bc0f,_0x19b5dd,_0x38b6f5(0xaf),'race'),this[_0x38b6f5(0xce)](_0x57bc0f,_0x19b5dd,_0x38b6f5(0xcb),'background'),this[_0x38b6f5(0xce)](_0x57bc0f,_0x19b5dd,'feat_availableFromCustom','custom');const _0x16ac2c=$(_0x38b6f5(0xc9))['click'](()=>this[_0x38b6f5(0xa7)][_0x38b6f5(0x99)]['compStatgen'][_0x38b6f5(0x91)]());$$`<div class="ve-flex w-100 h-100">
			<div class="ve-flex-col w-100">
				${_0x57bc0f}
				<div class="mt-2">${_0x16ac2c}</div>
			</div>
			<div class="vr-1"></div>
			${_0x19b5dd}
		</div>`[_0x38b6f5(0x85)](_0x4355b3),this['setAdditionalFeatStateFromStatgen_']();const _0x4a4551=()=>this['_state'][_0x38b6f5(0xcb)]=this['_parent'][_0x38b6f5(0xd2)][_0x38b6f5(0x82)]({'isAllowStub':![]})?.[_0x38b6f5(0x9b)];this[_0x38b6f5(0xa7)][_0x38b6f5(0xd2)]['addHookBase'](_0x38b6f5(0x8b),_0x4a4551),_0x4a4551();}[_0x32b6a9(0xce)](_0x4446d3,_0xa10f96,_0x14c9af,_0x3d1916){let _0x5ebd5c=null;const _0x22862f=()=>{const _0x484cef=_0x52ef,_0x279d63=this[_0x484cef(0x9a)][_0x14c9af];this['_parent']['featureSourceTracker_'][_0x484cef(0xad)](_0x5ebd5c),_0x5ebd5c=this[_0x484cef(0xc5)](_0x4446d3,_0xa10f96,_0x3d1916,_0x279d63);};this['_addHookBase'](_0x14c9af,_0x22862f),_0x22862f();}[_0x32b6a9(0xc5)](_0x4c8dd7,_0x4d1e51,_0x29dffc,_0x3b5333){const _0x38b8b9=_0x32b6a9;if(this[_0x38b8b9(0x8e)][_0x29dffc])this[_0x38b8b9(0x8e)][_0x29dffc][_0x38b8b9(0x8c)]();if(!_0x3b5333?.[_0x38b8b9(0xd0)])return;const _0x5150d0=$(_0x38b8b9(0xb9))[_0x38b8b9(0x85)](_0x4c8dd7),_0x47aee7=$(_0x38b8b9(0xb9))[_0x38b8b9(0x85)](_0x4d1e51),_0x133d33=new Charactermancer_AdditionalFeatsSelect({'available':_0x3b5333,'actor':this['_actor'],'featDatas':this[_0x38b8b9(0xd1)][_0x38b8b9(0xa0)],'modalFilterFeats':this[_0x38b8b9(0xca)],'featureSourceTracker':this[_0x38b8b9(0xa7)][_0x38b8b9(0xc1)],'isFeatureSelect':!![]});return this[_0x38b8b9(0x92)]({'compAdditionalFeats':_0x133d33,'namespace':_0x29dffc}),this[_0x38b8b9(0x8e)][_0x29dffc]={'comp':_0x133d33,'cleanup':()=>{const _0x8e6ec5=_0x38b8b9;_0x5150d0[_0x8e6ec5(0x89)](),_0x47aee7[_0x8e6ec5(0x89)]();}},_0x133d33[_0x38b8b9(0x96)]({'$wrpLeft':_0x5150d0,'$wrpRight':_0x47aee7}),_0x133d33;}[_0x32b6a9(0x92)]({compAdditionalFeats:_0x3883a6,namespace:_0x618efe}){const _0xc414cd=_0x32b6a9;if(!ActorCharactermancerFeat['_NAMESPACES_STATGEN'][_0xc414cd(0xcf)](_0x618efe))return;const _0x221031=()=>{const _0x33892c=_0xc414cd;if(this['_isSuspendSyncToStatgen'])return;const _0x19a5b3=_0x3883a6[_0x33892c(0x8d)](),_0x596a24=_0x3883a6['ixSetAvailable'];if(['race'][_0x33892c(0xc6)](_0x618efe)){this[_0x33892c(0xa7)][_0x33892c(0x99)][_0x33892c(0xa5)][_0x33892c(0xc4)]('race',_0x596a24);const _0x5b80e2=_0x19a5b3[_0x33892c(0x98)][_0x33892c(0x9e)](({type:_0x54480a})=>_0x54480a===_0x33892c(0x95))[_0x33892c(0xb3)](({ix:_0x46c4a1,ixFeat:_0x1a1ec9})=>({'ix':_0x46c4a1,'ixFeat':_0x1a1ec9}));this[_0x33892c(0xa7)]['compAbility']['compStatgen']['setIxFeatSetIxFeats'](_0x33892c(0xb0),_0x5b80e2);}else{if([_0x33892c(0xa9)]['includes'](_0x618efe)){let _0x37fe46=-0x1,_0x2210e7=0x0;(_0x19a5b3[_0x33892c(0xa2)]||[])[_0x33892c(0x8f)](_0x45b3da=>{const _0x11c041=_0x33892c;_0x45b3da>_0x37fe46+_0x2210e7+0x1&&(_0x2210e7+=_0x45b3da-(_0x37fe46+_0x2210e7+0x1));const _0x3d0bc1=_0x19a5b3[_0x11c041(0x98)]['find'](_0x484728=>_0x484728['ix']+_0x2210e7===_0x45b3da);this[_0x11c041(0xa7)]['compAbility']['compStatgen'][_0x11c041(0xc2)](_0x45b3da,_0x618efe,_0x3d0bc1?.['ixFeat']??-0x1),_0x37fe46++;});}else['custom'][_0x33892c(0xc6)](_0x618efe)&&_0x19a5b3[_0x33892c(0x98)][_0x33892c(0x8f)](_0x2a0903=>{const _0x49fb7b=_0x33892c;this['_parent'][_0x49fb7b(0x99)][_0x49fb7b(0xa5)]['setIxFeat'](_0x2a0903['ix'],_0x618efe,_0x2a0903[_0x49fb7b(0xbb)]);});}};_0x3883a6['addHookPulseFeats'](_0x221031),_0x221031();}async[_0x32b6a9(0xb2)](){const _0x554652=_0x32b6a9,_0x1d0229={'ability':null,'race':null,'background':null,'custom':null,'isAnyData':![]};for(const _0x15f5e3 of[_0x554652(0xa9),_0x554652(0xb0),_0x554652(0xa3),_0x554652(0xb8)]){if(!this[_0x554652(0x8e)][_0x15f5e3])continue;const {comp:_0x44ea4c}=this[_0x554652(0x8e)][_0x15f5e3];_0x1d0229[_0x15f5e3]=await _0x44ea4c['pGetFormData'](),_0x1d0229[_0x554652(0xbe)]=!![];}return _0x1d0229;}[_0x32b6a9(0x9f)](){return{'feat_availableFromAsi':[],'feat_availableFromRace':null,'feat_availableFromBackground':null,'feat_availableFromCustom':[],'feat_pulseChange':![]};}}ActorCharactermancerFeat['_NAMESPACES_STATGEN']=new Set([_0x32b6a9(0xa9),_0x32b6a9(0xb0),_0x32b6a9(0xb8)]);function _0x52ef(_0x4e09e5,_0x948e10){const _0x41bcee=_0x41bc();return _0x52ef=function(_0x52ef54,_0x1f907c){_0x52ef54=_0x52ef54-0x82;let _0x586f92=_0x41bcee[_0x52ef54];return _0x586f92;},_0x52ef(_0x4e09e5,_0x948e10);}export{ActorCharactermancerFeat};