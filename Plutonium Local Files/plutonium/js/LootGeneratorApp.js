const _0x157550=_0x532e;(function(_0x3eab65,_0x45327d){const _0x51bfed=_0x532e,_0x34bd4c=_0x3eab65();while(!![]){try{const _0x5564b6=-parseInt(_0x51bfed(0x223))/0x1+parseInt(_0x51bfed(0x238))/0x2+parseInt(_0x51bfed(0x1d8))/0x3+-parseInt(_0x51bfed(0x1e0))/0x4+parseInt(_0x51bfed(0x1bf))/0x5+-parseInt(_0x51bfed(0x1ec))/0x6*(parseInt(_0x51bfed(0x248))/0x7)+-parseInt(_0x51bfed(0x263))/0x8*(parseInt(_0x51bfed(0x244))/0x9);if(_0x5564b6===_0x45327d)break;else _0x34bd4c['push'](_0x34bd4c['shift']());}catch(_0x113c54){_0x34bd4c['push'](_0x34bd4c['shift']());}}}(_0x5e95,0xad570));import{SharedConsts}from'../shared/SharedConsts.js';import{LGT,Util}from'./Util.js';function _0x532e(_0x436af3,_0x163e82){const _0x5e9516=_0x5e95();return _0x532e=function(_0x532e69,_0x50003f){_0x532e69=_0x532e69-0x1bf;let _0x580b57=_0x5e9516[_0x532e69];return _0x580b57;},_0x532e(_0x436af3,_0x163e82);}import{UtilActors}from'./UtilActors.js';import{UtilEvents}from'./UtilEvents.js';function _0x5e95(){const _0x37221e=['patcher_pHandleActorDrop','flags','activateListeners','API','join','LootGenOutputFvtt.folderKeyPathSpec','contents','label','setFirstSection','getElementById','keybindings','currency','<button\x20title=\x22Import\x20to\x20Items\x20Folder\x22\x20class=\x22btn\x20btn-xs\x20btn-default\x22><i\x20class=\x22fas\x20fa-fw\x20fa-folder\x22></i></button>','get','_er','_pImportToCompendium','length','getShowModal','<button\x20class=\x22btn\x20btn-primary\x20mr-2\x22>OK</button>','_preInit_registerKeybinds','355663wxJSLJ','getImporter','<div>\x0a\x09\x09\x09\x09\x09','map','_pLoadSpells','MODULE_NAME','getDropJson','push','getPosCanvasSpace','$getSelCompendium','dateTimeGenerated','Enter','document','info','getPackByCollection','error','STR_SEE_CONSOLE','activateTab','users','Open\x20Loot\x20Generator','Imported\x20loot\x20to\x20journal\x20entry\x20\x22','2468176LisRga','LootGeneratorApp__open','concat','Loot','getFolderPathStrings','embeddedDocument','<li\x20class=\x22py-1\x22>Currency:\x20','package','Item','Failed\x20to\x20import\x20loot','noCanvas','loot','1161xXoCgK','JournalEntry','_pGetFoundryForm','spell','1449581bBmecB','imported','pGetUserCreatePack','source','documentClass','getSnappedPosition','isItemPilesActive','data.currency.','getDatetimeStr','_lootGenUi','pImportToJournal','Note','key','createEmbeddedDocuments','type','journal','pGetItemsFromHomebrew','withUnpatchedDiceRendering','FLAG_TYPE__LOOT','scene','click','_getSummaryHtml',']</p>','getDisplayCurrency','userId','_pImportLoot_pGetCacheImporter','<button\x20title=\x22Import\x20to\x20Compendium\x22\x20class=\x22btn\x20btn-xs\x20btn-default\x22><i\x20class=\x22fas\x20fa-fw\x20fa-atlas\x22></i></button>','28296OOrVXV','getAvailablePacks','317215SjRGJt','addEventListener','\x20to\x20actor\x20\x22','pInit','constructor','item','_pImportToFolder','then','quantity','pLoadAll','create','\x0a\x09\x09</ul>','<button\x20class=\x22btn\x20btn-default\x22>Cancel</button>','pack','entityInfos','pAddBrewData','\x0a\x09\x09\x09\x09\x09','Loot\x20Generator','name','MODULE_NAME_FAKE','entries','\x0a\x09\x09\x09','actor','pImportLoot','Imported\x20loot','2751471HIzwfs','board','[data-name=\x22wrp-rhs\x22]','pBuildList','metadata','isTemp','grid','_pDoLogToChat','1942676dptyPQ','bind','<ul>\x0a\x09\x09\x09','_pRender','preInit','change','Only\x20one\x20of\x20\x22pack\x22\x20or\x20\x22actor\x22\x20may\x20be\x20specified!','Import\x20Loot\x20to\x20Items\x20Folder','sidebar','createItemPile','all','notifications','6EcpDBR','render','Imported\x20loot\x20to\x20items\x20folder\x20\x22','val','_pImportToJournal','/template/LootGeneratorApp.hbs','flat','Loot\x20(','getSafe','</li>','pImportToItemPile','_pHandleBoardDrop','pGetUserBoolean','pImportCurrency','pImportEntry','_pLoadItems','Create\x20Compendium','pCreateFoldersGetId','MODULE_LOCATION','items',']</li>','Imported\x20loot\x20to\x20compendium\x20\x22','<li\x20class=\x22py-1\x22>','find','_pImportLoot','TokenLayer','mergeMap','(Unnamed\x20','No\x20unlocked\x20\x22Item\x22-type\x20compendiums\x20currently\x20exist.\x20Would\x20you\x20like\x20to\x20create\x20one?','core','drop','filter','addAttributes','data','size'];_0x5e95=function(){return _0x37221e;};return _0x5e95();}import{UtilCanvas}from'./UtilCanvas.js';import{FolderPathBuilder}from'./FolderPathBuilder.js';import{ChooseImporter}from'./ChooseImporter.js';import{UtilFolders}from'./UtilFolders.js';import{UtilCompendium}from'./UtilCompendium.js';import{Vetools}from'./Vetools.js';import{UtilGameSettings}from'./UtilGameSettings.js';import{UtilCompat}from'./UtilCompat.js';const _IMG='icons/containers/chest/chest-worn-oak-tan.webp';class LootGenUiFvtt extends LootGenUi{static[_0x157550(0x21d)](..._0x2d570f){const _0x1ee50f=_0x157550;return Vetools[_0x1ee50f(0x259)](()=>Renderer[_0x1ee50f(0x21c)]()[_0x1ee50f(0x217)](!![])['render'](..._0x2d570f));}}class LootGeneratorApp extends Application{static[_0x157550(0x1e4)](){const _0x32a969=_0x157550;this[_0x32a969(0x222)]();}static[_0x157550(0x222)](){const _0x3b5757=_0x157550;game[_0x3b5757(0x219)]['register'](SharedConsts[_0x3b5757(0x228)],_0x3b5757(0x239),{'name':_0x3b5757(0x236),'editable':[],'onDown':()=>{const _0x2168bd=_0x3b5757,_0x3818cc=new this();return _0x3818cc[_0x2168bd(0x1ed)](!![]),!![];},'restricted':!![]});}static['init'](){const _0x245dec=_0x157550;!UtilGameSettings[_0x245dec(0x1f4)](_0x245dec(0x209),_0x245dec(0x242))&&document[_0x245dec(0x218)](_0x245dec(0x1d9))[_0x245dec(0x1c0)](_0x245dec(0x20a),this[_0x245dec(0x1f7)][_0x245dec(0x1e1)](this));}constructor(){const _0x16b25f=_0x157550;super({'title':_0x16b25f(0x1d0),'template':SharedConsts[_0x16b25f(0x1fe)]+_0x16b25f(0x1f1),'width':0x3c0,'height':Util['getMaxWindowHeight'](),'resizable':!![]}),this[_0x16b25f(0x251)]=null;}['activateListeners'](_0x4c2491){const _0x59a77f=_0x157550;super[_0x59a77f(0x211)](_0x4c2491),this['_pRender'](_0x4c2491)[_0x59a77f(0x1c6)](null);}async[_0x157550(0x1e3)](_0x5c3d72){const _0x497009=_0x157550;this[_0x497009(0x251)]=new LootGenUiFvtt({'spells':await this[_0x497009(0x227)](),'items':await this[_0x497009(0x1fb)](),'ClsLootGenOutput':LootGenOutputFvtt});const _0x35b8ce=_0x5c3d72['find']('[data-name=\x22wrp-lhs\x22]'),_0x33c4db=_0x5c3d72[_0x497009(0x203)](_0x497009(0x1da));await this['_lootGenUi'][_0x497009(0x1c2)](),this[_0x497009(0x251)][_0x497009(0x1ed)]({'$stgLhs':_0x35b8ce,'$stgRhs':_0x33c4db});}async[_0x157550(0x227)](){const _0x21ff17=_0x157550,[_0x293969,_0x521a50]=await Promise[_0x21ff17(0x1ea)]([DataUtil[_0x21ff17(0x247)][_0x21ff17(0x1c8)](),BrewUtil[_0x21ff17(0x1ce)]()]);return _0x293969[_0x21ff17(0x23a)](_0x521a50?.[_0x21ff17(0x247)]||[]);}async[_0x157550(0x1fb)](){const _0x1aaa41=_0x157550,_0x484e9a=await Renderer['item'][_0x1aaa41(0x1db)](),_0xd88b91=await BrewUtil['pAddBrewData'](),_0x3873f6=await Renderer[_0x1aaa41(0x1c4)][_0x1aaa41(0x258)](_0xd88b91);return _0x484e9a[_0x1aaa41(0x23a)](_0x3873f6);}static async['pImportLoot']({loot:_0x457de5,actor:actor=null,isLogToChat:isLogToChat=![],isNotify:isNotify=![],folderId:_0x372afb,pack:_0x237a61,isSkipCurrencies:isSkipCurrencies=![]}){const _0x2cc686=_0x157550;if(_0x237a61&&actor)throw new Error(_0x2cc686(0x1e6));try{const _0x2386b3=await this[_0x2cc686(0x204)]({'loot':_0x457de5,'actor':actor,'isLogToChat':isLogToChat,'folderId':_0x372afb,'pack':_0x237a61,'isSkipCurrencies':isSkipCurrencies});if(isNotify)ui[_0x2cc686(0x1eb)][_0x2cc686(0x230)](_0x2cc686(0x1d7)+(actor?_0x2cc686(0x1c1)+actor[_0x2cc686(0x1d1)]+'\x22':'')+'!');return _0x2386b3;}catch(_0x1d3034){ui['notifications'][_0x2cc686(0x232)](_0x2cc686(0x241)+(actor?_0x2cc686(0x1c1)+actor[_0x2cc686(0x1d1)]+'\x22':'')+'.\x20'+VeCt[_0x2cc686(0x233)]),setTimeout(()=>{throw _0x1d3034;});}}static async[_0x157550(0x204)]({loot:_0xe74db2,actor:_0x10088a,isLogToChat:_0x322436,folderId:_0x2a80f8,pack:_0x38f13a,isSkipCurrencies:_0x183882}){const _0x118a0b=_0x157550,_0x595041={},_0x26685d={};if(_0xe74db2['isTemp'])_0x26685d[_0x118a0b(0x1dd)]=!![];if(_0xe74db2[_0x118a0b(0x21a)]&&!_0x183882){if(_0x10088a)await UtilActors['pAddCurrencyToActor']({'currency':_0xe74db2['currency'],'actor':_0x10088a});else{const _0xc89fc8=await this[_0x118a0b(0x261)]({'cacheImporter':_0x595041,'page':UrlUtil['PG_ITEMS'],'actor':_0x10088a,'pack':_0x38f13a}),_0x3b464a={..._0x26685d,'folderId':_0x2a80f8};await _0xc89fc8[_0x118a0b(0x1f9)](_0xe74db2[_0x118a0b(0x21a)],_0x3b464a);}}const _0x24bceb=[];for(const {page:_0xefc92a,entity:_0xcfc6bd,options:_0x35080f}of _0xe74db2[_0x118a0b(0x1cd)]||[]){const _0x5a6b67=await this[_0x118a0b(0x261)]({'cacheImporter':_0x595041,'page':_0xefc92a,'actor':_0x10088a,'pack':_0x38f13a}),_0x5a1ed8={..._0x26685d,..._0x35080f||{},'folderId':_0x2a80f8},_0x182bae=await _0x5a6b67[_0x118a0b(0x1fa)](_0xcfc6bd,_0x5a1ed8);_0x24bceb['push']({'importSummary':_0x182bae,'count':_0x35080f?.['quantity']});}const {errorMessage:_0x2cb319,htmlSummary:_0x1f96b4}=this[_0x118a0b(0x25d)]({'loot':_0xe74db2,'importSummaries':_0x24bceb});_0x2cb319&&(console[_0x118a0b(0x232)](...LGT,_0x2cb319),ui[_0x118a0b(0x1eb)][_0x118a0b(0x232)]('Error\x20occurred\x20during\x20item\x20linking!\x20'+VeCt[_0x118a0b(0x233)]));if(_0x322436)await this[_0x118a0b(0x1df)]({'loot':_0xe74db2,'htmlSummary':_0x1f96b4,'actor':_0x10088a});return _0x24bceb;}static async[_0x157550(0x261)]({cacheImporter:_0x9e2e4d,page:_0x3aac27,actor:_0x32a0ca,pack:_0x3438d2}){const _0x40baa5=_0x157550;if(!_0x9e2e4d[_0x3aac27]){_0x9e2e4d[_0x3aac27]=ChooseImporter[_0x40baa5(0x224)](_0x3aac27,_0x32a0ca);if(_0x3438d2)_0x9e2e4d[_0x3aac27][_0x40baa5(0x1cc)]=_0x3438d2;await _0x9e2e4d[_0x3aac27][_0x40baa5(0x1c2)]();}return _0x9e2e4d[_0x3aac27];}static['_getSummaryHtml']({loot:_0x3ed828,importSummaries:_0x17ed61}){const _0x1e65bd=_0x157550;let _0x386ba0='';const _0x43dc9f=_0x17ed61[_0x1e65bd(0x226)](({importSummary:_0x88325c,count:_0x56579f})=>{const _0x50fdaf=_0x1e65bd;return _0x56579f=_0x56579f??0x1,(_0x88325c['imported']||[])[_0x50fdaf(0x226)](_0xa12799=>{const _0x166499=_0x50fdaf,_0x15f9ef=_0x56579f===0x1?'':_0x56579f+'×\x20';if(_0xa12799[_0x166499(0x23d)]&&_0xa12799[_0x166499(0x1d5)])return _0x166499(0x202)+_0x15f9ef+'@ActorEmbeddedItem['+_0xa12799['actor']['id']+']['+_0xa12799[_0x166499(0x23d)]['id']+']</li>';if(_0xa12799[_0x166499(0x22f)]){if(_0xa12799[_0x166499(0x1cc)])return _0x166499(0x202)+_0x15f9ef+'@Compendium['+_0xa12799[_0x166499(0x1cc)][_0x166499(0x1dc)][_0x166499(0x23f)]+'.'+_0xa12799[_0x166499(0x1cc)]['metadata']['name']+'.'+_0xa12799[_0x166499(0x22f)]['id']+_0x166499(0x200);return'<li\x20class=\x22py-1\x22>'+_0x15f9ef+'@Item['+_0xa12799[_0x166499(0x22f)]['id']+_0x166499(0x200);}_0x386ba0='Unhandled\x20imported\x20document\x20type--'+Object[_0x166499(0x1d3)](_0xa12799)[_0x166499(0x226)](([_0x4eba85,_0xc71700])=>_0x4eba85+'='+!!_0xc71700)['join'](',\x20');});})[_0x1e65bd(0x1f2)](),_0x2d86a3=_0x1e65bd(0x1e2)+(_0x3ed828[_0x1e65bd(0x21a)]?_0x1e65bd(0x23e)+Parser[_0x1e65bd(0x25f)](_0x3ed828[_0x1e65bd(0x21a)])+_0x1e65bd(0x1f5):'')+_0x1e65bd(0x1d4)+_0x43dc9f[_0x1e65bd(0x213)]('')+_0x1e65bd(0x1ca);return{'errorMessage':_0x386ba0,'htmlSummary':_0x2d86a3};}static async[_0x157550(0x1df)]({loot:_0x296d12,htmlSummary:_0x3baeab,actor:_0xeedd63}){const _0x3fe62a=_0x157550;await ChatMessage[_0x3fe62a(0x1c9)]({'content':_0x3fe62a(0x225)+(_0xeedd63?'<p><i>Added\x20to\x20the\x20inventory\x20of:</i>\x20@Actor['+_0xeedd63['id']+_0x3fe62a(0x25e):'')+_0x3fe62a(0x1cf)+_0x3baeab+'\x0a\x09\x09\x09\x09</div>','user':game[_0x3fe62a(0x260)],'type':0x4,'speaker':{'alias':'Loot\x20Generator'},'whisper':game[_0x3fe62a(0x235)][_0x3fe62a(0x215)][_0x3fe62a(0x20b)](_0x14e2a1=>_0x14e2a1['isGM']||_0x14e2a1===game['user'])[_0x3fe62a(0x226)](_0x59c814=>_0x59c814['id'])});}static async[_0x157550(0x20f)](..._0x49ce79){const _0x355d38=_0x157550,_0xaca3a6=_0x49ce79[0x0],_0x5e9354=UtilEvents[_0x355d38(0x229)](_0xaca3a6);if(_0x5e9354?.[_0x355d38(0x256)]===VeCt['DRAG_TYPE_LOOT'])return await LootGeneratorApp[_0x355d38(0x1d6)]({'loot':_0x5e9354[_0x355d38(0x20d)],'actor':this[_0x355d38(0x1d5)]}),!![];if(_0x5e9354?.[_0x355d38(0x256)]===_0x355d38(0x245)){const _0x153df7=game[_0x355d38(0x257)][_0x355d38(0x21c)](_0x5e9354['id']);if(_0x153df7?.[_0x355d38(0x20d)]?.['flags']?.[SharedConsts[_0x355d38(0x1d2)]]?.['type']===LootGenOutputFvtt['FLAG_TYPE__LOOT'])return await LootGeneratorApp[_0x355d38(0x1d6)]({'loot':_0x153df7[_0x355d38(0x20d)][_0x355d38(0x210)][SharedConsts[_0x355d38(0x1d2)]]['loot'],'actor':this[_0x355d38(0x1d5)]}),!![];}}static['_pHandleBoardDrop'](_0x5bf341){const _0x56c82e=_0x157550,_0xca1dee=UtilEvents[_0x56c82e(0x229)](_0x5bf341);if(_0xca1dee?.[_0x56c82e(0x256)]!==VeCt['DRAG_TYPE_LOOT'])return;if(UtilCompat[_0x56c82e(0x24e)]())return LootGenOutputFvtt[_0x56c82e(0x1f6)]({'loot':_0xca1dee['data'],'evt':_0x5bf341})[_0x56c82e(0x1c6)](null),![];const _0x5deb1f=UtilCanvas['getPosCanvasSpace'](_0x5bf341,'NotesLayer'),_0x34d185=canvas[_0x56c82e(0x1de)]['getSnappedPosition'](_0x5deb1f['x'],_0x5deb1f['y']);return LootGenOutputFvtt['pImportToJournal']({'loot':_0xca1dee['data']})[_0x56c82e(0x1c6)](async _0x2e00d7=>{const _0x5e0496=_0x56c82e;await canvas[_0x5e0496(0x25b)][_0x5e0496(0x255)](_0x5e0496(0x253),[{'entryId':_0x2e00d7['id'],'icon':_IMG,'iconSize':canvas[_0x5e0496(0x1de)][_0x5e0496(0x20e)],'text':'','x':_0x34d185['x']-canvas[_0x5e0496(0x1de)][_0x5e0496(0x20e)]/0x2,'y':_0x34d185['y']-canvas[_0x5e0496(0x1de)]['size']/0x2}]);}),![];}}class LootGenOutputFvtt extends LootGenOutput{['_$getEleTitleSplit'](){const _0x4b1ddb=_0x157550,_0x30f51a=$('<button\x20title=\x22Import\x20to\x20Journal\x22\x20class=\x22btn\x20btn-xs\x20btn-default\x22><i\x20class=\x22fas\x20fa-fw\x20fa-book-open\x22></i></button>')[_0x4b1ddb(0x25c)](()=>this['_pImportToJournal']()),_0x196be9=$(_0x4b1ddb(0x21b))[_0x4b1ddb(0x25c)](async()=>this[_0x4b1ddb(0x1c3)][_0x4b1ddb(0x1c5)]({'loot':await this[_0x4b1ddb(0x246)]()})),_0x42adff=$(_0x4b1ddb(0x262))['click'](()=>this[_0x4b1ddb(0x21e)]());return $$`<div class="ve-flex-v-center btn-group">
			${_0x196be9}
			${_0x30f51a}
			${_0x42adff}
		</div>`;}static async[_0x157550(0x252)]({loot:_0x4c5d14}){const _0x220492=_0x157550,_0xad4054=[];for(const {page:_0x425701,entity:_0x33b631,options:_0x38b810}of _0x4c5d14[_0x220492(0x1cd)]||[]){const _0x46aff3=_0x425701===UrlUtil['PG_ITEMS']?'item':'spell',_0x480126=_0x38b810?.[_0x220492(0x1c7)]??0x1,_0x36a1c1=_0x480126===0x1?'':_0x480126+'×\x20';_0xad4054[_0x220492(0x22a)]('<li\x20class=\x22py-1\x22>'+_0x36a1c1+'@'+_0x46aff3+'['+_0x33b631[_0x220492(0x1d1)]+'|'+_0x33b631[_0x220492(0x24b)]+']{'+_0x33b631['name']+'}</li>');}const _0x191846=_0x220492(0x1e2)+(_0x4c5d14[_0x220492(0x21a)]?_0x220492(0x23e)+Parser[_0x220492(0x25f)](_0x4c5d14[_0x220492(0x21a)])+_0x220492(0x1f5):'')+_0x220492(0x1d4)+_0xad4054['join']('')+_0x220492(0x1ca),_0x564cbc={'name':_0x220492(0x1f3)+Renderer['stripTags'](_0x4c5d14[_0x220492(0x1d1)])+')','permission':{'default':0x0},'entryTime':Date['now'](),'content':_0x191846,'img':_IMG,'flags':{[SharedConsts['MODULE_NAME_FAKE']]:{'type':LootGenOutputFvtt['FLAG_TYPE__LOOT'],'loot':_0x4c5d14}}};ui[_0x220492(0x1e8)][_0x220492(0x234)](_0x220492(0x257));const _0x49c5ea=await CONFIG[_0x220492(0x245)][_0x220492(0x24c)][_0x220492(0x1c9)](_0x564cbc,{'renderSheet':![],'temporary':![]});ui[_0x220492(0x1eb)][_0x220492(0x230)](_0x220492(0x237)+_0x49c5ea[_0x220492(0x1d1)]+'\x22');}async[_0x157550(0x1f0)](){const _0x3e58ee=_0x157550,_0x157711=await this[_0x3e58ee(0x246)]();await this[_0x3e58ee(0x1c3)][_0x3e58ee(0x252)]({'loot':_0x157711});}static async[_0x157550(0x1c5)]({loot:_0x59f29b,isSkipCurrencies:isSkipCurrencies=![]}){const _0x59bb7e=_0x157550,_0x316196=await new Promise(_0x2bb4f7=>{const _0x2586f5=_0x532e,{$modalInner:_0x3d9232,doClose:_0x5a333e}=UiUtil[_0x2586f5(0x220)]({'title':_0x2586f5(0x1e7),'isHeaderBorder':!![],'cbClose':_0x2d57b8=>{_0x2bb4f7(_0x2d57b8);}}),_0x55f32a=$$`<div class="w-100 ve-flex-col"></div>`,_0x5e6c8c=new FolderPathBuilder({'defaultFolderPathSpec':[_0x2586f5(0x23b),_0x59f29b[_0x2586f5(0x256)],_0x2586f5(0x207)+DatetimeUtil[_0x2586f5(0x250)]({'date':new Date(_0x59f29b[_0x2586f5(0x22d)]),'isPlainText':!![]})+')'],'fnOnRowKeydown':_0x14e48b=>{const _0x49de57=_0x2586f5;if(_0x14e48b[_0x49de57(0x254)]!==_0x49de57(0x22e))return;_0xa0d7d5['click']();}});_0x5e6c8c[_0x2586f5(0x1ed)](_0x55f32a);const _0xa0d7d5=$(_0x2586f5(0x221))[_0x2586f5(0x25c)](()=>_0x5a333e(_0x5e6c8c[_0x2586f5(0x23c)]())),_0x3f932e=$(_0x2586f5(0x1cb))['click'](()=>_0x5a333e(null));$$(_0x3d9232)`<div class="ve-flex-col w-100 h-100 pt-2">
				${_0x55f32a}

				<div class="ve-flex-v-center ve-flex-h-right no-shrink pb-1 pt-1 px-1 mt-auto mr-3">${_0xa0d7d5}${_0x3f932e}</div>
			</div>`;});if(!_0x316196)return;const _0x3a3783=await UtilFolders[_0x59bb7e(0x1fd)]({'folderType':'Item','folderNames':_0x316196});ui[_0x59bb7e(0x1e8)][_0x59bb7e(0x234)](_0x59bb7e(0x1ff));const _0x1e544a=await LootGeneratorApp['pImportLoot']({'loot':_0x59f29b,'folderId':_0x3a3783,'isSkipCurrencies':isSkipCurrencies});return ui[_0x59bb7e(0x1eb)][_0x59bb7e(0x230)](_0x316196[_0x59bb7e(0x21f)]?_0x59bb7e(0x1ee)+_0x316196+'\x22.':'Imported\x20loot\x20to\x20items\x20directory.'),_0x1e544a;}async['_pImportToCompendium'](){const _0x3947fa=_0x157550;let _0x1af966=null;if(!UtilCompendium[_0x3947fa(0x264)]({'folderType':_0x3947fa(0x240)})[_0x3947fa(0x21f)]){const _0x4c9da0=await InputUiUtil[_0x3947fa(0x1f8)]({'title':_0x3947fa(0x1fc),'htmlDescription':_0x3947fa(0x208),'textYes':'Yes','textNo':'No'});if(!_0x4c9da0)return;_0x1af966=await UtilCompendium[_0x3947fa(0x24a)]({'folderType':'Item'});if(!_0x1af966)return;}!_0x1af966&&await new Promise(_0x14594e=>{const _0x395412=_0x3947fa,{$modalInner:_0x538c19,doClose:_0x1fa340}=UiUtil[_0x395412(0x220)]({'title':'Import\x20Loot\x20to\x20Items\x20Compendium','isHeaderBorder':!![],'cbClose':_0x50be6a=>{_0x14594e(_0x50be6a);}}),_0x5daad7=()=>_0x1af966=UtilCompendium[_0x395412(0x231)]({'collection':_0x34bfea[_0x395412(0x1ef)]()}),_0x34bfea=UtilCompendium[_0x395412(0x22c)]({'folderType':_0x395412(0x240)})[_0x395412(0x1e5)](()=>_0x5daad7());_0x5daad7();const _0x339d8f=$(_0x395412(0x221))[_0x395412(0x25c)](()=>_0x1fa340(!![])),_0x5b4324=$(_0x395412(0x1cb))[_0x395412(0x25c)](()=>_0x1fa340(null));$$(_0x538c19)`<div class="ve-flex-col w-100 h-100 pt-2">
					${_0x34bfea}
					<div class="ve-flex-v-center ve-flex-h-right no-shrink pb-1 pt-1 px-1 mt-auto mr-3">${_0x339d8f}${_0x5b4324}</div>
				</div>`;});if(!_0x1af966)return;const _0x2c98f6=await this['_pGetFoundryForm']();ui['sidebar'][_0x3947fa(0x234)]('compendium');const _0x2e5906=await LootGeneratorApp[_0x3947fa(0x1d6)]({'loot':_0x2c98f6,'pack':_0x1af966});return ui['notifications'][_0x3947fa(0x230)](_0x3947fa(0x201)+_0x1af966['metadata'][_0x3947fa(0x216)]+'\x22'),_0x2e5906;}static async[_0x157550(0x1f6)]({loot:_0x4e98b8,evt:_0x2285b3}){const _0x5d71e8=_0x157550,_0x4383e4=UtilCanvas[_0x5d71e8(0x22b)](_0x2285b3,_0x5d71e8(0x205)),_0xbb9135=canvas[_0x5d71e8(0x1de)][_0x5d71e8(0x24d)](_0x4383e4['x'],_0x4383e4['y']),_0x471b25=await this[_0x5d71e8(0x1c5)]({'loot':_0x4e98b8,'isSkipCurrencies':!![]}),_0x80c531=_0x471b25['map'](({importSummary:_0x10c4da})=>(_0x10c4da?.[_0x5d71e8(0x249)]||[])['map'](_0x1c0625=>_0x1c0625[_0x5d71e8(0x22f)])['filter'](Boolean))[_0x5d71e8(0x1f2)](),_0x2d7e5f=await ItemPiles[_0x5d71e8(0x212)][_0x5d71e8(0x1e9)](_0xbb9135,{'items':_0x80c531}),_0x388b11=await fromUuid(_0x2d7e5f);if(!_0x4e98b8[_0x5d71e8(0x21a)])return;const _0x44728a=Object[_0x5d71e8(0x1d3)](_0x4e98b8['currency'])[_0x5d71e8(0x206)](([_0x136ec9,_0x5df6c3])=>({[_0x5d71e8(0x24f)+_0x136ec9]:_0x5df6c3}));await ItemPiles[_0x5d71e8(0x212)][_0x5d71e8(0x20c)](_0x388b11,_0x44728a);}}LootGenOutputFvtt['_STO_K_FOLDER_PATH_SPEC']=_0x157550(0x214),LootGenOutputFvtt[_0x157550(0x25a)]=_0x157550(0x243);export{LootGeneratorApp};