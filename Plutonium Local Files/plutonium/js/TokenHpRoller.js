const _0x5f1f2e=_0x8df5;(function(_0x3c5667,_0x104985){const _0xa408a0=_0x8df5,_0xb16fd=_0x3c5667();while(!![]){try{const _0x3a8589=parseInt(_0xa408a0(0xb9))/0x1+parseInt(_0xa408a0(0xcd))/0x2+-parseInt(_0xa408a0(0xb5))/0x3*(-parseInt(_0xa408a0(0xc5))/0x4)+-parseInt(_0xa408a0(0xb1))/0x5+-parseInt(_0xa408a0(0xc0))/0x6+-parseInt(_0xa408a0(0xb8))/0x7+-parseInt(_0xa408a0(0xbb))/0x8;if(_0x3a8589===_0x104985)break;else _0xb16fd['push'](_0xb16fd['shift']());}catch(_0x29361c){_0xb16fd['push'](_0xb16fd['shift']());}}}(_0x3f91,0xa9315));function _0x3f91(){const _0x2004fb=['isOwner',')!\x20The\x20default\x20HP\x20value\x20will\x20be\x20used\x20instead.','4933495dmsnNA','total','blindroll','tokens','12eoVmTJ','C_TOKEN_NPC_HP_ROLL_MODE_STANDARD','name','521367twjZcZ','914515cYJNsG','\x22\x20for\x20token\x20\x22','7211344MatXNm','type','_getMessageRollMode','C_TOKEN_NPC_HP_ROLL_MODE_NONE','get','2415294ZVjVKW','data','C_TOKEN_NPC_HP_ROLL_MODE_BLIND','attributes','pDelay','1323724VaVizJ','evaluate','race','\x22\x20(','bars','toMessage','C_TOKEN_NPC_HP_ROLL_MODE_GM','C_TOKEN_NPC_HP_ROLL_MODE_MAX','1639842yQFwQJ','Failed\x20to\x20roll\x20HP\x20formula\x20\x22','user','roll','actor','createToken','formula','isLinked','warn','isGM'];_0x3f91=function(){return _0x2004fb;};return _0x3f91();}import{LGT}from'./Util.js';function _0x8df5(_0x5ee257,_0x4df260){const _0x3f9190=_0x3f91();return _0x8df5=function(_0x8df5b6,_0x5ea0f7){_0x8df5b6=_0x8df5b6-0xae;let _0x36eda5=_0x3f9190[_0x8df5b6];return _0x36eda5;},_0x8df5(_0x5ee257,_0x4df260);}import{Config}from'./Config.js';import{ConfigConsts}from'./ConfigConsts.js';import{UtilDocuments}from'./UtilDocuments.js';class TokenHpRoller{static['init'](){const _0x244488=_0x8df5;Hooks['on'](_0x244488(0xd2),async _0x5bab46=>{const _0x2c2300=_0x244488;if(!game[_0x2c2300(0xcf)][_0x2c2300(0xae)]||!_0x5bab46[_0x2c2300(0xaf)])return;const _0x2e6faa=Config[_0x2c2300(0xbf)](_0x2c2300(0xb4),'npcHpRollMode');if(_0x2e6faa===ConfigConsts[_0x2c2300(0xbe)])return;if(_0x5bab46['actor']?.[_0x2c2300(0xbc)]!=='npc'||_0x5bab46[_0x2c2300(0xd4)]||!_0x5bab46[_0x2c2300(0xd1)]?.['data']?.['data']?.[_0x2c2300(0xc3)]?.['hp']?.[_0x2c2300(0xd3)])return;const _0x19b873=new Roll(_0x5bab46[_0x2c2300(0xd1)][_0x2c2300(0xc1)][_0x2c2300(0xc1)][_0x2c2300(0xc3)]['hp'][_0x2c2300(0xd3)]);try{await _0x19b873[_0x2c2300(0xc6)]({'minimize':_0x2e6faa===ConfigConsts['C_TOKEN_NPC_HP_ROLL_MODE_MIN'],'maximize':_0x2e6faa===ConfigConsts[_0x2c2300(0xcc)]});const _0x106de5=this[_0x2c2300(0xbd)](_0x2e6faa);if(_0x106de5)_0x19b873[_0x2c2300(0xca)]({},{'rollMode':_0x106de5});}catch(_0x386e5e){console[_0x2c2300(0xd5)](...LGT,_0x2c2300(0xce)+_0x5bab46[_0x2c2300(0xd1)][_0x2c2300(0xc1)][_0x2c2300(0xc1)][_0x2c2300(0xc3)]['hp'][_0x2c2300(0xd3)]+_0x2c2300(0xba)+_0x5bab46[_0x2c2300(0xb7)]+_0x2c2300(0xc8)+_0x5bab46['id']+_0x2c2300(0xb0));return;}await Promise[_0x2c2300(0xc7)]([this['_pDoWaitForTokenBars'](_0x5bab46),MiscUtil[_0x2c2300(0xc4)](0x12c)]),await UtilDocuments['pUpdateDocument'](_0x5bab46[_0x2c2300(0xd1)],{'data':{'attributes':{'hp':{'value':_0x19b873['total'],'max':_0x19b873[_0x2c2300(0xb2)]}}}});});}static async['_pDoWaitForTokenBars'](_0x5a8a11){const _0x5d86e0=_0x8df5;for(let _0x3b5cbc=0x0;_0x3b5cbc<0x64;++_0x3b5cbc){if(_0x5a8a11[_0x5d86e0(0xc9)])break;await MiscUtil[_0x5d86e0(0xc4)](0xa);}}static[_0x5f1f2e(0xbd)](_0x529ab8){const _0x1b9c36=_0x5f1f2e;switch(_0x529ab8){case ConfigConsts[_0x1b9c36(0xb6)]:return _0x1b9c36(0xd0);case ConfigConsts[_0x1b9c36(0xcb)]:return'gmroll';case ConfigConsts[_0x1b9c36(0xc2)]:return _0x1b9c36(0xb3);case ConfigConsts['C_TOKEN_NPC_HP_ROLL_MODE_SELF']:return'selfroll';default:return null;}}}export{TokenHpRoller};