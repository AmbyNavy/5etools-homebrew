const _0x566116=_0x360c;(function(_0x49ae0a,_0x52fd03){const _0x33302f=_0x360c,_0x19e637=_0x49ae0a();while(!![]){try{const _0x377e7c=parseInt(_0x33302f(0x2b5))/0x1+parseInt(_0x33302f(0x222))/0x2+parseInt(_0x33302f(0x26a))/0x3*(-parseInt(_0x33302f(0x1e9))/0x4)+parseInt(_0x33302f(0x297))/0x5*(-parseInt(_0x33302f(0x249))/0x6)+-parseInt(_0x33302f(0x265))/0x7*(parseInt(_0x33302f(0x290))/0x8)+-parseInt(_0x33302f(0x1ef))/0x9*(-parseInt(_0x33302f(0x1df))/0xa)+-parseInt(_0x33302f(0x263))/0xb*(-parseInt(_0x33302f(0x267))/0xc);if(_0x377e7c===_0x52fd03)break;else _0x19e637['push'](_0x19e637['shift']());}catch(_0x216ee6){_0x19e637['push'](_0x19e637['shift']());}}}(_0x1da1,0x2b607));import{SharedConsts}from'../shared/SharedConsts.js';import{Util}from'./Util.js';import{Config}from'./Config.js';import{Vetools}from'./Vetools.js';import{AppSourceSelectorMulti}from'./AppSourceSelectorMulti.js';import{ImportListRace}from'./ImportListRace.js';import{Charactermancer_Class_ProficiencyImportModeSelect,Charactermancer_Class_Util,PageFilterClassesFoundry}from'./UtilCharactermancerClass.js';import{ImportListClass}from'./ImportListClass.js';import{Charactermancer_StartingEquipment}from'./UtilCharactermancerEquipment.js';import{ImportListBackground}from'./ImportListBackground.js';import{ImportListFeat}from'./ImportListFeat.js';import{UtilApplications}from'./UtilApplications.js';import{ActorCharactermancerRace}from'./ActorCharactermancerRace.js';import{ActorCharactermancerBaseComponent}from'./ActorCharactermancerUtil.js';import{ActorCharactermancerEquipment}from'./ActorCharactermancerEquipment.js';function _0x1da1(){const _0x126363=['decorate','MODULE_NAME','compEquipmentShopGold','filter','compBackgroundWeaponProficiencies','compRaceDamageImmunity','mutateForFilters','compBackgroundArmorProficiencies','getTotals','Build\x20cancelled.','immune','_doSwitchToPrevTab','ActorCharactermancerSourceSelector_savedSelection','_pLoadVetoolsSource','close','SKILL_TO_ATB_ABV','vulnerable','<button\x20class=\x22btn\x20btn-5et\x20btn-default\x20w-100p\x22>Next</button>','_pHandleSaveClick_background','length','6eqFymO','\x22):\x20Select\x20Sources','_render_pRenderTabEquipmentStarting','damageVulnerabilities','compBackgroundLanguageToolProficiencies','toolProficiencies','_pLoad','notifications','conditionImmune','bind','getRace_','5etools-charactermancer','Custom\x20URL','_postProcessAllSelectedData','compRaceExpertise','compBackgroundConditionImmunity','Component','compsSpellAdditionalSpellSubclass','isCancelled','TaskRunner','_pHandleSaveClick_pDoImportAdditionalSpells','Are\x20You\x20Sure?','_compAbility','pGetFormData','pageFilter','pGetHomebrewSources','23133IEJzZx','pGetLocalHomebrewSources','329168goOuxW','Feats','156poqdAd','Charactermancer\x20(Actor\x20\x22','pGetWithCache','101202uDcOFc','sort','feats','_pHandleSaveClick_feats','forEach','5etools','subclassFeature','initFullEntries','_setActiveTab','damageResistances','isFiltered','startingEquipment','isStandardStartingEquipmentActive_','_fullEntries','find','skills','isAnyData','_doSwitchToNextTab','_compSpell','btn-sm','_foundryIsSkipCustomizeLanguagesTools','_foundryIsSkipImportCantrips','Importing\x20classes\x20and\x20subclasses...','Setting\x20ability\x20scores...','subclasses','savingThrowProficiencies','compRace','ability','Equipment\x20Shop','ActorCharactermancerSourceSelector_filter','optionalfeature','equipmentItemEntries','_foundryAllFeatures','_DATA_PROPS_EXPECTED','item','compFeat','pGetClassSubclassFeatureIgnoredLookup','armorProficiencies','24rSHaEZ','pUpdateDocument','_foundryConInitial','multiclassing','SOURCE_TYP_BREW','compsClassLevelSelect','data','278635LOouEi','_foundryFormDataCharacteristics','compRaceConditionImmunity','conditionImmunities','_pRender_renderTabBackground','compsSpellSpells','Building...','SRD','_foundryIsSkipCustomizeSkills','subclass','Imported\x20race.','pInit','copy','getPlayerActor','<button\x20class=\x22btn\x20btn-5et\x20btn-default\x20w-100p\x22>Previous</button>','Imported\x20equipment.','feat','_pHandleSaveClick_postSave','<button\x20class=\x22btn\x20btn-5et\x20btn-primary\x22>Finalize</button>','custom','_pRender_renderTabRace','_pHandleSaveClick_class','getCurrentLevel','prop','background','pRenderStarting','pGetAllSpells','/template/Charactermancer.hbs','push','Build\x20failed!\x20','174319KPNyep','class_getProps','_isLevelUp','Open\x20Charactermancer\x20Targeting\x20Current\x20Sheet','isPrimary','_BREW_DIRS','weaponProficiencies','pApplyFormDataToActor','_pHandleSaveClick_pDoApplySkills','_pHandleSaveClick_race','_compClass','_render_pRenderTabEquipmentShop','pDoApplyResourcesFormDataToActor','DATA_URL_FEATS','_comp','compEquipmentStartingDefault','race','pHandleButtonClick','compsClassHpIncreaseMode','_cbPostSave','modalFilterClasses','Set\x20ability\x20scores.','Importing\x20equipment...','compRaceArmorProficiencies','Starting\x20Equipment','delete','render','features','_pPostLoad','expertise','spell','filterBox','pImportEntry','compsSpellAdditionalSpellClass','Spells','getMergedData','_foundrySelectedLevelIndices','_pRender_renderTabAbilities','_pRender_renderTabClass','_pOpen','pDoApplyAdditionalSpellsFormDataToActor','pGetItems','ABIL_ABVS','_data','resist','Upload\x20File','STR_SEE_CONSOLE','TabMeta','<hr\x20class=\x22hr-1\x20w-100\x22>','_tabEquipment','_conInitialWithModifiers','pDoApplyProficiencyFormDataToActorUpdate','_foundryIsSkipImportPreparedSpells','compsClassFeatureOptionsSelect','compRaceLanguageProficiencies','cbPostSave','progressWidget','mode','compRaceSkillToolLanguageProficiencies','map','_cons_initTabs','getFeatureCustomizedBackground_','compAbility','Class','Failed\x20to\x20load!\x20','name','<div\x20class=\x22ve-flex-vh-center\x20w-100\x20h-100\x22><i>Loading...</i></div>','languageProficiencies','_pHandleSaveClick','Race','pImportEquipmentItemEntries','ActorCharactermancerSourceSelector__openForCharacter','set','_hasNextTab','SOURCE_TYP_BREW_LOCAL','getSubclass_','Running\x20post-build\x20step...','filterValuesSpellsCache','Importing\x20race...','ptrTaskProgress','_foundryFormDataFeatures','_pHandleSaveClick_abilities','_conFinalWithModifiers','compRaceWeaponProficiencies','pLoad','state','preInit','feat_pGetAdditionalFeatFormData','activateListeners','additionalSpells','DataSourceSpecial','_compEquipment','compsClassSkillProficiencies','pRender','_pRender','subrace','770tRpNSu','SOURCE_TYP_OFFICIAL_ALL','type','compBackgroundFeatures','ascSort','_compRace','compEquipment','compBackgroundDamageResistance','_featureSourceTracker','classFeature','16zUoCqI','source','disabled','catch','keybindings','_actor','7929nBjJiq','filterBoxSpells','pImportClass','class_ixMax','_pRender_pRenderTabSpells','damageImmunities','click','_pRender_renderTabFeats','_pHandleSaveClick_','_foundryStartingProficiencyMode','size','compRaceSize','_compFeat','AdditionalSaveState','class','flat','mergeMap','spellcastingAbility','compBackgroundCharacteristics','_addHookActiveTab','_pHandleSaveClick_equipment','Imported\x20feats.','Imported\x20background.','Build\x20Complete','Abilities','_renderTabs','compBackgroundDamageVulnerability','_hasPrevTab','register','_pHandleSaveClick_pDoApplyTraitLike','Importing\x20background...','Open\x20Charactermancer\x20Targeting\x20Player\x20Character','compRaceSkillProficiencies','all','getClass_','setProgress','_render_loading','keys','SOURCE_TYP_CUSTOM','$wrpTab','MODE_MULTICLASS','abilityChosen','ActorCharactermancerSourceSelector__openForCurrentSheet','actor','pSerialAwaitMap','getCurrentAbilityScores','error','appendTo','max','getMaxWindowWidth','append','479822qZeYSk','Background','_pHandleSaveClick_spells','compEquipmentCurrency','_preInit_registerKeybinds','_compBackground','_pGetSources','_foundryIsSkipImportCharacteristics','totals','pRenderShop','_tabs','getValues','_foundryChosenAbilityScoreIncrease','addFauxOptionalFeatureFeatures','pGetRaces','compBackgroundLanguageProficiencies','DataSourceUrl','skillProficiencies','MODE_PRIMARY'];_0x1da1=function(){return _0x126363;};return _0x1da1();}function _0x360c(_0x7cf679,_0x3e0f9a){const _0x1da109=_0x1da1();return _0x360c=function(_0x360c15,_0x1d375f){_0x360c15=_0x360c15-0x1d4;let _0x4aad0b=_0x1da109[_0x360c15];return _0x4aad0b;},_0x360c(_0x7cf679,_0x3e0f9a);}import{ActorCharactermancerBackground}from'./ActorCharactermancerBackground.js';import{ActorCharactermancerClass}from'./ActorCharactermancerClass.js';import{ActorCharactermancerFeat}from'./ActorCharactermancerFeat.js';import{ActorCharactermancerSpell}from'./ActorCharactermancerSpell.js';import{ActorCharactermancerAbility}from'./ActorCharactermancerAbility.js';import{UtilDataSource}from'./UtilDataSource.js';import{Charactermancer_FeatureOptionsSelect,Charactermancer_FeatureSourceTracker,Charactermancer_Util}from'./UtilCharactermancer.js';import{Charactermancer_Race_Util}from'./UtilCharactermancerRace.js';import{Charactermancer_AdditionalSpellsSelect}from'./UtilCharactermancerAdditionalSpells.js';import{Charactermancer_Spell}from'./UtilCharactermancerSpell.js';import{UtilDocuments}from'./UtilDocuments.js';import{UtilWorldDataSourceSelector}from'./UtilWorldDataSourceSelector.js';import{UtilKeybinding}from'./UtilKeybinding.js';class ActorCharactermancerSourceSelector extends AppSourceSelectorMulti{static[_0x566116(0x1d5)](){this['_preInit_registerKeybinds']();}static[_0x566116(0x226)](){const _0x8267a2=_0x566116,_0xda3ee7=({modeId:modeId=null}={})=>{const _0x23d7b4=_0x360c,_0x4e8363=UtilKeybinding[_0x23d7b4(0x2a4)]();if(!_0x4e8363)return!![];return this[_0x23d7b4(0x2dc)]({'modeId':modeId,'actor':_0x4e8363}),!![];},_0x40c8d9=({modeId:modeId=null}={})=>{const _0x3bd131=_0x360c,_0x5911b1=UtilKeybinding['getCurrentImportableSheetDocumentMeta']({'isRequireActor':!![]});if(!_0x5911b1?.[_0x3bd131(0x21a)])return!![];return this[_0x3bd131(0x2dc)]({'modeId':modeId,..._0x5911b1}),!![];};game[_0x8267a2(0x1ed)][_0x8267a2(0x20b)](SharedConsts[_0x8267a2(0x236)],_0x8267a2(0x2fc),{'name':_0x8267a2(0x20e),'editable':[],'onDown':()=>_0xda3ee7()}),game[_0x8267a2(0x1ed)]['register'](SharedConsts[_0x8267a2(0x236)],_0x8267a2(0x219),{'name':_0x8267a2(0x2b8),'editable':[],'onDown':()=>_0x40c8d9()});}static async[_0x566116(0x2c6)](_0xd2248d,_0x35cffe,_0x5728bc,_0x1e78a6){const _0x1183df=_0x566116;return this['_pOpen']({'actor':_0x35cffe[_0x1183df(0x21a)]});}static async[_0x566116(0x2dc)]({actor:_0x270501}){const _0x57d6f4=_0x566116,_0x6a8b33=await this[_0x57d6f4(0x228)]({'actor':_0x270501}),_0x430919=new ActorCharactermancerSourceSelector({'title':_0x57d6f4(0x268)+_0x270501[_0x57d6f4(0x2f6)]+_0x57d6f4(0x24a),'filterNamespace':_0x57d6f4(0x287),'savedSelectionKey':_0x57d6f4(0x241),'sourcesToDisplay':_0x6a8b33}),_0x3fbe4c=await _0x430919['pWaitForUserInput']();if(_0x3fbe4c==null)return;this[_0x57d6f4(0x256)](_0x3fbe4c);const _0x4b1797=new ActorCharactermancer({'actor':_0x270501,'data':_0x3fbe4c});_0x4b1797[_0x57d6f4(0x2cf)](!![]);}static['_postProcessAllSelectedData'](_0x528763){const _0x1cb414=_0x566116;_0x528763[_0x1cb414(0x26e)]((_0x55ff27,_0x26cfb9)=>{const _0x13cab5=_0x1cb414;if(!_0x55ff27[_0x13cab5(0x1fd)]||!_0x55ff27[_0x13cab5(0x1fd)]['length'])return;const _0xbbf5af=_0x528763['slice'](0x0,_0x26cfb9)[_0x13cab5(0x238)](_0x37afaa=>_0x37afaa[_0x13cab5(0x1fd)]);if(!_0xbbf5af[_0x13cab5(0x248)])return;_0x55ff27[_0x13cab5(0x1fd)]=_0x55ff27[_0x13cab5(0x1fd)][_0x13cab5(0x238)](_0x5a6c2d=>{const _0x104a63=_0x13cab5,_0x3d8cbd=_0xbbf5af[_0x104a63(0x278)](_0x5ad3c7=>_0x5ad3c7[_0x104a63(0x1fd)]&&_0x5ad3c7[_0x104a63(0x1fd)][_0x104a63(0x278)](_0x49fc6d=>_0x5a6c2d[_0x104a63(0x2f6)]===_0x49fc6d['name']&&_0x5a6c2d[_0x104a63(0x1ea)]===_0x49fc6d['source']));if(!_0x3d8cbd)return!![];const _0x2eb57=_0x3d8cbd['class'][_0x104a63(0x278)](_0x3f5aa3=>_0x5a6c2d[_0x104a63(0x2f6)]===_0x3f5aa3[_0x104a63(0x2f6)]&&_0x5a6c2d[_0x104a63(0x1ea)]===_0x3f5aa3[_0x104a63(0x1ea)]);return _0x2eb57['subclasses']=[..._0x2eb57['subclasses']||[],..._0x5a6c2d[_0x104a63(0x282)]||[]],![];});}),_0x528763[_0x1cb414(0x26e)](_0x510463=>delete _0x510463['subclass']);const _0x5c71d7=_0x528763[_0x1cb414(0x2f0)](_0x9a3b7b=>_0x9a3b7b[_0x1cb414(0x1fd)]||[])[_0x1cb414(0x1fe)](),_0x532315=_0x528763[_0x1cb414(0x2f0)](_0x4541cf=>_0x4541cf[_0x1cb414(0x288)]||[])[_0x1cb414(0x1fe)]();Charactermancer_Class_Util[_0x1cb414(0x22f)](_0x5c71d7,_0x532315);}static async['_pGetSources']({actor:_0x345924}){const _0x503b02=_0x566116;return[new UtilDataSource[(_0x503b02(0x1d9))](Config['get']('ui','isStreamerMode')?_0x503b02(0x29e):_0x503b02(0x26f),this[_0x503b02(0x242)]['bind'](this),{'cacheKey':_0x503b02(0x254),'filterTypes':[UtilDataSource[_0x503b02(0x1e0)]],'isDefault':!![],'pPostLoad':this[_0x503b02(0x2d1)][_0x503b02(0x252)](this,{'isVetools':!![],'actor':_0x345924})}),new UtilDataSource[(_0x503b02(0x232))](_0x503b02(0x255),'',{'pPostLoad':this['_pPostLoad'][_0x503b02(0x252)](this,{'isVetools':![],'actor':_0x345924}),'filterTypes':[UtilDataSource[_0x503b02(0x215)]]}),new UtilDataSource['DataSourceFile'](_0x503b02(0x2e2),{'pPostLoad':this[_0x503b02(0x2d1)]['bind'](this,{'isVetools':![],'actor':_0x345924}),'filterTypes':[UtilDataSource[_0x503b02(0x215)]]}),...(await Vetools[_0x503b02(0x264)](...ActorCharactermancerSourceSelector[_0x503b02(0x2ba)]))[_0x503b02(0x2f0)](({name:_0x3b6bc7,url:_0x23c042})=>new UtilDataSource[(_0x503b02(0x232))](_0x3b6bc7,_0x23c042,{'pPostLoad':this[_0x503b02(0x2d1)]['bind'](this,{'isVetools':![],'actor':_0x345924}),'filterTypes':[UtilDataSource[_0x503b02(0x294)],UtilDataSource[_0x503b02(0x2ff)]]})),...(await Vetools[_0x503b02(0x262)](...ActorCharactermancerSourceSelector[_0x503b02(0x2ba)]))[_0x503b02(0x2f0)](({name:_0x5492b0,url:_0xeaa576})=>new UtilDataSource[(_0x503b02(0x232))](_0x5492b0,_0xeaa576,{'pPostLoad':this[_0x503b02(0x2d1)][_0x503b02(0x252)](this,{'isVetools':![],'actor':_0x345924}),'filterTypes':[UtilDataSource[_0x503b02(0x294)]]}))][_0x503b02(0x238)](_0x139404=>!UtilWorldDataSourceSelector[_0x503b02(0x274)](_0x139404));}static async[_0x566116(0x242)](){const _0xb8245e=_0x566116,_0x3353cf={},[_0x31214f,_0x4117f5,_0x3c1340,_0x4d49af,_0x4a2a55,_0x53a726,_0x33b42d]=await Promise[_0xb8245e(0x210)]([Vetools['pGetClasses'](),Vetools[_0xb8245e(0x230)](),Vetools[_0xb8245e(0x269)](Vetools['DATA_URL_BACKGROUNDS']),Vetools[_0xb8245e(0x2de)](),Vetools[_0xb8245e(0x2b1)](),Vetools[_0xb8245e(0x269)](Vetools[_0xb8245e(0x2c2)]),Vetools[_0xb8245e(0x269)](Vetools['DATA_URL_OPTIONALFEATURES'])]);return Object['assign'](_0x3353cf,_0x31214f),_0x3353cf[_0xb8245e(0x2c5)]=_0x4117f5['race'],_0x3353cf[_0xb8245e(0x2af)]=_0x3c1340[_0xb8245e(0x2af)],_0x3353cf[_0xb8245e(0x28c)]=_0x4d49af[_0xb8245e(0x28c)],_0x3353cf['spell']=_0x4a2a55[_0xb8245e(0x2d3)],_0x3353cf[_0xb8245e(0x2a7)]=_0x53a726['feat'],_0x3353cf[_0xb8245e(0x288)]=_0x33b42d[_0xb8245e(0x288)],_0x3353cf;}static async[_0x566116(0x2d1)]({isVetools:_0x2cf3de,actor:_0x120930},_0x15acf8){const _0x48945b=_0x566116;_0x15acf8={..._0x15acf8};!_0x2cf3de&&(_0x15acf8['race']||_0x15acf8[_0x48945b(0x1de)])&&(_0x15acf8[_0x48945b(0x2c5)]=MiscUtil['copy'](_0x15acf8[_0x48945b(0x2c5)]||[]),_0x15acf8[_0x48945b(0x2c5)]=await Charactermancer_Race_Util['pPostLoadBrew'](_0x15acf8));if(_0x15acf8['class']||_0x15acf8[_0x48945b(0x2a0)]){const {DataConverterClassSubclassFeature:_0x2833d2}=await import('./DataConverterClassSubclassFeature.js'),_0x4996c4=await _0x2833d2[_0x48945b(0x28e)]({'data':_0x15acf8});_0x15acf8[_0x48945b(0x1fd)]=await PageFilterClassesFoundry['pPostLoad']({'class':_0x15acf8['class'],'subclass':_0x15acf8[_0x48945b(0x2a0)],'classFeature':_0x15acf8['classFeature'],'subclassFeature':_0x15acf8['subclassFeature']},{'actor':_0x120930,'isIgnoredLookup':_0x4996c4});if(_0x15acf8['class'])_0x15acf8[_0x48945b(0x1fd)][_0x48945b(0x26e)](_0x51f51a=>PageFilterClasses[_0x48945b(0x23b)](_0x51f51a));}return _0x15acf8;}}ActorCharactermancerSourceSelector[_0x566116(0x2ba)]=[_0x566116(0x1fd),_0x566116(0x2a0),_0x566116(0x2c5),_0x566116(0x1de),_0x566116(0x28c),'background',_0x566116(0x28c),_0x566116(0x2d3),_0x566116(0x2a7),'optionalfeature'];class ActorCharactermancer extends Application{static [_0x566116(0x28b)]=[_0x566116(0x1fd),_0x566116(0x2a0),_0x566116(0x1e8),_0x566116(0x270),_0x566116(0x2c5),_0x566116(0x2af),_0x566116(0x28c),_0x566116(0x2d3),_0x566116(0x2a7),_0x566116(0x288)];constructor(_0x47db30){const _0x2c4fbf=_0x566116;_0x47db30=_0x47db30||{},super({'title':_0x2c4fbf(0x268)+_0x47db30[_0x2c4fbf(0x21a)]['name']+'\x22)','template':SharedConsts['MODULE_LOCATION']+_0x2c4fbf(0x2b2),'width':Util[_0x2c4fbf(0x220)](0x4b0),'height':Util['getMaxWindowHeight'](),'resizable':!![]});const _0x1f2a6e=UtilDataSource[_0x2c4fbf(0x2d8)](_0x47db30[_0x2c4fbf(0x296)]);ActorCharactermancer[_0x2c4fbf(0x28b)][_0x2c4fbf(0x26e)](_0x52a4e2=>_0x1f2a6e[_0x52a4e2]=_0x1f2a6e[_0x52a4e2]||[]),this['_comp']=new ActorCharactermancer['Component']({'actor':_0x47db30['actor'],'data':_0x1f2a6e,'cbPostSave':this[_0x2c4fbf(0x243)][_0x2c4fbf(0x252)](this)});}[_0x566116(0x1d7)](_0x4af4d0){const _0x2f4658=_0x566116;this[_0x2f4658(0x2c3)][_0x2f4658(0x2cf)](_0x4af4d0);}}ActorCharactermancer[_0x566116(0x259)]=class extends ActorCharactermancerBaseComponent{constructor(_0x38c2ee){const _0x2c0ab0=_0x566116;_0x38c2ee=_0x38c2ee||{},super(),TabUiUtil[_0x2c0ab0(0x235)](this),this[_0x2c0ab0(0x1ee)]=_0x38c2ee['actor'],this[_0x2c0ab0(0x2e0)]=_0x38c2ee[_0x2c0ab0(0x296)],this[_0x2c0ab0(0x2c8)]=_0x38c2ee[_0x2c0ab0(0x2ec)],this['_featureSourceTracker']=new Charactermancer_FeatureSourceTracker(),this[_0x2c0ab0(0x2b7)]=Charactermancer_Util[_0x2c0ab0(0x2ad)](this[_0x2c0ab0(0x1ee)])>0x0,this[_0x2c0ab0(0x22c)]=null;const {tabClass:_0x177c61,tabRace:_0x363524,tabAbilities:_0x332c9a,tabBackground:_0x2eab09,tabEquipment:_0x519600,tabShop:_0x3a3e11,tabSpells:_0x5d348c,tabFeats:_0xa460ff}=this['_cons_initTabs']();this[_0x2c0ab0(0x2e6)]=_0x519600,this[_0x2c0ab0(0x2bf)]=new ActorCharactermancerClass({'actor':_0x38c2ee['actor'],'data':_0x38c2ee[_0x2c0ab0(0x296)],'parent':this,'tabClass':_0x177c61}),this[_0x2c0ab0(0x1e4)]=new ActorCharactermancerRace({'actor':_0x38c2ee[_0x2c0ab0(0x21a)],'data':_0x38c2ee[_0x2c0ab0(0x296)],'parent':this,'tabRace':_0x363524}),this[_0x2c0ab0(0x25f)]=new ActorCharactermancerAbility({'actor':_0x38c2ee['actor'],'data':_0x38c2ee[_0x2c0ab0(0x296)],'parent':this,'tabAbilities':_0x332c9a}),this['_compBackground']=new ActorCharactermancerBackground({'actor':_0x38c2ee[_0x2c0ab0(0x21a)],'data':_0x38c2ee[_0x2c0ab0(0x296)],'parent':this,'tabBackground':_0x2eab09}),this[_0x2c0ab0(0x1da)]=new ActorCharactermancerEquipment({'actor':_0x38c2ee[_0x2c0ab0(0x21a)],'data':_0x38c2ee[_0x2c0ab0(0x296)],'parent':this,'tabEquipment':_0x519600,'tabShop':_0x3a3e11}),this['_compSpell']=new ActorCharactermancerSpell({'actor':_0x38c2ee[_0x2c0ab0(0x21a)],'data':_0x38c2ee[_0x2c0ab0(0x296)],'parent':this,'tabSpells':_0x5d348c}),this['_compFeat']=new ActorCharactermancerFeat({'actor':_0x38c2ee[_0x2c0ab0(0x21a)],'data':_0x38c2ee[_0x2c0ab0(0x296)],'parent':this,'tabFeats':_0xa460ff}),this[_0x2c0ab0(0x2e7)]=null,this[_0x2c0ab0(0x307)]=null;}[_0x566116(0x2f1)](){const _0x1a158d=_0x566116;this['_isLevelUp']?this[_0x1a158d(0x22c)]=this[_0x1a158d(0x208)]([new TabUiUtil[(_0x1a158d(0x2e4))]({'name':'Class','hasBorder':!![]}),new TabUiUtil[(_0x1a158d(0x2e4))]({'name':_0x1a158d(0x207),'hasBorder':!![]}),new TabUiUtil[(_0x1a158d(0x2e4))]({'name':_0x1a158d(0x2d7),'hasBorder':!![]}),new TabUiUtil[(_0x1a158d(0x2e4))]({'name':'Feats','hasBorder':!![]})],{'propProxy':_0x1a158d(0x1d4)}):this['_tabs']=this[_0x1a158d(0x208)]([new TabUiUtil[(_0x1a158d(0x2e4))]({'name':_0x1a158d(0x2f4),'hasBorder':!![]}),new TabUiUtil[(_0x1a158d(0x2e4))]({'name':_0x1a158d(0x2fa),'hasBorder':!![]}),new TabUiUtil[(_0x1a158d(0x2e4))]({'name':'Abilities','hasBorder':!![]}),new TabUiUtil['TabMeta']({'name':_0x1a158d(0x223),'hasBorder':!![]}),new TabUiUtil['TabMeta']({'name':_0x1a158d(0x2cd),'hasBorder':!![]}),new TabUiUtil['TabMeta']({'name':_0x1a158d(0x286),'hasBorder':!![]}),new TabUiUtil[(_0x1a158d(0x2e4))]({'name':'Spells','hasBorder':!![]}),new TabUiUtil['TabMeta']({'name':_0x1a158d(0x266),'hasBorder':!![]})],{'propProxy':_0x1a158d(0x1d4)});if(this[_0x1a158d(0x2b7)]){const [_0x342c94,_0x4180dc,_0x208428,_0x451607]=this['_tabs'];return{'tabClass':_0x342c94,'tabAbilities':_0x4180dc,'tabSpells':_0x208428,'tabFeats':_0x451607};}else{const [_0x81f3dc,_0xdf2db6,_0x474d6b,_0x488855,_0xc8dde1,_0x226178,_0x5b449e,_0x1a070a]=this[_0x1a158d(0x22c)];return{'tabClass':_0x81f3dc,'tabRace':_0xdf2db6,'tabAbilities':_0x474d6b,'tabBackground':_0x488855,'tabEquipment':_0xc8dde1,'tabShop':_0x226178,'tabSpells':_0x5b449e,'tabFeats':_0x1a070a};}}get['featureSourceTracker_'](){const _0x3fb23f=_0x566116;return this[_0x3fb23f(0x1e7)];}get['compClass'](){return this['_compClass'];}get[_0x566116(0x284)](){const _0x3c8c32=_0x566116;return this[_0x3c8c32(0x1e4)];}get['compBackground'](){const _0x486766=_0x566116;return this[_0x486766(0x227)];}get[_0x566116(0x1e5)](){return this['_compEquipment'];}get['compSpell'](){return this['_compSpell'];}get[_0x566116(0x28d)](){return this['_compFeat'];}get[_0x566116(0x2f3)](){const _0x5bf4a6=_0x566116;return this[_0x5bf4a6(0x25f)];}set['activeTab_'](_0x1991cf){const _0x364a90=_0x566116;this[_0x364a90(0x272)]({'propProxy':'state','tab':_0x1991cf});}['render'](_0x528136){const _0x1518b7=_0x566116;this[_0x1518b7(0x213)](_0x528136),this['_pLoad']()['then'](()=>this[_0x1518b7(0x1dd)](_0x528136))[_0x1518b7(0x1ec)](_0x1ab572=>{const _0x31ded4=_0x1518b7;ui[_0x31ded4(0x250)][_0x31ded4(0x21d)](_0x31ded4(0x2f5)+VeCt[_0x31ded4(0x2e3)]);throw _0x1ab572;});}[_0x566116(0x213)](_0x2e0b42){const _0x112e29=_0x566116;_0x2e0b42[_0x112e29(0x221)](_0x112e29(0x2f7));}async[_0x566116(0x24f)](){const _0x2ae731=_0x566116;await this[_0x2ae731(0x1e4)]['pLoad'](),await this[_0x2ae731(0x227)]['pLoad'](),await this[_0x2ae731(0x2bf)]['pLoad'](),await this[_0x2ae731(0x27c)][_0x2ae731(0x309)](),await this[_0x2ae731(0x1fb)][_0x2ae731(0x309)]();}async[_0x566116(0x1dd)](_0x31eabd){const _0x35d868=_0x566116;_0x31eabd['empty']();const _0x5f20b6=$(_0x35d868(0x2a5))[_0x35d868(0x1f5)](()=>this[_0x35d868(0x240)]({'propProxy':_0x35d868(0x1d4)})),_0xc8e006=$(_0x35d868(0x246))['click'](()=>{const _0x419d75=_0x35d868;this['_getActiveTab']({'propProxy':_0x419d75(0x1d4)})===this[_0x419d75(0x2e6)]&&this[_0x419d75(0x1da)][_0x419d75(0x276)]()&&this[_0x419d75(0x27b)]({'propProxy':_0x419d75(0x1d4)}),this['_doSwitchToNextTab']({'propProxy':_0x419d75(0x1d4)});}),_0x5e4db4=()=>{const _0x380f0e=_0x35d868;_0x5f20b6[_0x380f0e(0x2ae)](_0x380f0e(0x1eb),!this[_0x380f0e(0x20a)]({'propProxy':'state'})),_0xc8e006['prop']('disabled',!this[_0x380f0e(0x2fe)]({'propProxy':'state'}));};this[_0x35d868(0x202)](_0x5e4db4,{'propProxy':'state'}),_0x5e4db4();const _0x3a2f92=$(_0x35d868(0x2a9))[_0x35d868(0x1f5)](()=>{const _0xb7140b=_0x35d868;_0x3a2f92['prop'](_0xb7140b(0x1eb),!![]);try{this[_0xb7140b(0x2f9)]();}finally{_0x3a2f92[_0xb7140b(0x2ae)]('disabled',![]);}});$$`<div class="w-100 no-shrink ui-tab__wrp-tab-heads--border">
			${this[_0x35d868(0x22c)][_0x35d868(0x2f0)](_0x365b35=>_0x365b35['$btnTab']['addClass'](_0x35d868(0x27d)))}
		</div>`['appendTo'](_0x31eabd),this[_0x35d868(0x22c)][_0x35d868(0x26e)](_0x51d2af=>_0x51d2af[_0x35d868(0x216)][_0x35d868(0x21e)](_0x31eabd)),_0x31eabd[_0x35d868(0x221)](_0x35d868(0x2e5)),$$`<div class="w-100 no-shrink ve-flex-h-right pr-3">
			<div class="ve-flex-v-center btn-group">${_0x5f20b6}${_0xc8e006}</div>
			<div class="vr-2"></div>
			${_0x3a2f92}
		</div>`[_0x35d868(0x21e)](_0x31eabd),this[_0x35d868(0x2db)](),this[_0x35d868(0x2ab)](),this[_0x35d868(0x2da)](),this[_0x35d868(0x29b)](),await this[_0x35d868(0x24b)](),await this['_render_pRenderTabEquipmentShop'](),await this[_0x35d868(0x1f3)](),this[_0x35d868(0x1f6)]();}[_0x566116(0x2db)](){const _0x1e6015=_0x566116;this['_compClass'][_0x1e6015(0x2cf)]();}['_pRender_renderTabRace'](){const _0x217239=_0x566116;this['_compRace'][_0x217239(0x2cf)]();}[_0x566116(0x2da)](){const _0x1e7e0e=_0x566116;this[_0x1e7e0e(0x25f)]['render']();}['_pRender_renderTabBackground'](){const _0xbd2955=_0x566116;this['_compBackground'][_0xbd2955(0x2cf)]();}async['_render_pRenderTabEquipmentStarting'](){const _0x2900f4=_0x566116;await this[_0x2900f4(0x1da)][_0x2900f4(0x2b0)]();}async[_0x566116(0x2c0)](){const _0xbedd95=_0x566116;await this[_0xbedd95(0x1da)][_0xbedd95(0x22b)]();}async['_pRender_pRenderTabSpells'](){const _0xb08f74=_0x566116;await this[_0xb08f74(0x27c)][_0xb08f74(0x1dc)]();}[_0x566116(0x1f6)](){const _0x24192a=_0x566116;this[_0x24192a(0x1fb)][_0x24192a(0x2cf)]();}async['_pHandleSaveClick'](){const _0x34a6e2=_0x566116,_0x55f0f4=await InputUiUtil['pGetUserBoolean']({'title':_0x34a6e2(0x25e)});if(!_0x55f0f4)return;const _0x5f45a1=[this[_0x34a6e2(0x306)][_0x34a6e2(0x252)](this),this[_0x34a6e2(0x2b7)]?null:this[_0x34a6e2(0x2be)]['bind'](this),this[_0x34a6e2(0x2ac)]['bind'](this),this[_0x34a6e2(0x2b7)]?null:this[_0x34a6e2(0x247)][_0x34a6e2(0x252)](this),this[_0x34a6e2(0x26d)]['bind'](this),this[_0x34a6e2(0x224)][_0x34a6e2(0x252)](this),this[_0x34a6e2(0x2b7)]?null:this[_0x34a6e2(0x203)]['bind'](this),this[_0x34a6e2(0x2a8)]['bind'](this)]['filter'](Boolean),_0x3e4618=new UtilApplications[(_0x34a6e2(0x25c))]({'titleInitial':_0x34a6e2(0x29d),'titleComplete':_0x34a6e2(0x206),'totalTasks':_0x5f45a1[_0x34a6e2(0x248)]});await _0x3e4618[_0x34a6e2(0x2a2)]();const _0x227f20={'_':0x0};try{await this[_0x34a6e2(0x1f7)](_0x5f45a1,_0x3e4618,_0x227f20);}catch(_0x1cc845){_0x3e4618['setProgress']({'message':_0x34a6e2(0x2b4)+VeCt['STR_SEE_CONSOLE'],'count':_0x227f20['_'],'isError':!![]});throw _0x1cc845;}}async[_0x566116(0x1f7)](_0x18e7f8,_0x12865f,_0x3cb678){const _0x3f86c2=_0x566116,_0x39c500=new ActorCharactermancer[(_0x3f86c2(0x259))]['AdditionalSaveState']({'progressWidget':_0x12865f,'ptrTaskProgress':_0x3cb678});for(const _0x381e33 of _0x18e7f8)await _0x381e33(_0x39c500);_0x12865f[_0x3f86c2(0x212)]({'message':'Build\x20complete!','count':_0x3cb678['_']});}async['_pHandleSaveClick_abilities'](_0x381917){const _0x53ec07=_0x566116,{progressWidget:_0x52b402,ptrTaskProgress:_0x4d01c8}=_0x381917;_0x52b402['setProgress']({'message':_0x53ec07(0x281),'count':++_0x4d01c8['_']});if(_0x52b402['isCancelled'])return _0x52b402['setProgress']({'message':'Build\x20cancelled.'});if(this[_0x53ec07(0x2b7)]){const {con:_0x40fac1}=Charactermancer_Util[_0x53ec07(0x21c)](this['_actor']);this[_0x53ec07(0x2e7)]=_0x40fac1;}const _0x35018c=this[_0x53ec07(0x25f)]['compStatgen'][_0x53ec07(0x23d)](),_0x107c59={'data':{'abilities':{...Parser[_0x53ec07(0x2df)][_0x53ec07(0x1ff)](_0x648103=>({[_0x648103]:{'value':_0x35018c?.[_0x53ec07(0x22a)]?.[_0x35018c[_0x53ec07(0x2ee)]]?.[_0x648103]||0x0}}))}}};await UtilDocuments[_0x53ec07(0x291)](this[_0x53ec07(0x1ee)],_0x107c59);if(this['_isLevelUp']){const {con:_0x5be346}=Charactermancer_Util[_0x53ec07(0x21c)](this[_0x53ec07(0x1ee)]);this[_0x53ec07(0x307)]=_0x5be346;}_0x52b402['setProgress']({'message':_0x53ec07(0x2ca),'count':_0x4d01c8['_']});if(_0x52b402['isCancelled'])return _0x52b402[_0x53ec07(0x212)]({'message':_0x53ec07(0x23e),'count':_0x4d01c8['_']});}async[_0x566116(0x2be)](_0x1f73a9){const _0x16acb0=_0x566116,{progressWidget:_0xd1d0bc,ptrTaskProgress:_0x11d37d}=_0x1f73a9;_0xd1d0bc['setProgress']({'message':_0x16acb0(0x303),'count':++_0x11d37d['_']});const _0x5c4d0b=this[_0x16acb0(0x1e4)][_0x16acb0(0x253)]();if(_0x5c4d0b){const _0x14fdea=new ImportListRace({'actor':this[_0x16acb0(0x1ee)]});await _0x14fdea[_0x16acb0(0x2a2)]();const _0x2c8368=MiscUtil[_0x16acb0(0x2a3)](_0x5c4d0b);delete _0x2c8368[_0x16acb0(0x285)],delete _0x2c8368[_0x16acb0(0x26c)],delete _0x2c8368['additionalSpells'];if(this[_0x16acb0(0x1e4)]['compRaceSize'])_0x2c8368['size']=[(await this[_0x16acb0(0x1e4)][_0x16acb0(0x1fa)][_0x16acb0(0x260)]())[_0x16acb0(0x296)]];else delete _0x2c8368[_0x16acb0(0x1f9)];await this[_0x16acb0(0x2bd)]([this[_0x16acb0(0x1e4)][_0x16acb0(0x20f)],this['_compRace'][_0x16acb0(0x2ef)]],_0x2c8368,_0x16acb0(0x233)),await this[_0x16acb0(0x20c)]({'comps':[this[_0x16acb0(0x1e4)][_0x16acb0(0x2eb)],this[_0x16acb0(0x1e4)]['compRaceSkillToolLanguageProficiencies']],'toObj':_0x2c8368,'path':['languageProficiencies']}),await this['_pHandleSaveClick_pDoApplyTraitLike']({'comps':[this[_0x16acb0(0x1e4)]['compRaceToolProficiencies'],this[_0x16acb0(0x1e4)][_0x16acb0(0x2ef)]],'toObj':_0x2c8368,'path':['toolProficiencies']}),await this[_0x16acb0(0x20c)]({'comps':[this[_0x16acb0(0x1e4)][_0x16acb0(0x257)]],'toObj':_0x2c8368,'path':[_0x16acb0(0x2d2)]}),await this[_0x16acb0(0x20c)]({'comps':[this['_compRace'][_0x16acb0(0x2cc)]],'toObj':_0x2c8368,'path':[_0x16acb0(0x28f)]}),await this[_0x16acb0(0x20c)]({'comps':[this['_compRace'][_0x16acb0(0x308)]],'toObj':_0x2c8368,'path':['weaponProficiencies']}),await this[_0x16acb0(0x20c)]({'comps':[this[_0x16acb0(0x1e4)][_0x16acb0(0x23a)]],'toObj':_0x2c8368,'path':[_0x16acb0(0x23f)],'isLegacy':!![]}),await this[_0x16acb0(0x20c)]({'comps':[this[_0x16acb0(0x1e4)]['compRaceDamageResistance']],'toObj':_0x2c8368,'path':[_0x16acb0(0x2e1)],'isLegacy':!![]}),await this[_0x16acb0(0x20c)]({'comps':[this[_0x16acb0(0x1e4)]['compRaceDamageVulnerability']],'toObj':_0x2c8368,'path':['vulnerable'],'isLegacy':!![]}),await this[_0x16acb0(0x20c)]({'comps':[this[_0x16acb0(0x1e4)][_0x16acb0(0x299)]],'toObj':_0x2c8368,'path':[_0x16acb0(0x251)],'isLegacy':!![]}),await _0x14fdea['pImportEntry'](_0x2c8368,{'isCharactermancer':!![]});}_0xd1d0bc['setProgress']({'message':_0x16acb0(0x2a1),'count':_0x11d37d['_']});if(_0xd1d0bc[_0x16acb0(0x25b)])return _0xd1d0bc[_0x16acb0(0x212)]({'message':_0x16acb0(0x23e),'count':_0x11d37d['_']});}async[_0x566116(0x2ac)](_0x210eab){const _0x186f83=_0x566116,{progressWidget:_0x45a300,ptrTaskProgress:_0x2c2d82}=_0x210eab;_0x45a300[_0x186f83(0x212)]({'message':_0x186f83(0x280),'count':++_0x2c2d82['_']});const _0x90639e=[];for(let _0x4991b7=0x0;_0x4991b7<this[_0x186f83(0x2bf)]['state'][_0x186f83(0x1f2)]+0x1;++_0x4991b7){const {propIxClass:_0xc30bc9,propIxSubclass:_0x2e6605}=ActorCharactermancerBaseComponent['class_getProps'](_0x4991b7),_0x2f7f42=this[_0x186f83(0x2bf)][_0x186f83(0x211)]({'propIxClass':_0xc30bc9});if(!_0x2f7f42)continue;const _0x2e01d3=this[_0x186f83(0x2bf)][_0x186f83(0x300)]({'cls':_0x2f7f42,'propIxSubclass':_0x2e6605});_0x90639e[_0x186f83(0x2b3)]({'ix':_0x4991b7,'cls':_0x2f7f42,'sc':_0x2e01d3,'isPrimary':this['_compClass'][_0x186f83(0x1d4)]['class_ixPrimaryClass']===_0x4991b7});}if(_0x90639e[_0x186f83(0x248)]){_0x90639e[_0x186f83(0x26b)]((_0x12dd95,_0x298ed0)=>SortUtil['ascSort'](Number(_0x298ed0[_0x186f83(0x2b9)]),Number(_0x12dd95['isPrimary']))||SortUtil[_0x186f83(0x1e3)](_0x12dd95['cls']['name'],_0x298ed0['cls'][_0x186f83(0x2f6)]));const _0x543a93=new ImportListClass({'actor':this[_0x186f83(0x1ee)]});await _0x543a93[_0x186f83(0x2a2)]();const _0x2fccc9=this[_0x186f83(0x2bf)][_0x186f83(0x2c9)][_0x186f83(0x261)][_0x186f83(0x2d4)][_0x186f83(0x22d)]();for(let _0x287800=0x0;_0x287800<_0x90639e[_0x186f83(0x248)];++_0x287800){const {ix:_0x2e62c9,cls:_0x19f160,sc:_0x552954,isPrimary:_0x144323}=_0x90639e[_0x287800],_0x3903c5=MiscUtil['copy'](_0x19f160),_0x48759c=_0x552954?MiscUtil['copy'](_0x552954):null;if(_0x48759c)delete _0x48759c[_0x186f83(0x1d8)];if(_0x48759c)_0x3903c5['subclasses']=[_0x48759c];else _0x3903c5[_0x186f83(0x282)]=[];_0x3903c5[_0x186f83(0x2d9)]=await this[_0x186f83(0x2bf)][_0x186f83(0x295)][_0x2e62c9][_0x186f83(0x260)]()['data'];if(!_0x3903c5[_0x186f83(0x2d9)]['length'])continue;const _0x32d849=Math[_0x186f83(0x21f)](..._0x3903c5[_0x186f83(0x2d9)])+0x1;_0x3903c5[_0x186f83(0x1f8)]=_0x144323?Charactermancer_Class_ProficiencyImportModeSelect[_0x186f83(0x234)]:Charactermancer_Class_ProficiencyImportModeSelect[_0x186f83(0x217)];if(this[_0x186f83(0x2bf)][_0x186f83(0x2c7)][_0x2e62c9])_0x3903c5['_foundryHpIncreaseMode']=await this['_compClass'][_0x186f83(0x2c7)][_0x2e62c9][_0x186f83(0x260)]()[_0x186f83(0x296)];_0x3903c5[_0x186f83(0x28a)]=[];for(const _0x107264 of this[_0x186f83(0x2bf)][_0x186f83(0x2ea)][_0x2e62c9]){const _0x233505=await _0x107264['pGetFormData']();await Charactermancer_FeatureOptionsSelect[_0x186f83(0x2c1)]({'actor':this[_0x186f83(0x1ee)],'formData':_0x233505});if(_0x233505?.['data']?.[_0x186f83(0x2d0)]?.[_0x186f83(0x248)])_0x3903c5['_foundryAllFeatures'][_0x186f83(0x2b3)](..._0x233505['data']['features']);const _0x5309cf={'data':{}};await Charactermancer_FeatureOptionsSelect['pDoApplyProficiencyFormDataToActorUpdate'](this[_0x186f83(0x1ee)],_0x5309cf,_0x233505);if(Object[_0x186f83(0x214)](_0x5309cf[_0x186f83(0x296)])[_0x186f83(0x248)])await UtilDocuments[_0x186f83(0x291)](this[_0x186f83(0x1ee)],_0x5309cf);}_0x3903c5[_0x186f83(0x28a)][_0x186f83(0x26e)](_0x1954d5=>delete _0x1954d5?.['entity']?.[_0x186f83(0x1d8)]);this['_isLevelUp']&&(_0x3903c5[_0x186f83(0x292)]=this['_conInitialWithModifiers'],_0x3903c5['_foundryConFinal']=this['_conFinalWithModifiers']);_0x3903c5[_0x186f83(0x2e9)]=!![],_0x3903c5[_0x186f83(0x27f)]=!![];const _0x85aa6f=_0x144323?['startingProficiencies',_0x186f83(0x279)]:[_0x186f83(0x293),'proficienciesGained','skills'];await this[_0x186f83(0x2bd)]([this[_0x186f83(0x2bf)][_0x186f83(0x1db)][_0x2e62c9]],_0x3903c5,..._0x85aa6f),delete _0x3903c5[_0x186f83(0x275)],await _0x543a93[_0x186f83(0x1f1)](_0x3903c5,{'filterValues':_0x2fccc9,'isCharactermancer':!![]});for(const _0x2ede24 of this[_0x186f83(0x2bf)]['compsClassFeatureOptionsSelect'][_0x2e62c9]){const _0x5ce8da=await _0x2ede24[_0x186f83(0x260)]();await Charactermancer_FeatureOptionsSelect[_0x186f83(0x2dd)]({'actor':this[_0x186f83(0x1ee)],'formData':_0x5ce8da,'abilityAbv':_0x552954?.[_0x186f83(0x200)]||_0x19f160[_0x186f83(0x200)]});}}}_0x45a300[_0x186f83(0x212)]({'message':'Imported\x20classes\x20and\x20subclasses.','count':_0x2c2d82['_']});if(_0x45a300[_0x186f83(0x25b)])return _0x45a300[_0x186f83(0x212)]({'message':_0x186f83(0x23e),'count':_0x2c2d82['_']});}async[_0x566116(0x247)](_0x266fab){const _0x52893a=_0x566116,{progressWidget:_0x3c1687,ptrTaskProgress:_0x1d2ccd}=_0x266fab;_0x3c1687[_0x52893a(0x212)]({'message':_0x52893a(0x20d),'count':++_0x1d2ccd['_']});const _0x5ab473=this['_compBackground'][_0x52893a(0x2f2)]({'isAllowStub':![]});if(_0x5ab473){const _0x25d50e=await this[_0x52893a(0x227)][_0x52893a(0x1e2)][_0x52893a(0x260)](),_0x2f04be=_0x25d50e?.[_0x52893a(0x296)]?.['background']??MiscUtil['copy'](_0x5ab473),_0xef30d1=new ImportListBackground({'actor':this[_0x52893a(0x1ee)]});await _0xef30d1[_0x52893a(0x2a2)]();if(this[_0x52893a(0x227)]['compBackgroundFeatures'])_0x2f04be[_0x52893a(0x305)]=_0x25d50e;else _0x2f04be['_foundryFormDataFeatures']={'isFormComplete':!![]};_0x2f04be[_0x52893a(0x29f)]=!![],_0x2f04be[_0x52893a(0x27e)]=!![],await this['_pHandleSaveClick_pDoApplySkills']([this['_compBackground']['compBackgroundSkillProficiencies']],_0x2f04be,_0x52893a(0x233)),await this[_0x52893a(0x20c)]({'comps':[this[_0x52893a(0x227)]['isCustomizeLanguagesTools']?this[_0x52893a(0x227)]['compBackgroundLanguageToolProficiencies']:this[_0x52893a(0x227)][_0x52893a(0x231)]],'toObj':_0x2f04be,'path':[_0x52893a(0x2f8)]}),await this[_0x52893a(0x20c)]({'comps':[this['_compBackground']['isCustomizeLanguagesTools']?this['_compBackground'][_0x52893a(0x24d)]:this[_0x52893a(0x227)]['compBackgroundToolProficiencies']],'toObj':_0x2f04be,'path':[_0x52893a(0x24e)]}),await this[_0x52893a(0x20c)]({'comps':[this[_0x52893a(0x227)]['compBackgroundExpertise']],'toObj':_0x2f04be,'path':[_0x52893a(0x2d2)]}),await this[_0x52893a(0x20c)]({'comps':[this[_0x52893a(0x227)][_0x52893a(0x23c)]],'toObj':_0x2f04be,'path':[_0x52893a(0x28f)]}),await this[_0x52893a(0x20c)]({'comps':[this[_0x52893a(0x227)][_0x52893a(0x239)]],'toObj':_0x2f04be,'path':[_0x52893a(0x2bb)]}),await this[_0x52893a(0x20c)]({'comps':[this['_compBackground']['compBackgroundDamageImmunity']],'toObj':_0x2f04be,'path':[_0x52893a(0x23f)],'isLegacy':!![]}),await this[_0x52893a(0x20c)]({'comps':[this[_0x52893a(0x227)][_0x52893a(0x1e6)]],'toObj':_0x2f04be,'path':[_0x52893a(0x2e1)],'isLegacy':!![]}),await this['_pHandleSaveClick_pDoApplyTraitLike']({'comps':[this[_0x52893a(0x227)][_0x52893a(0x209)]],'toObj':_0x2f04be,'path':[_0x52893a(0x245)],'isLegacy':!![]}),await this[_0x52893a(0x20c)]({'comps':[this[_0x52893a(0x227)][_0x52893a(0x258)]],'toObj':_0x2f04be,'path':['conditionImmune'],'isLegacy':!![]}),this['_compBackground'][_0x52893a(0x201)]?_0x2f04be[_0x52893a(0x298)]=await this['_compBackground']['compBackgroundCharacteristics']['pGetFormData']():_0x2f04be[_0x52893a(0x229)]=!![],delete _0x2f04be[_0x52893a(0x275)],delete _0x2f04be['additionalSpells'],delete _0x2f04be[_0x52893a(0x26c)],await _0xef30d1['pImportEntry'](_0x2f04be,{'isCharactermancer':!![]});}_0x3c1687[_0x52893a(0x212)]({'message':_0x52893a(0x205),'count':_0x1d2ccd['_']});if(_0x3c1687[_0x52893a(0x25b)])return _0x3c1687[_0x52893a(0x212)]({'message':_0x52893a(0x23e),'count':_0x1d2ccd['_']});}async[_0x566116(0x26d)](_0x5e5681){const _0x4009c5=_0x566116,{progressWidget:_0x1dced5,ptrTaskProgress:_0x203edc}=_0x5e5681;_0x1dced5[_0x4009c5(0x212)]({'message':'Importing\x20feats...','count':++_0x203edc['_']});const _0x903865=await this['_compFeat'][_0x4009c5(0x1d6)]();if(_0x903865?.[_0x4009c5(0x27a)]){const _0x482c53=this[_0x4009c5(0x25f)]['compStatgen']['getFormDataAsi'](),_0x275639=new ImportListFeat({'actor':this[_0x4009c5(0x1ee)]});await _0x275639[_0x4009c5(0x2a2)]();for(const _0x5a5fd7 of['ability',_0x4009c5(0x2c5),_0x4009c5(0x2af),_0x4009c5(0x2aa)]){if(!_0x903865?.[_0x5a5fd7])continue;for(const {feat:_0x2dc471,formDatasFeatureOptionsSelect:_0x43ecaa,ix:_0x2cc9cd}of _0x903865[_0x5a5fd7][_0x4009c5(0x296)]){if(!_0x2dc471)continue;if(_0x482c53[_0x4009c5(0x26c)][_0x5a5fd7]?.[_0x2cc9cd]){const _0x34d0d3=_0x482c53[_0x4009c5(0x26c)][_0x5a5fd7]?.[_0x2cc9cd];_0x2dc471[_0x4009c5(0x285)]=[_0x34d0d3[_0x4009c5(0x218)]][_0x4009c5(0x238)](Boolean),_0x2dc471[_0x4009c5(0x22e)]=_0x2dc471[_0x4009c5(0x285)][0x0]||{},delete _0x2dc471[_0x4009c5(0x277)],Renderer[_0x4009c5(0x2a7)][_0x4009c5(0x271)](_0x2dc471);}for(const _0x856866 of _0x43ecaa){const _0xfa8439={'data':{}};await Charactermancer_FeatureOptionsSelect[_0x4009c5(0x2c1)]({'actor':this[_0x4009c5(0x1ee)],'formData':_0x856866}),await Charactermancer_FeatureOptionsSelect[_0x4009c5(0x2e8)](this[_0x4009c5(0x1ee)],_0xfa8439,_0x856866);if(Object[_0x4009c5(0x214)](_0xfa8439[_0x4009c5(0x296)])[_0x4009c5(0x248)])await this[_0x4009c5(0x1ee)]['update'](_0xfa8439);let _0x511cd9=null;if(_0x482c53[_0x4009c5(0x26c)][_0x5a5fd7]?.[_0x2cc9cd]){const _0x1451db=_0x482c53[_0x4009c5(0x26c)][_0x5a5fd7]?.[_0x2cc9cd];_0x511cd9=Object[_0x4009c5(0x214)](_0x1451db[_0x4009c5(0x218)]||{})[0x0];}await Charactermancer_FeatureOptionsSelect[_0x4009c5(0x2dd)]({'actor':this[_0x4009c5(0x1ee)],'formData':_0x856866,'parentAbilityAbv':_0x511cd9});if(_0x856866?.[_0x4009c5(0x296)]?.[_0x4009c5(0x2d0)]?.[_0x4009c5(0x248)])for(let _0x14d66e=0x0;_0x14d66e<_0x856866[_0x4009c5(0x296)][_0x4009c5(0x2d0)][_0x4009c5(0x248)];++_0x14d66e){const _0x4b04ea=_0x856866[_0x4009c5(0x296)][_0x4009c5(0x2d0)][_0x14d66e],_0x48934e=_0x4b04ea[_0x4009c5(0x1e1)]===_0x4009c5(0x2a7)&&_0x14d66e===0x0?MiscUtil['copy'](_0x2dc471):MiscUtil[_0x4009c5(0x2a3)](_0x4b04ea['entity']);delete _0x48934e[_0x4009c5(0x285)],delete _0x48934e[_0x4009c5(0x233)],delete _0x48934e[_0x4009c5(0x2f8)],delete _0x48934e[_0x4009c5(0x24e)],delete _0x48934e[_0x4009c5(0x2bb)],delete _0x48934e[_0x4009c5(0x28f)],delete _0x48934e[_0x4009c5(0x283)],delete _0x48934e[_0x4009c5(0x1f4)],delete _0x48934e[_0x4009c5(0x273)],delete _0x48934e[_0x4009c5(0x24c)],delete _0x48934e[_0x4009c5(0x29a)],delete _0x48934e[_0x4009c5(0x2d2)],delete _0x48934e[_0x4009c5(0x1d8)],await _0x275639[_0x4009c5(0x2d5)](_0x48934e,{'isCharactermancer':!![],'isLeaf':!![]});}}}}}_0x1dced5[_0x4009c5(0x212)]({'message':_0x4009c5(0x204),'count':_0x203edc['_']});if(_0x1dced5[_0x4009c5(0x25b)])return _0x1dced5['setProgress']({'message':_0x4009c5(0x23e),'count':_0x203edc['_']});}async[_0x566116(0x224)](_0x10d575){const _0x1fac39=_0x566116,{progressWidget:_0x7215b3,ptrTaskProgress:_0x4970b0}=_0x10d575;_0x7215b3[_0x1fac39(0x212)]({'message':'Importing\x20spells...','count':++_0x4970b0['_']});const _0x2a55dc=this['_compSpell'][_0x1fac39(0x302)]||this['_compSpell'][_0x1fac39(0x1f0)][_0x1fac39(0x22d)]();for(let _0x3d96ad=0x0;_0x3d96ad<this[_0x1fac39(0x2bf)]['state'][_0x1fac39(0x1f2)]+0x1;++_0x3d96ad){const {propIxClass:_0x5b3a3d,propIxSubclass:_0x2e4f82}=ActorCharactermancerBaseComponent[_0x1fac39(0x2b6)](_0x3d96ad),_0x5b84e3=this[_0x1fac39(0x2bf)][_0x1fac39(0x211)]({'propIxClass':_0x5b3a3d});if(!_0x5b84e3)continue;const _0x31da7d=this['_compClass'][_0x1fac39(0x300)]({'cls':_0x5b84e3,'propIxSubclass':_0x2e4f82});if(this[_0x1fac39(0x27c)][_0x1fac39(0x29c)][_0x3d96ad]){const _0x2b7062=await this[_0x1fac39(0x27c)][_0x1fac39(0x29c)][_0x3d96ad][_0x1fac39(0x260)](_0x2a55dc);await Charactermancer_Spell[_0x1fac39(0x2bc)](this[_0x1fac39(0x1ee)],_0x2b7062,{'cls':_0x5b84e3,'sc':_0x31da7d});}if(this[_0x1fac39(0x27c)][_0x1fac39(0x2d6)][_0x3d96ad]){const _0x4fb14c=await this[_0x1fac39(0x27c)]['compsSpellAdditionalSpellClass'][_0x3d96ad][_0x1fac39(0x260)]();await this[_0x1fac39(0x25d)]({'formData':_0x4fb14c,'abilityAbv':_0x5b84e3[_0x1fac39(0x200)]});}if(!_0x31da7d)continue;if(this['_compSpell'][_0x1fac39(0x25a)][_0x3d96ad]){const _0x2dffe5=await this[_0x1fac39(0x27c)]['compsSpellAdditionalSpellSubclass'][_0x3d96ad][_0x1fac39(0x260)]();await this[_0x1fac39(0x25d)]({'formData':_0x2dffe5,'abilityAbv':_0x31da7d?.[_0x1fac39(0x200)]||_0x5b84e3[_0x1fac39(0x200)]});}}const _0x36c7fb=[this[_0x1fac39(0x27c)]['compSpellAdditionalSpellRace'],this['_compSpell']['compSpellAdditionalSpellBackground']];for(const _0x41a038 of _0x36c7fb){if(!_0x41a038)continue;const _0x993b21=await _0x41a038[_0x1fac39(0x260)]();await this[_0x1fac39(0x25d)]({'formData':_0x993b21});}_0x7215b3[_0x1fac39(0x212)]({'message':'Imported\x20spells.','count':_0x4970b0['_']});if(_0x7215b3['isCancelled'])return _0x7215b3[_0x1fac39(0x212)]({'message':'Build\x20cancelled.','count':_0x4970b0['_']});}async[_0x566116(0x203)](_0x205983){const _0x114f75=_0x566116,{progressWidget:_0x17907b,ptrTaskProgress:_0x5936b1}=_0x205983;_0x17907b['setProgress']({'message':_0x114f75(0x2cb),'count':++_0x5936b1['_']});const _0x8ba23a=await this['_compEquipment'][_0x114f75(0x225)][_0x114f75(0x260)](),_0x15d110=await this[_0x114f75(0x1da)][_0x114f75(0x2c4)][_0x114f75(0x260)](),_0x16c0d0=await this[_0x114f75(0x1da)][_0x114f75(0x237)][_0x114f75(0x260)]();if(_0x8ba23a?.[_0x114f75(0x296)]?.['currency'])await Charactermancer_StartingEquipment['pUpdateActorCurrency'](this[_0x114f75(0x1ee)],_0x8ba23a);if(_0x15d110?.[_0x114f75(0x296)]?.['equipmentItemEntries'])await Charactermancer_StartingEquipment[_0x114f75(0x2fb)](this[_0x114f75(0x1ee)],_0x15d110);if(_0x16c0d0?.[_0x114f75(0x296)]?.[_0x114f75(0x289)])await Charactermancer_StartingEquipment[_0x114f75(0x2fb)](this[_0x114f75(0x1ee)],_0x16c0d0);_0x17907b[_0x114f75(0x212)]({'message':_0x114f75(0x2a6),'count':_0x5936b1['_']});if(_0x17907b['isCancelled'])return _0x17907b[_0x114f75(0x212)]({'message':_0x114f75(0x23e),'count':_0x5936b1['_']});}async['_pHandleSaveClick_pDoApplySkills'](_0x193933,_0x323078,..._0x141ff9){const _0x13b9f3=_0x566116;MiscUtil[_0x13b9f3(0x2ce)](_0x323078,..._0x141ff9),_0x193933=(_0x193933||[])[_0x13b9f3(0x238)](Boolean);if(!_0x193933[_0x13b9f3(0x248)])return;const _0x19cf9e={};for(const _0xbe2253 of _0x193933){const _0x233a0d=await _0xbe2253[_0x13b9f3(0x260)]();Object['keys'](Parser[_0x13b9f3(0x244)])[_0x13b9f3(0x238)](_0x1c32f7=>_0x233a0d['data']?.[_0x13b9f3(0x233)]?.[_0x1c32f7])[_0x13b9f3(0x26e)](_0x539fc3=>_0x19cf9e[_0x539fc3]=!![]);}Object[_0x13b9f3(0x214)](_0x19cf9e)[_0x13b9f3(0x248)]&&MiscUtil[_0x13b9f3(0x2fd)](_0x323078,..._0x141ff9,[_0x19cf9e]);}async[_0x566116(0x20c)]({comps:_0x582564,toObj:_0x4e98c9,path:_0x59f6ad,isLegacy:isLegacy=![]}){const _0x4d3621=_0x566116,_0x195c44=_0x59f6ad['last']();MiscUtil['delete'](_0x4e98c9,..._0x59f6ad),_0x582564=_0x582564[_0x4d3621(0x238)](Boolean);if(!_0x582564['length'])return;const _0x42f815=(await _0x582564[_0x4d3621(0x21b)](_0x5bacc7=>_0x5bacc7[_0x4d3621(0x260)]()))[_0x4d3621(0x2f0)](_0x341d6d=>_0x341d6d?.[_0x4d3621(0x296)]?.[_0x195c44])[_0x4d3621(0x238)](Boolean);if(isLegacy){const _0x1cbfd0=_0x42f815['map'](_0x4b4bfe=>Object[_0x4d3621(0x214)](_0x4b4bfe));if(_0x1cbfd0[_0x4d3621(0x248)])MiscUtil[_0x4d3621(0x2fd)](_0x4e98c9,..._0x59f6ad,_0x1cbfd0);}else{const _0x1e3581=_0x42f815[_0x4d3621(0x1ff)](_0x3b7045=>_0x3b7045);if(Object[_0x4d3621(0x214)](_0x1e3581)[_0x4d3621(0x248)])MiscUtil[_0x4d3621(0x2fd)](_0x4e98c9,..._0x59f6ad,[_0x1e3581]);}}async['_pHandleSaveClick_pDoImportAdditionalSpells']({formData:_0x3b9e39,abilityAbv:_0x1b323f,parentAbilityAbv:_0x4e2f37}){const _0xa25b47=_0x566116;await Charactermancer_AdditionalSpellsSelect[_0xa25b47(0x2bc)](this[_0xa25b47(0x1ee)],_0x3b9e39,{'abilityAbv':_0x1b323f,'parentAbilityAbv':_0x4e2f37});}async[_0x566116(0x2a8)](_0x75dff0){const _0x53c5c4=_0x566116,{progressWidget:_0x333b2f,ptrTaskProgress:_0x35a5d7}=_0x75dff0;_0x333b2f[_0x53c5c4(0x212)]({'message':_0x53c5c4(0x301),'count':++_0x35a5d7['_']});if(this[_0x53c5c4(0x2c8)])this[_0x53c5c4(0x2c8)]();}},ActorCharactermancer[_0x566116(0x259)][_0x566116(0x1fc)]=class{constructor({progressWidget:_0x5b448b,ptrTaskProgress:_0x164f22}){const _0x14ae9c=_0x566116;this[_0x14ae9c(0x2ed)]=_0x5b448b,this[_0x14ae9c(0x304)]=_0x164f22;}};export{ActorCharactermancerSourceSelector,ActorCharactermancerBaseComponent};