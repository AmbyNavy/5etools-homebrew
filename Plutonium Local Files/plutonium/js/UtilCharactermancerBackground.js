const _0x4b34e4=_0x27bc;(function(_0x19aaf5,_0x2651e4){const _0x9ad324=_0x27bc,_0x1cb5cf=_0x19aaf5();while(!![]){try{const _0x31c5d0=-parseInt(_0x9ad324(0x9b))/0x1*(-parseInt(_0x9ad324(0xdf))/0x2)+parseInt(_0x9ad324(0x107))/0x3+parseInt(_0x9ad324(0xc6))/0x4+-parseInt(_0x9ad324(0xd7))/0x5+parseInt(_0x9ad324(0xf5))/0x6*(parseInt(_0x9ad324(0x10a))/0x7)+parseInt(_0x9ad324(0xea))/0x8*(-parseInt(_0x9ad324(0xa0))/0x9)+-parseInt(_0x9ad324(0xe2))/0xa*(parseInt(_0x9ad324(0x108))/0xb);if(_0x31c5d0===_0x2651e4)break;else _0x1cb5cf['push'](_0x1cb5cf['shift']());}catch(_0x4e6b0b){_0x1cb5cf['push'](_0x1cb5cf['shift']());}}}(_0x23c3,0x8e936));import{Vetools}from'./Vetools.js';import{LGT,Util}from'./Util.js';import{UtilApplications}from'./UtilApplications.js';function _0x27bc(_0x341e58,_0x29875a){const _0x23c343=_0x23c3();return _0x27bc=function(_0x27bcf0,_0x4c211f){_0x27bcf0=_0x27bcf0-0x6d;let _0x24530f=_0x23c343[_0x27bcf0];return _0x24530f;},_0x27bc(_0x341e58,_0x29875a);}import{UtilDataConverter}from'./UtilDataConverter.js';function _0x23c3(){const _0x2b2cc8=['modalTitle','_renderCollection','notifications','{@note\x20(No\x20feature(s)).}','manualEntryMetas','replace','getOrSet','getAutoConvertedTableRollMode','count','data','</div>','personalitytrait','uid','_PROP_TO_FULL','_MODE_TO_FULL','map','Bond','_proxyAssignSimple','_getCharacteristicTables','bond','4670552qKEkHB','No\x20cell\x20found\x20for\x20row\x20','assign','_getCpyTableCell','pGetUserInput','additionalSpells','constructor','innate','getFormData','append','getOrdinalForm','style','prepared','_render_manual','Could\x20not\x20merge\x20additionalSpell\x20property\x20\x22','getMaxWindowWidth','height','479530zpugHN','pGetUserSelection','__state','withCustomDiceRenderingPatch','background','join','_value','type','12jPkSYI','_triggerCollectionUpdate','copy','555230kBeVRl','values','forEach','(Unnamed\x20Feature)','$getIptEntries','<div\x20class=\x22w-100\x22></div>','colLabels','flat','24OjQmLc','<button\x20class=\x22btn\x20btn-default\x20btn-5et\x20w-100\x20mr-2\x20mb-2\x22>Choose\x20Background</button>','warn','_getFormData_doMergeOtherBackground','_tables','Flaw','Customize\x20your\x20Background:\x20Add\x20Custom\x20Feature(s)','<button\x20class=\x22btn\x20btn-default\x20btn-xs\x22>Hide\x20Tables</button>','_MODE_DEFAULT','No\x20result\x20found\x20for\x20roll\x20of\x20','error','12SfBjHt','trait','_MODE_OTHER_BACKGROUND','stripTags','filter','custom','trim','toggleVe','_mode','_getDefaultState_manualEntryMeta','fromObject','ROLL_COL_STANDARD','mode','expanded','getMaxWindowHeight','unique','pulseFeatures','Characteristics','3064707NMejrk','418yxtfvD','length','1385041gTyvul','each','entries','isArray','WALKER_READONLY_GENERIC','keys','find','standard','empty','flaw','_render_other','Show\x20Tables','get','resize-vertical','<button\x20class=\x22btn\x20btn-xs\x20btn-default\x22>Roll','prop','applyFormDataToActorUpdate','</button>','name','ixBackgroundOther','_getFormData_doMergeOtherBackground_object','_MODE_MANUAL','Left-click\x20to\x20set\x20the\x20first\x20field;\x20CTRL-click\x20to\x20set\x20the\x20second\x20field.','propMode','$wrpHeaderControls','_getFeatureEntries','evaluate','isCancelled','object','[data-plut-temp-dice]','render','_state','known','_getDefaultState','pGetImportCompApplicationFormData','fromFeature','walk','click','Personality\x20Traits','addHookPulseFeatures','propValue','<div\x20class=\x22render-roller\x22>','_getFormData_doMergeOtherBackground_array','_PROP_METAS','toObject','state','_modalFilter','ctrlKey','Customize\x20Background:\x20Features','appendTo','$getIptStr','_background','toggleClass','exec','title','text','ideal','_addHookBase','<i\x20class=\x22ve-muted\x22>Select\x20an\x20alternate\x20background,\x20whose\x20feature(s)\x20will\x20replace\x20your\x20current\x20background\x27s\x20feature(s).</i>','_getProps','$getSelEnum','push','64997COYhDZ','mergeMap','every','<div\x20class=\x22italic\x20text-center\x20ve-muted\x20my-1\x22>No\x20features.</div>','rows','555435aOHyTo','Ideal','withUnpatchedDiceRendering','\x22--no\x20merge\x20strategy\x20defined!','STR_SEE_CONSOLE','target','pGetFormData','active','Hide\x20Tables','replaceWith','Failed\x20to\x20roll\x20dice!\x20','addClass','mb-2','html','_$wrpHeaderControls','_getOtherBackground','allData','getEntriesAsText'];_0x23c3=function(){return _0x2b2cc8;};return _0x23c3();}class Charactermancer_Background_Characteristics extends BaseComponent{static async['pGetUserInput']({entries:_0x5c7c32}={}){const _0x255989=_0x27bc;if(!_0x5c7c32||!_0x5c7c32[_0x255989(0x109)])return{'isFormComplete':!![],'data':{}};const _0x2dafd7=new this({'entries':_0x5c7c32});return UtilApplications[_0x255989(0x7f)]({'comp':_0x2dafd7,'width':Util[_0x255989(0xd5)](0x280),'height':Util[_0x255989(0x103)]()});}static async['pFillActorCharacteristicsData'](_0x402d7c,_0x19537a,_0x48f93c){const _0x2bebe8=_0x27bc;if(!_0x402d7c||!_0x402d7c[_0x2bebe8(0x109)])return;const _0xe5158b=await this[_0x2bebe8(0xca)]({'entries':_0x402d7c});if(!_0xe5158b)return _0x48f93c[_0x2bebe8(0x78)]=!![];if(_0xe5158b===VeCt['SYM_UI_SKIP'])return;this[_0x2bebe8(0x6d)](_0x19537a,_0xe5158b);}static[_0x4b34e4(0x6d)](_0x43fb02,_0x15d2f4){const _0x52938a=_0x4b34e4;MiscUtil[_0x52938a(0xb8)](_0x43fb02,'data','details',{}),Charactermancer_Background_Characteristics[_0x52938a(0x88)]['forEach'](_0x1fd9ec=>{const _0x4977b6=_0x52938a;_0x43fb02[_0x4977b6(0xbb)]['details'][Charactermancer_Background_Characteristics['_PROP_TO_ACTOR_DETAILS_PROP'][_0x1fd9ec[_0x4977b6(0x119)]]]=[...new Array(_0x1fd9ec[_0x4977b6(0xba)]||0x1)][_0x4977b6(0xc1)]((_0x47af9c,_0x2286a3)=>{const _0x5392c9=_0x4977b6,{propValue:_0x3763a6}=this[_0x5392c9(0x98)](_0x1fd9ec['prop'],_0x2286a3);if(!_0x15d2f4[_0x5392c9(0xbb)][_0x3763a6])return null;return _0x15d2f4[_0x5392c9(0xbb)][_0x3763a6];})[_0x4977b6(0xf9)](Boolean)[_0x4977b6(0xdc)]('\x0a\x0a');});}constructor(_0x4689dd){const _0x2b35e9=_0x4b34e4;_0x4689dd=_0x4689dd||{},super(),this[_0x2b35e9(0xee)]=Charactermancer_Background_Characteristics['_getCharacteristicTables'](_0x4689dd['entries']),this[_0x2b35e9(0xae)]=_0x4689dd[_0x2b35e9(0x75)],Object[_0x2b35e9(0xc8)](this[_0x2b35e9(0xd9)],Charactermancer_Background_Characteristics['_PROP_METAS'][_0x2b35e9(0x9c)](_0x489fc3=>({[Charactermancer_Background_Characteristics['_getProps'](_0x489fc3[_0x2b35e9(0x119)])['propMode']]:this['_tables'][_0x489fc3[_0x2b35e9(0x119)]]!=null?'standard':_0x2b35e9(0xfa)})));}static[_0x4b34e4(0x98)](_0x57282c,_0x13f76a){const _0x1d734a=_0x4b34e4;return{'propValue':_0x57282c+'_'+_0x13f76a+_0x1d734a(0xdd),'propMode':_0x57282c+_0x1d734a(0xfd)};}static['_getCpyTableCell'](_0x4e6e1a,_0x152441){const _0x5f16f3=_0x4b34e4,_0x2c3058=_0x4e6e1a[_0x5f16f3(0x9f)][_0x152441]?.[0x1];if(!_0x2c3058)return ui['notifications'][_0x5f16f3(0xf4)](_0x5f16f3(0xc7)+_0x152441+'!'),null;return Renderer[_0x5f16f3(0xf8)](MiscUtil['copy'](_0x2c3058));}get['modalTitle'](){const _0x51bf42=_0x4b34e4;return _0x51bf42(0x106);}[_0x4b34e4(0x7b)](_0x1eb208){const _0x1985a=_0x4b34e4,_0x4dacf6=Charactermancer_Background_Characteristics[_0x1985a(0x88)][_0x1985a(0xc1)]((_0x377f04,_0x2cd0b9)=>{const _0x11d6cb=_0x1985a,_0x2136f2=_0x377f04['count']||0x1,{propMode:_0x380025}=this['constructor'][_0x11d6cb(0x98)](_0x377f04[_0x11d6cb(0x119)]);let _0x55277b,_0x2bc684;if(this[_0x11d6cb(0xee)][_0x377f04[_0x11d6cb(0x119)]]){const _0x2a0648=$('<button\x20class=\x22btn\x20btn-default\x20btn-xs\x22\x20title=\x22Show/Hide\x20Table\x22>View\x20Table</button>')[_0x11d6cb(0x82)](()=>this['_state'][_0x380025]=this['_state'][_0x380025]==='custom'?_0x11d6cb(0x111):_0x11d6cb(0xfa));_0x55277b=$$`<div class="ve-flex-v-center">
					${_0x2a0648}
				</div>`;const _0xa6dd55=this[_0x11d6cb(0xee)][_0x377f04[_0x11d6cb(0x119)]],_0x5bdcb1=Vetools[_0x11d6cb(0xda)](()=>{const _0x10afc7=_0x11d6cb,_0x5aa6df=$(''+Renderer[_0x10afc7(0x116)]()[_0x10afc7(0x7b)](_0xa6dd55));return _0x5aa6df['find'](_0x10afc7(0x7a))[_0x10afc7(0x10b)]((_0x5e2b64,_0x36259a)=>{const _0xd6e2a9=_0x10afc7,_0x239af8=$(_0x36259a),_0x3aa366=[...new Array(_0x2136f2)][_0xd6e2a9(0xc1)]((_0x1ad814,_0x4e5abb)=>{const _0x32c8b0=_0xd6e2a9;return $(_0x32c8b0(0x118)+(_0x2136f2>0x1?'\x20'+Parser[_0x32c8b0(0xd0)](_0x4e5abb+0x1):'')+_0x32c8b0(0x6e))['click'](async()=>{const _0x5259fa=_0x32c8b0,{propValue:_0x421990}=this[_0x5259fa(0xcc)][_0x5259fa(0x98)](_0x377f04[_0x5259fa(0x119)],_0x4e5abb);let _0x31a6df;try{_0x31a6df=new Roll(Renderer[_0x5259fa(0xf8)](_0xa6dd55[_0x5259fa(0xe8)][0x0])),await _0x31a6df[_0x5259fa(0x77)](),_0x31a6df['toMessage']();}catch(_0x23f116){return ui[_0x5259fa(0xb4)][_0x5259fa(0xf4)](_0x5259fa(0xaa)+VeCt[_0x5259fa(0xa4)]);}const _0x1f9a76=_0xa6dd55['rows'][_0x31a6df['total']-0x1]?.[0x1];if(!_0x1f9a76)return ui[_0x5259fa(0xb4)][_0x5259fa(0xf4)](_0x5259fa(0xf3)+_0x31a6df['total']+'!');this[_0x5259fa(0x7c)][_0x421990]=Renderer['stripTags'](MiscUtil[_0x5259fa(0xe1)](_0x1f9a76));});}),_0x2f50f8=$$`<div class="ve-flex-vh-center btn-group">${_0x3aa366}</div>`;_0x239af8[_0xd6e2a9(0xa9)](_0x2f50f8);}),_0x5aa6df[_0x10afc7(0x110)]('[data-roll-min]')[_0x10afc7(0x10b)]((_0x1d983d,_0x15a886)=>{const _0x1539e3=_0x10afc7,_0xbeed95=$(_0x15a886),_0x1da8c0=_0xbeed95[_0x1539e3(0xad)]();$(_0x1539e3(0x86)+_0x1da8c0+_0x1539e3(0xbc))[_0x1539e3(0x82)](_0x4127fc=>{const _0xf79bc7=_0x1539e3,{propValue:_0x17646e}=this[_0xf79bc7(0xcc)][_0xf79bc7(0x98)](_0x377f04[_0xf79bc7(0x119)],_0x4127fc[_0xf79bc7(0x8c)]?0x1:0x0);this[_0xf79bc7(0x7c)][_0x17646e]=this[_0xf79bc7(0xcc)][_0xf79bc7(0xc9)](_0xa6dd55,_0x1d983d);})[_0x1539e3(0x93)](_0x2136f2>0x1?_0x1539e3(0x73):null)['appendTo'](_0xbeed95[_0x1539e3(0x112)]());}),_0x5aa6df;},()=>{return'<span\x20data-plut-temp-dice=\x22true\x22></span>';});_0x2bc684=$$`<div class="ve-flex-col w-100 ve-small">
					${_0x5bdcb1}
				</div>`;const _0x4d4dbd=()=>{const _0x32823e=_0x11d6cb;_0x2a0648[_0x32823e(0x91)](_0x32823e(0xa7),this[_0x32823e(0x7c)][_0x380025]==='standard'),_0x2bc684['toggleVe'](this[_0x32823e(0x7c)][_0x380025]==='standard');};this['_addHookBase'](_0x380025,_0x4d4dbd),_0x4d4dbd();}const _0x97065=[...new Array(_0x2136f2)][_0x11d6cb(0xc1)]((_0x565e06,_0x405178)=>ComponentUiUtil[_0x11d6cb(0xe6)](this,this[_0x11d6cb(0xcc)][_0x11d6cb(0x98)](_0x377f04[_0x11d6cb(0x119)],_0x405178)[_0x11d6cb(0x85)])[_0x11d6cb(0xab)](_0x11d6cb(0x117)));if(_0x2136f2!==0x1){const _0x7b2815=_0x97065[_0x11d6cb(0xc1)](_0x7e8295=>_0x7e8295[0x0]),_0x1ace18=new ResizeObserver(_0x5f2e8c=>{const _0x89254f=_0x11d6cb;if(_0x5f2e8c[_0x89254f(0x109)]!==0x1)return;const _0x1e9a13=_0x5f2e8c[0x0][_0x89254f(0xa5)];_0x7b2815[_0x89254f(0xf9)](_0x483a76=>_0x483a76!==_0x1e9a13)['forEach'](_0x4148f6=>_0x4148f6[_0x89254f(0xd1)][_0x89254f(0xd6)]=_0x1e9a13[_0x89254f(0xd1)][_0x89254f(0xd6)]);});_0x7b2815[_0x11d6cb(0xe4)](_0xc45d07=>_0x1ace18['observe'](_0xc45d07));}return $$`<div class="ve-flex-col ${_0x2cd0b9<Charactermancer_Background_Characteristics[_0x11d6cb(0x88)][_0x11d6cb(0x109)]-0x1?_0x11d6cb(0xac):''}">
				<div class="split-v-center mb-1">
					<div>${Charactermancer_Background_Characteristics[_0x11d6cb(0xbf)][_0x377f04[_0x11d6cb(0x119)]]}:</div>
					${_0x55277b}
				</div>

				${_0x2bc684}

				<div class="ve-flex">${_0x97065}</div>
			</div>`;}),_0x42a219=!!Object[_0x1985a(0x10f)](this[_0x1985a(0xee)])[_0x1985a(0x109)];let _0x323ad0;if(_0x42a219){_0x323ad0=$(_0x1985a(0xf1))[_0x1985a(0x82)](()=>{const _0x41d985=_0x1985a,_0x9a4752=_0x323ad0[_0x41d985(0x94)]()===_0x41d985(0xa8);this[_0x41d985(0xc3)](_0x41d985(0x8a),Charactermancer_Background_Characteristics[_0x41d985(0x88)]['mergeMap'](_0x9a8dbe=>({[Charactermancer_Background_Characteristics[_0x41d985(0x98)](_0x9a8dbe[_0x41d985(0x119)])['propMode']]:this[_0x41d985(0xee)][_0x9a8dbe['prop']]!=null&&!_0x9a4752?_0x41d985(0x111):_0x41d985(0xfa)}))),_0x323ad0[_0x41d985(0x94)](_0x9a4752?'Show\x20Tables':_0x41d985(0xa8));});const _0x49dbdd=()=>{const _0x4c3a78=_0x1985a,_0x4146bb=Charactermancer_Background_Characteristics[_0x4c3a78(0x88)][_0x4c3a78(0xf9)](_0xa26c52=>this[_0x4c3a78(0xee)][_0xa26c52['prop']])[_0x4c3a78(0xc1)](_0x54932d=>this[_0x4c3a78(0x7c)][Charactermancer_Background_Characteristics['_getProps'](_0x54932d['prop'])['propMode']]===_0x4c3a78(0xfa));if(_0x4146bb[_0x4c3a78(0x9d)](Boolean))_0x323ad0['text'](_0x4c3a78(0x115));else{if(_0x4146bb[_0x4c3a78(0x9d)](_0x19372c=>!_0x19372c))_0x323ad0['text'](_0x4c3a78(0xa8));}};Charactermancer_Background_Characteristics[_0x1985a(0x88)][_0x1985a(0xc1)](_0x3b8376=>Charactermancer_Background_Characteristics[_0x1985a(0x98)](_0x3b8376[_0x1985a(0x119)])[_0x1985a(0x74)])[_0x1985a(0xe4)](_0x37ba5e=>this['_addHookBase'](_0x37ba5e,_0x49dbdd)),_0x49dbdd();}let _0x20aa3f;if(!this[_0x1985a(0xae)]&&_0x42a219)_0x20aa3f=$$`<div class="mb-2 ve-flex-h-right">${_0x323ad0}</div>`;else this[_0x1985a(0xae)]&&_0x42a219&&this[_0x1985a(0xae)][_0x1985a(0xcf)](_0x323ad0);$$(_0x1eb208)`
			${_0x20aa3f}
			${_0x4dacf6}
		`;}[_0x4b34e4(0xa6)](){const _0x28d7d3=_0x4b34e4,_0x2eef11=Charactermancer_Background_Characteristics['_PROP_METAS'][_0x28d7d3(0xc1)](_0x1fe70e=>[...new Array(_0x1fe70e[_0x28d7d3(0xba)]||0x1)][_0x28d7d3(0xc1)]((_0x276513,_0x11917d)=>this[_0x28d7d3(0xcc)][_0x28d7d3(0x98)](_0x1fe70e[_0x28d7d3(0x119)],_0x11917d)[_0x28d7d3(0x85)]))[_0x28d7d3(0xe9)]()[_0x28d7d3(0x9c)](_0x1d8b33=>({[_0x1d8b33]:UiUtil[_0x28d7d3(0xb1)](this[_0x28d7d3(0x7c)][_0x1d8b33])}));return{'isFormComplete':Object[_0x28d7d3(0xe3)](_0x2eef11)[_0x28d7d3(0x9d)](_0x5a1425=>_0x5a1425[_0x28d7d3(0xfb)]()),'data':_0x2eef11};}[_0x4b34e4(0x7e)](){const _0x1229f4=_0x4b34e4;return Charactermancer_Background_Characteristics['_PROP_METAS']['map'](_0xc950cf=>[...new Array(_0xc950cf[_0x1229f4(0xba)]||0x1)][_0x1229f4(0xc1)]((_0x203d04,_0x49ce40)=>this['constructor'][_0x1229f4(0x98)](_0xc950cf[_0x1229f4(0x119)],_0x49ce40)[_0x1229f4(0x85)]))[_0x1229f4(0xe9)]()[_0x1229f4(0x9c)](_0x3a644d=>({[_0x3a644d]:''}));}static[_0x4b34e4(0xc4)](_0x16d7a8){const _0x2073bd=_0x4b34e4;if(!_0x16d7a8)return{};const _0x104f3f={};return UtilDataConverter[_0x2073bd(0x10e)][_0x2073bd(0x81)](_0x16d7a8,{'object':_0x509308=>{const _0x156c94=_0x2073bd;if(_0x509308['type']!=='table'||_0x509308?.['colLabels']?.[_0x156c94(0x109)]!==0x2||Renderer[_0x156c94(0xb9)](_0x509308)!==RollerUtil[_0x156c94(0x100)])return;const _0x596339=_0x509308[_0x156c94(0xe8)][0x1]['toLowerCase']()[_0x156c94(0xb7)](/\s+/g,''),_0x516ace=/^(personalitytrait|ideal|bond|flaw)s?$/i[_0x156c94(0x92)](_0x596339);if(!_0x516ace)return;_0x104f3f[_0x596339]=MiscUtil['copy'](_0x509308);}}),_0x104f3f;}}Charactermancer_Background_Characteristics[_0x4b34e4(0x88)]=[{'prop':_0x4b34e4(0xbd),'count':0x2},{'prop':'ideal'},{'prop':_0x4b34e4(0xc5)},{'prop':_0x4b34e4(0x113)}],Charactermancer_Background_Characteristics[_0x4b34e4(0xbf)]={'personalitytrait':_0x4b34e4(0x83),'ideal':_0x4b34e4(0xa1),'bond':_0x4b34e4(0xc2),'flaw':_0x4b34e4(0xef)},Charactermancer_Background_Characteristics['_PROP_TO_ACTOR_DETAILS_PROP']={'personalitytrait':_0x4b34e4(0xf6),'ideal':_0x4b34e4(0x95),'bond':_0x4b34e4(0xc5),'flaw':_0x4b34e4(0x113)};class Charactermancer_Background_Features extends BaseComponent{static async[_0x4b34e4(0xca)]({background:_0x1c220a,modalFilter:_0xd0c661,..._0x2a1ab8}={}){const _0x58a377=_0x4b34e4,_0x558729=new this({'background':_0x1c220a,'modalFilter':_0xd0c661});return UtilApplications[_0x58a377(0x7f)]({'comp':_0x558729,'width':Util['getMaxWindowWidth'](0x280),'height':Util[_0x58a377(0x103)](0x1e0),..._0x2a1ab8});}constructor(_0x2bf474){const _0x1288f0=_0x4b34e4;_0x2bf474=_0x2bf474||{},super(),this[_0x1288f0(0x90)]=_0x2bf474[_0x1288f0(0xdb)],this[_0x1288f0(0x8b)]=_0x2bf474['modalFilter'];}static[_0x4b34e4(0x76)](_0x458197){const _0x1891ef=_0x4b34e4;return(_0x458197?.[_0x1891ef(0x10c)]||[])[_0x1891ef(0xf9)](_0xe55a5c=>_0xe55a5c[_0x1891ef(0xbb)]?.['isFeature'])[_0x1891ef(0xc1)](_0x88ff2a=>{const _0x4fe67e=_0x1891ef,_0x28ce54=MiscUtil[_0x4fe67e(0xe1)](_0x88ff2a);if(_0x28ce54[_0x4fe67e(0x6f)])_0x28ce54['name']['replace'](/^.*?:\s*/,'');return _0x28ce54;});}get[_0x4b34e4(0xb2)](){const _0x3020a1=_0x4b34e4;return _0x3020a1(0x8d);}get['mode'](){const _0x3edc80=_0x4b34e4;return this[_0x3edc80(0x7c)][_0x3edc80(0x101)];}get[_0x4b34e4(0x70)](){const _0x4e41e0=_0x4b34e4;return this[_0x4e41e0(0x7c)][_0x4e41e0(0x70)];}[_0x4b34e4(0x84)](_0x32286d){const _0x61796f=_0x4b34e4;this[_0x61796f(0x96)](_0x61796f(0x105),_0x32286d);}[_0x4b34e4(0x7b)](_0x3140ac){const _0x524433=_0x4b34e4,_0x4e2318=ComponentUiUtil[_0x524433(0x99)](this,_0x524433(0x101),{'values':[Charactermancer_Background_Features[_0x524433(0xf2)],Charactermancer_Background_Features[_0x524433(0xf7)],Charactermancer_Background_Features[_0x524433(0x72)]],'fnDisplay':_0x2d32b9=>Charactermancer_Background_Features[_0x524433(0xc0)][_0x2d32b9]});this['_addHookBase'](_0x524433(0x101),()=>this['_state'][_0x524433(0x105)]=!this['_state'][_0x524433(0x105)]);const _0x24e84c=$('<button\x20class=\x22btn\x20btn-xs\x20btn-5et\x20ml-1\x22><span\x20class=\x22glyphicon\x20glyphicon-plus\x22></span>\x20Add\x20Feature</button>')[_0x524433(0x82)](()=>{const _0x339fe0=_0x524433,_0x3e17e3=this[_0x339fe0(0xfe)]();this['_state'][_0x339fe0(0xb6)]=[...this['_state']['manualEntryMetas'],_0x3e17e3];}),_0x39245e=()=>_0x24e84c[_0x524433(0xfc)](this[_0x524433(0x7c)][_0x524433(0x101)]===Charactermancer_Background_Features[_0x524433(0x72)]);this['_addHookBase']('mode',_0x39245e),_0x39245e();const _0xfb66a3=this['_render_default'](),_0x1f1ef4=this[_0x524433(0x114)](),_0x578766=this[_0x524433(0xd3)]();$$(_0x3140ac)`
			<div class="ve-flex-v-center mb-1">
				${_0x4e2318}
				${_0x24e84c}
			</div>
			${_0xfb66a3}
			${_0x1f1ef4}
			${_0x578766}
		`;}['_render_default'](){const _0x56e70d=_0x4b34e4,_0x731b2d=$$`<div class="ve-flex-col mt-1">
			<div class="w-100">${Vetools['withUnpatchedDiceRendering'](()=>Renderer[_0x56e70d(0x116)]()[_0x56e70d(0x7b)]({'type':_0x56e70d(0x10c),'entries':this[_0x56e70d(0xcc)][_0x56e70d(0x76)](this[_0x56e70d(0x90)])}))}</div>
		</div>`,_0x16bde0=()=>_0x731b2d[_0x56e70d(0xfc)](this[_0x56e70d(0x7c)]['mode']===Charactermancer_Background_Features[_0x56e70d(0xf2)]);return this[_0x56e70d(0x96)]('mode',_0x16bde0),_0x16bde0(),_0x731b2d;}[_0x4b34e4(0xaf)](){const _0x22f5f0=_0x4b34e4;return this['_modalFilter'][_0x22f5f0(0xb0)][this['_state']['ixBackgroundOther']];}[_0x4b34e4(0x114)](){const _0x4d75da=_0x4b34e4,_0x4b1dac=$(_0x4d75da(0xeb))[_0x4d75da(0x82)](async()=>{const _0x1448ed=_0x4d75da,_0x53d1aa=await this['_modalFilter'][_0x1448ed(0xd8)]();if(_0x53d1aa==null||!_0x53d1aa[_0x1448ed(0x109)])return;this[_0x1448ed(0x7c)][_0x1448ed(0x70)]=_0x53d1aa[0x0]?.['ix'];}),_0x1fff6a=$(_0x4d75da(0xe7)),_0x3f4241=()=>{const _0x1590b6=_0x4d75da,_0x557c81=this['_getOtherBackground']();if(!_0x557c81){_0x1fff6a[_0x1590b6(0xad)](_0x1590b6(0x97));return;}const _0x1c44bc=this['constructor'][_0x1590b6(0x76)](_0x557c81);_0x1fff6a[_0x1590b6(0xad)](Vetools[_0x1590b6(0xa2)](()=>Renderer['get']()[_0x1590b6(0x7b)](_0x1c44bc?.[_0x1590b6(0x109)]?{'type':_0x1590b6(0x10c),'entries':_0x1c44bc}:{'type':_0x1590b6(0x10c),'entries':[_0x1590b6(0xb5)]}))),this[_0x1590b6(0x7c)]['pulseFeatures']=!this[_0x1590b6(0x7c)][_0x1590b6(0x105)];};this[_0x4d75da(0x96)](_0x4d75da(0x70),_0x3f4241),_0x3f4241();const _0x3886f5=$$`<div class="ve-flex-col mt-1">
			${_0x4b1dac}
			${_0x1fff6a}
		</div>`,_0x3fa086=()=>_0x3886f5[_0x4d75da(0xfc)](this[_0x4d75da(0x7c)][_0x4d75da(0x101)]===Charactermancer_Background_Features[_0x4d75da(0xf7)]);return this[_0x4d75da(0x96)](_0x4d75da(0x101),_0x3fa086),_0x3fa086(),_0x3886f5;}[_0x4b34e4(0xd3)](){const _0x45d9bd=_0x4b34e4,_0x1fb78b=$(_0x45d9bd(0x9e)),_0x67f7ab=$('<div\x20class=\x22ve-flex-col\x22></div>'),_0x5bdff6=()=>{const _0x1f83e6=_0x45d9bd;this[_0x1f83e6(0xb3)]({'prop':'manualEntryMetas','fnDeleteExisting':()=>{const _0x103729=_0x1f83e6;this[_0x103729(0x7c)][_0x103729(0x105)]=!this[_0x103729(0x7c)][_0x103729(0x105)];},'fnUpdateExisting':(_0x4f431f,_0x517b2b)=>{const _0x26b06b=_0x1f83e6;_0x4f431f['comp'][_0x26b06b(0xc3)](_0x26b06b(0x8a),_0x517b2b[_0x26b06b(0xbb)],!![]),this[_0x26b06b(0x7c)][_0x26b06b(0x105)]=!this['_state']['pulseFeatures'];},'fnGetNew':_0x11ae5d=>{const _0x15c2eb=_0x1f83e6,_0xd9c762=BaseComponent[_0x15c2eb(0xff)](_0x11ae5d['data'],'*');_0xd9c762['_addHookAll']('state',()=>{const _0x416b3a=_0x15c2eb;_0x11ae5d['data']=_0xd9c762[_0x416b3a(0x89)]('*'),this[_0x416b3a(0xe0)](_0x416b3a(0xb6));});const _0x4a79ad=ComponentUiUtil[_0x15c2eb(0x8f)](_0xd9c762,_0x15c2eb(0x6f)),_0x5b6c35=ComponentUiUtil[_0x15c2eb(0xe6)](_0xd9c762,'entries'),_0x311c47=$('<button\x20class=\x22btn\x20btn-5et\x20btn-xs\x20btn-danger\x20ml-1\x22\x20title=\x22Delete\x22><span\x20class=\x22glyphicon\x20glyphicon-trash\x22></span></button>')['click'](()=>this[_0x15c2eb(0x7c)][_0x15c2eb(0xb6)]=this[_0x15c2eb(0x7c)][_0x15c2eb(0xb6)][_0x15c2eb(0xf9)](_0xd170a9=>_0xd170a9!==_0x11ae5d)),_0x4a681e=$$`<div class="ve-flex-col py-1 w-100 stripe-even">
						<div class="split-v-center mb-1">
							<label class="ve-flex-v-center w-100"><div class="mr-1 text-right pr-1 no-shrink w-50p">Name</div>${_0x4a79ad}</label>
							${_0x311c47}
						</div>
						<label class="ve-flex-v-center w-100"><div class="mr-1 text-right pr-1 no-shrink w-50p">Text</div>${_0x5b6c35}</label>
					</div>`[_0x15c2eb(0x8e)](_0x67f7ab);return{'comp':_0xd9c762,'$wrpRow':_0x4a681e};}}),_0x1fb78b[_0x1f83e6(0xfc)](!this[_0x1f83e6(0x7c)][_0x1f83e6(0xb6)]?.[_0x1f83e6(0x109)]);};_0x5bdff6(),this[_0x45d9bd(0x96)](_0x45d9bd(0xb6),_0x5bdff6);const _0x1569c7=$$`<div class="ve-flex-col">
			<hr class="hr-1">
			${_0x1fb78b}
			${_0x67f7ab}
		</div>`,_0x2140f1=()=>_0x1569c7['toggleVe'](this[_0x45d9bd(0x7c)][_0x45d9bd(0x101)]===Charactermancer_Background_Features[_0x45d9bd(0x72)]);return this[_0x45d9bd(0x96)](_0x45d9bd(0x101),_0x2140f1),_0x2140f1(),_0x1569c7;}['getFormData'](){const _0x8e8c51=_0x4b34e4;let _0x590d37=!![];const _0x26e883=[],_0x320d1f=MiscUtil[_0x8e8c51(0xe1)](this[_0x8e8c51(0x90)]),_0x276bdd=Object['entries'](_0x320d1f[_0x8e8c51(0x80)]||{})['filter'](([,_0x3a44ca])=>_0x3a44ca)[_0x8e8c51(0xc1)](([_0x22fdbc])=>_0x22fdbc);switch(this[_0x8e8c51(0x7c)][_0x8e8c51(0x101)]){case Charactermancer_Background_Features['_MODE_DEFAULT']:{_0x26e883[_0x8e8c51(0x9a)](...this[_0x8e8c51(0xcc)][_0x8e8c51(0x76)](this[_0x8e8c51(0x90)]));break;}case Charactermancer_Background_Features['_MODE_OTHER_BACKGROUND']:{const _0xd4ce66=this['_getOtherBackground']();if(!_0xd4ce66){_0x590d37=![],_0x276bdd[_0x8e8c51(0xe4)](_0x141f87=>delete _0x320d1f[_0x141f87]);break;}_0x26e883['push'](...this[_0x8e8c51(0xcc)][_0x8e8c51(0x76)](_0xd4ce66)),this[_0x8e8c51(0xed)]({'background':_0x320d1f,'otherBackground':_0xd4ce66,'fromFeature':_0x276bdd});break;}case Charactermancer_Background_Features[_0x8e8c51(0x72)]:{const _0x3d675b=this[_0x8e8c51(0x7c)][_0x8e8c51(0xb6)][_0x8e8c51(0xf9)](({data:_0x48d5e0})=>_0x48d5e0[_0x8e8c51(0x10c)]&&_0x48d5e0[_0x8e8c51(0x10c)]['length'])[_0x8e8c51(0xc1)](({data:_0x5a97ae})=>{const _0xda458b=_0x8e8c51;return _0x5a97ae=MiscUtil['copy'](_0x5a97ae),_0x5a97ae[_0xda458b(0x6f)]=_0x5a97ae[_0xda458b(0x6f)]||_0xda458b(0xe5),_0x5a97ae[_0xda458b(0xde)]=_0xda458b(0x10c),_0x5a97ae;});if(!_0x3d675b[_0x8e8c51(0x109)])_0x590d37=![];_0x26e883[_0x8e8c51(0x9a)](..._0x3d675b),_0x276bdd['forEach'](_0x243bca=>delete _0x320d1f[_0x243bca]);break;}}return{'isFormComplete':_0x590d37,'data':{'entries':_0x26e883,'isCustomize':this[_0x8e8c51(0x7c)][_0x8e8c51(0x101)]!==Charactermancer_Background_Features[_0x8e8c51(0xf2)],'background':_0x320d1f}};}['_getFormData_doMergeOtherBackground']({background:_0x51a543,otherBackground:_0xb6224d,fromFeature:_0x1fab81}){const _0x50e157=_0x4b34e4;_0x1fab81[_0x50e157(0xe4)](_0x1759e3=>{const _0x3830a8=_0x50e157;if(!_0xb6224d[_0x1759e3])return delete _0x51a543[_0x1759e3];_0x51a543[_0x1759e3]=MiscUtil[_0x3830a8(0xe1)](_0xb6224d[_0x1759e3]);});const _0x3eb880=Object[_0x50e157(0x10c)](_0xb6224d[_0x50e157(0x80)]||{})[_0x50e157(0xf9)](([,_0x2f04ef])=>_0x2f04ef)[_0x50e157(0xc1)](([_0x114ccf])=>_0x114ccf);_0x3eb880['forEach'](_0x9f1090=>{const _0x1c4b0c=_0x50e157;if(!_0xb6224d[_0x9f1090])return;if(!_0x51a543[_0x9f1090]){_0x51a543[_0x9f1090]=MiscUtil[_0x1c4b0c(0xe1)](_0xb6224d[_0x9f1090],!![]);return;}switch(_0x9f1090){default:{const _0x32ef3f=typeof _0x51a543[_0x9f1090],_0x3b2ffa=typeof _0xb6224d[_0x9f1090];if(_0x32ef3f!==_0x3b2ffa||_0x32ef3f===_0x1c4b0c(0x79)&&Array[_0x1c4b0c(0x10d)](_0x51a543[_0x9f1090])!==Array['isArray'](_0xb6224d[_0x9f1090]))return;if(_0x32ef3f!==_0x1c4b0c(0x79))return;if(Array['isArray'](_0x51a543[_0x9f1090])){this[_0x1c4b0c(0x87)]({'background':_0x51a543,'otherBackground':_0xb6224d,'prop':_0x9f1090});return;}this[_0x1c4b0c(0x71)]({'background':_0x51a543,'otherBackground':_0xb6224d,'prop':_0x9f1090});}}});}['_getFormData_doMergeOtherBackground_array']({background:_0x29a983,otherBackground:_0x7d8d09,prop:_0xe23422}){const _0x29f727=_0x4b34e4;switch(_0xe23422){case _0x29f727(0xcb):{if(_0x29a983[_0xe23422][_0x29f727(0x109)]!==0x1||_0x29a983[_0xe23422][_0x29f727(0x109)]!==_0x7d8d09[_0xe23422][_0x29f727(0x109)])return;Object[_0x29f727(0x10c)](_0x7d8d09[_0xe23422][0x0])[_0x29f727(0xe4)](([_0x4cf3f5,_0x494c0c])=>{const _0x161510=_0x29f727;if(![_0x161510(0xcd),_0x161510(0x7d),_0x161510(0xd2),_0x161510(0x102)]['includes'](_0x4cf3f5)){console[_0x161510(0xec)](...LGT,_0x161510(0xd4)+_0x4cf3f5+_0x161510(0xa3));return;}if(!_0x29a983[_0xe23422][0x0][_0x4cf3f5])_0x29a983[_0xe23422][0x0][_0x4cf3f5]={};Object[_0x161510(0x10c)](_0x494c0c)[_0x161510(0xe4)](([_0xc8ba49,_0x4ae649])=>{_0x29a983[_0xe23422][0x0][_0x4cf3f5][_0xc8ba49]=_0x29a983[_0xe23422][0x0][_0x4cf3f5][_0xc8ba49]||[],_0x29a983[_0xe23422][0x0][_0x4cf3f5][_0xc8ba49]['push'](..._0x4ae649);});});break;}case'feats':{if(_0x29a983[_0xe23422]['length']!==0x1||_0x29a983[_0xe23422][_0x29f727(0x109)]!==_0x7d8d09[_0xe23422][_0x29f727(0x109)])return;const _0x4243c0={};Object[_0x29f727(0x10c)](_0x29a983[_0xe23422][0x0])[_0x29f727(0xe4)](([_0x4d9d10,_0x4ff11e])=>_0x4243c0[_0x4d9d10]=(_0x4243c0[_0x4d9d10]||0x0)+Number(_0x4ff11e)),Object['entries'](_0x7d8d09[_0xe23422][0x0])[_0x29f727(0xe4)](([_0x37a1b9,_0x5647b7])=>_0x4243c0[_0x37a1b9]=(_0x4243c0[_0x37a1b9]||0x0)+Number(_0x5647b7)),_0x29a983[_0xe23422][0x0]=_0x4243c0;break;}default:{_0x29a983[_0xe23422]=[..._0x29a983[_0xe23422],..._0x7d8d09[_0xe23422]][_0x29f727(0x104)]();}}}['_getFormData_doMergeOtherBackground_object']({background:_0x5d0421,otherBackground:_0x207f75,prop:_0x4f012f}){const _0x14ba2b=_0x4b34e4;switch(_0x4f012f){default:Object[_0x14ba2b(0xc8)](_0x5d0421[_0x4f012f],_0x207f75[_0x4f012f]);}}[_0x4b34e4(0xa6)](){const _0x4631c9=_0x4b34e4;return this[_0x4631c9(0xce)]();}[_0x4b34e4(0xfe)](){const _0x3a9644=_0x4b34e4;return{'id':CryptUtil[_0x3a9644(0xbe)](),'data':{'name':'','entries':[]}};}[_0x4b34e4(0x7e)](){const _0x4b234c=_0x4b34e4;return{'mode':Charactermancer_Background_Features[_0x4b234c(0xf2)],'ixBackgroundOther':null,'manualEntryMetas':[this['_getDefaultState_manualEntryMeta']()],'pulseFeatures':![]};}}Charactermancer_Background_Features['_MODE_DEFAULT']=0x0,Charactermancer_Background_Features[_0x4b34e4(0xf7)]=0x1,Charactermancer_Background_Features['_MODE_MANUAL']=0x2,Charactermancer_Background_Features['_MODE_TO_FULL']={[Charactermancer_Background_Features[_0x4b34e4(0xf2)]]:'Add\x20Features\x20from\x20This\x20Background',[Charactermancer_Background_Features[_0x4b34e4(0xf7)]]:'Customize\x20your\x20Background:\x20Add\x20Feature(s)\x20from\x20Another\x20Background',[Charactermancer_Background_Features['_MODE_MANUAL']]:_0x4b34e4(0xf0)};export{Charactermancer_Background_Characteristics,Charactermancer_Background_Features};