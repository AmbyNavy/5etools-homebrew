const _0x4eee7b=_0x3703;function _0x4529(){const _0x14c77e=['_getCompendiumFeatureAliases','/media/icon/family-tree.svg','_baseSrd','_pGetRaceDescription','getAbilityData','254wMKHCC','source','foundryRace','effects','_pGetEffectsRawSideLoaded_','pGetRaceItem','bind','srd','isImportDescription','getSourceWithPagePart','_SIDE_LOAD_FEATURE_OPTS','foundryRaceFeature','map','pGetRaceFeatureItem','getSrdCompendiumEntity','URL_TO_HASH_BUILDER','importRace','ability','render','_pGetEffectsSideLoaded','size','getSpeedString','feat','pGetWithDescriptionPlugins','raceName','pGetCompendiumImage','57117UkPHgM','113638RDkSEQ','pHasRaceFeatureSideLoadedEffects','getNameWithSourcePart','_pGetDataSideLoaded','race','</td>\x0a\x09\x09\x09\x09</tr>\x0a\x09\x09\x09</table>\x0a\x09\x09\x09','MODULE_NAME','2395728myfvGa','224308CodJrI','_pGetSaveImagePath','getFauxRaceFeature','sizeAbvToFull','2613085HFfFki','filterValues','actor','isAddPermission','data.requirements','raceFeature','Unknown\x20Race','pGetItemActorPassive','push','raceSource','modules/','4237BLivLo','STUB_RACE','permission','pGetRaceFeatureItemEffects','PG_RACES','get','pMutActorUpdateRaceFeature','getExpandedEffects','_pGetCompendiumFeatureImage','asText','copy','pGetRaceSideData','name','<div><table\x20class=\x22summary\x20stripe-even\x22>\x0a\x09\x09\x09\x09<tr>\x0a\x09\x09\x09\x09\x09<th\x20class=\x22col-4\x20text-center\x22>Ability\x20Scores</th>\x0a\x09\x09\x09\x09\x09<th\x20class=\x22col-4\x20text-center\x22>Size</th>\x0a\x09\x09\x09\x09\x09<th\x20class=\x22col-4\x20text-center\x22>Speed</th>\x0a\x09\x09\x09\x09</tr>\x0a\x09\x09\x09\x09<tr>\x0a\x09\x09\x09\x09\x09<td\x20class=\x22text-center\x22>','_baseName','_pGetFlagsSideLoaded','_getCompendiumAliases','entries','getCleanEntityName','42BfdqyY','3611464WhCpGg','_IMG_FALLBACK','join','getRaceStub'];_0x4529=function(){return _0x14c77e;};return _0x4529();}(function(_0x59af06,_0x3964ec){const _0x2c0986=_0x3703,_0x2f3d77=_0x59af06();while(!![]){try{const _0x990aaf=-parseInt(_0x2c0986(0x17d))/0x1*(parseInt(_0x2c0986(0x19a))/0x2)+-parseInt(_0x2c0986(0x165))/0x3+-parseInt(_0x2c0986(0x16e))/0x4+parseInt(_0x2c0986(0x172))/0x5+-parseInt(_0x2c0986(0x190))/0x6*(parseInt(_0x2c0986(0x166))/0x7)+parseInt(_0x2c0986(0x191))/0x8+parseInt(_0x2c0986(0x16d))/0x9;if(_0x990aaf===_0x3964ec)break;else _0x2f3d77['push'](_0x2f3d77['shift']());}catch(_0x50d7e1){_0x2f3d77['push'](_0x2f3d77['shift']());}}}(_0x4529,0x7d56d));import{SharedConsts}from'../shared/SharedConsts.js';import{Config}from'./Config.js';function _0x3703(_0x50cc99,_0x1ec316){const _0x4529d4=_0x4529();return _0x3703=function(_0x3703ec,_0x25fb9f){_0x3703ec=_0x3703ec-0x152;let _0x31e37a=_0x4529d4[_0x3703ec];return _0x31e37a;},_0x3703(_0x50cc99,_0x1ec316);}import{UtilApplications}from'./UtilApplications.js';import{DataConverter}from'./DataConverter.js';import{Vetools}from'./Vetools.js';import{UtilActiveEffects}from'./UtilActiveEffects.js';import{UtilCompendium}from'./UtilCompendium.js';import{UtilDataConverter}from'./UtilDataConverter.js';class DataConverterRace extends DataConverter{static ['_SIDE_LOAD_OPTS']={'propBrew':_0x4eee7b(0x19c),'fnLoadJson':Vetools[_0x4eee7b(0x188)][_0x4eee7b(0x1a0)](Vetools),'propJson':_0x4eee7b(0x16a),'propsMatch':[_0x4eee7b(0x19b),_0x4eee7b(0x189)]};static [_0x4eee7b(0x155)]={'propBrew':_0x4eee7b(0x156),'fnLoadJson':Vetools[_0x4eee7b(0x188)]['bind'](Vetools),'propJson':'raceFeature','propsMatch':[_0x4eee7b(0x17b),_0x4eee7b(0x163),_0x4eee7b(0x19b),_0x4eee7b(0x189)]};static [_0x4eee7b(0x192)]=_0x4eee7b(0x17c)+SharedConsts[_0x4eee7b(0x16c)]+_0x4eee7b(0x196);static async[_0x4eee7b(0x19f)](_0x34ebb3,_0x161217){const _0x5ef316=_0x4eee7b;_0x161217=_0x161217||{};const _0x56653a=await this[_0x5ef316(0x16f)](_0x34ebb3,{'propCompendium':_0x5ef316(0x16a)}),_0x50af71=await this['_pGetDataSideLoaded'](_0x34ebb3),_0x5cd907=await this[_0x5ef316(0x18c)](_0x34ebb3),_0x8add0c=await this[_0x5ef316(0x15e)]({'ent':_0x34ebb3,'img':_0x56653a});DataConverter['mutEffectsDisabledTransfer'](_0x8add0c,_0x5ef316(0x15b));const _0x1589b5={'name':UtilApplications[_0x5ef316(0x18f)](UtilDataConverter[_0x5ef316(0x168)](_0x34ebb3)),'type':_0x5ef316(0x161),'data':{'description':{'value':await this[_0x5ef316(0x198)](_0x34ebb3),'chat':'','unidentified':''},'source':UtilDataConverter[_0x5ef316(0x154)](_0x34ebb3),'damage':{'parts':[]},'activation':{'type':'','cost':0x0,'condition':''},'duration':{'value':null,'units':''},'target':{'value':null,'units':'','type':''},'range':{'value':null,'long':null,'units':''},'uses':{'value':0x0,'max':0x0,'per':null},'ability':null,'actionType':'','attackBonus':null,'chatFlavor':'','critical':{'threshold':null,'damage':''},'formula':'','save':{'ability':'','dc':null},'requirements':'','recharge':{'value':null,'charged':![]},..._0x50af71},'flags':{[SharedConsts['MODULE_NAME']]:{'page':UrlUtil[_0x5ef316(0x181)],'source':_0x34ebb3[_0x5ef316(0x19b)],'hash':UrlUtil[_0x5ef316(0x15a)][UrlUtil[_0x5ef316(0x181)]](_0x34ebb3),'propDroppable':_0x5ef316(0x16a),'filterValues':_0x161217[_0x5ef316(0x173)]},..._0x5cd907},'effects':_0x8add0c,'img':_0x56653a};if(_0x161217['defaultPermission']!=null)_0x1589b5[_0x5ef316(0x17f)]={'default':_0x161217['defaultPermission']};else{if(_0x161217[_0x5ef316(0x175)])_0x1589b5['permission']={'default':Config[_0x5ef316(0x182)]('importRace','permissions')};}return _0x1589b5;}static[_0x4eee7b(0x198)](_0x39b9b8){const _0x5178b9=_0x4eee7b;if(!Config[_0x5178b9(0x182)]('importRace',_0x5178b9(0x153)))return'';return UtilDataConverter[_0x5178b9(0x162)](()=>{const _0x4492be=_0x5178b9;return _0x4492be(0x18a)+Renderer[_0x4492be(0x199)](_0x39b9b8[_0x4492be(0x15c)])[_0x4492be(0x186)]+'</td>\x0a\x09\x09\x09\x09\x09<td\x20class=\x22text-center\x22>'+(_0x39b9b8[_0x4492be(0x15f)]||[SZ_VARIES])[_0x4492be(0x157)](_0x1d75be=>Parser[_0x4492be(0x171)](_0x1d75be))[_0x4492be(0x193)]('/')+'</td>\x0a\x09\x09\x09\x09\x09<td\x20class=\x22text-center\x22>'+Parser[_0x4492be(0x160)](_0x39b9b8,{'isMetric':Config['isUseMetricDistance']({'configGroup':_0x4492be(0x15b)})})+_0x4492be(0x16b)+Renderer[_0x4492be(0x182)]()['setFirstSection'](!![])[_0x4492be(0x15d)]({'type':_0x4492be(0x18e),'entries':_0x39b9b8[_0x4492be(0x18e)]},0x1)+'</div>';});}static[_0x4eee7b(0x18d)](_0x335202){const _0x247c4a=_0x4eee7b;if(!_0x335202['name']&&!_0x335202[_0x247c4a(0x18b)])return[];const _0xe76454=[],_0x4a7962=PageFilterRaces['getInvertedName'](_0x335202[_0x247c4a(0x189)]);if(_0x4a7962&&_0x4a7962!==_0x335202[_0x247c4a(0x189)])_0xe76454[_0x247c4a(0x17a)](_0x4a7962);if(_0x335202[_0x247c4a(0x18b)])_0xe76454[_0x247c4a(0x17a)](_0x335202[_0x247c4a(0x18b)]);return _0xe76454;}static async[_0x4eee7b(0x158)](_0x59c8f2,_0x547e42,_0x1d2892){const _0x46a287=_0x4eee7b,_0x46d910=await this[_0x46a287(0x169)](_0x547e42,{'propOpts':_0x46a287(0x155)}),_0x1f7881=await this[_0x46a287(0x18c)](_0x547e42,{'propOpts':_0x46a287(0x155)}),_0x522663=await UtilCompendium[_0x46a287(0x159)](_0x46a287(0x177),_0x547e42),_0x45151d=MiscUtil[_0x46a287(0x187)](_0x522663?.[_0x46a287(0x19d)]||[]);return DataConverter['mutEffectsDisabledTransfer'](_0x45151d,_0x46a287(0x15b)),DataConverter[_0x46a287(0x179)](_0x547e42,{'mode':'player','img':await this[_0x46a287(0x185)](_0x59c8f2,_0x547e42),'effects':_0x45151d,'fvttType':'feat','source':_0x59c8f2[_0x46a287(0x19b)],'actor':_0x1d2892[_0x46a287(0x174)],'additionalData':_0x46d910,'additionalFlags':_0x1f7881});}static[_0x4eee7b(0x170)](_0x3750ed,_0x268314){const _0x4e0bf0=_0x4eee7b;return{'source':_0x3750ed[_0x4e0bf0(0x19b)],'raceName':_0x3750ed[_0x4e0bf0(0x189)],'raceSource':_0x3750ed[_0x4e0bf0(0x19b)],'srd':_0x3750ed[_0x4e0bf0(0x152)]||_0x3750ed[_0x4e0bf0(0x197)],...MiscUtil[_0x4e0bf0(0x187)](_0x268314)};}static async[_0x4eee7b(0x183)](_0x857457,_0x12185c,_0x4848e8,_0x2ab2d0){const _0x174a62=await DataConverter['_pGetSideLoadedMatch'](_0x4848e8,this['_SIDE_LOAD_FEATURE_OPTS']);DataConverter['mutActorUpdate'](_0x857457,_0x12185c,_0x4848e8,{'sideData':_0x174a62});}static async['_pGetCompendiumFeatureImage'](_0x34e53d,_0x1af1ff){const _0x5a9bc8=_0x4eee7b,_0xf8214f=await UtilCompendium[_0x5a9bc8(0x164)]('raceFeature',_0x1af1ff,{'fnGetAliases':this[_0x5a9bc8(0x195)][_0x5a9bc8(0x1a0)](this,_0x34e53d),'deepKeys':[_0x5a9bc8(0x176)]});if(_0xf8214f)return _0xf8214f;return this[_0x5a9bc8(0x16f)](_0x34e53d,{'propCompendium':_0x5a9bc8(0x16a)});}static[_0x4eee7b(0x195)](_0x1a7ab4,_0x123a93){const _0x46ffb7=_0x4eee7b;if(!_0x1a7ab4['name']&&!_0x1a7ab4[_0x46ffb7(0x18b)])return[];if(!_0x123a93[_0x46ffb7(0x189)])return[];const _0x1c5dcb=[];_0x1c5dcb[_0x46ffb7(0x17a)]({'name':_0x123a93[_0x46ffb7(0x189)],'data.requirements':_0x1a7ab4['name']});const _0x45ad26=PageFilterRaces['getInvertedName'](_0x1a7ab4[_0x46ffb7(0x189)]);return _0x45ad26&&_0x45ad26!==_0x1a7ab4[_0x46ffb7(0x189)]&&_0x1c5dcb[_0x46ffb7(0x17a)]({'name':_0x123a93[_0x46ffb7(0x189)],'data.requirements':_0x45ad26}),_0x1a7ab4['_baseName']&&_0x1c5dcb[_0x46ffb7(0x17a)]({'name':_0x123a93['name'],'data.requirements':_0x1a7ab4[_0x46ffb7(0x18b)]}),_0x1c5dcb;}static async[_0x4eee7b(0x167)](_0x423e61,_0x591ae2){const _0x51fbdb=_0x4eee7b;return(await DataConverter[_0x51fbdb(0x19e)](_0x591ae2,this['_SIDE_LOAD_FEATURE_OPTS']))?.['length']>0x0;}static async[_0x4eee7b(0x180)](_0x8b95f8,_0x49d0aa,_0x4a0488,_0xa4c774){const _0x1f1d5e=_0x4eee7b,_0x7c5bd1=await DataConverter[_0x1f1d5e(0x19e)](_0x4a0488,this['_SIDE_LOAD_FEATURE_OPTS']);return UtilActiveEffects[_0x1f1d5e(0x184)](_0x7c5bd1||[],{'actor':_0x8b95f8,'sheetItem':_0xa4c774,'parentName':_0x49d0aa[_0x1f1d5e(0x189)]});}static['isStubRace'](_0x151dd1){const _0x1e0fd3=_0x4eee7b;return _0x151dd1[_0x1e0fd3(0x189)]===DataConverterRace[_0x1e0fd3(0x17e)]['name']&&_0x151dd1[_0x1e0fd3(0x19b)]===DataConverterRace[_0x1e0fd3(0x17e)][_0x1e0fd3(0x19b)];}static[_0x4eee7b(0x194)](){const _0x12593a=_0x4eee7b;return MiscUtil[_0x12593a(0x187)](DataConverterRace[_0x12593a(0x17e)]);}}DataConverterRace[_0x4eee7b(0x17e)]={'name':_0x4eee7b(0x178),'source':SRC_PHB,'_isStub':!![]};export{DataConverterRace};