const _0x5a48e6=_0x2ef0;(function(_0x1b7d9a,_0x3e90f3){const _0x5b986c=_0x2ef0,_0x36f50a=_0x1b7d9a();while(!![]){try{const _0x235ca5=parseInt(_0x5b986c(0xef))/0x1+parseInt(_0x5b986c(0x10b))/0x2*(-parseInt(_0x5b986c(0xd2))/0x3)+-parseInt(_0x5b986c(0x127))/0x4*(-parseInt(_0x5b986c(0xfc))/0x5)+-parseInt(_0x5b986c(0x123))/0x6+parseInt(_0x5b986c(0xd8))/0x7*(parseInt(_0x5b986c(0xf8))/0x8)+-parseInt(_0x5b986c(0x10e))/0x9+-parseInt(_0x5b986c(0xde))/0xa*(-parseInt(_0x5b986c(0x110))/0xb);if(_0x235ca5===_0x3e90f3)break;else _0x36f50a['push'](_0x36f50a['shift']());}catch(_0x3867a4){_0x36f50a['push'](_0x36f50a['shift']());}}}(_0x4587,0x6e7ac));import{ImportedDocument,ImportList,ImportSummary}from'./ImportList.js';import{Vetools}from'./Vetools.js';import{LGT}from'./Util.js';import{Config}from'./Config.js';function _0x4587(){const _0x1fc1d5=['isOverwrite','mutateForFilters','5etools-rollable-tables','_getDuplicateMeta','caption','FOLDER_TYPE','Cannot\x20import\x20table\x20to\x20actor!','constructor','24xqJKKz','_content','_pImportEntry_getTablesFromGroup','Custom\x20URL','20ehvmgz','\x22\x20(from\x20\x22','sourceJsonToStylePart','TASK_EXIT_SKIPPED_DUPLICATE','sourceJsonToAbv',',\x20Table\x20','sourceStyle','sourceJsonToColor','SRD','_folderPathSpecKeyConstructorName','set','map','_pHandleClickRunButton','name','Upload\x20File','6bJbyRl','get','_pImportEntry','5378031vOeagn','copy','2948rmhrOa','_$btnsRunAdditional','isImportAsJournalEntry','RollTable','isSkip','pInit','getData','_pGetSources','_activateListeners_absorbListItems','JournalEntry','__prop','Name','ImportListRollableTable','folder','_pImportEntry_pImportToDirectoryGeneric_pGetImportableData','isStreamerMode','pGetRollableTables','importTable','_actor','3308322WsyiHU','sourceLong','pGetTableRollableTable','_list','33272ucoOhw','_pImportEntry_pImportToDirectoryGeneric','SOURCE_TYP_CUSTOM','btn-run-journal-entries','sourceJsonToFull','_page','document','journal','DataSourceUrl','log','_pageFilter','getTableGroupJournal','isTemp','536694NipqPI','_pack','tables','registerImpl','PG_TABLES','DataSourceSpecial','84105pneIUX','_pImportTableGroup','absorbFnGetData','create','TASK_EXIT_COMPLETE','tableGroup','62200ZfNqRp','Importing\x20table\x20\x22','DataSourceFile','table','_activateListeners_initRunButtonsAdditional','length','Tables','_pGetSourcesHomebrew','_isRadio','source','_pImportEntry_pDoUpdateExistingDirectoryEntity','pImportEntry','DISPLAY_NAME_TYPE_PLURAL','bind','imported','absorbFnBindListeners','click','401887BTCxPL'];_0x4587=function(){return _0x1fc1d5;};return _0x4587();}import{UtilList2}from'./UtilList2.js';import{DataConverterTable}from'./DataConverterTable.js';import{UtilApplications}from'./UtilApplications.js';import{UtilDataSource}from'./UtilDataSource.js';class ImportListRollableTable extends ImportList{static ['ID']=_0x5a48e6(0xd4);static [_0x5a48e6(0xea)]=_0x5a48e6(0xe4);static ['_']=this[_0x5a48e6(0xd5)](this);static get[_0x5a48e6(0xf5)](){const _0x5f5f81=_0x5a48e6;return _0x5f5f81(0x113);}constructor(_0x307fba,_0x25760a,_0x54c75a){const _0x5dfe56=_0x5a48e6;_0x307fba=_0x307fba||{},_0x25760a=_0x25760a||{},_0x54c75a=_0x54c75a||{},super({'title':'Import\x20Rollable\x20Tables',..._0x25760a},_0x307fba,{'props':[_0x5dfe56(0xe1),_0x5dfe56(0xdd)],'dirsHomebrew':[_0x5dfe56(0xe1)],'titleSearch':_0x5dfe56(0xe1),'sidebarTab':'tables','gameProp':'tables','defaultFolderPath':['Tables'],'pageFilter':new PageFilterTables(),'page':UrlUtil[_0x5dfe56(0xd6)],'isPreviewable':!![],'isDedupable':!![],'configGroup':_0x5dfe56(0x121),..._0x54c75a});}async[_0x5a48e6(0x117)](){const _0x5e3ba7=_0x5a48e6;return[new UtilDataSource[(_0x5e3ba7(0xd7))](Config[_0x5e3ba7(0x10c)]('ui',_0x5e3ba7(0x11f))?_0x5e3ba7(0x104):'5etools',Vetools[_0x5e3ba7(0x120)][_0x5e3ba7(0xeb)](Vetools),{'cacheKey':_0x5e3ba7(0xf2),'isUseProps':!![],'filterTypes':[UtilDataSource['SOURCE_TYP_OFFICIAL_ALL']],'isDefault':!![]}),new UtilDataSource[(_0x5e3ba7(0xcd))](_0x5e3ba7(0xfb),'',{'filterTypes':[UtilDataSource[_0x5e3ba7(0x129)]]}),new UtilDataSource[(_0x5e3ba7(0xe0))](_0x5e3ba7(0x10a),{'filterTypes':[UtilDataSource[_0x5e3ba7(0x129)]]}),...await this[_0x5e3ba7(0xe5)]()];}[_0x5a48e6(0x116)](){const _0x415add=_0x5a48e6;return{...super[_0x415add(0x116)](),'buttonsAdditional':[{'name':_0x415add(0xc8),'text':'Import\x20as\x20Journal\x20Entries'}],'cols':[{'name':_0x415add(0x11b),'width':0x9,'field':_0x415add(0x109)},{'name':'Source','width':0x2,'field':_0x415add(0xe7),'titleProp':_0x415add(0x124),'displayProp':'sourceShort','classNameProp':'sourceClassName','styleProp':_0x415add(0x102),'rowClassName':'text-center'}],'rows':this['_content'][_0x415add(0x107)]((_0x2ec1d3,_0x101a38)=>{const _0x140b87=_0x415add;return this[_0x140b87(0xcf)][_0x140b87(0xf7)][_0x140b87(0xf1)](_0x2ec1d3),{'name':_0x2ec1d3[_0x140b87(0x109)],'source':_0x2ec1d3['source'],'sourceShort':Parser[_0x140b87(0x100)](_0x2ec1d3['source']),'sourceLong':Parser[_0x140b87(0xc9)](_0x2ec1d3['source']),'sourceClassName':Parser[_0x140b87(0x103)](_0x2ec1d3[_0x140b87(0xe7)]),'sourceStyle':BrewUtil[_0x140b87(0xfe)](_0x2ec1d3[_0x140b87(0xe7)]),'ix':_0x101a38};})};}[_0x5a48e6(0xe2)](){const _0x2e0ec5=_0x5a48e6;this[_0x2e0ec5(0x111)]['btn-run-journal-entries'][_0x2e0ec5(0xee)](()=>{const _0x5072d1=_0x2e0ec5;return this[_0x5072d1(0x108)]({'gameProp':_0x5072d1(0xcc),'sidebarTab':_0x5072d1(0xcc),'optsImportEntry':{'isImportAsJournalEntry':!![]}});});}[_0x5a48e6(0x118)](){const _0x5f4276=_0x5a48e6;this[_0x5f4276(0x126)]['doAbsorbItems'](this[_0x5f4276(0xf9)],{'fnGetName':_0x542c0e=>_0x542c0e['name'],'fnGetValues':_0x50cb88=>({'source':_0x50cb88[_0x5f4276(0xe7)],'hash':UrlUtil['URL_TO_HASH_BUILDER'][this[_0x5f4276(0xca)]](_0x50cb88)}),'fnGetData':UtilList2[_0x5f4276(0xda)],'fnBindListeners':_0x551580=>this[_0x5f4276(0xe6)]?UtilList2['absorbFnBindListenersRadio'](this[_0x5f4276(0x126)],_0x551580):UtilList2[_0x5f4276(0xed)](this['_list'],_0x551580)});}[_0x5a48e6(0xfa)](_0x247a14){const _0x4e22cf=_0x5a48e6,_0x16fce2=MiscUtil[_0x4e22cf(0x10f)](_0x247a14);return _0x16fce2['tables']['forEach']((_0x22388f,_0x334302)=>{const _0x2a91e3=_0x4e22cf;if(_0x16fce2[_0x2a91e3(0x109)])_0x22388f['name']=_0x22388f['name']||_0x16fce2[_0x2a91e3(0x109)]+_0x2a91e3(0x101)+(_0x334302+0x1);_0x22388f[_0x2a91e3(0xe7)]=_0x22388f['source']||_0x16fce2['source'];}),_0x16fce2[_0x4e22cf(0xd4)];}async[_0x5a48e6(0xd9)](_0x5ebbc7,_0xc5d203){const _0x32913b=_0x5a48e6;if(_0x5ebbc7[_0x32913b(0x11a)]!==_0x32913b(0xdd))return null;console[_0x32913b(0xce)](...LGT,'Importing\x20table\x20group\x20\x22'+(_0x5ebbc7['name']||_0x5ebbc7[_0x32913b(0xf4)])+_0x32913b(0xfd)+Parser[_0x32913b(0x100)](_0x5ebbc7['source'])+'\x22)');const _0x479590=this[_0x32913b(0xfa)](_0x5ebbc7),_0x5353ec=[];let _0x278083=0x0;for(const _0x54df62 of _0x479590){const _0x243ef6=await this[_0x32913b(0xe9)](_0x54df62,_0xc5d203);if(_0x243ef6[_0x32913b(0xec)])_0x5353ec['push'](..._0x243ef6['imported'][_0x32913b(0x107)](_0x40bfde=>_0x40bfde[_0x32913b(0xcb)])['filter'](Boolean));else{if(_0x243ef6['existing'])_0x278083++;}}if(!_0x5353ec[_0x32913b(0xe3)]&&_0x278083)return new ImportSummary({'status':UtilApplications[_0x32913b(0xff)]});const _0x1255ff=DataConverterTable[_0x32913b(0xd0)](_0x5ebbc7,_0x5353ec,{'isAddPermission':!![]}),_0x166af4=this[_0x32913b(0xf3)]({'name':_0x1255ff[_0x32913b(0x109)],'gameProp':_0x32913b(0xcc),'importOpts':_0xc5d203});if(_0x166af4[_0x32913b(0x114)])return new ImportSummary({'status':UtilApplications[_0x32913b(0xff)]});const _0x22aa9e=_0xc5d203[_0x32913b(0xd1)]||!!this[_0x32913b(0xd3)];if(_0x22aa9e){const _0x3c66b0=await JournalEntry['create'](_0x1255ff,{'renderSheet':!![],'temporary':!![]});return new ImportSummary({'status':UtilApplications[_0x32913b(0xdc)],'imported':[new ImportedDocument({'document':_0x3c66b0})]});}if(_0x166af4[_0x32913b(0xf0)])return this[_0x32913b(0xe8)](_0x166af4,_0x1255ff);const _0x1a0cbb=await this['_pImportEntry_pGetFolderId'](_0x5ebbc7);if(_0x1a0cbb)_0x1255ff[_0x32913b(0x11d)]=_0x1a0cbb;const _0x22ddb8=await JournalEntry[_0x32913b(0xdb)](_0x1255ff,{'renderSheet':![],'temporary':![]});return await game[_0x32913b(0xcc)][_0x32913b(0x106)](_0x22ddb8['id'],_0x22ddb8),new ImportSummary({'status':UtilApplications['TASK_EXIT_COMPLETE'],'imported':[new ImportedDocument({'document':_0x22ddb8})]});}async[_0x5a48e6(0x10d)](_0x171a17,_0x2a83ec){const _0x69873=_0x5a48e6;_0x2a83ec=_0x2a83ec||{};const _0x538696=await this[_0x69873(0xd9)](_0x171a17,_0x2a83ec);if(_0x538696!=null)return _0x538696;console[_0x69873(0xce)](...LGT,_0x69873(0xdf)+(_0x171a17['name']||_0x171a17[_0x69873(0xf4)])+_0x69873(0xfd)+Parser[_0x69873(0x100)](_0x171a17[_0x69873(0xe7)])+'\x22)');if(this[_0x69873(0x122)])throw new Error(_0x69873(0xf6));if(_0x2a83ec[_0x69873(0x112)]){const _0x5f5452=new ImportListRollableTableJournal();await _0x5f5452[_0x69873(0x115)]();const _0x57cdfd=MiscUtil[_0x69873(0x10f)](_0x2a83ec);return delete _0x57cdfd['isImportAsJournalEntry'],_0x5f5452[_0x69873(0x10d)](_0x171a17,_0x57cdfd);}return this[_0x69873(0x128)](_0x171a17,_0x2a83ec);}[_0x5a48e6(0x11e)](_0x5b74cf,_0x14cc3b){return DataConverterTable['pGetTableRollableTable'](_0x5b74cf,_0x14cc3b);}}class ImportListRollableTableJournal extends ImportListRollableTable{static get[_0x5a48e6(0xf5)](){const _0x1d911b=_0x5a48e6;return _0x1d911b(0x119);}constructor(_0x82d4ce){const _0x5e2352=_0x5a48e6;_0x82d4ce=_0x82d4ce||{},super(_0x82d4ce,{},{'sidebarTab':_0x5e2352(0xcc),'gameProp':'journal'});}get[_0x5a48e6(0x105)](){const _0x1b198f=_0x5a48e6;return _0x1b198f(0x11c);}[_0x5a48e6(0x11e)](_0x1c9eba,_0x284347){const _0x5976fa=_0x5a48e6;return DataConverterTable[_0x5976fa(0x125)](_0x1c9eba,{'isImportAsJournalEntry':!![],..._0x284347});}}function _0x2ef0(_0x21c165,_0x51e231){const _0x45878d=_0x4587();return _0x2ef0=function(_0x2ef0b6,_0x33cb2a){_0x2ef0b6=_0x2ef0b6-0xc8;let _0x5d48fe=_0x45878d[_0x2ef0b6];return _0x5d48fe;},_0x2ef0(_0x21c165,_0x51e231);}export{ImportListRollableTable};