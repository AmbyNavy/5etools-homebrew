const _0x34f631=_0x4f08;(function(_0x450ad8,_0x5a2afd){const _0x59aa7c=_0x4f08,_0x54d762=_0x450ad8();while(!![]){try{const _0x5c4f24=parseInt(_0x59aa7c(0x15b))/0x1*(-parseInt(_0x59aa7c(0x169))/0x2)+-parseInt(_0x59aa7c(0x148))/0x3+-parseInt(_0x59aa7c(0x138))/0x4*(-parseInt(_0x59aa7c(0x165))/0x5)+-parseInt(_0x59aa7c(0x143))/0x6*(parseInt(_0x59aa7c(0x12e))/0x7)+parseInt(_0x59aa7c(0x14b))/0x8+-parseInt(_0x59aa7c(0x160))/0x9+parseInt(_0x59aa7c(0x13d))/0xa;if(_0x5c4f24===_0x5a2afd)break;else _0x54d762['push'](_0x54d762['shift']());}catch(_0x1ee5c2){_0x54d762['push'](_0x54d762['shift']());}}}(_0x119a,0x9de14));import{UtilApplications}from'./UtilApplications.js';import{SharedConsts}from'../shared/SharedConsts.js';import{Config}from'./Config.js';function _0x4f08(_0x25eab8,_0x4bc8f7){const _0x119aa0=_0x119a();return _0x4f08=function(_0x4f08ad,_0x1acbf4){_0x4f08ad=_0x4f08ad-0x12c;let _0xc63e96=_0x119aa0[_0x4f08ad];return _0xc63e96;},_0x4f08(_0x25eab8,_0x4bc8f7);}function _0x119a(){const _0x1d9e79=['modules/','pCacheAndGet','9147618kbBasU','_pGetEffectsSideLoaded','initFullEntries','_pGetSideLoadedMatch','pGetIconImage','2365wpBYgm','isAddPermission','setFirstSection','entries','532814WcHoLO','_pGetImgCustom','</i></p>','pGetFeatSideData','length','1852235wBDFDl','filterValues','utils','defaultPermission','\x0a\x09\x09\x09\x09','_fullEntries','PG_FEATS','importFeat','/media/icon/mighty-force.svg','prerequisite','3808rkrPBM','getPrerequisiteHtml','getSourceWithPagePart','source','_IMG_FALLBACK','28598330OpWzRv','feat','isImportDescription','setImplSideData','mutEffectsDisabledTransfer','getExpandedEffects','24cBoomj','_pGetFlagsSideLoaded','hover','pGetSideLoadedMatch','MODULE_NAME_FAKE','1083693zDyfeP','permission','actor','4574568TihxBb','permissions','name','pGetInitFeatFeatureLoadeds','propDroppable','_pGetEffectsRawSideLoaded_','_SIDE_LOAD_OPTS','_pGetPreloadSideData','foundryFeat','_pGetDataSideLoaded','_SIDE_DATA','_getFeatFlags','\x0a\x09\x09\x09</div>','get','<p><i>Prerequisite:\x20','pGetWithDescriptionPlugins','3CYIviS','render','URL_TO_HASH_BUILDER'];_0x119a=function(){return _0x1d9e79;};return _0x119a();}import{Vetools}from'./Vetools.js';import{UtilActiveEffects}from'./UtilActiveEffects.js';import{DataConverterFeature}from'./DataConverterFeature.js';import{PageFilterClassesFoundry}from'./UtilCharactermancerClass.js';import{UtilDataConverter}from'./UtilDataConverter.js';import{DataConverter}from'./DataConverter.js';class DataConverterFeat extends DataConverterFeature{static [_0x34f631(0x151)]={'propBrew':_0x34f631(0x153),'fnLoadJson':async()=>this[_0x34f631(0x152)](),'propJson':_0x34f631(0x13e)};static [_0x34f631(0x13c)]=_0x34f631(0x15e)+SharedConsts['MODULE_NAME']+_0x34f631(0x136);static['init'](){const _0x4aecb5=_0x34f631;PageFilterClassesFoundry[_0x4aecb5(0x140)](_0x4aecb5(0x13e),this);}static async['pGetDereferencedFeatFeatureItem'](_0x4711e0){const _0x56b78c=_0x34f631;if(_0x4711e0['entries'])return MiscUtil['copy'](_0x4711e0);const _0x5eee05=UrlUtil[_0x56b78c(0x15d)][UrlUtil['PG_FEATS']](_0x4711e0);return Renderer[_0x56b78c(0x145)][_0x56b78c(0x15f)](UrlUtil[_0x56b78c(0x134)],_0x4711e0[_0x56b78c(0x13b)],_0x5eee05,{'isCopy':!![]});}static async[_0x34f631(0x14e)](_0x55a015,{actor:actor=null}={}){const _0x46a3ed=_0x34f631,_0x4c70d1={'feat':_0x55a015[_0x46a3ed(0x14d)]+'|'+_0x55a015[_0x46a3ed(0x13b)]};return await PageFilterClassesFoundry['pInitFeatLoadeds']({'feat':_0x4c70d1,'raw':_0x55a015,'actor':actor}),_0x4c70d1;}static async['pGetFeatItem'](_0x4454c9,_0x22998b){const _0x455579=_0x34f631;_0x22998b=_0x22998b||{};if(_0x22998b[_0x455579(0x14a)])_0x22998b['isActorItem']=!![];const _0x1873df=await UtilDataConverter[_0x455579(0x15a)](()=>{const _0x3412b5=_0x455579,_0x4d4854=Renderer[_0x3412b5(0x130)][_0x3412b5(0x139)](_0x4454c9['prerequisite']);return Renderer[_0x3412b5(0x13e)][_0x3412b5(0x162)](_0x4454c9),'<div>\x0a\x09\x09\x09\x09'+(_0x4d4854?_0x3412b5(0x159)+_0x4d4854+_0x3412b5(0x16b):'')+_0x3412b5(0x132)+Renderer['get']()[_0x3412b5(0x167)](!![])[_0x3412b5(0x15c)]({'entries':_0x4454c9[_0x3412b5(0x133)]||_0x4454c9[_0x3412b5(0x168)]},0x2)+_0x3412b5(0x157);}),_0x2e3c5e=await this['_pGetSaveImagePath'](_0x4454c9),_0x472986=await this[_0x455579(0x154)](_0x4454c9),_0x1f25fd=await this[_0x455579(0x144)](_0x4454c9),_0x4855be=_0x22998b['isActorItem']?[]:await this[_0x455579(0x161)]({'ent':_0x4454c9,'img':_0x2e3c5e});DataConverter[_0x455579(0x141)](_0x4855be,_0x455579(0x135));const _0x2b7177={'name':UtilApplications['getCleanEntityName'](UtilDataConverter['getNameWithSourcePart'](_0x4454c9,{'isActorItem':_0x22998b['isActorItem']})),'data':{'source':UtilDataConverter[_0x455579(0x13a)](_0x4454c9),'description':{'value':Config['get']('importFeat',_0x455579(0x13f))?_0x1873df:'','chat':'','unidentified':''},'activation':{'type':'','cost':0x0,'condition':''},'duration':{'value':0x0,'units':''},'target':{'value':0x0,'units':'','type':''},'range':{'value':0x0,'long':0x0,'units':null},'uses':{'value':0x0,'max':0x0,'per':''},'ability':'','actionType':'','attackBonus':null,'chatFlavor':'','critical':{'threshold':null,'damage':''},'damage':{'parts':[],'versatile':''},'formula':'','save':{'ability':'','dc':null},'requirements':Renderer[_0x455579(0x130)][_0x455579(0x139)](_0x4454c9[_0x455579(0x137)],{'isTextOnly':!![],'isSkipPrefix':!![]}),'recharge':{'value':0x0,'charged':!![]},..._0x472986},'permission':{'default':0x0},'type':_0x455579(0x13e),'img':_0x2e3c5e,'flags':{...this[_0x455579(0x156)](_0x4454c9,_0x22998b),..._0x1f25fd},'effects':_0x4855be};if(_0x22998b[_0x455579(0x131)]!=null)_0x2b7177[_0x455579(0x149)]={'default':_0x22998b['defaultPermission']};else{if(_0x22998b[_0x455579(0x166)])_0x2b7177[_0x455579(0x149)]={'default':Config[_0x455579(0x158)](_0x455579(0x135),_0x455579(0x14c))};}return _0x2b7177;}static[_0x34f631(0x16a)](_0x148b10){const _0x2192c5=_0x34f631;return this[_0x2192c5(0x164)](_0x2192c5(0x13e),_0x148b10);}static['_getFeatFlags'](_0x5a95dd,_0x24172c){const _0x1cc509=_0x34f631;_0x24172c=_0x24172c||{};const _0x5e484f={[SharedConsts[_0x1cc509(0x147)]]:{'page':UrlUtil[_0x1cc509(0x134)],'source':_0x5a95dd[_0x1cc509(0x13b)],'hash':UrlUtil[_0x1cc509(0x15d)][UrlUtil[_0x1cc509(0x134)]](_0x5a95dd)}};return _0x24172c['isAddDataFlags']&&(_0x5e484f[SharedConsts['MODULE_NAME_FAKE']][_0x1cc509(0x14f)]=_0x1cc509(0x13e),_0x5e484f[SharedConsts[_0x1cc509(0x147)]][_0x1cc509(0x12f)]=_0x24172c[_0x1cc509(0x12f)]),_0x5e484f;}static async['pMutActorUpdateFeat'](_0x2584cd,_0x5cd31a,_0x2f5d6a,_0x2993b3){const _0x3b3e3e=_0x34f631,_0x204c5c=await this[_0x3b3e3e(0x146)](_0x2f5d6a);this['mutActorUpdate'](_0x2584cd,_0x5cd31a,_0x2f5d6a,{'sideData':_0x204c5c});}static async[_0x34f631(0x146)](_0x4edb4e){const _0x5bddac=_0x34f631;return this[_0x5bddac(0x163)](_0x4edb4e,this[_0x5bddac(0x151)]);}static async['pHasFeatSideLoadedEffects'](_0x50c464,_0x1badcd){const _0x2c08b3=_0x34f631;return(await this[_0x2c08b3(0x150)](_0x1badcd,this['_SIDE_LOAD_OPTS']))?.[_0x2c08b3(0x12d)]>0x0;}static async['pGetFeatItemEffects'](_0x444c65,_0x156a09,_0x310450,{additionalData:_0x2b6648,img:_0x5cb88a}={}){const _0x1c548f=_0x34f631,_0x3d7532=await this['_pGetEffectsRawSideLoaded_'](_0x156a09,this[_0x1c548f(0x151)]);return UtilActiveEffects[_0x1c548f(0x142)](_0x3d7532||[],{'actor':_0x444c65,'sheetItem':_0x310450,'parentName':_0x156a09[_0x1c548f(0x14d)],'additionalData':_0x2b6648,'img':_0x5cb88a});}static async[_0x34f631(0x152)](){const _0x21d700=_0x34f631;if(!this[_0x21d700(0x155)])this[_0x21d700(0x155)]=await Vetools[_0x21d700(0x12c)]();return this[_0x21d700(0x155)];}}export{DataConverterFeat};