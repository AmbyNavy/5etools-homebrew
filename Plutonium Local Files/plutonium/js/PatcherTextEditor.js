function _0x5fa1(_0x25e759,_0x48b007){const _0x36e212=_0x36e2();return _0x5fa1=function(_0x5fa13b,_0x437d39){_0x5fa13b=_0x5fa13b-0x1c2;let _0x5736b9=_0x36e212[_0x5fa13b];return _0x5736b9;},_0x5fa1(_0x25e759,_0x48b007);}const _0x4a8c3f=_0x5fa1;(function(_0x137250,_0x22610b){const _0x58072a=_0x5fa1,_0x1ceda7=_0x137250();while(!![]){try{const _0x25cdc3=parseInt(_0x58072a(0x25b))/0x1*(parseInt(_0x58072a(0x239))/0x2)+parseInt(_0x58072a(0x22d))/0x3*(parseInt(_0x58072a(0x1d3))/0x4)+-parseInt(_0x58072a(0x1d0))/0x5*(-parseInt(_0x58072a(0x259))/0x6)+parseInt(_0x58072a(0x27b))/0x7+parseInt(_0x58072a(0x1f7))/0x8*(parseInt(_0x58072a(0x1ca))/0x9)+-parseInt(_0x58072a(0x275))/0xa+parseInt(_0x58072a(0x1eb))/0xb*(-parseInt(_0x58072a(0x1d2))/0xc);if(_0x25cdc3===_0x22610b)break;else _0x1ceda7['push'](_0x1ceda7['shift']());}catch(_0x2ae6ec){_0x1ceda7['push'](_0x1ceda7['shift']());}}}(_0x36e2,0x93fa7));import{libWrapper,UtilLibWrapper}from'./PatcherLibWrapper.js';import{SharedConsts}from'../shared/SharedConsts.js';import{Config}from'./Config.js';import{ChooseImporter}from'./ChooseImporter.js';function _0x36e2(){const _0xe68dde=['data-plut-is-expanded','doShowImportedNotification','ITEM_CREATE','</div>\x0a\x09\x09\x09\x09','bind','stringify','senseToExplanation','\x22><i\x20class=\x22fas\x20fa-info-circle\x22></i>\x20','data-plut-hover-subhashes=\x22','\x20data-plut-hover-page=\x22','EVT_DATA_SUBTYPE__HOVER','6YWBijL','getImporter','673lViMlI','plutHoverPage','<a\x20class=\x22jlnk__entity-link\x22\x20data-plut-owned-link=\x22true\x22\x20data-parent-entity=\x22','<i\x20class=\x22fa\x20fa-caret-square-left\x22></i>','ContentDragDrop','journal','LIBWRAPPER_MODE_WRAPPER','\x22><a\x20target=\x22_blank\x20w-100\x22\x20href=\x22','<div\x20class=\x22w-100\x20ve-flex-col\x22>\x0a\x09\x09\x09\x09<div\x20class=\x22ve-flex-v-center\x20mb-1\x20jemb__wrp-lnk\x22>','\x22></i>\x20','ve-hidden','actorId','<a\x20class=\x22entity-link\x20broken\x22\x20title=\x22Unknown\x20','_getEntity','splitTagByPipe','permission','img','doPopout','entries','originalText','classList','currentTarget','deepEquals','map','sheet','data-plut-hover=\x22','1757490lfnCDd','plutHoverHash','text','isEnableJournalEmbeds','subType','stopPropagation','6829018MitxDK','<a\x20class=\x22entity-link\x20broken\x22><i\x20class=\x22fas\x20fa-unlink\x22></i>\x20','STR_SEE_CONSOLE','Folder','forEach','\x22><i\x20class=\x22fas\x20','<a\x20class=\x22entity-link\x20broken\x22\x20title=\x22No\x20CONFIG\x20found\x20for\x20type\x20&quot;','skill','can','\x22\x20data-plut-hover-source=\x22','\x20Could\x20not\x20find\x20matching\x20entity.','shiftKey','</div>\x0a\x09\x09\x09</div>','ENTITY_PERMISSIONS','secrets','isEnableSubPopouts','EVT_DATA_SUBTYPE__IMPORT','find','content','\x22><i\x20class=\x22fas\x20fa-folder\x20fa-fw\x22></i>\x20','get','slice','links','_handleExpandCollapse','pForceRenderApp','495rZphmU','sidebarIcon','</button>','plutHoverPreloadId','documents','plutHoverSubhashesHover','1753135TicXQf','image','266820fKJnmZ','4eCxDNH','data-plut-hover-hash-pre-encoded-hover=\x22','plutRichLinkOriginalText','\x22\x20class=\x22jemb__img\x22></a></div>\x0a\x09\x09\x09</div>','jemb__btn-toggle','test','JOURNAL_CREATE','journalEntries','</div>\x0a\x09\x09\x09\x09<div\x20class=\x22ve-flex-vh-center\x20jemb__wrp-content\x20','Collapse','<a\x20class=\x22entity-link\x20broken\x22\x20title=\x22Unknown\x20Tag\x20&quot;','items','.jemb__btn-toggle','_getEvtData','length','<i\x20class=\x22fa\x20fa-caret-square-down\x22></i>','_getBtnHtmlToggle','\x20Journal\x20Entry\x20(SHIFT\x20for\x20All\x20Entries)\x22\x20type=\x22button\x22>','FOLDER_TYPE','_MAX_RECURSION_DEPTH','<button\x20class=\x22btn\x20btn-xxs\x20btn-5et\x20btn-default\x20ve-flex-vh-center\x20mx-1\x20jemb__btn-toggle\x22\x20data-plut-is-expanded=\x22','MODULE_NAME','OBSERVER','_STATIC_TAGS','693VNeKuQ','\x22\x20data-plut-hover-pipe-parts=\x22','getLinkSubhashString','getElementsByTagName','skillToExplanation','dataset','error','\x22\x20data-plut-hover-tag=\x22','_id','\x22\x20data-child-id=\x22','register','Enricher','70792GkzJbL','data-plut-hover-hash-pre-encoded=\x22','next','TextEditor._onDropEditorData','plutHoverHashPreEncoded','parse','OWNER','outerHTML','handleToggleClick','name','<a\x20class=\x22jlnk__entity-link\x22\x20data-plut-folder-link=\x22true\x22\x20data-entity=\x22Folder\x22\x20data-entity-id=\x22','&quot;â€”this\x20is\x20a\x20bug!\x22><i\x20class=\x22fas\x20fa-unlink\x22></i>\x20','ContentLoader','ACTOR_CREATE','_getHtml_staticTag','preventDefault','handleClick','gameProp','dataTransfer','\x22></i>\x20<i\x20class=\x22','Expand','&quot;\x22><i\x20class=\x22fas\x20fa-unlink\x22></i>\x20','data-plut-hover-preload-id=\x22','target','\x22\x20data-plut-rich-link-original-text=\x22','user','isEnableHoverForLinkTags','click','tag','LIBWRAPPER_MODE_MIXED','_doEnableToggleButtons','init','getData','all','utils','getTagMeta','removeAttribute','data','title','view','type','<div\x20class=\x22mb-1\x20bold\x20veapp__msg-error\x22>Warning:\x20too\x20many\x20recursive\x20embeds!\x20Have\x20you\x20made\x20an\x20infinite\x20loop?</div>','JournalEmbed','insertContent','actors','data-plut-hover-hash-hover=\x22','getHtml','_pHandleEditorDrop','tables','.jlnk__entity-link','enrichHTML','@ActorEmbedded','EmbeddedDocument','disabled','860994CCKuxk','rolls','contains','filter','then','notifications','attr','<a\x20class=\x22jlnk__entity-link\x22\x20draggable=\x22true\x22\x20','\x20data-plut-hover-preload-uid=\x22','Item','\x22><i\x20class=\x22fas\x20fa-unlink\x22></i>\x20','isGM','246oGpuZC','.editor','plutHoverTag','instance','sense','catch','\x20data-plut-rich-link=\x22','\x0a\x09\x09\x09\x09<div\x20class=\x22w-100\x20jemb__wrp-content\x20','\x22><i\x20class=\x22','registerDocumentHandler','plutHoverSource','button[data-plut-is-expanded]','collection','getImporterClassMeta','\x22><img\x20src=\x22','_sheetMode','has','closest','</a>','_getEntityPermissions','replace'];_0x36e2=function(){return _0xe68dde;};return _0x36e2();}import{LGT}from'./Util.js';import{UtilApplications}from'./UtilApplications.js';import{UtilEvents}from'./UtilEvents.js';import{PopoutSheet}from'./PopoutSheet.js';class Patcher_TextEditor{static[_0x4a8c3f(0x216)](){const _0x10a0b4=_0x4a8c3f;libWrapper[_0x10a0b4(0x1f5)](SharedConsts[_0x10a0b4(0x1e8)],'TextEditor.enrichHTML',function(_0x450359,..._0x2d7e8d){const _0x3b3275=_0x10a0b4;if(!Config['get']('journalEntries',_0x3b3275(0x278))&&!Config[_0x3b3275(0x1c5)]('text','isEnableContentLinks'))return _0x450359(..._0x2d7e8d);return Patcher_TextEditor[_0x3b3275(0x229)](_0x450359,..._0x2d7e8d);},UtilLibWrapper[_0x10a0b4(0x261)]),libWrapper[_0x10a0b4(0x1f5)](SharedConsts[_0x10a0b4(0x1e8)],'JournalSheet.prototype._disableFields',function(_0x1c57cb,..._0x4bfaf5){const _0x2794d0=_0x10a0b4,_0x53a1bf=_0x1c57cb(..._0x4bfaf5);if(!Config[_0x2794d0(0x1c5)]('journalEntries',_0x2794d0(0x278)))return _0x53a1bf;return Patcher_TextEditor[_0x2794d0(0x221)][_0x2794d0(0x215)](..._0x4bfaf5),_0x53a1bf;},UtilLibWrapper[_0x10a0b4(0x261)]),UtilEvents[_0x10a0b4(0x242)]({'eventType':_0x10a0b4(0x212),'selector':_0x10a0b4(0x1df),'fnEvent':Patcher_TextEditor['JournalEmbed'][_0x10a0b4(0x1ff)][_0x10a0b4(0x252)](Patcher_TextEditor[_0x10a0b4(0x221)])}),UtilEvents[_0x10a0b4(0x242)]({'eventType':_0x10a0b4(0x212),'selector':_0x10a0b4(0x228),'fnEvent':Patcher_TextEditor['ContentLoader']['handleClick'][_0x10a0b4(0x252)](Patcher_TextEditor[_0x10a0b4(0x221)])}),Patcher_TextEditor['ContentDragDrop']['init']();}static[_0x4a8c3f(0x229)](_0x37cce9,_0x487339,_0x3b6912,_0x31de55=0x0){const _0x595980=_0x4a8c3f;_0x3b6912=_0x3b6912||{};if(_0x3b6912[_0x595980(0x289)]===undefined)_0x3b6912[_0x595980(0x289)]=![];if(_0x3b6912[_0x595980(0x1ce)]===undefined)_0x3b6912['documents']=!![];if(_0x3b6912[_0x595980(0x1c7)]===undefined)_0x3b6912['links']=!![];if(_0x3b6912[_0x595980(0x22e)]===undefined)_0x3b6912['rolls']=!![];_0x487339=_0x37cce9(_0x487339,_0x3b6912);if(!_0x3b6912['documents'])return _0x487339;return _0x487339=_0x487339[_0x595980(0x24d)](/@Embed(JournalEntry)\[([^\]]+)](?:{([^}]+)})?/g,(..._0xbfaa90)=>Patcher_TextEditor['JournalEmbed'][_0x595980(0x225)](_0x3b6912,_0x31de55,..._0xbfaa90))['replace'](/@(Actor)Embedded(Item)\[([^\]]+)]\[([^\]]+)](?:{([^}]+)})?/g,(..._0x2f4f31)=>Patcher_TextEditor[_0x595980(0x22b)][_0x595980(0x225)](_0x3b6912,_0x31de55,..._0x2f4f31))[_0x595980(0x24d)](/@Folder\[([^\]]+)](?:{([^}]+)})?/g,(..._0x149baf)=>Patcher_TextEditor[_0x595980(0x27e)]['getHtml'](_0x3b6912,_0x31de55,..._0x149baf))['replace'](/@([a-zA-Z]+)\[([^\]]+)](?:{([^}]+)})?/g,(..._0x1da672)=>Patcher_TextEditor[_0x595980(0x203)][_0x595980(0x225)](_0x3b6912,_0x31de55,..._0x1da672)),_0x487339;}}Patcher_TextEditor['Enricher']=class{static[_0x4a8c3f(0x24c)](_0x4dfaf3){const _0x15809d=_0x4a8c3f;if(game[_0x15809d(0x210)][_0x15809d(0x238)])return CONST[_0x15809d(0x288)][_0x15809d(0x1fd)];return _0x4dfaf3[_0x15809d(0x26a)];}static['_getEntity'](_0x57910f,_0x1bfcf7){const _0x16aab2=_0x4a8c3f;let _0x14d424=null;if(/^[a-zA-Z0-9]{16}$/[_0x16aab2(0x1d8)](_0x1bfcf7))_0x14d424=_0x57910f[_0x16aab2(0x1c5)](_0x1bfcf7);if(!_0x14d424)_0x14d424=(_0x57910f['contents']||_0x57910f[_0x16aab2(0x26d)])[_0x16aab2(0x1c2)](_0x4cde63=>_0x4cde63[_0x16aab2(0x21c)][_0x16aab2(0x200)]===_0x1bfcf7);return _0x14d424;}},Patcher_TextEditor[_0x4a8c3f(0x221)]=class extends Patcher_TextEditor[_0x4a8c3f(0x1f6)]{static[_0x4a8c3f(0x225)](_0x549522,_0x5794fe,_0x47bf78,_0x402e39,_0x33bb8e,_0x672b59){const _0x3e2819=_0x4a8c3f,_0x504c91=CONFIG[_0x402e39],_0x3f4def=_0x504c91[_0x3e2819(0x245)][_0x3e2819(0x23c)],_0x4d8203=this[_0x3e2819(0x268)](_0x3f4def,_0x33bb8e);if(!_0x4d8203)return'<a\x20class=\x22entity-link\x20broken\x22><i\x20class=\x22fas\x20fa-unlink\x22></i>\x20'+(_0x672b59||_0x33bb8e)+'</a>';const _0x375ea9=TextEditor['_createContentLink'](_0x47bf78,_0x402e39,_0x33bb8e,_0x672b59)[_0x3e2819(0x1fe)];if(this[_0x3e2819(0x24c)](_0x4d8203)<CONST[_0x3e2819(0x288)][_0x3e2819(0x1e9)])return _0x375ea9;const _0x2bf11e=Config[_0x3e2819(0x1c5)](_0x3e2819(0x1da),'isAutoExpandJournalEmbeds');if(_0x4d8203['sheet'][_0x3e2819(0x248)]===_0x3e2819(0x1d1)){const _0x23a89d=_0x4d8203[_0x3e2819(0x21c)][_0x3e2819(0x26b)];return _0x3e2819(0x263)+_0x375ea9+this[_0x3e2819(0x1e3)](_0x2bf11e)+_0x3e2819(0x1db)+(_0x2bf11e?'':'ve-hidden')+_0x3e2819(0x262)+_0x23a89d+_0x3e2819(0x247)+_0x23a89d+_0x3e2819(0x1d6);}else{const _0x2939fb=_0x5794fe===Patcher_TextEditor[_0x3e2819(0x221)][_0x3e2819(0x1e6)],_0x264cf1=_0x2939fb?_0x4d8203[_0x3e2819(0x21c)][_0x3e2819(0x1c3)]:TextEditor[_0x3e2819(0x229)](_0x4d8203[_0x3e2819(0x21c)][_0x3e2819(0x1c3)],_0x549522,_0x5794fe+0x1);return'<div\x20class=\x22w-100\x20ve-flex-col\x22>\x0a\x09\x09\x09\x09<div\x20class=\x22ve-flex-v-center\x20mb-1\x20jemb__wrp-lnk\x22>'+_0x375ea9+this['_getBtnHtmlToggle'](_0x2bf11e)+_0x3e2819(0x251)+(_0x2939fb?_0x3e2819(0x220):'')+_0x3e2819(0x240)+(_0x2bf11e?'':'ve-hidden')+'\x22>'+_0x264cf1+_0x3e2819(0x287);}}static[_0x4a8c3f(0x1ff)](_0x331d7b){const _0x28fb4c=_0x4a8c3f,_0x29578f=$(_0x331d7b[_0x28fb4c(0x270)]),_0x4b0707=_0x29578f['attr']('data-plut-is-expanded')==='1';if(_0x331d7b[_0x28fb4c(0x286)]){_0x331d7b[_0x28fb4c(0x206)]();const _0x1cdb23=_0x29578f[_0x28fb4c(0x24a)](_0x28fb4c(0x23a));_0x1cdb23[_0x28fb4c(0x1c2)](_0x28fb4c(0x244))['each']((_0x2f89f0,_0x330d92)=>this['_handleExpandCollapse']($(_0x330d92),_0x4b0707));return;}this[_0x28fb4c(0x1c8)](_0x29578f,_0x4b0707);}static[_0x4a8c3f(0x1c8)](_0x45af81,_0x19ea3d){const _0x200392=_0x4a8c3f,_0x9b8392=_0x45af81['parent']()[_0x200392(0x1f9)]();_0x9b8392['toggleClass'](_0x200392(0x265),_0x19ea3d),_0x45af81[_0x200392(0x233)](_0x200392(0x24e),_0x19ea3d?'0':'1')['html'](_0x19ea3d?_0x200392(0x25e):_0x200392(0x1e2))[_0x200392(0x21d)]((_0x19ea3d?'Expand':_0x200392(0x1dc))+'\x20Journal\x20Entry\x20(SHIFT\x20for\x20All\x20Entries)');}static[_0x4a8c3f(0x1e3)](_0x187703){const _0x2c1118=_0x4a8c3f;return _0x2c1118(0x1e7)+(_0x187703?0x1:0x0)+'\x22\x20title=\x22'+(_0x187703?_0x2c1118(0x1dc):_0x2c1118(0x20b))+_0x2c1118(0x1e4)+(_0x187703?_0x2c1118(0x1e2):'<i\x20class=\x22fa\x20fa-caret-square-left\x22></i>')+_0x2c1118(0x1cc);}static[_0x4a8c3f(0x215)](_0x2634cf){const _0x4b1260=_0x4a8c3f;for(let _0x4b410c of _0x2634cf[_0x4b1260(0x1ee)]('BUTTON')){if(_0x4b410c[_0x4b1260(0x26f)][_0x4b1260(0x22f)](_0x4b1260(0x1d7)))_0x4b410c[_0x4b1260(0x21b)](_0x4b1260(0x22c));}}},Patcher_TextEditor['JournalEmbed'][_0x4a8c3f(0x1e6)]=0x45,Patcher_TextEditor[_0x4a8c3f(0x22b)]=class extends Patcher_TextEditor[_0x4a8c3f(0x1f6)]{static[_0x4a8c3f(0x225)](_0x1090db,_0x3c33eb,_0x457700,_0x5a47e0,_0x2e5bce,_0x19f850,_0x214c54,_0x5b56ae){const _0x93b294=_0x4a8c3f,_0x1723e4=CONFIG[_0x5a47e0],_0x3a08d3=_0x1723e4['collection'][_0x93b294(0x23c)],_0x3a1936=this[_0x93b294(0x268)](_0x3a08d3,_0x19f850);if(!_0x3a1936)return _0x93b294(0x27c)+(_0x5b56ae||_0x19f850+'.'+_0x214c54)+'</a>';const _0x5d30e8=CONFIG[_0x2e5bce],_0x1ac3a0=this[_0x93b294(0x268)](_0x3a1936[_0x93b294(0x1de)],_0x214c54);if(!_0x1ac3a0)return'<a\x20class=\x22entity-link\x20broken\x22><i\x20class=\x22fas\x20fa-unlink\x22></i>\x20'+(_0x5b56ae||_0x19f850+'.'+_0x214c54)+_0x93b294(0x24b);return _0x93b294(0x25d)+_0x5a47e0+'\x22\x20data-child-entity=\x22Item\x22\x20data-parent-id=\x22'+_0x3a1936['id']+_0x93b294(0x1f4)+_0x1ac3a0['id']+_0x93b294(0x241)+_0x1723e4[_0x93b294(0x1cb)]+_0x93b294(0x20a)+_0x5d30e8['sidebarIcon']+'\x22></i>\x20'+_0x1ac3a0[_0x93b294(0x200)]+_0x93b294(0x24b);}},Patcher_TextEditor[_0x4a8c3f(0x27e)]=class extends Patcher_TextEditor[_0x4a8c3f(0x1f6)]{static[_0x4a8c3f(0x225)](_0x3e6cc5,_0x1ad253,_0x22b3d5,_0x4b0281,_0x3b9361){const _0x12d24a=_0x4a8c3f,_0x4463e8=this[_0x12d24a(0x268)](CONFIG[_0x12d24a(0x27e)][_0x12d24a(0x245)][_0x12d24a(0x23c)],_0x4b0281);if(!_0x4463e8)return _0x12d24a(0x27c)+(_0x3b9361||_0x4b0281)+_0x12d24a(0x24b);return _0x12d24a(0x201)+_0x4463e8['id']+_0x12d24a(0x1c4)+_0x4463e8[_0x12d24a(0x200)]+_0x12d24a(0x24b);}},Patcher_TextEditor[_0x4a8c3f(0x203)]=class{static[_0x4a8c3f(0x225)](_0x2355d6,_0x1e1a42,_0x2d97ae,_0x38b28a,_0x48bc04,_0x326c28){const _0x783d0=_0x4a8c3f;if(Patcher_TextEditor[_0x783d0(0x203)][_0x783d0(0x1ea)][_0x783d0(0x249)](_0x38b28a))return this[_0x783d0(0x205)](_0x2355d6,_0x1e1a42,_0x2d97ae,_0x38b28a,_0x48bc04,_0x326c28);const _0x3875a2=ChooseImporter[_0x783d0(0x246)](_0x38b28a)?.['Class'],_0x3315ee=Renderer[_0x783d0(0x269)](_0x48bc04)[0x0]||'';if(!_0x3875a2)return _0x783d0(0x1dd)+_0x38b28a['qq']()+_0x783d0(0x20c)+StrUtil['qq'](_0x326c28||_0x3315ee)+_0x783d0(0x24b);const _0x1a71f9=CONFIG[_0x3875a2['FOLDER_TYPE']];if(!_0x1a71f9)return _0x783d0(0x281)+_0x3875a2[_0x783d0(0x1e5)]+_0x783d0(0x202)+StrUtil['qq'](_0x326c28||_0x3315ee)+'</a>';const {displayText:_0x3431b9,page:_0xaf15fc,source:_0xa24430,hash:_0x3286ba,preloadId:_0x10cf22,hashPreEncoded:_0x279375,hashHover:_0x145acb,hashPreEncodedHover:_0x4b30ab,subhashes:_0x313360,subhashesHover:_0x3a889}=Renderer[_0x783d0(0x219)][_0x783d0(0x21a)]('@'+_0x38b28a,_0x48bc04);return _0x783d0(0x234)+(Config[_0x783d0(0x1c5)](_0x783d0(0x277),_0x783d0(0x211))?_0x783d0(0x274)+!![]+'\x22':'title=\x22SHIFT-Click\x20to\x20Import\x22')+_0x783d0(0x257)+_0xaf15fc['qq']()+_0x783d0(0x284)+_0xa24430['qq']()+'\x22\x20data-plut-hover-hash=\x22'+_0x3286ba['qq']()+'\x22\x20data-plut-hover-tag=\x22'+_0x38b28a+'\x22\x20'+(_0x10cf22?_0x783d0(0x20d)+_0x10cf22['qq']()+'\x22':'')+'\x20'+(_0x279375?_0x783d0(0x1f8)+_0x279375+'\x22':'')+'\x20'+(_0x145acb?_0x783d0(0x224)+_0x145acb['qq']()+'\x22':'')+'\x20'+(_0x4b30ab?_0x783d0(0x1d4)+_0x4b30ab+'\x22':'')+'\x20'+(_0x313360?.[_0x783d0(0x1e1)]?_0x783d0(0x256)+JSON[_0x783d0(0x253)](_0x313360)['qq']()+'\x22':'')+'\x20'+(_0x3a889?.['length']?'data-plut-hover-subhashes-hover=\x22'+JSON[_0x783d0(0x253)](_0x3a889)['qq']()+'\x22':'')+_0x783d0(0x23f)+!![]+'\x22\x20data-plut-rich-link-entity-type=\x22'+_0x3875a2['FOLDER_TYPE']+'\x22\x20data-plut-rich-link-original-text=\x22'+_0x2d97ae[_0x783d0(0x1c6)](0x1)['qq']()+_0x783d0(0x280)+_0x1a71f9[_0x783d0(0x1cb)]+_0x783d0(0x264)+StrUtil['qq'](_0x3431b9||_0x326c28||_0x3315ee)+'</a>';}static[_0x4a8c3f(0x205)](_0x185547,_0x14949e,_0x272600,_0x3f4dd3,_0x5b841a,_0x1f15af){const _0x5ab5b5=_0x4a8c3f,_0x37bd7f=_0x3f4dd3===_0x5ab5b5(0x282)?Parser[_0x5ab5b5(0x1ef)]:_0x3f4dd3===_0x5ab5b5(0x23d)?Parser[_0x5ab5b5(0x254)]:null,[_0x59c3d3,_0x43aba8]=Renderer[_0x5ab5b5(0x269)](_0x5b841a),_0x1dce02=_0x37bd7f?_0x37bd7f(_0x59c3d3):null;if(!_0x37bd7f||_0x1dce02===_0x59c3d3||CollectionUtil[_0x5ab5b5(0x271)](_0x1dce02,_0x37bd7f('')))return _0x5ab5b5(0x267)+_0x3f4dd3+_0x5ab5b5(0x237)+StrUtil['qq'](_0x43aba8||_0x1f15af||_0x59c3d3)+'</a>';return _0x5ab5b5(0x234)+(Config['get']('text',_0x5ab5b5(0x211))?_0x5ab5b5(0x274)+!![]+'\x22':'')+_0x5ab5b5(0x235)+CryptUtil['uid']()+_0x5ab5b5(0x1f2)+_0x3f4dd3+_0x5ab5b5(0x1ec)+_0x5b841a['qq']()+_0x5ab5b5(0x20f)+_0x272600['slice'](0x1)['qq']()+_0x5ab5b5(0x255)+StrUtil['qq'](_0x43aba8||_0x1f15af||_0x59c3d3)+_0x5ab5b5(0x24b);}static[_0x4a8c3f(0x207)](_0x361b59){const _0x1f69fb=_0x4a8c3f;_0x361b59[_0x1f69fb(0x27a)](),_0x361b59[_0x1f69fb(0x206)]();const _0x385b90='@'+_0x361b59[_0x1f69fb(0x270)][_0x1f69fb(0x1f0)][_0x1f69fb(0x1d5)],_0x132396=_0x361b59['currentTarget'][_0x1f69fb(0x1f0)][_0x1f69fb(0x23b)],_0x294c91=_0x361b59[_0x1f69fb(0x270)][_0x1f69fb(0x1f0)][_0x1f69fb(0x25c)],_0xc3add2=_0x361b59['currentTarget']['dataset'][_0x1f69fb(0x243)];let _0x1a25b6=_0x361b59[_0x1f69fb(0x270)][_0x1f69fb(0x1f0)][_0x1f69fb(0x276)];const _0x53791d=_0x361b59[_0x1f69fb(0x270)][_0x1f69fb(0x1f0)][_0x1f69fb(0x1cd)],_0x460fa8=!!_0x361b59[_0x1f69fb(0x270)][_0x1f69fb(0x1f0)][_0x1f69fb(0x1fb)],_0x5c2ba8=_0x361b59[_0x1f69fb(0x270)][_0x1f69fb(0x1f0)][_0x1f69fb(0x1cf)];if(!_0x294c91||!_0xc3add2||!_0x1a25b6)return;const _0x328ec3=ChooseImporter['getImporter'](_0x132396)||ChooseImporter[_0x1f69fb(0x25a)](_0x294c91);if(!_0x460fa8)_0x1a25b6=UrlUtil['encodeForHash'](_0x1a25b6);if(_0x5c2ba8){const _0x12bc8c=JSON[_0x1f69fb(0x1fc)](_0x5c2ba8);_0x1a25b6+=Renderer[_0x1f69fb(0x219)][_0x1f69fb(0x1ed)](_0x12bc8c);}const _0xec4da=!!_0x361b59[_0x1f69fb(0x286)]&&(game[_0x1f69fb(0x210)][_0x1f69fb(0x283)](_0x1f69fb(0x204))&&_0x328ec3[_0x1f69fb(0x208)]==='actors'||game['user'][_0x1f69fb(0x283)](_0x1f69fb(0x250))&&_0x328ec3['gameProp']===_0x1f69fb(0x1de)||game[_0x1f69fb(0x210)][_0x1f69fb(0x283)](_0x1f69fb(0x1d9))&&_0x328ec3[_0x1f69fb(0x208)]===_0x1f69fb(0x260)||game['user'][_0x1f69fb(0x283)]('ROLL_TABLE_CREATE')&&_0x328ec3['gameProp']===_0x1f69fb(0x227)),_0x470a16=_0x361b59[_0x1f69fb(0x21e)]!==window&&Config[_0x1f69fb(0x1c5)]('ui',_0x1f69fb(0x28a));Renderer['hover']['pCacheAndGet'](_0x294c91,_0xc3add2,_0x1a25b6)[_0x1f69fb(0x231)](_0x21db2a=>{const _0x5b02b6=_0x1f69fb,_0x109eed='Could\x20not\x20load\x20content\x20for\x20tag\x20\x22'+_0x385b90+'\x22!';if(!_0x21db2a){const _0x579340=_0x109eed+_0x5b02b6(0x285);return console[_0x5b02b6(0x1f1)](...LGT,_0x579340),ui['notifications'][_0x5b02b6(0x1f1)](_0x579340);}_0x328ec3['pImportEntry'](_0x21db2a,{'isTemp':!_0xec4da,'defaultPermission':!_0xec4da?CONST['ENTITY_PERMISSIONS'][_0x5b02b6(0x1fd)]:undefined})[_0x5b02b6(0x231)](async _0x367052=>{const _0x1da89b=_0x5b02b6;if(_0xec4da)UtilApplications[_0x1da89b(0x24f)](_0x367052);const _0x51918b=await Promise[_0x1da89b(0x218)]((_0x367052['imported']||[])[_0x1da89b(0x272)](_0x4e1c69=>_0x4e1c69['document'])[_0x1da89b(0x230)](Boolean)[_0x1da89b(0x272)](_0x1adc05=>UtilApplications[_0x1da89b(0x1c9)](_0x1adc05[_0x1da89b(0x273)]?_0x1adc05[_0x1da89b(0x273)]:_0x1adc05)));if(!_0x470a16)return;_0x51918b[_0x1da89b(0x230)](Boolean)[_0x1da89b(0x27f)](({app:_0x2b1d12,data:_0xfa711e})=>PopoutSheet[_0x1da89b(0x26c)](_0x2b1d12,_0xfa711e));})[_0x5b02b6(0x23e)](_0x3698b0=>{const _0x5b90b0=_0x5b02b6;console[_0x5b90b0(0x1f1)](...LGT,_0x3698b0),ui[_0x5b90b0(0x232)][_0x5b90b0(0x1f1)](_0x109eed+'\x20'+VeCt[_0x5b90b0(0x27d)]);});});}},Patcher_TextEditor[_0x4a8c3f(0x203)]['_STATIC_TAGS']=new Set([_0x4a8c3f(0x282),_0x4a8c3f(0x23d)]),Patcher_TextEditor[_0x4a8c3f(0x25f)]=class{static[_0x4a8c3f(0x216)](){const _0x2a39ef=_0x4a8c3f;libWrapper[_0x2a39ef(0x1f5)](SharedConsts[_0x2a39ef(0x1e8)],'ActorSheet.prototype._onDragStart',function(_0x38dcee,..._0x3be07a){const _0x2a3da8=_0x2a39ef,_0x3e52c3=_0x3be07a[0x0];if(_0x3e52c3[_0x2a3da8(0x20e)][_0x2a3da8(0x1f0)]['plutRichLink'])return;return _0x38dcee(..._0x3be07a);},UtilLibWrapper['LIBWRAPPER_MODE_MIXED']),libWrapper[_0x2a39ef(0x1f5)](SharedConsts[_0x2a39ef(0x1e8)],_0x2a39ef(0x1fa),async function(_0x2510b4,..._0x91e560){const _0x13422c=_0x2a39ef;return Patcher_TextEditor[_0x13422c(0x25f)][_0x13422c(0x226)]({'fn':_0x2510b4,'args':_0x91e560});},UtilLibWrapper[_0x2a39ef(0x214)]);}static async[_0x4a8c3f(0x226)]({fn:_0x5e9bfd,args:_0x20701c}){const _0x5e9387=_0x4a8c3f,[_0x284db0,_0x6dfbe7]=_0x20701c;_0x284db0['preventDefault']();const _0x3d3193=Patcher_TextEditor[_0x5e9387(0x25f)][_0x5e9387(0x1e0)](_0x284db0);if(!_0x3d3193)return _0x5e9bfd(..._0x20701c);if(_0x3d3193?.[_0x5e9387(0x279)]===UtilEvents[_0x5e9387(0x28b)])return _0x6dfbe7['insertContent'](_0x3d3193[_0x5e9387(0x213)]),!![];if(_0x3d3193['actorId']&&_0x3d3193['type']===_0x5e9387(0x236)&&!_0x3d3193['pack']){const _0x5881b2=CONFIG[_0x3d3193[_0x5e9387(0x21f)]];if(!_0x5881b2)return![];const _0x5e89e0=game[_0x5e9387(0x223)][_0x5e9387(0x1c5)](_0x3d3193[_0x5e9387(0x266)]);if(!_0x5e89e0)return![];const _0x59e355=_0x5e89e0[_0x5881b2['documentClass']['metadata']['collection']][_0x5e9387(0x1c5)](_0x3d3193['data'][_0x5e9387(0x1f3)]);if(!_0x59e355)return![];return _0x6dfbe7[_0x5e9387(0x222)](_0x5e9387(0x22a)+_0x3d3193[_0x5e9387(0x21f)]+'['+_0x3d3193[_0x5e9387(0x266)]+']['+_0x59e355['id']+']{'+_0x59e355[_0x5e9387(0x200)]+'}'),!![];}if(_0x3d3193?.[_0x5e9387(0x279)]!==UtilEvents[_0x5e9387(0x258)])return _0x5e9bfd(..._0x20701c);return _0x6dfbe7[_0x5e9387(0x222)](_0x3d3193[_0x5e9387(0x26e)]),!![];}static['_getEvtData'](_0x5815b1){const _0x351c78=_0x4a8c3f;try{return JSON[_0x351c78(0x1fc)](_0x5815b1[_0x351c78(0x209)][_0x351c78(0x217)]('text/plain'));}catch(_0x5e4083){return null;}}};export{Patcher_TextEditor};