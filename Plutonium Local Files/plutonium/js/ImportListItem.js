const _0x5ca97a=_0x14ad;(function(_0x4ad269,_0x4ab2ee){const _0x2f3721=_0x14ad,_0x18b41a=_0x4ad269();while(!![]){try{const _0x2255fe=-parseInt(_0x2f3721(0x103))/0x1*(-parseInt(_0x2f3721(0xc4))/0x2)+parseInt(_0x2f3721(0x18c))/0x3*(parseInt(_0x2f3721(0x107))/0x4)+parseInt(_0x2f3721(0x11f))/0x5+parseInt(_0x2f3721(0x145))/0x6+parseInt(_0x2f3721(0xf4))/0x7+parseInt(_0x2f3721(0xd5))/0x8*(parseInt(_0x2f3721(0xd2))/0x9)+-parseInt(_0x2f3721(0x101))/0xa*(parseInt(_0x2f3721(0x11c))/0xb);if(_0x2255fe===_0x4ab2ee)break;else _0x18b41a['push'](_0x18b41a['shift']());}catch(_0x54a56c){_0x18b41a['push'](_0x18b41a['shift']());}}}(_0x1075,0x3f643));import{ImportCustomizer,ImportedDocument,ImportList,ImportSummary}from'./ImportList.js';function _0x1075(){const _0xc514f0=['sourceJsonToColor','parent','contents','PG_ITEMS','DataSourceUrl','page','TASK_EXIT_COMPLETE','_pImportEntry_pDoLoadBrewMeta','join','_pImportEntry_pImportToActor','rarity','Failed\x20to\x20apply\x20currency\x20to\x20actor!\x20','_activateListeners_initRunButtonsAdditional','Importing\x20currency\x20\x22','STACKABLE_FOUNDRY_ITEM_TYPES_IMPORT','loadJSON','1442448acBTLB','log','copy','sourceJsonToFull','sourceStyle','_titleSearch','getCurrentPage','map','atomicPackContents','_pImportEntry_pImportToActor_getExistingStackableItem','4baoIYs','1-4','Unknown','_initCreateSheetItemHook_currency','inventoryStackingMode','find','data','doAbsorbItems','titleCase','_activateListeners_initRunButtonsAdditional_genericMods','pGetItems','_pImportEntry_pImportToActor_pUpdateItemPostAdd','Unknown\x20Rarity','VALID_FOUNDRY_ITEM_TYPES_IMPORT','64530fcGJCL','hasSourceJson','_pImportEntry_pImportToActor_pAddOrUpdateItem','24nmdeda','currency','pInit','pAddActorItems','Error(s)\x20when\x20breaking\x20','val','_pImportEntry_pImportToActor_isSmartStackableItem','foundryType','throwables','packContents','value','_initCreateSheetItemHook','_pImportEntry_pImportToActor_pImportPackItem','_dataList','special','Item','sheet','ImportCustomizer','typeText','absorbFnBindListenersRadio','_activateListeners_absorbListItems','all','toLowerCase','source','_page','valueMult','Item\x20\x22','init','isToken','ammoType','_pGetPackItemMetas','1715847BbQWVx','sourceLong','text-center','mutateForFilters','/template/ImportListItemCustomizer.hbs','flags','wondrous','isTemp','getItemSource','Type','_pImportEntry_pImportToActor_isThrowableItem','DataSourceFile','DISPLAY_NAME_TYPE_PLURAL','55370sSnaIF','items','97919Obpfrp','isStreamerMode','_vType','getDisplayCurrency','4qBKMxm','then','render','error','_attunementCategory','pImportCurrency','cost','preCreateItem','_pGetSourcesHomebrew','i18n','TASK_EXIT_COMPLETE_DATA_ONLY','_list','MODULE_LOCATION','get','toTitleCase','baseBrewUrl','_pGetSources','URL_TO_HASH_BUILDER','brew','[name=\x22btn-run\x22]','length','2189TIqfJd','isSplitPacksActor','getItemCompendiumAliases','618620cRUFDj','pGetItemsFromHomebrew','_isPackSplitImport','pSerialAwaitMap','3-2','STORAGE_DMSCREEN_TEMP_SUBLIST','baseitem','pCacheAndGet','_resolve','_pFnPostProcessEntries','type','_activateListeners_initList','Rarity','C_ITEM_ATTUNEMENT_ALWAYS','Items','magicvariant','click','replace','MODULE_NAME','getData','ascSortLower','trim','\x22\x20(from\x20\x22','forEach','Customize\x20Import','Importing\x20item\x20\x22','close','isDataOnly','getFileUrl','_pImportEntry_pImportToDirectoryGeneric','_pImportEntry_getSheetItemsAmmo','_content','attunement','pDoHandleBrewJson','Unknown\x20Type','filterValues','pUpdateEmbeddedDocuments','btn-run-mods','1767030UBCGph','ITEM.Type','populatePropertyAndTypeReference','_pImportEntry_pImportToActor_pAddItem','STR_SEE_CONSOLE','getFolderPathMeta','sourceJsonToAbv','hover','name','documentName','importItem','_fluffLookup','Source','Import\x20Items','DataSourceSpecial','_pImportEntry_pImportToDataOnly','Upload\x20File','itemValueToFull','pAddCurrencyToActor','item','constructor','Unhandled\x20pack\x20contents\x20type\x20\x22','filter','_actor','$selFoundryType','Customize\x20and\x20Import...','sourceJsonToStylePart','document','pGetItemItem','srd','has','sortItems','\x22)\x20could\x20not\x20be\x20broken\x20down\x20into\x20constituent\x20items!\x20','push','isSiteSource','isSplitAtomicPacksActor','ammo','split','Custom\x20URL','sortEntries','isStrictMatching','quantity','weight','consumable','ele','HOMEBREW_INDEX__SOURCE','.search','C_ITEM_ATTUNEMENT_NEVER','Wondrous\x20Item','Weight','getItemTypeName','import','[name=\x22sel-foundry-type\x22]','itemWeightToFull','_pageFilter'];_0x1075=function(){return _0xc514f0;};return _0x1075();}import{Vetools}from'./Vetools.js';import{LGT}from'./Util.js';import{DataConverterItem}from'./DataConverterItem.js';import{Config}from'./Config.js';import{UtilList2}from'./UtilList2.js';import{UtilApplications}from'./UtilApplications.js';import{UtilDataSource}from'./UtilDataSource.js';import{UtilActors}from'./UtilActors.js';import{SharedConsts}from'../shared/SharedConsts.js';function _0x14ad(_0x301433,_0x1c9410){const _0x107554=_0x1075();return _0x14ad=function(_0x14adac,_0x47cdc7){_0x14adac=_0x14adac-0xbe;let _0x445d71=_0x107554[_0x14adac];return _0x445d71;},_0x14ad(_0x301433,_0x1c9410);}import{UtilDocuments}from'./UtilDocuments.js';import{ConfigConsts}from'./ConfigConsts.js';import{UtilDataConverter}from'./UtilDataConverter.js';class ImportListItem extends ImportList{static ['ID']=_0x5ca97a(0x102);static [_0x5ca97a(0x100)]=_0x5ca97a(0x12d);static ['_']=this['registerImpl'](this);static[_0x5ca97a(0xf0)](){const _0xfdec9=_0x5ca97a;this[_0xfdec9(0xe0)]({'prop':_0xfdec9(0x158),'importerName':_0xfdec9(0xe4)}),this[_0xfdec9(0xc7)]();}constructor(_0x3913bb){const _0x7b4511=_0x5ca97a;_0x3913bb=_0x3913bb||{},super({'title':_0x7b4511(0x152)},_0x3913bb,{'dirsHomebrew':[_0x7b4511(0x158),_0x7b4511(0x125),_0x7b4511(0x12e)],'namespace':'item','titleSearch':'items','sidebarTab':_0x7b4511(0x102),'gameProp':'items','defaultFolderPath':['Items'],'fnListSort':PageFilterItems[_0x7b4511(0x164)],'pageFilter':new PageFilterItems({'filterOpts':{'Category':{'deselFn':_0x4a1956=>_0x4a1956==='Generic\x20Variant'}}}),'page':UrlUtil[_0x7b4511(0x17f)],'isPreviewable':!![],'isDedupable':!![],'configGroup':_0x7b4511(0x14f)}),this[_0x7b4511(0x150)]=null;}async[_0x5ca97a(0x117)](){const _0x44642d=_0x5ca97a,_0x58a3ef={'pPostLoad':async _0x596b56=>{const _0x15ae8b=_0x14ad;return Renderer[_0x15ae8b(0x158)][_0x15ae8b(0x120)](_0x596b56);}};return[new UtilDataSource[(_0x44642d(0x153))](Config['get']('ui',_0x44642d(0x104))?'SRD':'5etools',async()=>(await Vetools[_0x44642d(0xce)]())[_0x44642d(0x158)],{'cacheKey':'5etools-items','filterTypes':[UtilDataSource['SOURCE_TYP_OFFICIAL_ALL']],'isDefault':!![]}),new UtilDataSource[(_0x44642d(0x180))](_0x44642d(0x16b),'',{..._0x58a3ef,'filterTypes':[UtilDataSource['SOURCE_TYP_CUSTOM']]}),new UtilDataSource[(_0x44642d(0xff))](_0x44642d(0x155),{..._0x58a3ef,'filterTypes':[UtilDataSource['SOURCE_TYP_CUSTOM']]}),...await this[_0x44642d(0x10f)](_0x58a3ef)];}[_0x5ca97a(0x132)](){const _0x7ed81=_0x5ca97a;return{...super[_0x7ed81(0x132)](),'buttonsAdditional':[{'name':_0x7ed81(0x144),'text':_0x7ed81(0x15e)}],'cols':[{'name':'Name','width':0x3,'field':_0x7ed81(0x14d)},{'name':_0x7ed81(0xfd),'width':_0x7ed81(0x123),'field':_0x7ed81(0x129)},{'name':'Cost','width':_0x7ed81(0xc5),'field':_0x7ed81(0x10d),'rowClassName':_0x7ed81(0xf6)},{'name':_0x7ed81(0x176),'width':'1-4','field':_0x7ed81(0x16f),'rowClassName':'text-center'},{'name':'A.','width':'0-5','field':_0x7ed81(0x13f),'rowClassName':_0x7ed81(0xf6)},{'name':'Rarity','width':'1-5','field':_0x7ed81(0x186),'rowClassName':'text-center'},{'name':_0x7ed81(0x151),'width':0x1,'field':_0x7ed81(0xec),'titleProp':_0x7ed81(0xf5),'displayProp':'sourceShort','classNameProp':'sourceClassName','styleProp':_0x7ed81(0xbe),'rowClassName':_0x7ed81(0xf6)}],'rows':this[_0x7ed81(0x13e)][_0x7ed81(0xc1)]((_0x3e22fd,_0x190cc9)=>{const _0x573c68=_0x7ed81;return this[_0x573c68(0x17b)][_0x573c68(0x159)][_0x573c68(0xf7)](_0x3e22fd),_0x3e22fd[_0x573c68(0x105)]=_0x3e22fd['_typeListText'][_0x573c68(0x184)](',\x20')['uppercaseFirst'](),{'name':_0x3e22fd['name'],'type':_0x3e22fd[_0x573c68(0x105)],'cost':_0x3e22fd[_0x573c68(0xdf)]||_0x3e22fd[_0x573c68(0xee)]?Parser[_0x573c68(0x156)](_0x3e22fd,{'isShortForm':!![]})[_0x573c68(0x130)](/ +/g,'\u00a0'):'—','weight':Parser[_0x573c68(0x17a)](_0x3e22fd,!![])||'—','rarity':(_0x3e22fd[_0x573c68(0x186)]||_0x573c68(0xc6))['toTitleCase'](),'attunement':_0x3e22fd[_0x573c68(0x10b)]==='No'?'':'×','source':_0x3e22fd[_0x573c68(0xec)],'sourceShort':Parser['sourceJsonToAbv'](_0x3e22fd[_0x573c68(0xec)]),'sourceLong':Parser[_0x573c68(0x18f)](_0x3e22fd['source']),'sourceClassName':Parser[_0x573c68(0x17c)](_0x3e22fd['source']),'sourceStyle':BrewUtil[_0x573c68(0x15f)](_0x3e22fd[_0x573c68(0xec)]),'ix':_0x190cc9};})};}[_0x5ca97a(0xe9)](){const _0xaa9169=_0x5ca97a;this[_0xaa9169(0x112)]['doAbsorbItems'](this['_content'],{'fnGetName':_0x111035=>_0x111035[_0xaa9169(0x14d)],'fnGetValues':_0x530954=>({'source':_0x530954[_0xaa9169(0xec)],'type':_0x530954[_0xaa9169(0x105)],'cost':_0x530954[_0xaa9169(0xdf)]||0x0,'rarity':_0x530954[_0xaa9169(0x186)],'attunement':_0x530954[_0xaa9169(0x10b)]!=='No','weight':Parser['weightValueToNumber'](_0x530954[_0xaa9169(0x16f)]),'hash':UrlUtil[_0xaa9169(0x118)][this[_0xaa9169(0xed)]](_0x530954)}),'fnGetData':UtilList2['absorbFnGetData'],'fnBindListeners':_0x2ca19d=>this['_isRadio']?UtilList2[_0xaa9169(0xe8)](this[_0xaa9169(0x112)],_0x2ca19d):UtilList2['absorbFnBindListeners'](this['_list'],_0x2ca19d)});}[_0x5ca97a(0x188)](){const _0x22dc67=_0x5ca97a;this[_0x22dc67(0xcd)]();}[_0x5ca97a(0x128)](_0x485ba3,{isUseMods:isUseMods=![]}={}){if(!isUseMods)return _0x485ba3;return new Promise(_0x10e0dd=>{const _0x2c57be=_0x14ad,_0x197e5d=new ImportListItem[(_0x2c57be(0xe6))](_0x485ba3,_0x10e0dd,{'titleSearch':this[_0x2c57be(0xbf)],'isActor':!!this[_0x2c57be(0x15c)]});_0x197e5d[_0x2c57be(0x109)](!![]);});}async[_0x5ca97a(0xd7)](){const _0x5b71e6=_0x5ca97a;await super['pInit'](),this[_0x5b71e6(0x150)]={};const _0x29757e=await Vetools['pGetItemFluff']();_0x29757e['itemFluff'][_0x5b71e6(0x136)](_0x5e0d55=>(this[_0x5b71e6(0x150)][_0x5e0d55[_0x5b71e6(0xec)]]=this[_0x5b71e6(0x150)][_0x5e0d55[_0x5b71e6(0xec)]]||{})[_0x5e0d55['name']]=_0x5e0d55),await Renderer[_0x5b71e6(0x158)][_0x5b71e6(0x147)]();}[_0x5ca97a(0x14a)](){const _0x237127=_0x5ca97a;return{...super[_0x237127(0x14a)](),'rarity':{'label':_0x237127(0x12b),'getter':_0xc73202=>(!_0xc73202[_0x237127(0x186)]||_0xc73202[_0x237127(0x186)]===_0x237127(0xc6)?_0x237127(0xd0):_0xc73202[_0x237127(0x186)])[_0x237127(0x115)]()},'type':{'label':'Type','getter':_0x4a0757=>{const _0x31be3d=_0x237127;if(_0x4a0757[_0x31be3d(0x129)])return Renderer[_0x31be3d(0x158)][_0x31be3d(0x177)](_0x4a0757[_0x31be3d(0x129)])[_0x31be3d(0x115)]();else{if(_0x4a0757[_0x31be3d(0xe7)])return _0x4a0757[_0x31be3d(0xe7)];else{if(_0x4a0757[_0x31be3d(0xfa)])return _0x31be3d(0x175);else{if(_0x4a0757['poison'])return'Poison';else return _0x31be3d(0x141);}}}}}};}async['_pImportEntry'](_0x3587e4,_0x2121cb){const _0xacbfe6=_0x5ca97a;_0x2121cb=_0x2121cb||{},console[_0xacbfe6(0x18d)](...LGT,_0xacbfe6(0x138)+_0x3587e4[_0xacbfe6(0x14d)]+_0xacbfe6(0x135)+Parser['sourceJsonToAbv'](_0x3587e4[_0xacbfe6(0xec)])+'\x22)');const _0x5ccd80=_0x3587e4['fluff']||MiscUtil[_0xacbfe6(0x114)](this['_fluffLookup'],_0x3587e4['source'],_0x3587e4[_0xacbfe6(0x14d)]),_0x2b7117={'fluff':_0x5ccd80};if(_0x2121cb[_0xacbfe6(0x16e)]!=null)_0x2b7117['quantity']=_0x2121cb['quantity'];await this[_0xacbfe6(0x183)](_0x3587e4);if(_0x2121cb[_0xacbfe6(0x13a)])return new ImportSummary({'status':UtilApplications[_0xacbfe6(0x111)],'imported':(await this[_0xacbfe6(0x154)](_0x3587e4,_0x2121cb,_0x2b7117))[_0xacbfe6(0xc1)](_0x2be24e=>new ImportedDocument({'document':_0x2be24e,'actor':this['_actor']}))});if(_0x2121cb[_0xacbfe6(0xfb)])return this[_0xacbfe6(0x13c)](_0x3587e4,_0x2121cb,_0x2b7117);if(this['_actor'])return this['_pImportEntry_pImportToActor'](_0x3587e4,_0x2121cb,_0x2b7117);return this[_0xacbfe6(0x13c)](_0x3587e4,_0x2121cb,_0x2b7117);}async[_0x5ca97a(0x183)](_0x2e49b7){const _0x5c5eb1=_0x5ca97a;if(BrewUtil[_0x5c5eb1(0xd3)](_0x2e49b7[_0x5c5eb1(0xec)]))return;if(SourceUtil[_0x5c5eb1(0x167)](_0x2e49b7[_0x5c5eb1(0xec)]))return;if(!Vetools[_0x5c5eb1(0x172)][_0x2e49b7[_0x5c5eb1(0xec)]])return;const _0x290945=DataUtil[_0x5c5eb1(0x119)][_0x5c5eb1(0x13b)](Vetools[_0x5c5eb1(0x172)][_0x2e49b7[_0x5c5eb1(0xec)]],Config[_0x5c5eb1(0x114)](_0x5c5eb1(0x178),_0x5c5eb1(0x116)));await BrewUtil[_0x5c5eb1(0x140)](await DataUtil[_0x5c5eb1(0x18b)](_0x290945),UrlUtil[_0x5c5eb1(0xc0)]()),await Renderer['item']['pGetItemsFromHomebrew'](await DataUtil[_0x5c5eb1(0x18b)](_0x290945));}async[_0x5ca97a(0x154)](_0x11b9c1,_0x125a8b,_0x7cb4aa){const _0x2cb3cc=_0x5ca97a;if(!this[_0x2cb3cc(0x15c)]||!this[_0x2cb3cc(0x121)](_0x11b9c1))return[await DataConverterItem['pGetItemItem'](_0x11b9c1)];const _0x449e73=await this[_0x2cb3cc(0xf3)](_0x11b9c1,_0x125a8b,_0x7cb4aa);return _0x449e73[_0x2cb3cc(0xc1)](({itemData:_0x3ca31e})=>_0x3ca31e);}[_0x5ca97a(0x121)](_0x387744){const _0x1c9a10=_0x5ca97a;return _0x387744[_0x1c9a10(0xde)]&&Config[_0x1c9a10(0x114)](this['_configGroup'],_0x1c9a10(0x11d))&&(!_0x387744[_0x1c9a10(0xc2)]||Config['get'](this['_configGroup'],_0x1c9a10(0x168)));}async[_0x5ca97a(0x185)](_0x3674fe,_0x18f97c,_0x5c3ade){const _0x2afd69=_0x5ca97a;_0x5c3ade={..._0x5c3ade,'isActorItem':!![]},_0x5c3ade[_0x2afd69(0x142)]=_0x18f97c['filterValues'],_0x5c3ade['sheetItemsAmmo']=this[_0x2afd69(0x13d)](_0x3674fe);let _0x5ab8d2;if(this[_0x2afd69(0x121)](_0x3674fe))_0x5ab8d2=await this['_pImportEntry_pImportToActor_pImportPackItem'](_0x3674fe,_0x18f97c,_0x5c3ade);else{const _0x43d439=await DataConverterItem[_0x2afd69(0x161)](_0x3674fe,_0x5c3ade),_0x260377=await this[_0x2afd69(0x148)]({'item':_0x3674fe,'itemData':_0x43d439});_0x5ab8d2=[_0x260377];}if(this[_0x2afd69(0x15c)][_0x2afd69(0xf1)])this['_actor'][_0x2afd69(0xe5)]['render']();return new ImportSummary({'status':UtilApplications[_0x2afd69(0x182)],'imported':_0x5ab8d2['map'](_0x4c5364=>new ImportedDocument({'name':_0x3674fe['name'],'actor':this[_0x2afd69(0x15c)],'embeddedDocument':_0x4c5364}))});}async[_0x5ca97a(0xf3)](_0xa48768,_0x217adc,_0x1617c8){const _0xdf88af=_0x5ca97a,_0x3bc763=[],_0x4d3d19=await Promise[_0xdf88af(0xea)](_0xa48768[_0xdf88af(0xde)][_0xdf88af(0xc1)](async _0x232a01=>{const _0x2a6364=_0xdf88af,_0x1f668a=_0x232a01[_0x2a6364(0x16e)]||0x1;if(_0x232a01[_0x2a6364(0x158)]||typeof _0x232a01==='string'){let [_0x12c519,_0x53712b]=(_0x232a01[_0x2a6364(0x158)]||_0x232a01)[_0x2a6364(0x16a)]('|');if(!_0x53712b)_0x53712b=SRC_DMG;const _0x467124=UrlUtil[_0x2a6364(0x118)][UrlUtil[_0x2a6364(0x17f)]]({'name':_0x12c519,'source':_0x53712b}),_0x2c8922=await Renderer[_0x2a6364(0x14c)][_0x2a6364(0x126)](UrlUtil['PG_ITEMS'],_0x53712b,_0x467124);return{'item':_0x2c8922,'itemData':await DataConverterItem[_0x2a6364(0x161)](_0x2c8922,{'filterValues':_0x217adc[_0x2a6364(0x142)],..._0x1617c8,'quantity':_0x1f668a})};}else{if(_0x232a01[_0x2a6364(0xe3)]){const _0x5aca55={'name':_0x232a01[_0x2a6364(0xe3)][_0x2a6364(0x115)](),'type':'G','source':_0xa48768[_0x2a6364(0xec)],'page':_0xa48768[_0x2a6364(0x181)],'srd':_0xa48768[_0x2a6364(0x162)]};return Renderer['item']['enhanceItem'](_0x5aca55),{'item':_0x5aca55,'itemData':await DataConverterItem['pGetItemItem'](_0x5aca55,{'filterValues':_0x217adc[_0x2a6364(0x142)],..._0x1617c8,'quantity':_0x1f668a})};}else _0x3bc763[_0x2a6364(0x166)](_0x2a6364(0x15a)+JSON['stringify'](_0x232a01)+'\x22');}}));return _0x3bc763[_0xdf88af(0x11b)]&&(ui['notifications']['error'](_0xdf88af(0xef)+_0xa48768['name']+_0xdf88af(0x135)+Parser[_0xdf88af(0x14b)](_0xa48768[_0xdf88af(0xec)])+_0xdf88af(0x165)+VeCt[_0xdf88af(0x149)]),console[_0xdf88af(0x10a)](...LGT,_0xdf88af(0xd9)+_0xa48768[_0xdf88af(0x14d)]+'\x20('+_0xa48768['source']+')\x20into\x20constituent\x20items:\x20'+_0x3bc763[_0xdf88af(0x184)](';\x20'))),_0x4d3d19[_0xdf88af(0x15b)](Boolean);}async[_0x5ca97a(0xe1)](_0x205e5a,_0x1a357a,_0x2518ff){const _0x3e5d0f=_0x5ca97a,_0x254499=await this['_pGetPackItemMetas'](_0x205e5a,_0x1a357a,_0x2518ff);return _0x254499[_0x3e5d0f(0x122)](({item:_0x1ce887,itemData:_0x1fdfa8})=>this['_pImportEntry_pImportToActor_pAddItem']({'item':_0x1ce887,'itemData':_0x1fdfa8}));}async[_0x5ca97a(0x148)]({item:_0x521746,itemData:_0x13ee30}){const _0x51f9fb=_0x5ca97a,_0xdb8c3e=await this[_0x51f9fb(0xd4)]({'item':_0x521746,'itemData':_0x13ee30});return this['_pImportEntry_pImportToActor_pUpdateItemPostAdd']({'itemData':_0x13ee30,'embeddedDocument':_0xdb8c3e});}async[_0x5ca97a(0xd4)]({item:_0x1fbcb2,itemData:_0x46c5fb}){const _0x30244e=_0x5ca97a,_0x1b6b5a=this['_pImportEntry_pImportToActor_getExistingStackableItem']({'item':_0x1fbcb2,'itemData':_0x46c5fb});if(!_0x1b6b5a)return(await UtilActors[_0x30244e(0xd8)](this['_actor'],[_0x46c5fb]))[0x0]['document'];const _0x7e09d4={'_id':_0x1b6b5a['id'],'data':{'quantity':(_0x1b6b5a[_0x30244e(0xca)]['data'][_0x30244e(0x16e)]||0x0)+(_0x46c5fb['data']['quantity']||0x0)}};return(await UtilDocuments[_0x30244e(0x143)](this['_actor'],[_0x7e09d4],{'ClsEmbed':Item}))[0x0][_0x30244e(0x160)];}[_0x5ca97a(0xc3)]({item:_0x256768,itemData:_0x3b9e00}){const _0x2a8e56=_0x5ca97a;if(Config[_0x2a8e56(0x114)](_0x2a8e56(0x14f),'inventoryStackingMode')===ConfigConsts[_0x2a8e56(0x174)])return null;const _0x2b87df=this['_actor']['items'][_0x2a8e56(0x17e)][_0x2a8e56(0xc9)](_0x5791c6=>{const _0x46c51e=_0x2a8e56,_0x59f230=!Config[_0x46c51e(0x114)](_0x46c51e(0x178),_0x46c51e(0x16d))||(UtilDataConverter[_0x46c51e(0xfc)](_0x5791c6)[_0x46c51e(0xec)]||'')[_0x46c51e(0xeb)]()===(UtilDataConverter['getItemSource'](_0x3b9e00)[_0x46c51e(0xec)]||'')[_0x46c51e(0xeb)]();if(!_0x59f230)return![];if(_0x5791c6['name']['toLowerCase']()[_0x46c51e(0x134)]()===_0x3b9e00['name'][_0x46c51e(0xeb)]()['trim']())return!![];return DataConverterItem[_0x46c51e(0x11e)](_0x256768)['some'](_0x531173=>_0x531173[_0x46c51e(0xeb)]()['trim']()===_0x5791c6[_0x46c51e(0x14d)][_0x46c51e(0xeb)]()[_0x46c51e(0x134)]());});if(!_0x2b87df)return null;if(Config[_0x2a8e56(0x114)](_0x2a8e56(0x14f),_0x2a8e56(0xc8))===ConfigConsts[_0x2a8e56(0x12c)])return _0x2b87df;if(Config[_0x2a8e56(0x114)](_0x2a8e56(0x14f),_0x2a8e56(0xc8))===ConfigConsts['C_ITEM_ATTUNEMENT_SMART']&&(this[_0x2a8e56(0xfe)]({'itemData':_0x3b9e00})||this[_0x2a8e56(0xdb)]({'itemData':_0x3b9e00})))return _0x2b87df;return null;}[_0x5ca97a(0xfe)]({itemData:_0x3155a9}){const _0x33c8cf=_0x5ca97a,_0x2e015c=new Set((Config[_0x33c8cf(0x114)](this['_configGroup'],_0x33c8cf(0xdd))||[])[_0x33c8cf(0xc1)](_0x987ab3=>_0x987ab3[_0x33c8cf(0x134)]()[_0x33c8cf(0xeb)]()));return _0x2e015c[_0x33c8cf(0x163)]((_0x3155a9[_0x33c8cf(0x14d)]||'')['toLowerCase']()[_0x33c8cf(0x134)]());}[_0x5ca97a(0xdb)]({itemData:_0x34870c}){const _0x9aa560=_0x5ca97a;return new Set(DataConverterItem[_0x9aa560(0x18a)])['has'](_0x34870c['type']);}async[_0x5ca97a(0xcf)]({itemData:_0x3926b9,embeddedDocument:_0x1cbdca}){const _0x3805e5=_0x5ca97a;if(!_0x1cbdca)return;return this[_0x3805e5(0xfe)]({'itemData':_0x3926b9})&&await UtilDocuments[_0x3805e5(0x143)](this[_0x3805e5(0x15c)],[{'_id':_0x1cbdca['id'],'data':{'consume':{'type':_0x3805e5(0x169),'target':_0x1cbdca['id'],'amount':0x1}}}],{'propData':_0x3805e5(0x102),'ClsEmbed':Item}),_0x1cbdca;}['_pImportEntry_pImportToDirectoryGeneric_pGetImportableData'](_0x5b4f02,_0xe048){const _0xc30cfb=_0x5ca97a;return DataConverterItem[_0xc30cfb(0x161)](_0x5b4f02,_0xe048);}[_0x5ca97a(0x13d)](_0x20a085){const _0x326d00=_0x5ca97a;if(!_0x20a085[_0x326d00(0xf2)])return null;if(!this['_actor'])return null;return this[_0x326d00(0x15c)]['items'][_0x326d00(0x15b)](_0x418f14=>_0x418f14['type']===_0x326d00(0x170)&&_0x418f14[_0x326d00(0xca)][_0x326d00(0xca)]['consumableType']===_0x326d00(0x169));}static[_0x5ca97a(0x16c)](_0x492920,_0x3f95c2){const _0x4eb396=_0x5ca97a;if(_0x492920['ammoType']&&!_0x3f95c2[_0x4eb396(0xf2)])return 0x1;if(!_0x492920[_0x4eb396(0xf2)]&&_0x3f95c2[_0x4eb396(0xf2)])return-0x1;return SortUtil[_0x4eb396(0x133)](_0x492920['name'],_0x3f95c2[_0x4eb396(0x14d)])||SortUtil[_0x4eb396(0x133)](Parser[_0x4eb396(0x18f)](_0x492920[_0x4eb396(0xec)]),Parser[_0x4eb396(0x18f)](_0x3f95c2['source']));}async[_0x5ca97a(0x10c)](_0xfa96a9,_0x15b5cf){const _0x2efdf3=_0x5ca97a;_0x15b5cf=_0x15b5cf||{},console[_0x2efdf3(0x18d)](...LGT,_0x2efdf3(0x189)+Parser[_0x2efdf3(0x106)](_0xfa96a9)+'\x22');const _0x3520a6=await DataConverterItem['pGetCurrencyItem'](_0xfa96a9,{'isAddPermission':!this['_actor']}),_0x1fee6a={'name':'Currency','source':VeCt['STR_GENERIC']};if(_0x15b5cf['isTemp'])return this[_0x2efdf3(0x13c)](_0x1fee6a,_0x15b5cf,null,{'docData':_0x3520a6,'isSkipDuplicateHandling':!![]});if(this[_0x2efdf3(0x15c)])return this[_0x2efdf3(0x185)](_0x1fee6a,_0x15b5cf,null,{'docData':_0x3520a6});return this[_0x2efdf3(0x13c)](_0x1fee6a,_0x15b5cf,null,{'docData':_0x3520a6,'isSkipDuplicateHandling':!![]});}static[_0x5ca97a(0xc7)](){const _0x188565=_0x5ca97a;Hooks['on'](_0x188565(0x10e),(_0x5d8313,_0x10b0ce,_0x2c74d3,_0x5c410e)=>{const _0x3dfe81=_0x188565;if(_0x5d8313[_0x3dfe81(0x17d)]?.[_0x3dfe81(0x14e)]!=='Actor')return;const _0x58d4c6=_0x10b0ce['flags']?.[SharedConsts['MODULE_NAME_FAKE']]||_0x10b0ce[_0x3dfe81(0xf9)]?.[SharedConsts[_0x3dfe81(0x131)]];if(_0x58d4c6?.[_0x3dfe81(0x129)]!==DataConverterItem['FLAG_TYPE_CURRENCY']||!_0x58d4c6?.[_0x3dfe81(0xd6)])return;const _0x1badc4=_0x5d8313[_0x3dfe81(0x17d)];return UtilActors[_0x3dfe81(0x157)]({'currency':_0x58d4c6['currency'],'actor':_0x1badc4})[_0x3dfe81(0x108)](null)['catch'](_0x5aaa9e=>{const _0x5942e1=_0x3dfe81;ui['notifications'][_0x5942e1(0x10a)](_0x5942e1(0x187)+VeCt[_0x5942e1(0x124)]);throw _0x5aaa9e;}),![];});}}ImportListItem[_0x5ca97a(0xe6)]=class extends ImportCustomizer{constructor(_0x463749,_0x594f25,_0x322906){const _0x20f4fe=_0x5ca97a;super(_0x463749,_0x594f25,{..._0x322906,'title':_0x20f4fe(0x137),'template':SharedConsts[_0x20f4fe(0x113)]+_0x20f4fe(0xf8)});}[_0x5ca97a(0x132)](){const _0x471d0b=_0x5ca97a;return{...super[_0x471d0b(0x132)](),'rows':this[_0x471d0b(0xe2)][_0x471d0b(0xc1)]((_0x172dc9,_0x583c17)=>({'name':_0x172dc9['name'],'source':_0x172dc9[_0x471d0b(0xec)],'sourceShort':Parser['sourceJsonToAbv'](_0x172dc9[_0x471d0b(0xec)]),'sourceLong':Parser[_0x471d0b(0x18f)](_0x172dc9[_0x471d0b(0xec)]),'sourceClassName':Parser[_0x471d0b(0x17c)](_0x172dc9[_0x471d0b(0xec)]),'sourceStyle':BrewUtil[_0x471d0b(0x15f)](_0x172dc9[_0x471d0b(0xec)]),'foundryTypes':DataConverterItem[_0x471d0b(0xd1)][_0x471d0b(0xc1)]((_0x10897a,_0x22c4e1)=>({'ix':_0x22c4e1,'type':_0x10897a,'displayName':game[_0x471d0b(0x110)]['localize'](_0x471d0b(0x146)+_0x10897a[_0x471d0b(0xcc)]())})),'ix':_0x583c17}))};}[_0x5ca97a(0x12a)]({$html:_0x2ab911}){const _0x2e754f=_0x5ca97a;this[_0x2e754f(0x112)]=new List({'$iptSearch':_0x2ab911['find'](_0x2e754f(0x173)),'$wrpList':_0x2ab911[_0x2e754f(0xc9)]('.veapp__list'),'valueNames':[_0x2e754f(0x14d),_0x2e754f(0xec),'ix']}),this['_list'][_0x2e754f(0xcb)](this[_0x2e754f(0xe2)],{'fnGetName':_0x314791=>_0x314791[_0x2e754f(0x14d)],'fnGetValues':_0x53a790=>({'source':_0x53a790[_0x2e754f(0xec)]}),'fnGetData':_0x200c5f=>{const _0x4c266c=_0x2e754f,_0x28154b=$(_0x200c5f[_0x4c266c(0x171)]);return{'$selFoundryType':_0x28154b[_0x4c266c(0xc9)](_0x4c266c(0x179))};}}),this[_0x2e754f(0x112)][_0x2e754f(0xf0)]();}['_activateListeners_bindControls']({$html:_0x495848,$wrpBtnsSort:_0x43901c}){const _0x5e4b05=_0x5ca97a;this['_$btnReset']=_0x495848[_0x5e4b05(0xc9)]('[name=\x22btn-reset\x22]')[_0x5e4b05(0x12f)](()=>{const _0x2a7ae2=_0x5e4b05;_0x495848[_0x2a7ae2(0xc9)](_0x2a7ae2(0x173))[_0x2a7ae2(0xda)]('');if(this['_list'])this[_0x2a7ae2(0x112)]['reset']();}),_0x495848['find'](_0x5e4b05(0x11a))['click'](async()=>{const _0x23aef5=_0x5e4b05,_0x524af7=this['_list'][_0x23aef5(0x102)][_0x23aef5(0xc1)](_0x518abb=>{const _0x584aea=_0x23aef5,_0x2c0f73=Number(_0x518abb[_0x584aea(0xca)][_0x584aea(0x15d)][_0x584aea(0xda)]());if(!~_0x2c0f73)return this[_0x584aea(0xe2)][_0x518abb['ix']];const _0x377f4e=MiscUtil[_0x584aea(0x18e)](this[_0x584aea(0xe2)][_0x518abb['ix']]);return _0x377f4e[_0x584aea(0xdc)]=DataConverterItem[_0x584aea(0xd1)][_0x2c0f73],_0x377f4e;});this[_0x23aef5(0x127)](_0x524af7),this[_0x23aef5(0x139)]();});}};export{ImportListItem};