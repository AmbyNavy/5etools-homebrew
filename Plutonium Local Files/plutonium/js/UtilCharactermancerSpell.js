const _0x27c741=_0x99b5;(function(_0x52104d,_0x373a72){const _0xc0ed66=_0x99b5,_0x460b39=_0x52104d();while(!![]){try{const _0xba1d5e=parseInt(_0xc0ed66(0x1ed))/0x1*(-parseInt(_0xc0ed66(0x1b2))/0x2)+-parseInt(_0xc0ed66(0x1a1))/0x3+parseInt(_0xc0ed66(0x27c))/0x4+parseInt(_0xc0ed66(0x196))/0x5*(-parseInt(_0xc0ed66(0x22e))/0x6)+parseInt(_0xc0ed66(0x22a))/0x7*(-parseInt(_0xc0ed66(0x278))/0x8)+-parseInt(_0xc0ed66(0x183))/0x9+-parseInt(_0xc0ed66(0x1de))/0xa*(-parseInt(_0xc0ed66(0x252))/0xb);if(_0xba1d5e===_0x373a72)break;else _0x460b39['push'](_0x460b39['shift']());}catch(_0x577386){_0x460b39['push'](_0x460b39['shift']());}}}(_0x4dbd,0x81fe9));import{Config}from'./Config.js';import{SharedConsts}from'../shared/SharedConsts.js';import{UtilActors}from'./UtilActors.js';function _0x99b5(_0x4a672c,_0x20b749){const _0x4dbde5=_0x4dbd();return _0x99b5=function(_0x99b55a,_0x476b7f){_0x99b55a=_0x99b55a-0x174;let _0x329ede=_0x4dbde5[_0x99b55a];return _0x329ede;},_0x99b5(_0x4a672c,_0x20b749);}import{UtilApplications}from'./UtilApplications.js';function _0x4dbd(){const _0x19f41d=['fixedLearnedProgressionDefault','canPrepareMore_','alwaysKnownSpellsBackground','then','_getExistingSpellLookup_isOnSpellList','pGetUserInput','pInitFilterBox','copy','.manc-sp__btn-learn-spell','_$dispNoRows','page','<div\x20class=\x22fltr__mini-view\x20btn-group\x22></div>','2588586ORRyIN','list-multi-selected','_$wrpsPreparedLearned','isAlwaysPrepared','228RnOfPC','isLearned','getItemSource','getSpellsKnown','_existingCasterMeta','brewSubclassSpells','slug','spells','level','spellcastingAbility','PACT_CASTER_MAX_SPELL_LEVEL','<div\x20class=\x22ve-flex-vh-center\x20italic\x20ve-muted\x20ve-small\x20mt-1\x22>No\x20matching\x20spells</div>','maxLevel','</div>\x0a\x09\x09\x09<div\x20class=\x22col-1-2\x20text-center\x20','_render_pFilterBox','preventDefault','bindTypingEnd','toggle','alwaysPreparedSpellsSubclass','html','flat','alwaysPreparedSpellsBackground','_existingSpellLookup','init','shortName','spellLevelLow','EVNT_VALCHANGE','toggleVe','handleFilterChange','ixPrepared','expandedSpellsSubclass','some','search','spLevelToFullLevelText','fixedLearnedProgression','_cacheSelectedListItem','24753058YCXbhL','_className','mode','actor','expandedSpellsRace','pInit','addHookIsMaxPrepared','hover','MIN_SAFE_INTEGER','handleAlwaysKnownSpells_','trim','getCombinedClasses','addHookIsMaxLearnedCantrips','maxPrepared','isAlwaysPreparedSpell_','pulseFixedLearned','\x22\x20title=\x22','addHookMaxLearnedCantrips','_IMPORT_LIST_SPELL','pSetSpellItemIsPrepared','canLearnMoreCantrips_','text','subclassShortName','subclassName','_isAvailableSpell','ExistingSpell','manc-sp__is-max-learned-spells','isAvailableClassSpell_','dataset','cntPrepared','disabled','length','Prepare','bind','addHookSpellLevelHigh','casterProgression','alwaysKnownSpellsClass','addHookIsPreparedCaster','16pTqMRN','school','MAX_SAFE_INTEGER','searchText','4052372bwloNY','_parent','_getCntSpellsKnown','parent','<div\x20class=\x22ve-flex-col\x20h-100\x20w-50\x22></div>','ixViewedSpell','isAlwaysKnownSpell_','cntLearnedCantrips','_getTotalSpellsKnown','_subclassSource','classSource','subSubclass','Select\x20Cantrips','items','_spellLevel','_$wrpRows','.manc-sp__btn-learn-cantrip','click','.manc-sp__btn-prepare','spellLevel','sourceJsonToFull','<div\x20class=\x22py-1\x20clickable\x20ve-muted\x22>[‒]</div>','querySelectorAll','_isWithinLevelRange','_list','cacheSelectedListItem','manc-sp__is-max-prepared-spells','isOverPrepareLimit_','_hasBrewClassSpell','_compsLevel','addHookIsMaxLearnedSpells','_canLearnMoreFixedSpellsOfLevel','isOverLearnCantripsLimit_','\x0a\x09\x09\x09</div>\x0a\x09\x09','[‒]','manc-sp__is-max-learned-spells--is-over-limit','expandedSpellsBackground','spellLevelHigh','sum','ixAlwaysKnownSpell','alwaysPreparedSpellsRace','_getSpellUid','remove','_cacheFilterValues','_lastSearchTermSpells','ve-flex-v-center\x20manc__list-row\x20clickable\x20veapp__list-row\x20veapp__list-row-hoverable','maxPreparedSpells','_isConc','_getExistingSpellLookup','_actor','isAvailableSubclassSpell_','_getBrewClassSubclassSpellCache_addItem','stringToSlug','_render_bindLevelledSpellHooks','toggleClass','btn-learn-cantrip','_handleAlwaysKnownSpells','join','fromSubclass','spSchoolAbvToStyle','source','ixAlwaysPrepared','addHookFixedLearnedProgression','_getMappedClassDetails','$wrpsPreparedLearned','alwaysKnownSpellsRace','_getListItem','keyup','manc-sp__is-learn-caster','\x22\x0a\x09\x09\x09\x09\x09name=\x22btn-prepare\x22\x0a\x09\x09\x09\x09\x09title=\x22','_getSpellDataLookup','addItem','sourceJsonToAbv','ixLearned','6046758MCjYRB','className','btnPrepare','_getProps','existingClass','alwaysPreparedSpellsClass','item','sourceJsonToStyle','Ranger','plut-is-existing-spell','_normalisedTime','isOverLearnFixedSpellsLimitOfLevel_','spell','filter','subschools','_isLearnedFixedSpellCasterAtLevel','existingCasterMeta','manc-sp__is-prepared-caster','toLowerCase','4745IuIehp','val','sort','filterBox','type','innerHTML','_subclassName','appendTo','empty','set','<button\x0a\x09\x09\x09\x09\x09class=\x22btn\x20manc__list-row-button\x20manc-sp__btn-prepare\x20','1400337ZTAzIq','_resetLevelSpells','fromClassList','brewSubSubclassSpells','contains','spSchoolAndSubschoolsAbvsShort','visibleItems','_handleAlwaysStateSpells_','(Previously\x20Added\x20Spell)','_spellDataLookup','active','pApplyFormDataToActor','_getFormSubData_getSpellImportOpts','_addHookBase','toDisplay','_existingClass','getFormSubData','18wVFgFN','button','stopPropagation','classList','map','_handleListItemBtnLearnClick_doFixed','handleAlwaysPreparedSpells_','usesMax','hideVe','expandedSpellsClass','\x0a\x09\x09\x09\x09\x09','subSubclassName','parentClassSource','data-plut-is-existing-spell=\x22true\x22','handleSearch','spSchoolAbvToFull','_spellDatas','modalTitle','usesPer','div','get','_classSource','getMaxWindowHeight','isLearnedFixedSpellCasterAtLevel_','<button\x20class=\x22btn\x20btn-5et\x22\x20title=\x22Toggle\x20Filter\x20Summary\x20Display\x22><span\x20class=\x22glyphicon\x20glyphicon-resize-small\x22></span></button>','constructor','subclassSource','Unhandled\x20button\x20name:\x20\x22','alwaysKnownSpellsSubclass','parentClassName','_cacheBrewClassSpells','pGetImportCompApplicationFormData','_pageFilter','includes','_normalisedRange','push','range','isIncludeUaEtcSpellLists','[+]','name','<button\x20class=\x22btn-5et\x20veapp__btn-list-reset\x22>Reset</button>','./ImportListSpell.js','isPreparedCaster','Cantrips\x20learned:\x20','10XfKHbw','<button\x20class=\x22btn-5et\x20veapp__btn-filter\x22>Filter</button>','meta','render','cntLearnedSpells','pGetFormData','spRangeToFull','getCleanSearchTerm','<i\x20class=\x22ve-muted\x20text-center\x22>Select\x20a\x20spell\x20to\x20view\x20it\x20here.</i>','\x22\x0a\x09\x09\x09\x09\x09','time','subclass','\x0a\x09\x09\x09\x09>Learn</button>\x0a\x0a\x09\x09\x09\x09','always','pageFilter','90735NhnRzU','<div\x20class=\x22ve-flex-v-stretch\x20input-group\x20no-shrink\x22>\x0a\x09\x09\x09<button\x20class=\x22btn-5et\x20btn-xxs\x20col-3-2\x20pr-1\x20sort\x22\x20data-sort=\x22name\x22>Name</button>\x0a\x09\x09\x09<button\x20class=\x22btn-5et\x20btn-xxs\x20col-1-2\x20px-1\x20sort\x22\x20data-sort=\x22time\x22>Time</button>\x0a\x09\x09\x09<button\x20class=\x22btn-5et\x20btn-xxs\x20col-1-2\x20px-1\x20sort\x22\x20data-sort=\x22school\x22>School</button>\x0a\x09\x09\x09<button\x20class=\x22btn-5et\x20btn-xxs\x20col-0-5\x20px-1\x20sort\x22\x20data-sort=\x22concentration\x22\x20title=\x22Concentration\x22>C.</button>\x0a\x09\x09\x09<button\x20class=\x22btn-5et\x20btn-xxs\x20col-0-5\x20px-1\x20sort\x22\x20data-sort=\x22ritual\x22\x20title=\x22Ritual\x22>R.</button>\x0a\x09\x09\x09<button\x20class=\x22btn-5et\x20btn-xxs\x20col-2-6\x20px-1\x20sort\x22\x20data-sort=\x22range\x22>Range</button>\x0a\x09\x09\x09<button\x20class=\x22btn-5et\x20btn-xxs\x20col-1-2\x20px-1\x20sort\x22\x20data-sort=\x22source\x22>Source</button>\x0a\x09\x09\x09<button\x20class=\x22btn-5et\x20btn-xxs\x20col-1-6\x20pl-1\x22\x20disabled>&nbsp;</button>\x0a\x09\x09</div>','ix_learned_','_getDefaultState','pact','isPrepared','preparation','atwill','\x0a\x09\x09\x09<div\x20class=\x22col-3-2\x20pl-0\x22>','existingItemId','flags','getExistingSpellMeta_','forEach','<div\x20class=\x22mx-1\x22>—</div>','ritual','fromClassListVariant','createElement','usesCurrent','MODULE_NAME_FAKE','pRender','sourceJsonToColor','\x22\x0a\x09\x09\x09\x09\x09name=\x22','_CLASS_MAP','$getHoverContent_stats','_handleListItemBtnLearnClick_do_doLearn','append','</div>\x0a\x09\x09\x09<div\x20class=\x22col-2-6\x20text-right\x22>','_hasBrewSubclassSpell','spellDatas','</div>\x0a\x09\x09\x09<div\x20class=\x22col-0-5\x20text-center\x20bold\x20imp-sp__disp-ritual\x22\x20title=\x22Ritual\x22>','data','initBtnSortHandlers','\x20text-center\x22\x20title=\x22','hash','maxLearnedCantrips','_subclassShortName','_handleAlwaysPreparedSpells','getMaxWindowWidth','definedInSource','ix_always_known_spell_','_state','isAvailableExpandedSpell_','_getBrewClassSubclassSpellCache','addHookSpellLevelLow','_render_bindCantripHooks','canLearnMoreFixedSpellsOfLevel_','updated','prepared','class'];_0x4dbd=function(){return _0x19f41d;};return _0x4dbd();}import{Util}from'./Util.js';import{DataConverterSpell}from'./DataConverterSpell.js';import{UtilDataConverter}from'./UtilDataConverter.js';class Charactermancer_Spell_SpellMeta{constructor({ix:_0x265f3d,spell:_0x4d7f1a,isPrepared:_0x10f435,isLearned:_0x5b9b56,isUpdateOnly:_0x226136,existingItemId:_0x411ff0,preparationMode:_0x438d40,usesCurrent:_0x58c1c8,usesMax:_0x21d18f,usesPer:_0x23800d}){const _0x4d5545=_0x99b5;this['ix']=_0x265f3d,this[_0x4d5545(0x18f)]=_0x4d7f1a,this[_0x4d5545(0x1f2)]=_0x10f435,this['isLearned']=_0x5b9b56,this['isUpdateOnly']=_0x226136,this[_0x4d5545(0x1f6)]=_0x411ff0,this['preparationMode']=_0x438d40,this[_0x4d5545(0x1fe)]=_0x58c1c8,this[_0x4d5545(0x1b9)]=_0x21d18f,this[_0x4d5545(0x1c4)]=_0x23800d;}}class Charactermancer_Spell extends BaseComponent{static async[_0x27c741(0x1ac)](_0x2805fb,_0x466280,{cls:_0xae92b0,sc:_0x479a2d}){const _0x4c4835=_0x27c741,_0xd366bd=_0x466280?.['data']?.[_0x4c4835(0x235)]||[];for(let _0x4d78d2=0x0;_0x4d78d2<_0xd366bd[_0x4c4835(0x271)];++_0x4d78d2){const {spell:_0x2859bb,isPrepared:_0x38b45a,isUpdateOnly:_0x3a04ea,existingItemId:_0x1ca10d,preparationMode:_0x451968,usesCurrent:_0x2ddcfb,usesMax:_0x27f9bb,usesPer:_0x46a5c1,castAtLevel:_0x574c1d}=_0xd366bd[_0x4d78d2];if(_0x3a04ea&&_0x1ca10d){await DataConverterSpell[_0x4c4835(0x265)](_0x2805fb[_0x4c4835(0x289)][_0x4c4835(0x1c6)](_0x1ca10d),_0x38b45a);continue;}if(!Charactermancer_Spell[_0x4c4835(0x264)]||Charactermancer_Spell['_IMPORT_LIST_SPELL']['actor']!==_0x2805fb){const {ImportListSpell:_0x2fd2a9}=await import(_0x4c4835(0x1db));Charactermancer_Spell[_0x4c4835(0x264)]=new _0x2fd2a9({'actor':_0x2805fb}),await Charactermancer_Spell[_0x4c4835(0x264)][_0x4c4835(0x257)]();}await Charactermancer_Spell[_0x4c4835(0x264)]['pImportEntry'](_0x2859bb,{'isCharactermancer':!![],'opts_pGetSpellItem':{'isActorItem':!![],'isPrepared':_0x38b45a,'abilityAbv':_0x479a2d?.[_0x4c4835(0x237)]||_0xae92b0['spellcastingAbility'],'preparationMode':_0x451968,'usesCurrent':_0x2ddcfb,'usesMax':_0x27f9bb,'usesPer':_0x46a5c1,'castAtLevel':_0x574c1d,'parentClassName':_0xae92b0['name'],'parentClassSource':_0xae92b0[_0x4c4835(0x175)],'parentSubclassName':_0x479a2d?.['name'],'parentSubclassShortName':_0x479a2d?.[_0x4c4835(0x246)],'parentSubclassSource':_0x479a2d?.[_0x4c4835(0x175)]}});}}constructor(_0x5bc582){const _0x4ecf77=_0x27c741;_0x5bc582=_0x5bc582||{},super(),this[_0x4ecf77(0x2ad)]=_0x5bc582[_0x4ecf77(0x255)],this['_existingClass']=_0x5bc582[_0x4ecf77(0x187)],this[_0x4ecf77(0x232)]=_0x5bc582[_0x4ecf77(0x193)],this['_spellDatas']=_0x5bc582['spellDatas'],this['_className']=_0x5bc582[_0x4ecf77(0x184)],this[_0x4ecf77(0x1c7)]=_0x5bc582[_0x4ecf77(0x286)],this[_0x4ecf77(0x19c)]=_0x5bc582[_0x4ecf77(0x269)],this[_0x4ecf77(0x210)]=_0x5bc582[_0x4ecf77(0x268)],this[_0x4ecf77(0x285)]=_0x5bc582[_0x4ecf77(0x1cc)],this[_0x4ecf77(0x299)]=[...new Array(_0x5bc582[_0x4ecf77(0x23a)]!=null?_0x5bc582[_0x4ecf77(0x23a)]+0x1:0xa)][_0x4ecf77(0x1b6)]((_0x57b682,_0x5e29bc)=>new Charactermancer_Spell_Level({'spellDatas':_0x5bc582[_0x4ecf77(0x209)],'spellLevel':_0x5e29bc,'parent':this})),this[_0x4ecf77(0x1d2)]=_0x5bc582[_0x4ecf77(0x1ec)],this[_0x4ecf77(0x22c)]=_0x5bc582[_0x4ecf77(0x179)],this[_0x4ecf77(0x1aa)]=this[_0x4ecf77(0x17f)](),this[_0x4ecf77(0x244)]=this[_0x4ecf77(0x2ac)](),this['_cacheSelectedListItem']=null,this['_cacheFilterValues']=null,this[_0x4ecf77(0x1d0)]=Charactermancer_Spell[_0x4ecf77(0x217)](_0x5bc582['brewClassSpells'],_0x5bc582[_0x4ecf77(0x233)],_0x5bc582[_0x4ecf77(0x1a4)]);}['_getSpellDataLookup'](){const _0x25ae2a=_0x27c741,_0x1de1bf={'hash':{},'slug':{}};return this[_0x25ae2a(0x1c2)][_0x25ae2a(0x1f9)](_0x50e56d=>{const _0x906681=_0x25ae2a;MiscUtil[_0x906681(0x19f)](_0x1de1bf,_0x906681(0x20e),UrlUtil['URL_TO_HASH_BUILDER'][UrlUtil['PG_SPELLS']](_0x50e56d),_0x50e56d),MiscUtil['set'](_0x1de1bf,_0x906681(0x234),Parser['stringToSlug'](Parser[_0x906681(0x181)](_0x50e56d[_0x906681(0x175)])),Parser['stringToSlug'](_0x50e56d[_0x906681(0x1d9)]),_0x50e56d);}),_0x1de1bf;}[_0x27c741(0x2ac)](){const _0x14614e=_0x27c741;if(!this[_0x14614e(0x1b0)]||!this['_existingCasterMeta'])return null;const _0x84c12d=this['_actor'][_0x14614e(0x289)][_0x14614e(0x190)](_0x52750d=>_0x52750d[_0x14614e(0x19a)]==='spell'),_0x27916c={},_0x486595={},_0xcdcb7d={};return[..._0x84c12d][_0x14614e(0x198)]((_0x40ca94,_0x431fad)=>{const _0x142f91=_0x14614e,_0x457a81=_0x40ca94[_0x142f91(0x20b)][_0x142f91(0x1f7)]?.[SharedConsts['MODULE_NAME_FAKE']],_0x18e4af=_0x431fad[_0x142f91(0x20b)][_0x142f91(0x1f7)]?.[SharedConsts[_0x142f91(0x1ff)]],_0x4c0676=_0x457a81?.[_0x142f91(0x1cf)]&&_0x457a81?.['parentClassSource']?0x1:0x0,_0x495d38=_0x18e4af?.[_0x142f91(0x1cf)]&&_0x18e4af?.[_0x142f91(0x1be)]?0x1:0x0;return _0x495d38-_0x4c0676;})['forEach'](_0x24c53c=>{const _0x3a7f63=_0x14614e,_0x2558d3=Number(_0x24c53c[_0x3a7f63(0x20b)][_0x3a7f63(0x20b)][_0x3a7f63(0x236)]||0x0),_0x22efda=(_0x24c53c[_0x3a7f63(0x1d9)]||'')[_0x3a7f63(0x25c)]()[_0x3a7f63(0x195)](),_0x8bc14f=UtilDataConverter[_0x3a7f63(0x230)](_0x24c53c),_0x267e57=(_0x8bc14f[_0x3a7f63(0x175)]||'')[_0x3a7f63(0x195)](),_0x7f7b2a=_0x24c53c[_0x3a7f63(0x20b)][_0x3a7f63(0x1f7)]?.[SharedConsts[_0x3a7f63(0x1ff)]],_0x1470a1=_0x7f7b2a?.[_0x3a7f63(0x1cf)],_0x15cd98=_0x7f7b2a?.[_0x3a7f63(0x1be)],_0x2c408e=_0x24c53c['data'][_0x3a7f63(0x20b)][_0x3a7f63(0x1f3)]?.['mode']==='prepared'&&_0x24c53c[_0x3a7f63(0x20b)][_0x3a7f63(0x20b)][_0x3a7f63(0x1f3)]?.['prepared'],_0x54e948=_0x24c53c['data']['data']['preparation']?.[_0x3a7f63(0x254)]===_0x3a7f63(0x1eb);if(_0x1470a1&&_0x15cd98&&_0x1470a1!==this[_0x3a7f63(0x1b0)][_0x3a7f63(0x1d9)]&&_0x15cd98!==this[_0x3a7f63(0x1b0)][_0x3a7f63(0x175)])return;if(_0x1470a1&&_0x15cd98&&_0x1470a1===this[_0x3a7f63(0x1b0)][_0x3a7f63(0x1d9)]&&_0x15cd98===this[_0x3a7f63(0x1b0)]['source']){const _0xf72559=_0x2558d3===0x0||_0x2558d3!==0x0&&this[_0x3a7f63(0x232)][_0x3a7f63(0x250)]!=null,_0xa8d749=this[_0x3a7f63(0x232)][_0x3a7f63(0x2aa)]!=null&&_0x2c408e;if(_0xf72559)_0x27916c[_0x2558d3]=(_0x27916c[_0x2558d3]||0x0)+0x1;if(_0xa8d749)_0x486595[_0x2558d3]=(_0x486595[_0x2558d3]||0x0)+0x1;MiscUtil['set'](_0xcdcb7d,_0x2558d3,_0x267e57,_0x22efda,new Charactermancer_Spell[(_0x3a7f63(0x26b))]({'item':_0x24c53c,'isLearned':_0xf72559,'isPrepared':_0xa8d749,'isAlwaysPrepared':_0x54e948}));return;}const _0x318de3=_0x2558d3===0x0||(_0x24c53c[_0x3a7f63(0x20b)][_0x3a7f63(0x20b)][_0x3a7f63(0x1f3)]?.[_0x3a7f63(0x254)]===_0x3a7f63(0x21c)||_0x24c53c['data'][_0x3a7f63(0x20b)][_0x3a7f63(0x1f3)]?.[_0x3a7f63(0x254)]===_0x3a7f63(0x1f1)),_0x304b9a=_0x2558d3===0x0?_0x318de3&&this[_0x3a7f63(0x232)][_0x3a7f63(0x20f)]!=null&&(_0x27916c[_0x2558d3]||0x0)<this['_existingCasterMeta'][_0x3a7f63(0x20f)]:_0x318de3&&this[_0x3a7f63(0x29b)]({'lvl':_0x2558d3,'fixedLearnedProgression':this[_0x3a7f63(0x232)][_0x3a7f63(0x250)],'cntSpellsKnown':_0x27916c[_0x2558d3]||0x0}),_0x1e74b5=_0x2c408e&&this[_0x3a7f63(0x232)][_0x3a7f63(0x2aa)]!=null&&(_0x486595[_0x2558d3]||0x0)<this[_0x3a7f63(0x232)]['maxPreparedSpells'];if(!this[_0x3a7f63(0x222)](_0x24c53c))return;if(!_0x304b9a&&this[_0x3a7f63(0x192)]({'lvl':_0x2558d3,'fixedLearnedProgression':this[_0x3a7f63(0x232)]['fixedLearnedProgression']}))return;if(_0x304b9a)_0x27916c[_0x2558d3]=(_0x27916c[_0x2558d3]||0x0)+0x1;if(_0x1e74b5)_0x486595[_0x2558d3]=(_0x486595[_0x2558d3]||0x0)+0x1;MiscUtil[_0x3a7f63(0x19f)](_0xcdcb7d,_0x2558d3,_0x267e57,_0x22efda,new Charactermancer_Spell[(_0x3a7f63(0x26b))]({'item':_0x24c53c,'isLearned':_0x304b9a,'isPrepared':_0x1e74b5,'isAlwaysPrepared':_0x54e948}));}),_0xcdcb7d;}[_0x27c741(0x222)](_0x9344f9){const _0x308c14=_0x27c741,_0x267b46=_0x9344f9[_0x308c14(0x20b)]['flags']?.[SharedConsts[_0x308c14(0x1ff)]];if(_0x267b46?.[_0x308c14(0x228)]&&_0x267b46?.[_0x308c14(0x175)]&&_0x267b46?.[_0x308c14(0x20e)]){const _0x1999d9=this[_0x308c14(0x1aa)]['hash'][_0x267b46[_0x308c14(0x20e)]];if(!_0x1999d9)return![];return this['isAvailableClassSpell_'](_0x1999d9)||this['isAvailableSubclassSpell_'](_0x1999d9)||this[_0x308c14(0x216)](_0x1999d9);}const _0x3095a6=UtilDataConverter[_0x308c14(0x230)](_0x9344f9)[_0x308c14(0x175)]||SRC_PHB,_0x4cd564=_0x9344f9[_0x308c14(0x1d9)]['trim']()['replace'](/\s+/g,'\x20')['toLowerCase'](),_0x516a78=MiscUtil[_0x308c14(0x1c6)](this[_0x308c14(0x1aa)][_0x308c14(0x234)],Parser[_0x308c14(0x2b0)](_0x3095a6),Parser['stringToSlug'](_0x4cd564));if(!_0x516a78)return![];return this[_0x308c14(0x26d)](_0x516a78)||this[_0x308c14(0x2ae)](_0x516a78)||this[_0x308c14(0x216)](_0x516a78);}static['_getBrewClassSubclassSpellCache'](_0x406273,_0x3799d4,_0xe8cbc1){const _0x3b87a2=_0x27c741,_0x665f60={};return(_0x406273||[])[_0x3b87a2(0x1f9)](_0x59eee2=>this[_0x3b87a2(0x2af)](_0x665f60,_0x59eee2)),(_0x3799d4||[])[_0x3b87a2(0x1f9)](_0x518464=>this['_getBrewClassSubclassSpellCache_addItem'](_0x665f60,_0x518464)),(_0xe8cbc1||[])[_0x3b87a2(0x1f9)](_0x23434a=>this[_0x3b87a2(0x2af)](_0x665f60,_0x23434a)),_0x665f60;}static[_0x27c741(0x2af)](_0x12423d,_0x5d10e0){const _0x185122=_0x27c741;if(typeof _0x5d10e0==='string')MiscUtil[_0x185122(0x19f)](_0x12423d,_0x185122(0x18f),SRC_PHB[_0x185122(0x195)](),_0x5d10e0[_0x185122(0x25c)]()[_0x185122(0x195)](),!![]);else{if(_0x5d10e0[_0x185122(0x1d9)])MiscUtil['set'](_0x12423d,_0x185122(0x18f),(_0x5d10e0[_0x185122(0x175)]||SRC_PHB)['trim']()[_0x185122(0x195)](),_0x5d10e0[_0x185122(0x1d9)][_0x185122(0x25c)]()[_0x185122(0x195)](),!![]);else{if(_0x5d10e0['className']){let _0x12d570=_0x185122(0x21d);const _0x5576e6=_0x5d10e0[_0x185122(0x286)]||SRC_PHB,_0x448c6f=[_0x5576e6,_0x5d10e0[_0x185122(0x184)]];if(_0x5d10e0['subclassName']){_0x12d570=_0x185122(0x1e9);const _0x5e4e25=_0x5d10e0[_0x185122(0x1cc)]||_0x5576e6;_0x448c6f['push'](_0x5e4e25,_0x5d10e0[_0x185122(0x269)]),_0x5d10e0[_0x185122(0x1bd)]&&(_0x12d570=_0x185122(0x287),_0x448c6f[_0x185122(0x1d5)](_0x5d10e0[_0x185122(0x1bd)]));}MiscUtil[_0x185122(0x19f)](_0x12423d,_0x12d570,..._0x448c6f['map'](_0x526e0d=>_0x526e0d['trim']()['toLowerCase']()),!![]);}}}}get['pageFilter'](){const _0x1caea1=_0x27c741;return this[_0x1caea1(0x1d2)];}set[_0x27c741(0x269)](_0x418a08){const _0x24b445=_0x27c741;this[_0x24b445(0x19c)]=_0x418a08;}set[_0x27c741(0x268)](_0x2155f0){const _0x532833=_0x27c741;this[_0x532833(0x210)]=_0x2155f0;}set[_0x27c741(0x1cc)](_0x15b812){this['_subclassSource']=_0x15b812;}get[_0x27c741(0x295)](){const _0x3125b5=_0x27c741;return this[_0x3125b5(0x251)];}set['cacheSelectedListItem'](_0x15c89e){const _0xe28c34=_0x27c741;this[_0xe28c34(0x251)]=_0x15c89e;}get[_0x27c741(0x1dc)](){const _0x5b6481=_0x27c741;return this[_0x5b6481(0x215)]['maxPrepared']!=null;}set['spellLevelLow'](_0x36d9e1){const _0xb7e814=_0x27c741;this[_0xb7e814(0x215)][_0xb7e814(0x247)]=_0x36d9e1;}get[_0x27c741(0x247)](){const _0xe12e31=_0x27c741;return this[_0xe12e31(0x215)][_0xe12e31(0x247)];}set[_0x27c741(0x2a1)](_0x381165){const _0x241ae6=_0x27c741;this[_0x241ae6(0x215)][_0x241ae6(0x2a1)]=_0x381165;}get[_0x27c741(0x2a1)](){const _0x37dee4=_0x27c741;return this['_state'][_0x37dee4(0x2a1)];}get[_0x27c741(0x281)](){const _0x1858f7=_0x27c741;return this['_state'][_0x1858f7(0x281)];}set[_0x27c741(0x281)](_0x3bf86e){const _0x2c61e7=_0x27c741;this[_0x2c61e7(0x215)][_0x2c61e7(0x281)]=_0x3bf86e;}get[_0x27c741(0x20f)](){const _0x38e4fd=_0x27c741;return this[_0x38e4fd(0x215)]['maxLearnedCantrips'];}set[_0x27c741(0x20f)](_0x4c2dd4){const _0x3bd2b6=_0x27c741;this[_0x3bd2b6(0x215)][_0x3bd2b6(0x20f)]=_0x4c2dd4;}get[_0x27c741(0x250)](){const _0x7e85d8=_0x27c741;return this[_0x7e85d8(0x215)][_0x7e85d8(0x250)];}set['fixedLearnedProgression'](_0x44a452){const _0x2f498e=_0x27c741;this[_0x2f498e(0x215)][_0x2f498e(0x250)]=_0x44a452;}get[_0x27c741(0x21e)](){const _0xf755a4=_0x27c741;return this[_0xf755a4(0x215)][_0xf755a4(0x21e)];}set[_0x27c741(0x21e)](_0x23eae0){const _0x516b7d=_0x27c741;this[_0x516b7d(0x215)][_0x516b7d(0x21e)]=_0x23eae0;}get[_0x27c741(0x261)](){const _0x195939=_0x27c741;return this[_0x195939(0x215)][_0x195939(0x261)];}set[_0x27c741(0x261)](_0x3b3c54){const _0x74032f=_0x27c741;this[_0x74032f(0x215)][_0x74032f(0x261)]=_0x3b3c54;}set[_0x27c741(0x25f)](_0x43ae54){const _0x524b54=_0x27c741;this['_state'][_0x524b54(0x25f)]=_0x43ae54;if(_0x43ae54!=null)this[_0x524b54(0x215)]['maxLearned']=null;}get['cntLearnedSpells'](){const _0x4fe6d7=_0x27c741;return this['_state'][_0x4fe6d7(0x1e2)];}set[_0x27c741(0x1e2)](_0x32b6f1){const _0x45f75c=_0x27c741;this[_0x45f75c(0x215)][_0x45f75c(0x1e2)]=_0x32b6f1;}get[_0x27c741(0x283)](){const _0x5da65e=_0x27c741;return this['_state'][_0x5da65e(0x283)];}set['cntLearnedCantrips'](_0x240f9c){const _0x9fa320=_0x27c741;this[_0x9fa320(0x215)][_0x9fa320(0x283)]=_0x240f9c;}get[_0x27c741(0x26f)](){const _0x4ac38e=_0x27c741;return this['_state'][_0x4ac38e(0x26f)];}set['cntPrepared'](_0x5a0d50){const _0x31a2f2=_0x27c741;this[_0x31a2f2(0x215)][_0x31a2f2(0x26f)]=_0x5a0d50;}get[_0x27c741(0x275)](){const _0x188bc7=_0x27c741;return this['_state'][_0x188bc7(0x275)];}set[_0x27c741(0x275)](_0x42ea12){const _0x141eb8=_0x27c741;this[_0x141eb8(0x215)]['casterProgression']=_0x42ea12;}set[_0x27c741(0x1d7)](_0x5b4d3b){const _0x3f4b10=_0x27c741;this['_state'][_0x3f4b10(0x1d7)]=_0x5b4d3b;}['addHookMaxLearnedCantrips'](_0x50f08a){const _0x5a7902=_0x27c741;this[_0x5a7902(0x1ae)](_0x5a7902(0x20f),_0x50f08a);}[_0x27c741(0x218)](_0x1d4049){const _0x52f983=_0x27c741;this['_addHookBase'](_0x52f983(0x247),_0x1d4049);}[_0x27c741(0x274)](_0x3ff1b5){const _0x14372f=_0x27c741;this[_0x14372f(0x1ae)]('spellLevelHigh',_0x3ff1b5);}['addHookFixedLearnedProgression'](_0x2b89eb){const _0x368d14=_0x27c741;this[_0x368d14(0x1ae)]('fixedLearnedProgression',_0x2b89eb);}['addHookIsPreparedCaster'](_0x30bb93){const _0x463ff4=_0x27c741;this[_0x463ff4(0x1ae)](_0x463ff4(0x25f),_0x30bb93);}[_0x27c741(0x29a)](_0x51aab1){const _0x5c8322=_0x27c741;this['_addHookBase'](_0x5c8322(0x250),_0x51aab1),this['_addHookBase']('pulseFixedLearned',_0x51aab1),this[_0x5c8322(0x1ae)](_0x5c8322(0x247),_0x51aab1),this['_addHookBase'](_0x5c8322(0x2a1),_0x51aab1);}[_0x27c741(0x25e)](_0x124248){const _0x1d63e5=_0x27c741;this[_0x1d63e5(0x1ae)](_0x1d63e5(0x283),_0x124248),this[_0x1d63e5(0x1ae)](_0x1d63e5(0x20f),_0x124248);}['addHookIsMaxPrepared'](_0x952e68){const _0x427eea=_0x27c741;this[_0x427eea(0x1ae)](_0x427eea(0x26f),_0x952e68),this[_0x427eea(0x1ae)]('maxPrepared',_0x952e68);}[_0x27c741(0x1c9)](_0x3fb93a){const _0x64e26d=_0x27c741;return this[_0x64e26d(0x192)]({'lvl':_0x3fb93a,'fixedLearnedProgression':this[_0x64e26d(0x215)][_0x64e26d(0x21e)]});}[_0x27c741(0x192)]({lvl:_0x2e28a5,fixedLearnedProgression:_0x238740}){return _0x2e28a5>0x0&&_0x238740!=null&&_0x238740[_0x2e28a5-0x1]>0x0;}[_0x27c741(0x21a)](_0x584b72){const _0x367e0c=_0x27c741;return this['_canLearnMoreFixedSpellsOfLevel']({'lvl':_0x584b72,'fixedLearnedProgression':this['_state']['fixedLearnedProgression'],'cntSpellsKnown':this['_compsLevel'][_0x584b72][_0x367e0c(0x231)]()[_0x367e0c(0x271)]});}[_0x27c741(0x29b)]({lvl:_0x178701,fixedLearnedProgression:_0x17d7ed,cntSpellsKnown:_0x138ba2}){if(!_0x17d7ed)return![];if(!_0x17d7ed[_0x178701-0x1])return![];return _0x138ba2<_0x17d7ed[_0x178701-0x1];}[_0x27c741(0x18e)](_0x470d49){const _0x30988e=_0x27c741;if(!this[_0x30988e(0x215)][_0x30988e(0x250)])return![];if(!this[_0x30988e(0x215)][_0x30988e(0x250)][_0x470d49-0x1])return![];const _0x4e07d0=this[_0x30988e(0x299)][_0x470d49][_0x30988e(0x231)]();return _0x4e07d0[_0x30988e(0x271)]>this[_0x30988e(0x215)]['fixedLearnedProgression'][_0x470d49-0x1];}[_0x27c741(0x266)](){const _0x31e05d=_0x27c741;return this['_state']['cntLearnedCantrips']<(this['_state'][_0x31e05d(0x20f)]||0x0);}[_0x27c741(0x29c)](){const _0x3830f8=_0x27c741;return this[_0x3830f8(0x215)][_0x3830f8(0x283)]>(this['_state'][_0x3830f8(0x20f)]||0x0);}['canPrepareMore_'](){const _0x787d3c=_0x27c741;return this[_0x787d3c(0x215)][_0x787d3c(0x26f)]<(this[_0x787d3c(0x215)][_0x787d3c(0x25f)]||0x0);}[_0x27c741(0x297)](){const _0x45ea29=_0x27c741;return this[_0x45ea29(0x215)][_0x45ea29(0x26f)]>(this[_0x45ea29(0x215)][_0x45ea29(0x25f)]||0x0);}[_0x27c741(0x27e)](){const _0xb8eeab=_0x27c741;return this[_0xb8eeab(0x299)]['map'](_0x23e472=>_0x23e472[_0xb8eeab(0x231)]()[_0xb8eeab(0x271)])[_0xb8eeab(0x2a2)]();}[_0x27c741(0x284)](){const _0x312882=_0x27c741;return(this[_0x312882(0x215)][_0x312882(0x250)]||[])[_0x312882(0x2a2)]();}[_0x27c741(0x1e1)](_0x47cd3a,_0x2440f0){const _0x564859=_0x27c741,_0x1f2b1a=()=>{const _0x5f3bf0=_0x99b5,_0x2afa02=[this[_0x5f3bf0(0x215)][_0x5f3bf0(0x20f)]?_0x5f3bf0(0x1dd)+this[_0x5f3bf0(0x215)][_0x5f3bf0(0x283)]+'/'+this[_0x5f3bf0(0x215)]['maxLearnedCantrips']:null,this[_0x5f3bf0(0x215)][_0x5f3bf0(0x250)]?'Spells\x20learned:\x20'+this[_0x5f3bf0(0x27e)]()+'/'+this[_0x5f3bf0(0x284)]():null,this[_0x5f3bf0(0x215)][_0x5f3bf0(0x25f)]?'Prepared:\x20'+this[_0x5f3bf0(0x215)]['cntPrepared']+'/'+this[_0x5f3bf0(0x215)]['maxPrepared']:null][_0x5f3bf0(0x190)](Boolean);(this[_0x5f3bf0(0x22c)]||[])['forEach'](_0x21ee81=>{const _0x4274f0=_0x5f3bf0;_0x21ee81[_0x4274f0(0x249)](_0x2afa02[_0x4274f0(0x271)])[_0x4274f0(0x241)](_0x2afa02[_0x4274f0(0x2b5)](_0x4274f0(0x1fa)));});};this[_0x564859(0x1ae)]('cntPrepared',_0x1f2b1a),this[_0x564859(0x1ae)]('maxPrepared',_0x1f2b1a),this['_addHookBase']('fixedLearnedProgression',_0x1f2b1a),this[_0x564859(0x1ae)]('pulseFixedLearned',_0x1f2b1a),this[_0x564859(0x1ae)](_0x564859(0x283),_0x1f2b1a),this[_0x564859(0x1ae)](_0x564859(0x20f),_0x1f2b1a),_0x1f2b1a();const _0x46e099=()=>this[_0x564859(0x211)]();this['_addHookBase'](_0x564859(0x2a4),_0x46e099),this[_0x564859(0x1ae)](_0x564859(0x243),_0x46e099),this[_0x564859(0x1ae)]('alwaysPreparedSpellsClass',_0x46e099),this[_0x564859(0x1ae)](_0x564859(0x240),_0x46e099),_0x46e099();const _0x5defd8=()=>this[_0x564859(0x24a)]();this[_0x564859(0x1ae)]('expandedSpellsRace',_0x5defd8),this['_addHookBase'](_0x564859(0x2a0),_0x5defd8),this[_0x564859(0x1ae)](_0x564859(0x1bb),_0x5defd8),this['_addHookBase']('expandedSpellsSubclass',_0x5defd8),this[_0x564859(0x1ae)](_0x564859(0x1d7),_0x5defd8),_0x5defd8();const _0x48ecb0=()=>this[_0x564859(0x2b4)]();this[_0x564859(0x1ae)](_0x564859(0x17a),_0x48ecb0),this[_0x564859(0x1ae)]('alwaysKnownSpellsBackground',_0x48ecb0),this[_0x564859(0x1ae)](_0x564859(0x276),_0x48ecb0),this[_0x564859(0x1ae)](_0x564859(0x1ce),_0x48ecb0),_0x48ecb0(),this[_0x564859(0x299)][_0x564859(0x1f9)](_0x44963f=>_0x44963f[_0x564859(0x1e1)](_0x47cd3a));const _0x392825=()=>{const _0x4ea60b=_0x564859;_0x2440f0[_0x4ea60b(0x19e)]();const _0x3a2612=this[_0x4ea60b(0x1c2)][this[_0x4ea60b(0x215)][_0x4ea60b(0x281)]];if(!_0x3a2612)return _0x2440f0[_0x4ea60b(0x206)]('<div\x20class=\x22ve-flex-vh-center\x20w-100\x20h-100\x20italic\x22>Select\x20a\x20spell\x20to\x20view</div>');_0x2440f0[_0x4ea60b(0x206)](Renderer[_0x4ea60b(0x259)][_0x4ea60b(0x204)](UrlUtil['PG_SPELLS'],MiscUtil[_0x4ea60b(0x225)](_0x3a2612)));};this[_0x564859(0x1ae)](_0x564859(0x281),_0x392825),_0x392825();}[_0x27c741(0x211)](){const _0xe6037a=_0x27c741;this[_0xe6037a(0x299)][_0xe6037a(0x1f9)](_0x3d9920=>_0x3d9920['handleAlwaysPreparedSpells_']());}[_0x27c741(0x2b4)](){const _0x235cf5=_0x27c741;this[_0x235cf5(0x299)][_0x235cf5(0x1f9)](_0xc23878=>_0xc23878[_0x235cf5(0x25b)]());}[_0x27c741(0x24a)](_0x360a43){const _0x5c30a7=_0x27c741;this[_0x5c30a7(0x2a7)]=_0x360a43||this[_0x5c30a7(0x2a7)];if(!this['_cacheFilterValues'])return;this['_compsLevel'][_0x5c30a7(0x1f9)](_0x147e38=>_0x147e38[_0x5c30a7(0x24a)](this['_cacheFilterValues']));}['handleSearch'](_0x3d3e4d){const _0x1f345a=_0x27c741;this['_compsLevel'][_0x1f345a(0x1f9)](_0x17c0bc=>_0x17c0bc[_0x1f345a(0x1c0)](_0x3d3e4d));}[_0x27c741(0x1f8)](_0x270bea){const _0x16210d=_0x27c741;if(!this[_0x16210d(0x232)]||!this['_existingSpellLookup'])return null;const _0x15caff=_0x270bea[_0x16210d(0x1d9)]['toLowerCase'](),_0x51c5a1=_0x270bea[_0x16210d(0x175)]['toLowerCase'](),_0x3de883=Parser[_0x16210d(0x181)](_0x270bea['source'])['toLowerCase']();return this[_0x16210d(0x244)][_0x270bea[_0x16210d(0x236)]]?.[_0x51c5a1]?.[_0x15caff]||this['_existingSpellLookup'][_0x270bea[_0x16210d(0x236)]]?.[_0x3de883]?.[_0x15caff];}[_0x27c741(0x26d)](_0x43c8d2){const _0xcf410a=_0x27c741;if(!this[_0xcf410a(0x253)]||!this[_0xcf410a(0x1c7)])return![];const _0xd0b23f=Renderer['spell'][_0xcf410a(0x25d)](_0x43c8d2,_0xcf410a(0x1a3)),_0x46734d=Renderer[_0xcf410a(0x18f)][_0xcf410a(0x25d)](_0x43c8d2,_0xcf410a(0x1fc))[_0xcf410a(0x190)](_0x1e4222=>this[_0xcf410a(0x215)]['isIncludeUaEtcSpellLists']?!![]:!SourceUtil['isNonstandardSource'](_0x1e4222[_0xcf410a(0x213)])),{className:_0x408dc1,classSource:_0x6b812e}=this[_0xcf410a(0x1cb)][_0xcf410a(0x178)]({'className':this[_0xcf410a(0x253)],'classSource':this['_classSource']});if(!_0xd0b23f[_0xcf410a(0x24d)](_0xdfd7e5=>_0xdfd7e5[_0xcf410a(0x1d9)]===_0x408dc1&&_0xdfd7e5[_0xcf410a(0x175)]===_0x6b812e)&&!_0x46734d[_0xcf410a(0x24d)](_0x5c6845=>_0x5c6845[_0xcf410a(0x1d9)]===_0x408dc1&&_0x5c6845[_0xcf410a(0x175)]===_0x6b812e)&&!this[_0xcf410a(0x298)](_0x43c8d2,_0xd0b23f,_0x46734d))return![];return!![];}[_0x27c741(0x2ae)](_0x94f03e){const _0x307b70=_0x27c741;if(!this[_0x307b70(0x19c)]&&!this['_subclassShortName']||!this['_subclassSource'])return![];const _0x3e85ad=Renderer[_0x307b70(0x18f)][_0x307b70(0x25d)](_0x94f03e,_0x307b70(0x2b6)),_0x56c261=this[_0x307b70(0x210)]||this[_0x307b70(0x19c)];if(!_0x3e85ad[_0x307b70(0x24d)](_0x92852b=>_0x92852b?.[_0x307b70(0x21d)][_0x307b70(0x1d9)]===this['_className']&&_0x92852b?.[_0x307b70(0x21d)][_0x307b70(0x175)]===this[_0x307b70(0x1c7)]&&_0x92852b?.['subclass'][_0x307b70(0x1d9)]===_0x56c261&&_0x92852b?.[_0x307b70(0x1e9)][_0x307b70(0x175)]===this[_0x307b70(0x285)])&&!this[_0x307b70(0x208)](_0x94f03e,_0x3e85ad))return![];return!![];}[_0x27c741(0x298)](_0x16b978,_0x1b6de6,_0x585a36){const _0x5ca16d=_0x27c741;if(MiscUtil[_0x5ca16d(0x1c6)](this[_0x5ca16d(0x1d0)],'spell',_0x16b978[_0x5ca16d(0x175)][_0x5ca16d(0x195)](),_0x16b978[_0x5ca16d(0x1d9)][_0x5ca16d(0x195)]()))return!![];if(_0x1b6de6[_0x5ca16d(0x24d)](_0x4181a0=>MiscUtil[_0x5ca16d(0x1c6)](this[_0x5ca16d(0x1d0)],_0x5ca16d(0x21d),_0x4181a0[_0x5ca16d(0x175)][_0x5ca16d(0x195)](),_0x4181a0[_0x5ca16d(0x1d9)][_0x5ca16d(0x195)]())))return!![];if(_0x585a36['some'](_0x44a65e=>MiscUtil[_0x5ca16d(0x1c6)](this[_0x5ca16d(0x1d0)],_0x5ca16d(0x21d),_0x44a65e[_0x5ca16d(0x175)][_0x5ca16d(0x195)](),_0x44a65e['name'][_0x5ca16d(0x195)]())))return!![];return![];}[_0x27c741(0x208)](_0x37fdea,_0x1c0d2d){const _0x170c05=_0x27c741;if(MiscUtil['get'](this[_0x170c05(0x1d0)],'spell',_0x37fdea['source'][_0x170c05(0x195)](),_0x37fdea[_0x170c05(0x1d9)]['toLowerCase']()))return!![];if(_0x1c0d2d[_0x170c05(0x24d)](_0x12fb8a=>!_0x12fb8a['subSubclass']&&MiscUtil[_0x170c05(0x1c6)](this[_0x170c05(0x1d0)],_0x170c05(0x1e9),_0x12fb8a[_0x170c05(0x21d)][_0x170c05(0x175)][_0x170c05(0x195)](),_0x12fb8a[_0x170c05(0x21d)][_0x170c05(0x1d9)][_0x170c05(0x195)](),_0x12fb8a['subclass'][_0x170c05(0x175)][_0x170c05(0x195)](),_0x12fb8a[_0x170c05(0x1e9)]['name'][_0x170c05(0x195)]())))return!![];if(_0x1c0d2d[_0x170c05(0x24d)](_0x436965=>_0x436965['subSubclass']&&MiscUtil[_0x170c05(0x1c6)](this['_cacheBrewClassSpells'],_0x170c05(0x287),_0x436965[_0x170c05(0x21d)][_0x170c05(0x175)][_0x170c05(0x195)](),_0x436965[_0x170c05(0x21d)][_0x170c05(0x1d9)]['toLowerCase'](),_0x436965[_0x170c05(0x1e9)][_0x170c05(0x175)][_0x170c05(0x195)](),_0x436965[_0x170c05(0x1e9)][_0x170c05(0x1d9)][_0x170c05(0x195)](),_0x436965[_0x170c05(0x1e9)][_0x170c05(0x287)][_0x170c05(0x195)]())))return!![];return![];}[_0x27c741(0x260)](_0x4e2a92){const _0x16940d=_0x27c741,_0x162123=this[_0x16940d(0x1cb)][_0x16940d(0x2a5)](_0x4e2a92);if(this[_0x16940d(0x215)][_0x16940d(0x2a4)][_0x16940d(0x1d3)](_0x162123))return!![];if(this[_0x16940d(0x215)][_0x16940d(0x243)][_0x16940d(0x1d3)](_0x162123))return!![];if(this[_0x16940d(0x215)]['alwaysPreparedSpellsClass'][_0x16940d(0x1d3)](_0x162123))return!![];if(this[_0x16940d(0x215)][_0x16940d(0x240)]['includes'](_0x162123))return!![];return![];}[_0x27c741(0x216)](_0x4aa59e){const _0x1b4298=_0x27c741,_0x1deb9c=this[_0x1b4298(0x1cb)][_0x1b4298(0x2a5)](_0x4aa59e);if(this[_0x1b4298(0x215)][_0x1b4298(0x256)][_0x1b4298(0x1d3)](_0x1deb9c))return!![];if(this['_state'][_0x1b4298(0x2a0)][_0x1b4298(0x1d3)](_0x1deb9c))return!![];if(this['_state'][_0x1b4298(0x1bb)]['includes'](_0x1deb9c))return!![];if(this['_state'][_0x1b4298(0x24c)][_0x1b4298(0x1d3)](_0x1deb9c))return!![];return![];}[_0x27c741(0x282)](_0x2ea0bf){const _0x5784cc=_0x27c741,_0x312129=this[_0x5784cc(0x1cb)][_0x5784cc(0x2a5)](_0x2ea0bf);if(this[_0x5784cc(0x215)]['alwaysKnownSpellsRace'][_0x5784cc(0x1d3)](_0x312129))return!![];if(this['_state'][_0x5784cc(0x220)][_0x5784cc(0x1d3)](_0x312129))return!![];if(this['_state'][_0x5784cc(0x276)]['includes'](_0x312129))return!![];if(this[_0x5784cc(0x215)][_0x5784cc(0x1ce)][_0x5784cc(0x1d3)](_0x312129))return!![];return![];}static[_0x27c741(0x2a5)](_0x4fe816){const _0x6d632e=_0x27c741;return _0x4fe816['name'][_0x6d632e(0x195)]()+'|'+_0x4fe816['source'][_0x6d632e(0x195)]();}set[_0x27c741(0x2a4)](_0x5d2a6f){const _0x5c3e88=_0x27c741;this[_0x5c3e88(0x215)][_0x5c3e88(0x2a4)]=_0x5d2a6f;}set[_0x27c741(0x243)](_0x461e8e){const _0x1c97a1=_0x27c741;this[_0x1c97a1(0x215)][_0x1c97a1(0x243)]=_0x461e8e;}set[_0x27c741(0x188)](_0x71872c){const _0x342a9b=_0x27c741;this[_0x342a9b(0x215)][_0x342a9b(0x188)]=_0x71872c;}set[_0x27c741(0x240)](_0x89c014){const _0x31d170=_0x27c741;this[_0x31d170(0x215)]['alwaysPreparedSpellsSubclass']=_0x89c014;}set[_0x27c741(0x256)](_0x191094){const _0x1a3e94=_0x27c741;this['_state'][_0x1a3e94(0x256)]=_0x191094;}set[_0x27c741(0x2a0)](_0x4df50b){const _0x4c7ccf=_0x27c741;this['_state'][_0x4c7ccf(0x2a0)]=_0x4df50b;}set[_0x27c741(0x1bb)](_0x597d49){const _0xd45fec=_0x27c741;this[_0xd45fec(0x215)][_0xd45fec(0x1bb)]=_0x597d49;}set[_0x27c741(0x24c)](_0x491802){const _0x19f5ce=_0x27c741;this[_0x19f5ce(0x215)][_0x19f5ce(0x24c)]=_0x491802;}set[_0x27c741(0x17a)](_0x43888d){const _0x198e5e=_0x27c741;this[_0x198e5e(0x215)][_0x198e5e(0x17a)]=_0x43888d;}set[_0x27c741(0x220)](_0x1932cc){const _0x46d98c=_0x27c741;this[_0x46d98c(0x215)][_0x46d98c(0x220)]=_0x1932cc;}set[_0x27c741(0x276)](_0x2510b1){const _0x1a3bf1=_0x27c741;this[_0x1a3bf1(0x215)][_0x1a3bf1(0x276)]=_0x2510b1;}set[_0x27c741(0x1ce)](_0x431708){const _0x5cfd3a=_0x27c741;this['_state'][_0x5cfd3a(0x1ce)]=_0x431708;}async[_0x27c741(0x1e3)](_0x246e66){const _0x7f9666=_0x27c741;return{'isFormComplete':(this[_0x7f9666(0x215)]['cntLearnedCantrips']===this[_0x7f9666(0x215)][_0x7f9666(0x20f)]||0x0)&&(this['_state'][_0x7f9666(0x26f)]===this[_0x7f9666(0x215)][_0x7f9666(0x25f)]||0x0),'data':{'spells':this[_0x7f9666(0x299)][_0x7f9666(0x1b6)](_0x196302=>_0x196302[_0x7f9666(0x1b1)](_0x246e66))[_0x7f9666(0x242)]()}};}[_0x27c741(0x1f0)](){return{'spellLevelLow':null,'spellLevelHigh':null,'ixViewedSpell':null,'cntLearnedCantrips':0x0,'maxLearnedCantrips':null,'fixedLearnedProgression':null,'pulseFixedLearned':![],'cntPrepared':0x0,'maxPrepared':null,'alwaysPreparedSpellsRace':[],'alwaysPreparedSpellsBackground':[],'alwaysPreparedSpellsClass':[],'alwaysPreparedSpellsSubclass':[],'alwaysPreparedSpellsFeat':{},'expandedSpellsRace':[],'expandedSpellsBackground':[],'expandedSpellsClass':[],'expandedSpellsSubclass':[],'expandedSpellsFeat':{},'alwaysKnownSpellsRace':[],'alwaysKnownSpellsBackground':[],'alwaysKnownSpellsClass':[],'alwaysKnownSpellsSubclass':[],'alwaysKnownSpellsFeat':{},'casterProgression':null,'isIncludeUaEtcSpellLists':![]};}static[_0x27c741(0x178)]({className:_0x53dd67,classSource:_0x46b376}){const _0x25765b=_0x27c741;return Charactermancer_Spell[_0x25765b(0x203)]?.[_0x46b376]?.[_0x53dd67]||{'className':_0x53dd67,'classSource':_0x46b376};}}Charactermancer_Spell['_IMPORT_LIST_SPELL']=null,Charactermancer_Spell['_CLASS_MAP']={[SRC_UATRR]:{'Ranger\x20(Revised)':{'className':_0x27c741(0x18b),'classSource':SRC_PHB}}},Charactermancer_Spell[_0x27c741(0x26b)]=class{constructor({item:_0x2ca82d,isLearned:_0x352f61,isPrepared:_0x10c0fa,isAlwaysPrepared:_0xb24de6}){const _0x858145=_0x27c741;this[_0x858145(0x189)]=_0x2ca82d,this[_0x858145(0x22f)]=_0x352f61,this[_0x858145(0x1f2)]=_0x10c0fa,this[_0x858145(0x22d)]=_0xb24de6;}};class Charactermancer_Spell_Modal extends Charactermancer_Spell{constructor(_0x218a94){const _0x4b70d5=_0x27c741;_0x218a94[_0x4b70d5(0x1ec)]=new PageFilterSpells(),super(_0x218a94);}static[_0x27c741(0x223)](_0x3d3ba6){const _0x153a6a=_0x27c741,_0x1f67a3=new this(_0x3d3ba6);return _0x1f67a3[_0x153a6a(0x20f)]=_0x3d3ba6[_0x153a6a(0x20f)],UtilApplications[_0x153a6a(0x1d1)]({'comp':_0x1f67a3,'width':Util[_0x153a6a(0x212)](0x4b0),'height':Util[_0x153a6a(0x1c8)]()});}get[_0x27c741(0x1c3)](){const _0x144d83=_0x27c741;return _0x144d83(0x288);}[_0x27c741(0x200)](_0x33f203){const _0x162c59=_0x27c741,_0xd0e948=$(_0x162c59(0x280)),_0x4182e7=$(_0x162c59(0x280)),_0x393cbe=this[_0x162c59(0x23c)](_0xd0e948);return _0x4182e7[_0x162c59(0x206)](_0x162c59(0x1e6)),$$`<div class="split w-100 h-100">
			${_0xd0e948}
			<div class="vr-1 h-100"></div>
			${_0x4182e7}
		</div>`['appendTo'](_0x33f203),super['render'](_0xd0e948,_0x4182e7),_0x393cbe[_0x162c59(0x221)](()=>{const _0x2a9def=_0x162c59;this[_0x2a9def(0x24a)](this[_0x2a9def(0x1d2)]['filterBox']['getValues']());});}[_0x27c741(0x23c)](_0x5b15db){const _0x2829c6=_0x27c741,_0x45e683=$(_0x2829c6(0x1df)),_0x170afd=$(_0x2829c6(0x1ca)),_0x158758=$('<input\x20type=\x22search\x22\x20class=\x22search\x20w-100\x20form-control\x22\x20placeholder=\x22Find\x20spell...\x22>'),_0x2a7a8e=$(_0x2829c6(0x1da))[_0x2829c6(0x28d)](()=>_0x158758[_0x2829c6(0x197)]('')[_0x2829c6(0x17c)]()),_0x582bd5=$(_0x2829c6(0x229));return $$(_0x5b15db)`
			<div class="ve-flex-v-stretch input-group input-group--top no-shrink">
				${_0x45e683}
				${_0x170afd}
				${_0x158758}
				${_0x2a7a8e}
			</div>
			${_0x582bd5}
			<div class="ve-flex-v-stretch input-group input-group--bottom mb-1 no-shrink">
				<button class="btn-5et w-100" disabled></button>
			</div>
		`,this[_0x2829c6(0x1d2)][_0x2829c6(0x224)]({'$iptSearch':_0x158758,'$btnReset':_0x2a7a8e,'$btnOpen':_0x45e683,'$btnToggleSummaryHidden':_0x170afd,'$wrpMiniPills':_0x582bd5,'namespace':'Charactermancer_Spell_Modal.filter'})[_0x2829c6(0x221)](()=>{const _0xa971ab=_0x2829c6;this[_0xa971ab(0x1c2)][_0xa971ab(0x1f9)](_0x8e9120=>this[_0xa971ab(0x1d2)]['mutateAndAddToFilters'](_0x8e9120)),this['_pageFilter']['trimState'](),this[_0xa971ab(0x1d2)][_0xa971ab(0x199)][_0xa971ab(0x1e1)](),UiUtil[_0xa971ab(0x23e)]({'$ipt':_0x158758,'fnKeyup':()=>{const _0x4074bc=_0xa971ab,_0x126783=List[_0x4074bc(0x1e5)](_0x158758[_0x4074bc(0x197)]());if(this[_0x4074bc(0x2a8)]===_0x126783)return;this[_0x4074bc(0x2a8)]=_0x126783,this[_0x4074bc(0x1c0)](_0x126783);}}),this[_0xa971ab(0x1d2)][_0xa971ab(0x199)]['on'](FilterBox[_0xa971ab(0x248)],()=>{const _0x167157=_0xa971ab;this[_0x167157(0x24a)](this[_0x167157(0x1d2)][_0x167157(0x199)]['getValues']());});});}}class Charactermancer_Spell_Level extends BaseComponent{constructor(_0x2e8c6f){const _0x32d947=_0x27c741;super(),_0x2e8c6f=_0x2e8c6f||{},this[_0x32d947(0x1c2)]=_0x2e8c6f[_0x32d947(0x209)],this[_0x32d947(0x28a)]=_0x2e8c6f[_0x32d947(0x28f)],this[_0x32d947(0x27d)]=_0x2e8c6f[_0x32d947(0x27f)],this[_0x32d947(0x28b)]=null,this[_0x32d947(0x227)]=null,this['_list']=null;}[_0x27c741(0x26a)](_0x58bb1f){const _0x367a75=_0x27c741;return _0x58bb1f[_0x367a75(0x236)]===this['_spellLevel'];}[_0x27c741(0x1e1)](_0x3eb394){const _0xc69e05=_0x27c741;this[_0xc69e05(0x28b)]=$$`<div class="ve-flex-col manc__list mt-1 mb-3"></div>`,this[_0xc69e05(0x227)]=$(_0xc69e05(0x239))[_0xc69e05(0x1ba)]();const _0x5f607a=()=>{const _0x26f634=_0xc69e05;this[_0x26f634(0x227)][_0x26f634(0x249)](!this['_list'][_0x26f634(0x1a7)][_0x26f634(0x271)]&&_0x30a7cb[_0x26f634(0x267)]()!=='[+]');},_0x4bb061=$(_0xc69e05(0x1ee));this[_0xc69e05(0x294)]=new List({'$wrpList':this[_0xc69e05(0x28b)],'fnSort':PageFilterSpells['sortSpells'],'fnSearch':(_0xa1afe3,_0xeebdec)=>{const _0x325ba5=_0xc69e05,{ixLearned:_0x4b199e,ixPrepared:_0x1c6283,ixAlwaysPrepared:_0x2a986b,ixAlwaysKnownSpell:_0x4a0936}=this[_0x325ba5(0x1cb)][_0x325ba5(0x186)](_0xa1afe3['ix']);if([_0x4b199e,_0x1c6283,_0x2a986b,_0x4a0936]['some'](_0x2ce9d3=>this[_0x325ba5(0x215)][_0x2ce9d3]))return!![];return _0xa1afe3[_0x325ba5(0x27b)][_0x325ba5(0x1d3)](_0xeebdec);}}),SortUtil[_0xc69e05(0x20c)](_0x4bb061,this[_0xc69e05(0x294)]),this[_0xc69e05(0x294)]['on'](_0xc69e05(0x21b),()=>_0x5f607a());const _0x30a7cb=$(_0xc69e05(0x291))['click'](()=>{const _0x346ac6=_0xc69e05;_0x30a7cb[_0x346ac6(0x267)](_0x30a7cb['text']()===_0x346ac6(0x1d8)?_0x346ac6(0x29e):_0x346ac6(0x1d8)),this[_0x346ac6(0x28b)][_0x346ac6(0x249)](),_0x4bb061['toggleVe'](),_0x5f607a();}),_0x546cf2=$$`<div class="ve-flex-col w-100">
			<div class="split-v-center">
				<div class="bold">${Parser[_0xc69e05(0x24f)](this[_0xc69e05(0x28a)])}</div>
				${_0x30a7cb}
			</div>
			${_0x4bb061}
			${this['_$dispNoRows']}
			${this['_$wrpRows']}
		</div>`[_0xc69e05(0x19d)](_0x3eb394),_0x19c4c9=this[_0xc69e05(0x1c2)][_0xc69e05(0x271)];for(let _0xc3bbef=0x0;_0xc3bbef<_0x19c4c9;++_0xc3bbef){const _0x2aac07=this[_0xc69e05(0x1c2)][_0xc3bbef];if(!this[_0xc69e05(0x26a)](_0x2aac07))continue;const _0x9b4771=this[_0xc69e05(0x17b)](_0x2aac07,_0xc3bbef);if(!_0x9b4771)continue;this[_0xc69e05(0x294)][_0xc69e05(0x180)](_0x9b4771);}this[_0xc69e05(0x294)][_0xc69e05(0x245)]();const _0x57264e=()=>{const _0xc558fd=_0xc69e05,_0x40adb5=this['_isWithinLevelRange']();_0x546cf2[_0xc558fd(0x249)](_0x40adb5);if(!_0x40adb5)this[_0xc558fd(0x1a2)]();};this[_0xc69e05(0x27d)][_0xc69e05(0x263)](_0x57264e),this[_0xc69e05(0x27d)][_0xc69e05(0x218)](_0x57264e),this[_0xc69e05(0x27d)][_0xc69e05(0x274)](_0x57264e),this[_0xc69e05(0x27d)][_0xc69e05(0x177)](_0x57264e),_0x57264e();if(this[_0xc69e05(0x28a)]===0x0)this[_0xc69e05(0x219)]();else this[_0xc69e05(0x2b1)]();}[_0x27c741(0x219)](){const _0x42e2e4=_0x27c741,_0x3789a8=()=>{const _0xf616a4=_0x99b5;this[_0xf616a4(0x28b)]['toggleClass']('manc-sp__is-max-learned-cantrips',!this[_0xf616a4(0x27d)][_0xf616a4(0x266)]()),this['_$wrpRows'][_0xf616a4(0x2b2)]('manc-sp__is-max-learned-cantrips--is-over-limit',this['_parent'][_0xf616a4(0x29c)]());};this['_parent'][_0x42e2e4(0x25e)](_0x3789a8),_0x3789a8();}[_0x27c741(0x2b1)](){const _0x189088=_0x27c741,_0x33f26c=()=>this[_0x189088(0x28b)][_0x189088(0x2b2)](_0x189088(0x194),this['_parent']['isPreparedCaster']);this['_parent'][_0x189088(0x277)](_0x33f26c),_0x33f26c();const _0x39b5d7=()=>{const _0x2ebc12=_0x189088,_0x1f44e0=this[_0x2ebc12(0x27d)]['isLearnedFixedSpellCasterAtLevel_'](this['_spellLevel']);let _0x16f672=!![],_0x58b36c=!![];if(_0x1f44e0){if(this[_0x2ebc12(0x27d)][_0x2ebc12(0x21a)](this[_0x2ebc12(0x28a)]))_0x16f672=![];if(!this[_0x2ebc12(0x27d)]['isOverLearnFixedSpellsLimitOfLevel_'](this[_0x2ebc12(0x28a)]))_0x58b36c=![];}this['_$wrpRows']['toggleClass'](_0x2ebc12(0x17d),_0x1f44e0),this[_0x2ebc12(0x28b)][_0x2ebc12(0x2b2)](_0x2ebc12(0x26c),_0x1f44e0&&_0x16f672),this[_0x2ebc12(0x28b)][_0x2ebc12(0x2b2)](_0x2ebc12(0x29f),_0x1f44e0&&_0x58b36c);};this['_parent'][_0x189088(0x29a)](_0x39b5d7),_0x39b5d7();const _0x27f988=()=>{const _0x16bc63=_0x189088;this['_$wrpRows']['toggleClass'](_0x16bc63(0x296),!this[_0x16bc63(0x27d)][_0x16bc63(0x21f)]()),this[_0x16bc63(0x28b)][_0x16bc63(0x2b2)]('manc-sp__is-max-prepared-spells--is-over-limit',this[_0x16bc63(0x27d)][_0x16bc63(0x297)]());};this['_parent'][_0x189088(0x258)](_0x27f988),_0x27f988();}[_0x27c741(0x293)](){const _0x3b69e5=_0x27c741;if(this[_0x3b69e5(0x28a)]!==0x0&&this[_0x3b69e5(0x27d)][_0x3b69e5(0x250)]!=null&&this[_0x3b69e5(0x27d)][_0x3b69e5(0x250)][this[_0x3b69e5(0x28a)]-0x1])return!![];if(this['_spellLevel']===0x0)return!!this[_0x3b69e5(0x27d)][_0x3b69e5(0x20f)];return this['_spellLevel']>=(this[_0x3b69e5(0x27d)][_0x3b69e5(0x247)]??Number[_0x3b69e5(0x27a)])&&this[_0x3b69e5(0x28a)]<=(this[_0x3b69e5(0x27d)]['spellLevelHigh']??Number[_0x3b69e5(0x25a)]);}[_0x27c741(0x17b)](_0x243e76,_0x277f42){const _0x1f33db=_0x27c741,{ixLearned:_0x2823ef,ixPrepared:_0x5a91b0,ixAlwaysPrepared:_0x559711,ixAlwaysKnownSpell:_0x1aeaf5}=this['constructor'][_0x1f33db(0x186)](_0x277f42),_0x4a6a2a=this['_parent'][_0x1f33db(0x1f8)](_0x243e76);if(_0x4a6a2a){if(_0x4a6a2a['isLearned']){this[_0x1f33db(0x215)][_0x2823ef]=!![];if(_0x243e76[_0x1f33db(0x236)]===0x0)this[_0x1f33db(0x27d)][_0x1f33db(0x283)]++;}_0x4a6a2a['isPrepared']&&!_0x4a6a2a[_0x1f33db(0x22d)]&&(this[_0x1f33db(0x215)][_0x5a91b0]=!![],this[_0x1f33db(0x27d)][_0x1f33db(0x26f)]++),_0x4a6a2a[_0x1f33db(0x22d)]&&(this[_0x1f33db(0x215)][_0x559711]=!![]);}const _0xc1961c=document[_0x1f33db(0x1fd)](_0x1f33db(0x1c5));_0xc1961c[_0x1f33db(0x184)]=_0x1f33db(0x2a9),_0xc1961c[_0x1f33db(0x26e)]['ix']=_0x277f42;const _0x3faf0d=Parser['sourceJsonToAbv'](_0x243e76[_0x1f33db(0x175)]),_0x24c015=PageFilterSpells['getTblTimeStr'](_0x243e76[_0x1f33db(0x1e8)][0x0]),_0x101fe7=Parser[_0x1f33db(0x1a6)](_0x243e76['school'],_0x243e76[_0x1f33db(0x191)]),_0x5c558e=_0x243e76[_0x1f33db(0x2ab)]?'×':'',_0x799b1c=_0x243e76[_0x1f33db(0x1e0)]?.[_0x1f33db(0x1fb)]?'×':'',_0x1c7e4c=Parser[_0x1f33db(0x1e4)](_0x243e76[_0x1f33db(0x1d6)]),_0x132023=_0x4a6a2a||this[_0x1f33db(0x215)][_0x1aeaf5],_0x3e6893=_0x4a6a2a&&(this[_0x1f33db(0x28a)]===0x0||_0x4a6a2a[_0x1f33db(0x22f)]),_0xda3994=_0x3e6893||this[_0x1f33db(0x215)][_0x559711];_0xc1961c[_0x1f33db(0x19b)]=_0x1f33db(0x1f5)+_0x243e76[_0x1f33db(0x1d9)]+'</div>\x0a\x09\x09\x09<div\x20class=\x22col-1-2\x20text-center\x22>'+_0x24c015+'</div>\x0a\x09\x09\x09<div\x20class=\x22col-1-2\x20sp__school-'+_0x243e76[_0x1f33db(0x279)]+_0x1f33db(0x20d)+Parser['spSchoolAndSubschoolsAbvsToFull'](_0x243e76[_0x1f33db(0x279)],_0x243e76['subschools'])+'\x22\x20'+Parser[_0x1f33db(0x174)](_0x243e76['school'])+'>'+_0x101fe7+'</div>\x0a\x09\x09\x09<div\x20class=\x22col-0-5\x20text-center\x20bold\x20imp-sp__disp-conc\x22\x20title=\x22Concentration\x22>'+_0x5c558e+_0x1f33db(0x20a)+_0x799b1c+_0x1f33db(0x207)+_0x1c7e4c+_0x1f33db(0x23b)+Parser[_0x1f33db(0x201)](_0x243e76['source'])+_0x1f33db(0x262)+Parser[_0x1f33db(0x290)](_0x243e76[_0x1f33db(0x175)])+'\x22\x20'+BrewUtil[_0x1f33db(0x18a)](_0x243e76[_0x1f33db(0x175)])+'>'+_0x3faf0d+'</div>\x0a\x0a\x09\x09\x09<div\x20class=\x22ve-flex-vh-center\x20col-1-6\x20pr-0\x22>\x0a\x09\x09\x09\x09<button\x0a\x09\x09\x09\x09\x09class=\x22btn\x20manc__list-row-button\x20'+(this['_spellLevel']===0x0?'manc-sp__btn-learn-cantrip':'manc-sp__btn-learn-spell')+'\x20'+(this['_state'][_0x2823ef]||_0x4a6a2a?.['isLearned']||this[_0x1f33db(0x215)][_0x1aeaf5]?_0x1f33db(0x1ab):'')+_0x1f33db(0x202)+(this[_0x1f33db(0x28a)]===0x0?_0x1f33db(0x2b3):'btn-learn-spell')+_0x1f33db(0x1e7)+(_0x132023?_0x1f33db(0x270):'')+_0x1f33db(0x1bc)+(_0x4a6a2a?_0x1f33db(0x1bf):'')+_0x1f33db(0x1bc)+(_0x4a6a2a?'title=\x22(Previously\x20Learned\x20Spell)\x22':'')+_0x1f33db(0x1ea)+(this[_0x1f33db(0x28a)]!==0x0?_0x1f33db(0x1a0)+(this[_0x1f33db(0x215)][_0x5a91b0]||this[_0x1f33db(0x215)][_0x559711]||_0x4a6a2a?.['isPrepared']||_0x4a6a2a?.['isAlwaysPrepared']?'active':'')+_0x1f33db(0x17e)+(_0x3e6893?_0x1f33db(0x1a9):_0x1f33db(0x272))+'\x22\x0a\x09\x09\x09\x09\x09'+(_0xda3994?_0x1f33db(0x270):'')+_0x1f33db(0x1bc)+(_0x3e6893?'data-plut-is-existing-spell=\x22true\x22':'')+'\x0a\x09\x09\x09\x09>Prep.</button>':'')+_0x1f33db(0x29d);const _0x2da690=_0xc1961c[_0x1f33db(0x292)](_0x1f33db(0x1b3)),[_0x508aff,_0x43e967]=_0x2da690,_0x1424c8=new ListItem(_0x277f42,_0xc1961c,_0x243e76[_0x1f33db(0x1d9)],{'source':_0x3faf0d,'level':_0x243e76[_0x1f33db(0x236)],'time':_0x24c015,'school':Parser[_0x1f33db(0x1c1)](_0x243e76[_0x1f33db(0x279)]),'concentration':_0x5c558e,'ritual':_0x799b1c,'normalisedTime':_0x243e76[_0x1f33db(0x18d)],'normalisedRange':_0x243e76[_0x1f33db(0x1d4)]},{'btnLearn':_0x508aff,'btnPrepare':_0x43e967});return _0x2da690['forEach'](_0x2bb674=>{_0x2bb674['addEventListener']('click',_0x480750=>{const _0x3dfa7f=_0x99b5;_0x480750[_0x3dfa7f(0x1b4)](),_0x480750[_0x3dfa7f(0x23d)]();const _0x11ddc7=_0x2bb674['classList'][_0x3dfa7f(0x1a5)](_0x3dfa7f(0x1ab));switch(_0x2bb674[_0x3dfa7f(0x1d9)]){case'btn-learn-cantrip':{if(!_0x11ddc7&&!this[_0x3dfa7f(0x27d)][_0x3dfa7f(0x266)]())return;_0x2bb674[_0x3dfa7f(0x1b5)][_0x3dfa7f(0x23f)]('active'),this[_0x3dfa7f(0x215)][_0x2823ef]=!this['_state'][_0x2823ef];if(this[_0x3dfa7f(0x215)][_0x2823ef])this['_parent'][_0x3dfa7f(0x283)]++;else this[_0x3dfa7f(0x27d)][_0x3dfa7f(0x283)]--;break;}case'btn-learn-spell':{this['_handleListItemBtnLearnClick_doFixed']({'btnLearn':_0x508aff,'btnPrepare':_0x43e967,'isActive':_0x11ddc7,'ixPrepared':_0x5a91b0,'ixLearned':_0x2823ef});break;}case'btn-prepare':{if(!_0x11ddc7&&!this[_0x3dfa7f(0x27d)][_0x3dfa7f(0x21f)]())return;if(!_0x11ddc7&&this['_parent'][_0x3dfa7f(0x1c9)](this[_0x3dfa7f(0x28a)])&&!this[_0x3dfa7f(0x215)][_0x2823ef]){const _0x54dd2a=this[_0x3dfa7f(0x1b7)]({'btnLearn':_0x508aff,'btnPrepare':_0x43e967,'isActive':this[_0x3dfa7f(0x215)][_0x2823ef],'ixPrepared':_0x5a91b0,'ixLearned':_0x2823ef});if(!_0x54dd2a)return;}_0x2bb674[_0x3dfa7f(0x1b5)]['toggle'](_0x3dfa7f(0x1ab)),this[_0x3dfa7f(0x215)][_0x5a91b0]=!this['_state'][_0x5a91b0];if(this['_state'][_0x5a91b0])this[_0x3dfa7f(0x27d)][_0x3dfa7f(0x26f)]++;else this['_parent'][_0x3dfa7f(0x26f)]--;break;}default:throw new Error(_0x3dfa7f(0x1cd)+_0x2bb674[_0x3dfa7f(0x1d9)]+'\x22');}});}),_0xc1961c['addEventListener'](_0x1f33db(0x28d),_0x2ace8a=>{const _0x2bb1ba=_0x1f33db;_0x2ace8a[_0x2bb1ba(0x1b4)](),_0x2ace8a[_0x2bb1ba(0x23d)]();if(this[_0x2bb1ba(0x27d)]['cacheSelectedListItem'])this['_parent'][_0x2bb1ba(0x295)]['ele'][_0x2bb1ba(0x1b5)][_0x2bb1ba(0x2a6)](_0x2bb1ba(0x22b));_0xc1961c[_0x2bb1ba(0x1b5)]['add'](_0x2bb1ba(0x22b)),this['_parent']['ixViewedSpell']=_0x277f42,this[_0x2bb1ba(0x27d)][_0x2bb1ba(0x295)]=_0x1424c8;}),_0x1424c8;}[_0x27c741(0x205)]({btnLearn:_0x3f7027,btnPrepare:_0x440a5b,isActive:_0x38af08,ixPrepared:_0x52bdac,ixLearned:_0x2d798a}){const _0x55ef6c=_0x27c741;_0x38af08&&this[_0x55ef6c(0x27d)][_0x55ef6c(0x1dc)]&&this[_0x55ef6c(0x215)][_0x52bdac]&&(this[_0x55ef6c(0x215)][_0x52bdac]=![],_0x440a5b[_0x55ef6c(0x1b5)][_0x55ef6c(0x2a6)](_0x55ef6c(0x1ab)),this[_0x55ef6c(0x27d)][_0x55ef6c(0x26f)]--),_0x3f7027['classList'][_0x55ef6c(0x23f)]('active'),this[_0x55ef6c(0x215)][_0x2d798a]=!this[_0x55ef6c(0x215)][_0x2d798a];}[_0x27c741(0x1b7)]({btnLearn:_0x4daa1f,btnPrepare:_0xd706c8,isActive:_0x23b0a1,ixPrepared:_0x439f38,ixLearned:_0x11eed4}){const _0x5b5995=_0x27c741;if(!_0x23b0a1&&!this[_0x5b5995(0x27d)][_0x5b5995(0x21a)](this[_0x5b5995(0x28a)]))return![];return this['_handleListItemBtnLearnClick_do_doLearn']({'btnLearn':_0x4daa1f,'btnPrepare':_0xd706c8,'isActive':_0x23b0a1,'ixPrepared':_0x439f38,'ixLearned':_0x11eed4}),this['_parent'][_0x5b5995(0x261)]=!this[_0x5b5995(0x27d)][_0x5b5995(0x261)],!![];}[_0x27c741(0x24a)](_0x23bd52){const _0x27b784=_0x27c741;if(!this['_list'])return;this[_0x27b784(0x294)]['filter'](_0x194269=>{const _0x19bfb3=_0x27b784,_0x262021=this[_0x19bfb3(0x1c2)][_0x194269['ix']];if(!this[_0x19bfb3(0x27d)]['isAvailableClassSpell_'](_0x262021)&&!this[_0x19bfb3(0x27d)][_0x19bfb3(0x2ae)](_0x262021)&&!this[_0x19bfb3(0x27d)][_0x19bfb3(0x216)](_0x262021))return![];const {ixLearned:_0x8b3b98,ixPrepared:_0x426a9c,ixAlwaysPrepared:_0x50f58e,ixAlwaysKnownSpell:_0x25936e}=this[_0x19bfb3(0x1cb)][_0x19bfb3(0x186)](_0x194269['ix']);if([_0x8b3b98,_0x426a9c,_0x50f58e,_0x25936e][_0x19bfb3(0x24d)](_0x5e37aa=>this[_0x19bfb3(0x215)][_0x5e37aa]))return!![];return this[_0x19bfb3(0x27d)][_0x19bfb3(0x1ec)][_0x19bfb3(0x1af)](_0x23bd52,_0x262021);});}['handleSearch'](_0xf931d5){const _0x28a70d=_0x27c741;this['_list'][_0x28a70d(0x24e)](_0xf931d5);}[_0x27c741(0x1b8)](){const _0x3cfe99=_0x27c741;return this['_handleAlwaysStateSpells_']({'propIx':_0x3cfe99(0x24b),'propIxAlways':_0x3cfe99(0x176),'propBtn':_0x3cfe99(0x185),'propExistingSpellMetaAlways':_0x3cfe99(0x22d),'fnParentCheckAlways':this['_parent'][_0x3cfe99(0x260)][_0x3cfe99(0x273)](this[_0x3cfe99(0x27d)])});}[_0x27c741(0x25b)](){const _0x26f7fc=_0x27c741;return this[_0x26f7fc(0x1a8)]({'propIx':_0x26f7fc(0x182),'propIxAlways':_0x26f7fc(0x2a3),'propBtn':'btnLearn','fnParentCheckAlways':this[_0x26f7fc(0x27d)]['isAlwaysKnownSpell_']['bind'](this[_0x26f7fc(0x27d)])});}[_0x27c741(0x1a8)]({propIx:_0x224884,propIxAlways:_0x4252d1,propBtn:_0x50561b,propExistingSpellMetaAlways:_0x5bfb30,fnParentCheckAlways:_0x46f454,fnFilterSpell:_0x156ee3}){const _0x1ec6df=_0x27c741;if(!this['_list'])return;this[_0x1ec6df(0x294)][_0x1ec6df(0x289)][_0x1ec6df(0x1f9)](_0xab4a59=>{const _0x41dbb1=_0x1ec6df,_0x480aec=this[_0x41dbb1(0x1c2)][_0xab4a59['ix']];if(_0x156ee3&&!_0x156ee3(_0x480aec))return;const _0x575783=this[_0x41dbb1(0x27d)]['getExistingSpellMeta_'](_0x480aec);if(_0x575783?.[_0x41dbb1(0x22f)]||_0x575783?.[_0x41dbb1(0x1f2)])return;const _0x23bced=this[_0x41dbb1(0x1cb)][_0x41dbb1(0x186)](_0xab4a59['ix']),_0x29168b=_0x23bced[_0x224884],_0x4cf1da=_0x23bced[_0x4252d1],_0x1dcd8e=_0x5bfb30&&_0x575783?.[_0x5bfb30]||_0x46f454(_0x480aec);_0x1dcd8e?(this[_0x41dbb1(0x215)][_0x29168b]&&(this[_0x41dbb1(0x215)][_0x23bced[_0x224884]]=![],this['_parent'][_0x41dbb1(0x26f)]--),!this[_0x41dbb1(0x215)][_0x4cf1da]&&_0xab4a59[_0x41dbb1(0x20b)][_0x50561b]&&(_0xab4a59[_0x41dbb1(0x20b)][_0x50561b][_0x41dbb1(0x1b5)]['add'](_0x41dbb1(0x1ab)),_0xab4a59['data'][_0x50561b]['disabled']=!![])):this[_0x41dbb1(0x215)][_0x4cf1da]&&_0xab4a59['data'][_0x50561b]&&(_0xab4a59[_0x41dbb1(0x20b)][_0x50561b][_0x41dbb1(0x1b5)][_0x41dbb1(0x2a6)]('active'),_0xab4a59['data'][_0x50561b][_0x41dbb1(0x270)]=![]),this[_0x41dbb1(0x215)][_0x4cf1da]=_0x1dcd8e;});}static[_0x27c741(0x186)](_0x5cab0e){const _0x2783e3=_0x27c741;return{'ixLearned':_0x2783e3(0x1ef)+_0x5cab0e,'ixPrepared':'ix_prepared_'+_0x5cab0e,'ixAlwaysPrepared':'ix_always_prepared_'+_0x5cab0e,'ixAlwaysKnownSpell':_0x2783e3(0x214)+_0x5cab0e};}[_0x27c741(0x1a2)](){const _0xff8167=_0x27c741;let _0x1a2491=0x0,_0x2984e4=0x0;const _0x36cc32={},_0x337602=this[_0xff8167(0x1c2)][_0xff8167(0x271)];for(let _0x2fe31a=0x0;_0x2fe31a<_0x337602;++_0x2fe31a){const _0x1aba09=this[_0xff8167(0x1c2)][_0x2fe31a];if(!this['_isAvailableSpell'](_0x1aba09))continue;const _0x35b0a0=this[_0xff8167(0x27d)][_0xff8167(0x1f8)](_0x1aba09);if(_0x35b0a0)continue;const {ixLearned:_0x42c1a0,ixPrepared:_0xe7048b,ixAlwaysPrepared:_0x4a4d9a,ixAlwaysKnownSpell:_0x2d119}=this[_0xff8167(0x1cb)][_0xff8167(0x186)](_0x2fe31a);this['_state'][_0x42c1a0]&&(_0x36cc32[_0x42c1a0]=![],_0x1a2491++);this['_state'][_0xe7048b]&&(_0x36cc32[_0xe7048b]=![],_0x2984e4++);if(this[_0xff8167(0x215)][_0x4a4d9a])_0x36cc32[_0x4a4d9a]=![];if(this[_0xff8167(0x215)][_0x2d119])_0x36cc32[_0x2d119]=![];}this['_proxyAssignSimple']('state',_0x36cc32),_0x1a2491&&(this[_0xff8167(0x28a)]===0x0?(this[_0xff8167(0x27d)]['cntLearnedCantrips']-=_0x1a2491,this[_0xff8167(0x28b)][0x0]['querySelectorAll'](_0xff8167(0x28c))['forEach'](_0x3b4175=>{const _0x2db2e4=_0xff8167;if(_0x3b4175[_0x2db2e4(0x26e)]?.['plut-is-existing-spell'])return;_0x3b4175[_0x2db2e4(0x1b5)][_0x2db2e4(0x2a6)](_0x2db2e4(0x1ab));})):(this[_0xff8167(0x27d)][_0xff8167(0x1e2)]-=_0x1a2491,this[_0xff8167(0x28b)][0x0][_0xff8167(0x292)](_0xff8167(0x226))[_0xff8167(0x1f9)](_0x2ac3b7=>{const _0x2b4ee8=_0xff8167;if(_0x2ac3b7[_0x2b4ee8(0x26e)]?.['plut-is-existing-spell'])return;_0x2ac3b7[_0x2b4ee8(0x1b5)][_0x2b4ee8(0x2a6)]('active');}))),_0x2984e4&&(this[_0xff8167(0x27d)][_0xff8167(0x26f)]-=_0x2984e4,this['_$wrpRows'][0x0][_0xff8167(0x292)](_0xff8167(0x28e))[_0xff8167(0x1f9)](_0x3fa607=>{const _0x2de8a7=_0xff8167;if(_0x3fa607['dataset']?.[_0x2de8a7(0x18c)])return;_0x3fa607[_0x2de8a7(0x1b5)][_0x2de8a7(0x2a6)](_0x2de8a7(0x1ab));}));}['getSpellsKnown'](){const _0x17127e=_0x27c741;if(!this[_0x17127e(0x293)]()||this[_0x17127e(0x28a)]===0x0)return[];const _0x5017d6=[],_0x4b6e04=this[_0x17127e(0x1c2)]['length'];for(let _0x3d207b=0x0;_0x3d207b<_0x4b6e04;++_0x3d207b){const _0x27bb2e=this['_spellDatas'][_0x3d207b];if(!this[_0x17127e(0x26a)](_0x27bb2e))continue;if(!this[_0x17127e(0x27d)][_0x17127e(0x26d)](_0x27bb2e)&&!this[_0x17127e(0x27d)][_0x17127e(0x2ae)](_0x27bb2e)&&!this[_0x17127e(0x27d)][_0x17127e(0x216)](_0x27bb2e))continue;const {ixLearned:_0x1585ff}=this['constructor'][_0x17127e(0x186)](_0x3d207b);if(!this['_state'][_0x1585ff])continue;_0x5017d6[_0x17127e(0x1d5)]({'ix':_0x3d207b,'spell':this[_0x17127e(0x1c2)][_0x3d207b]});}return _0x5017d6;}[_0x27c741(0x1b1)](_0x3a46f6){const _0x360ff4=_0x27c741;if(!this[_0x360ff4(0x293)]())return[];const _0x5b5b8a=[],_0x402156=this[_0x360ff4(0x27d)][_0x360ff4(0x1c9)](this[_0x360ff4(0x28a)]),_0x4ba418=this['_spellDatas']['length'];for(let _0x16dfe8=0x0;_0x16dfe8<_0x4ba418;++_0x16dfe8){const _0x586df7=this[_0x360ff4(0x1c2)][_0x16dfe8];if(!this[_0x360ff4(0x26a)](_0x586df7))continue;if(!this[_0x360ff4(0x27d)]['isAvailableClassSpell_'](_0x586df7)&&!this[_0x360ff4(0x27d)][_0x360ff4(0x2ae)](_0x586df7)&&!this[_0x360ff4(0x27d)][_0x360ff4(0x216)](_0x586df7))continue;const {ixLearned:_0x58a97e,ixPrepared:_0x37359f,ixAlwaysPrepared:_0x244027,ixAlwaysKnownSpell:_0x53e85a}=this[_0x360ff4(0x1cb)][_0x360ff4(0x186)](_0x16dfe8);if(this[_0x360ff4(0x215)][_0x244027]||this[_0x360ff4(0x215)][_0x53e85a])continue;const _0x178feb=this[_0x360ff4(0x215)][_0x58a97e],_0x437266=this[_0x360ff4(0x215)][_0x37359f]||this[_0x360ff4(0x28a)]===0x0&&_0x178feb;if(this[_0x360ff4(0x28a)]===0x0&&!_0x178feb)continue;let _0x3d5bb6=![];const _0x3ea107=this['_parent'][_0x360ff4(0x1f8)](_0x586df7);if(_0x3ea107){if(this[_0x360ff4(0x28a)]===0x0)continue;if(_0x402156)continue;_0x3d5bb6=_0x3ea107[_0x360ff4(0x1f2)]!==_0x437266;if(!_0x3d5bb6)continue;}if(!_0x178feb&&_0x402156)continue;if(this[_0x360ff4(0x27d)][_0x360ff4(0x1dc)]&&!_0x178feb&&!_0x437266&&!this[_0x360ff4(0x27d)][_0x360ff4(0x1ec)][_0x360ff4(0x1af)](_0x3a46f6,_0x586df7))continue;const _0x1455a3=this[_0x360ff4(0x1ad)]({'isLearned':_0x178feb});_0x5b5b8a[_0x360ff4(0x1d5)](new Charactermancer_Spell_SpellMeta({..._0x1455a3,'ix':_0x16dfe8,'spell':this[_0x360ff4(0x1c2)][_0x16dfe8],'isPrepared':_0x437266,'isLearned':_0x178feb,'isUpdateOnly':_0x3d5bb6,'existingItemId':_0x3ea107?.[_0x360ff4(0x189)]?.['id']}));}return _0x5b5b8a;}[_0x27c741(0x1ad)]({isLearned:_0x3532cf}){const _0x2e6782=_0x27c741;let _0x534773=_0x2e6782(0x1eb),_0x57d152=null,_0x9d239a=null,_0x587f0c=null;if(this[_0x2e6782(0x27d)][_0x2e6782(0x275)]===_0x2e6782(0x1f1)){if(_0x3532cf){if(this['_spellLevel']>UtilActors[_0x2e6782(0x238)])_0x534773=_0x2e6782(0x1f4),_0x57d152=0x1,_0x9d239a=0x1,_0x587f0c='lr';else _0x534773=_0x2e6782(0x1f1);}}else _0x534773=this[_0x2e6782(0x27d)]['isPreparedCaster']?_0x2e6782(0x21c):_0x2e6782(0x1eb);return{'preparationMode':_0x534773,'usesCurrent':_0x57d152,'usesMax':_0x9d239a,'usesPer':_0x587f0c};}}export{Charactermancer_Spell,Charactermancer_Spell_Modal};