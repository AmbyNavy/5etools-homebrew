const _0x458357=_0x3e3e;(function(_0x580058,_0x24cd00){const _0x320733=_0x3e3e,_0x5bae7c=_0x580058();while(!![]){try{const _0x5e657a=-parseInt(_0x320733(0x1f9))/0x1*(parseInt(_0x320733(0x223))/0x2)+-parseInt(_0x320733(0x1f8))/0x3+parseInt(_0x320733(0x1f2))/0x4+-parseInt(_0x320733(0x229))/0x5+-parseInt(_0x320733(0x1ef))/0x6+-parseInt(_0x320733(0x210))/0x7*(-parseInt(_0x320733(0x21d))/0x8)+-parseInt(_0x320733(0x219))/0x9*(-parseInt(_0x320733(0x204))/0xa);if(_0x5e657a===_0x24cd00)break;else _0x5bae7c['push'](_0x5bae7c['shift']());}catch(_0x100527){_0x5bae7c['push'](_0x5bae7c['shift']());}}}(_0x1299,0x870aa));import{DataConverter}from'./DataConverter.js';function _0x3e3e(_0x3bff77,_0x610f96){const _0x1299a5=_0x1299();return _0x3e3e=function(_0x3e3e0b,_0x1c4dc3){_0x3e3e0b=_0x3e3e0b-0x1e3;let _0x3e217b=_0x1299a5[_0x3e3e0b];return _0x3e217b;},_0x3e3e(_0x3bff77,_0x610f96);}import{UtilActors}from'./UtilActors.js';import{SharedConsts}from'../shared/SharedConsts.js';import{UtilCompendium}from'./UtilCompendium.js';import{DataConverterActor}from'./DataConverterActor.js';function _0x1299(){const _0x2d126e=['pGetVariantImage','entries','bind','toLowerCase','/media/icon/spell-book.svg','spells','590frSwmm','pGetSpellcastingImage','icons/commodities/biological/eye-tentacle-green-yellow.webp','assumedPb','number','startsWith','test','isAttack','override','\x20Attack','breath\x20weapons','groups','35xOSExZ','spellLevel','foundryData','getParsedActionEntryData','MODULE_NAME','pGetCreatureSideData','push','forEach','replace','188739XBZaPw','filter','slots','_SIDE_LOAD_OPTS','279704cDRXQE','lower','isLegendary','pGetCompendiumImage','skill','value','1382ahLiXM','SKILL_ABV_TO_FULL','pGetParsedAction','pGetActorItemCompendiumImage','/media/icon/mailed-fist.svg','some','671610hEQnHr','_pGetParsedAction_getImg','pact','_getDataSkills_getSkillMeta','name','spell','getDataSkills','_getFeatureImage','max','spellcasting','trim','_summonedBySpell_level','modules/','_summonedBySpell_levelBase','\x20(Legendary)','/media/icon/mighty-force.svg','pGetIconImage','1354164ngpduL','foundryFlags','foundryMonster','1545488ibpGWq','monsterFeature','creature','monster','_getFeatureSrdAliases','getDataSpells','2463201VWOanT','93akCbTL','/media/icon/mountain-cave.svg','getAbilityModNumber','spell0','/media/icon/archive-research.svg'];_0x1299=function(){return _0x2d126e;};return _0x1299();}import{Vetools}from'./Vetools.js';class DataConverterCreature extends DataConverter{static [_0x458357(0x21c)]={'propBrew':_0x458357(0x1f1),'fnLoadJson':Vetools[_0x458357(0x215)][_0x458357(0x200)](Vetools),'propJson':_0x458357(0x1f5)};static async[_0x458357(0x225)](_0x553e4,_0x150c9b,_0x5ad11c){const _0x20a6a4=_0x458357,{damageTuples:_0x3eb069,formula:_0x140091,offensiveAbility:_0x569bde,isAttack:_0x9533ce,rangeShort:_0xf3fbe4,rangeLong:_0xface95,actionType:_0x1c4543,isProficient:_0x22422d,attackBonus:_0x1c4b55}=DataConverterActor[_0x20a6a4(0x213)](_0x553e4,_0x150c9b,_0x5ad11c,{'mode':_0x20a6a4(0x1f4),'summonSpellLevel':_0x553e4[_0x20a6a4(0x1e9)]??_0x553e4[_0x20a6a4(0x1eb)]}),_0x524cf1=await this[_0x20a6a4(0x22a)](_0x553e4,_0x150c9b,_0x5ad11c,{'isAttack':_0x9533ce});return{'damageTuples':_0x3eb069,'formula':_0x140091,'offensiveAbility':_0x569bde,'isAttack':_0x9533ce,'rangeShort':_0xf3fbe4,'rangeLong':_0xface95,'actionType':_0x1c4543,'isProficient':_0x22422d,'attackBonus':_0x1c4b55,'_foundryData':_0x150c9b['_foundryData'],'foundryData':_0x150c9b[_0x20a6a4(0x212)],'_foundryFlags':_0x150c9b['_foundryFlags'],'foundryFlags':_0x150c9b[_0x20a6a4(0x1f0)],'img':_0x524cf1};}static async[_0x458357(0x22a)](_0xd46b8c,_0x3cceb3,_0x5deb9d,_0x21063e){const _0x56d980=_0x458357;_0x21063e=_0x21063e||{};const _0x536caf=await this[_0x56d980(0x1e5)](_0xd46b8c,_0x3cceb3,_0x5deb9d,_0x21063e);if(_0x536caf)return _0x536caf;if(_0x3cceb3[_0x56d980(0x22d)]){if(_0x3cceb3[_0x56d980(0x22d)][_0x56d980(0x201)]()[_0x56d980(0x209)](_0x56d980(0x20e)))return'icons/magic/fire/blast-jet-stream-embers-yellow.webp';if(/^eye ray/i[_0x56d980(0x20a)](_0x3cceb3[_0x56d980(0x22d)]))return _0x56d980(0x206);}return _0x56d980(0x1ea)+SharedConsts[_0x56d980(0x214)]+_0x56d980(0x227);}static async['_getFeatureImage'](_0x1624a5,_0x48aa8c,_0x1d4100,_0x58899e){const _0x4ec9d4=_0x458357;_0x58899e=_0x58899e||{};const _0xb7688=await DataConverter[_0x4ec9d4(0x1ee)](_0x4ec9d4(0x1f3),_0x48aa8c);if(_0xb7688)return _0xb7688;const _0xfaaa8f=await UtilCompendium[_0x4ec9d4(0x220)](_0x4ec9d4(0x1f3),_0x48aa8c,{'fnGetAliases':this['_getFeatureSrdAliases'][_0x4ec9d4(0x200)](this,{'isAttack':_0x58899e[_0x4ec9d4(0x20b)],'isLegendary':_0x58899e[_0x4ec9d4(0x21f)]}),'isIgnoreSrd':!![]});if(_0xfaaa8f)return _0xfaaa8f;const _0xe97c53=await UtilCompendium[_0x4ec9d4(0x226)](_0x4ec9d4(0x1f3),_0x48aa8c,{'fnGetAliases':this[_0x4ec9d4(0x1f6)][_0x4ec9d4(0x200)](this,{'isAttack':_0x58899e[_0x4ec9d4(0x20b)],'isLegendary':_0x58899e[_0x4ec9d4(0x21f)]})});if(_0xe97c53)return _0xe97c53;return null;}static async['pGetTraitReactionLegendaryImage'](_0x30785e,_0xcc0950,_0x1b277a,_0x3b9ae9){const _0x730c6=_0x458357;_0x3b9ae9=_0x3b9ae9||{};const _0x415573=await this['_getFeatureImage'](_0x30785e,_0xcc0950,_0x1b277a,_0x3b9ae9);if(_0x415573)return _0x415573;return _0x730c6(0x1ea)+SharedConsts[_0x730c6(0x214)]+_0x730c6(0x1ed);}static async['pGetLairActionImage'](_0x1b46eb,_0x39ee73,_0x4047e6){const _0x53d772=_0x458357,_0x5e115e=await this[_0x53d772(0x1e5)](_0x1b46eb,_0x39ee73,_0x4047e6);if(_0x5e115e)return _0x5e115e;return'modules/'+SharedConsts['MODULE_NAME']+_0x53d772(0x1fa);}static async[_0x458357(0x205)](_0x514a28,_0x47e6ec,_0x28daf6){const _0x3040e6=_0x458357,_0x1faa6c=await this[_0x3040e6(0x1e5)](_0x514a28,_0x47e6ec,_0x28daf6);if(_0x1faa6c)return _0x1faa6c;return'modules/'+SharedConsts[_0x3040e6(0x214)]+_0x3040e6(0x202);}static async[_0x458357(0x1fe)](_0x5abb78,_0x428a99,_0x4c5b5e){const _0x500b3f=_0x458357,_0x3b3019=await this['_getFeatureImage'](_0x5abb78,_0x428a99,_0x4c5b5e);if(_0x3b3019)return _0x3b3019;return _0x500b3f(0x1ea)+SharedConsts[_0x500b3f(0x214)]+_0x500b3f(0x1fd);}static[_0x458357(0x1f6)](_0x1ac97d,_0x2342a5){const _0x1e83e9=_0x458357;if(!_0x2342a5[_0x1e83e9(0x22d)])return[];const _0x3c8e47=[],_0xcdb6d=_0x2342a5[_0x1e83e9(0x22d)][_0x1e83e9(0x218)](/\([^)]+\)/g,'')[_0x1e83e9(0x218)](/\s+/g,'\x20')['trim']();if(_0xcdb6d!==_0x2342a5['name'])_0x3c8e47[_0x1e83e9(0x216)](_0xcdb6d);const _0x2c4c15=_0x2342a5[_0x1e83e9(0x22d)][_0x1e83e9(0x218)](/{@[^}]+}/g,'')[_0x1e83e9(0x218)](/\s+/g,'\x20')[_0x1e83e9(0x1e8)]();if(_0x2c4c15!==_0x2342a5[_0x1e83e9(0x22d)])_0x3c8e47[_0x1e83e9(0x216)](_0x2c4c15);if(_0x1ac97d['isLegendary'])_0x3c8e47[_0x1e83e9(0x216)](_0x2342a5[_0x1e83e9(0x22d)]+_0x1e83e9(0x1ec));if(_0x1ac97d[_0x1e83e9(0x20b)])_0x3c8e47[_0x1e83e9(0x216)](_0x2342a5[_0x1e83e9(0x22d)]+_0x1e83e9(0x20d));const _0x116381=_0x2342a5[_0x1e83e9(0x22d)]['replace'](/ Attack$/,'');if(_0x116381!==_0x2342a5[_0x1e83e9(0x22d)])_0x3c8e47[_0x1e83e9(0x216)](_0x116381);return _0x3c8e47;}static[_0x458357(0x1e4)](_0x1b1cc2,_0x1d3ec8,_0x505d1b){const _0x48fe45=_0x458357,_0x3ae314={};return Object[_0x48fe45(0x1ff)](UtilActors[_0x48fe45(0x224)])[_0x48fe45(0x217)](([_0x17420b,_0x3bd0cd])=>{const _0x30cf66=_0x48fe45,_0x2b898b=Parser['skillToAbilityAbv'](_0x3bd0cd),{profType:_0x18e2e3,bonusCheck:_0x2c4277}=this[_0x30cf66(0x22c)]({'mon':_0x1b1cc2,'dataBuilderOpts':_0x505d1b,'full':_0x3bd0cd,'ab':_0x2b898b});_0x3ae314[_0x17420b]={'value':_0x18e2e3,'ability':_0x2b898b,'bonuses':{'check':_0x2c4277,'passive':''}};}),_0x3ae314;}static[_0x458357(0x22c)]({mon:_0x395993,dataBuilderOpts:_0x35c1e0,full:_0x412b08,ab:_0x15c277}){const _0x2494f7=_0x458357;if(!_0x395993[_0x2494f7(0x221)]?.[_0x412b08])return{'profType':0x0,'bonusCheck':0x0};const _0x568aa8=/^\s*(?<number>[-+]?\s*\d+)\s*(?:[-+]|$)/['exec'](''+_0x395993[_0x2494f7(0x221)][_0x412b08]);if(!_0x568aa8)return{'profType':0x0,'bonusCheck':0x0};const _0xad3baf=Number(_0x568aa8[_0x2494f7(0x20f)][_0x2494f7(0x208)]['replace'](/\s+/g,'')),_0x369074=Parser[_0x2494f7(0x1fb)](_0x395993[_0x15c277]||0x0);if(_0xad3baf===_0x369074)return{'profType':0x0,'bonusCheck':0x0};const _0x330e6d=_0x369074+_0x35c1e0['assumedPb'],_0x50b6d4=_0x369074+0x2*_0x35c1e0[_0x2494f7(0x207)];if(_0x330e6d===_0xad3baf)return{'profType':0x1,'bonusCheck':0x0};if(_0x50b6d4===_0xad3baf)return{'profType':0x2,'bonusCheck':0x0};const _0x1ebb6f=_0xad3baf>=_0x50b6d4?0x2:_0xad3baf>=_0x330e6d?0x1:0x0;return{'profType':_0x1ebb6f,'bonusCheck':_0x1ebb6f===0x0?_0xad3baf:_0x1ebb6f===0x1?_0xad3baf-_0x330e6d:_0xad3baf-_0x50b6d4};}static[_0x458357(0x1f7)](_0x197326,_0x213859,_0x4d6b49){const _0x5e2e43=_0x458357,_0x178171={};_0x178171[_0x5e2e43(0x1fc)]={'value':0x0,'max':0x0};if(_0x197326[_0x5e2e43(0x1e7)]&&_0x197326[_0x5e2e43(0x1e7)][_0x5e2e43(0x228)](_0x36d6a2=>_0x36d6a2[_0x5e2e43(0x203)]))for(let _0x30df6a=0x1;_0x30df6a<0xa;++_0x30df6a){const _0x12e32f=_0x5e2e43(0x1e3)+_0x30df6a;_0x178171[_0x12e32f]=_0x178171[_0x12e32f]||{'value':0x0,'max':0x0},_0x197326['spellcasting'][_0x5e2e43(0x21a)](_0x1ca553=>_0x1ca553[_0x5e2e43(0x203)]&&_0x1ca553[_0x5e2e43(0x203)][_0x30df6a]&&_0x1ca553[_0x5e2e43(0x203)][_0x30df6a][_0x5e2e43(0x21b)])[_0x5e2e43(0x217)](_0x15b668=>{const _0x387662=_0x5e2e43,_0x547674=_0x15b668[_0x387662(0x203)][_0x30df6a];if(_0x547674[_0x387662(0x21e)]){_0x178171['pact']=_0x178171['pact']||{'value':0x0,'max':0x0,'level':_0x4d6b49[_0x387662(0x211)],'override':0x0},_0x178171[_0x387662(0x22b)]['value']+=_0x547674[_0x387662(0x21b)],_0x178171[_0x387662(0x22b)][_0x387662(0x1e6)]+=_0x547674[_0x387662(0x21b)],_0x178171[_0x387662(0x22b)][_0x387662(0x20c)]+=_0x547674['slots'];return;}_0x178171[_0x12e32f][_0x387662(0x222)]+=_0x547674['slots'],_0x178171[_0x12e32f][_0x387662(0x1e6)]+=_0x547674['slots'];});}else for(let _0x31be0c=0x1;_0x31be0c<0xa;++_0x31be0c){_0x178171[_0x5e2e43(0x1e3)+_0x31be0c]={'value':0x0,'max':0x0};}return _0x178171;}}export{DataConverterCreature};