const _0x228a98=_0x335b;(function(_0x52f4db,_0x36852c){const _0x4bb083=_0x335b,_0x484d3c=_0x52f4db();while(!![]){try{const _0x4fa45a=parseInt(_0x4bb083(0x12a))/0x1+parseInt(_0x4bb083(0x14c))/0x2+parseInt(_0x4bb083(0x186))/0x3+parseInt(_0x4bb083(0x17d))/0x4*(-parseInt(_0x4bb083(0x15a))/0x5)+-parseInt(_0x4bb083(0x152))/0x6*(parseInt(_0x4bb083(0x149))/0x7)+parseInt(_0x4bb083(0x15d))/0x8+parseInt(_0x4bb083(0x13a))/0x9*(-parseInt(_0x4bb083(0x165))/0xa);if(_0x4fa45a===_0x36852c)break;else _0x484d3c['push'](_0x484d3c['shift']());}catch(_0x166ad8){_0x484d3c['push'](_0x484d3c['shift']());}}}(_0x116f,0x98d63));import{ImportListActor}from'./ImportListActor.js';import{Vetools}from'./Vetools.js';import{Config}from'./Config.js';import{DataConverter}from'./DataConverter.js';import{UtilActors}from'./UtilActors.js';import{ImportListCreature}from'./ImportListCreature.js';import{DataConverterVehicle}from'./DataConverterVehicle.js';import{SharedConsts}from'../shared/SharedConsts.js';function _0x335b(_0x225a84,_0x112bb9){const _0x116f1d=_0x116f();return _0x335b=function(_0x335bde,_0x523994){_0x335bde=_0x335bde-0x107;let _0x584efa=_0x116f1d[_0x335bde];return _0x584efa;},_0x335b(_0x225a84,_0x112bb9);}import{UtilDataSource}from'./UtilDataSource.js';import{ImportListObject}from'./ImportListObject.js';import{LGT}from'./Util.js';import{UtilDataConverter}from'./UtilDataConverter.js';class ImportListVehicle extends ImportListActor{static ['ID']=_0x228a98(0x13c);static [_0x228a98(0x167)]='Vehicles';static ['_']=this[_0x228a98(0x134)](this);constructor(_0x52b02a){const _0x264170=_0x228a98;_0x52b02a=_0x52b02a||{},super({'title':_0x264170(0x122)},_0x52b02a,{'props':[_0x264170(0x151)],'dirsHomebrew':['vehicle'],'propsBrewAdditionalData':[_0x264170(0x179)],'fnLoadSideData':Vetools[_0x264170(0x14b)],'titleSearch':_0x264170(0x13c),'sidebarTab':_0x264170(0x155),'gameProp':_0x264170(0x155),'defaultFolderPath':[_0x264170(0x133)],'pageFilter':new PageFilterVehicles(),'page':UrlUtil[_0x264170(0x159)],'isPreviewable':!![],'isDedupable':!![],'configGroup':_0x264170(0x17a)},{'actorType':'vehicle','DataConverter':DataConverterVehicle});}async['_pGetSources'](){const _0x267586=_0x228a98;return[new UtilDataSource[(_0x267586(0x14f))](Config[_0x267586(0x136)]('ui',_0x267586(0x174))?_0x267586(0x154):_0x267586(0x126),Vetools[_0x267586(0x135)],{'filterTypes':[UtilDataSource['SOURCE_TYP_OFFICIAL_ALL']],'isDefault':!![]}),new UtilDataSource[(_0x267586(0x14f))]('Custom\x20URL','',{'filterTypes':[UtilDataSource[_0x267586(0x187)]]}),new UtilDataSource['DataSourceFile']('Upload\x20File',{'filterTypes':[UtilDataSource[_0x267586(0x187)]]}),...await this[_0x267586(0x123)]()];}async['_pImportEntry_pGetImportMetadata'](_0x4bb135,_0x4d94c,_0x11ad6e){const _0x288357=_0x228a98,_0x10d36b={},_0x6a79b1=await Renderer[_0x288357(0x151)][_0x288357(0x131)](_0x4d94c),_0x4ccd7b=new ImportListVehicle[(_0x288357(0x153))]({'actor':_0x4bb135,'fluff':_0x6a79b1});await this['_pImportEntry_pFillBase'](_0x4d94c,_0x10d36b,_0x4ccd7b[_0x288357(0x146)],{'isUseTokenImageAsPortrait':Config['get'](this[_0x288357(0x170)],_0x288357(0x15b))}),_0x10d36b[_0x288357(0x139)]={},await this[_0x288357(0x157)](_0x4d94c,_0x10d36b,_0x11ad6e);if(_0x11ad6e[_0x288357(0x12e)]!=null)_0x10d36b['permission']={'default':_0x11ad6e[_0x288357(0x12e)]};else _0x10d36b[_0x288357(0x14a)]={'default':Config[_0x288357(0x136)](this['_configGroup'],_0x288357(0x124))};return _0x10d36b['data'][_0x288357(0x114)]=this[_0x288357(0x10c)](_0x4d94c),this[_0x288357(0x177)](_0x4d94c,_0x10d36b[_0x288357(0x139)],_0x4ccd7b),this[_0x288357(0x13f)](_0x4d94c,_0x10d36b[_0x288357(0x139)],_0x4ccd7b),await this[_0x288357(0x121)](_0x4d94c,_0x10d36b[_0x288357(0x139)],_0x4ccd7b),this['_pImportEntry_fillData_Traits'](_0x4d94c,_0x10d36b['data'],_0x4ccd7b),this[_0x288357(0x120)](_0x4d94c,_0x10d36b[_0x288357(0x139)],_0x4ccd7b),this[_0x288357(0x150)](_0x4d94c,_0x10d36b['data'],_0x4ccd7b),await this['_pImportEntry_pFillToken']({'importable':_0x4d94c,'actor':_0x10d36b}),{'dataBuilderOpts':_0x4ccd7b,'actorData':_0x10d36b};}[_0x228a98(0x10c)](_0x4810d8){const _0x30b6f4=_0x228a98;if(_0x4810d8[_0x30b6f4(0x10d)]?.[_0x30b6f4(0x13b)]){const _0x271d68=_0x4810d8['terrain'][0x0];switch(_0x271d68){case _0x30b6f4(0x129):return _0x30b6f4(0x129);case _0x30b6f4(0x181):return'water';case _0x30b6f4(0x137):return'air';default:console[_0x30b6f4(0x175)](...LGT,_0x30b6f4(0x111)+_0x271d68+'\x22');}}switch(_0x4810d8[_0x30b6f4(0x114)]){case'INFWAR':return _0x30b6f4(0x129);case _0x30b6f4(0x180):return _0x30b6f4(0x181);default:throw new Error(_0x30b6f4(0x132)+_0x4810d8['vehicleType']+'\x22');}}async[_0x228a98(0x16f)](_0x59a7da,_0x44a58c){const _0x106616=_0x228a98;_0x44a58c=_0x44a58c||{};if(_0x59a7da[_0x106616(0x114)]===_0x106616(0x118)){const _0x3a6864=new ImportListCreature({});return await _0x3a6864[_0x106616(0x160)](),await _0x3a6864[_0x106616(0x162)](this),_0x59a7da=MiscUtil[_0x106616(0x11c)](_0x59a7da),_0x59a7da['tokenUrl']=await Vetools[_0x106616(0x17c)](_0x106616(0x151),_0x59a7da),_0x3a6864[_0x106616(0x16f)](_0x59a7da,_0x44a58c);}else{if(_0x59a7da['vehicleType']===_0x106616(0x158)){const _0x49620f=new ImportListObject({});return await _0x49620f[_0x106616(0x160)](),await _0x49620f[_0x106616(0x162)](this),_0x59a7da=MiscUtil[_0x106616(0x11c)](_0x59a7da),_0x59a7da[_0x106616(0x183)]=await Vetools[_0x106616(0x17c)](_0x106616(0x172),_0x59a7da),_0x49620f['_pImportEntry'](_0x59a7da,_0x44a58c);}}return super['_pImportEntry'](_0x59a7da,_0x44a58c);}[_0x228a98(0x13f)](_0x17ca51,_0x50dff8){const _0x225df2=_0x228a98,_0x28fbf8={};_0x28fbf8[_0x225df2(0x128)]={'value':0x0,'bonus':0x0,'mod':0x0,'prof':0x0,'total':0x0},_0x28fbf8[_0x225df2(0x12f)]=null,_0x28fbf8[_0x225df2(0x16a)]=DataConverterVehicle[_0x225df2(0x10e)](_0x17ca51),_0x28fbf8[_0x225df2(0x12d)]=DataConverterVehicle['getVehicleSpeed'](_0x17ca51);switch(_0x17ca51[_0x225df2(0x114)]){case'INFWAR':{const _0x38e289=Parser[_0x225df2(0x107)](_0x17ca51[_0x225df2(0x16e)]);_0x28fbf8['ac']={'flat':0x13+_0x38e289,'motionless':'19'},_0x28fbf8['hp']={'value':MiscUtil[_0x225df2(0x136)](_0x17ca51,'hp','hp')||0x0,'min':0x0,'max':MiscUtil[_0x225df2(0x136)](_0x17ca51,'hp','hp')||0x0,'temp':0x0,'tempmax':0x0,'dt':MiscUtil[_0x225df2(0x136)](_0x17ca51,'hp','dt')||0x0,'mt':MiscUtil[_0x225df2(0x136)](_0x17ca51,'hp','mt')||0x0},_0x28fbf8[_0x225df2(0x17e)]={'stations':!![],'value':0x0,'thresholds':{0x0:0x0,0x1:0x0,0x2:0x0}},_0x28fbf8[_0x225df2(0x169)]={'creature':Renderer[_0x225df2(0x151)][_0x225df2(0x185)](_0x17ca51),'cargo':typeof _0x17ca51[_0x225df2(0x127)]===_0x225df2(0x166)?0x0:_0x17ca51[_0x225df2(0x127)]};break;}case _0x225df2(0x180):{_0x28fbf8['ac']={'flat':MiscUtil[_0x225df2(0x136)](_0x17ca51,_0x225df2(0x15f),'ac')||null,'motionless':''},_0x28fbf8['hp']={'value':MiscUtil[_0x225df2(0x136)](_0x17ca51,_0x225df2(0x15f),'hp')||null,'min':null,'max':MiscUtil[_0x225df2(0x136)](_0x17ca51,_0x225df2(0x15f),'hp')||null,'temp':null,'tempmax':null,'dt':MiscUtil[_0x225df2(0x136)](_0x17ca51,'hull','dt')||null,'mt':null};let _0x124ea3=0x0;const _0x5add94={0x0:0x0,0x1:0x0,0x2:0x0};_0x17ca51[_0x225df2(0x109)]&&Object[_0x225df2(0x145)](_0x17ca51[_0x225df2(0x109)])['sort'](([_0x42652a],[_0x33e92e])=>SortUtil[_0x225df2(0x138)](Number(_0x33e92e),Number(_0x42652a)))['slice'](0x0,0x3)[_0x225df2(0x163)](([_0x1fd661,_0x775bfc],_0x1e5916)=>{_0x5add94[_0x1e5916]=_0x775bfc;});_0x28fbf8['actions']={'stations':![],'value':_0x124ea3,'thresholds':_0x5add94},_0x28fbf8['capacity']={'creature':Renderer[_0x225df2(0x151)]['getShipCreatureCapacity'](_0x17ca51),'cargo':typeof _0x17ca51[_0x225df2(0x127)]===_0x225df2(0x166)?0x0:_0x17ca51[_0x225df2(0x127)]};break;}default:throw new Error(_0x225df2(0x132)+_0x17ca51[_0x225df2(0x114)]+'\x22');}_0x50dff8[_0x225df2(0x113)]=_0x28fbf8;}async[_0x228a98(0x121)](_0xa558b8,_0x33f476,_0xa5c38a){const _0x19dd65=_0x228a98,_0x5d747a={};_0x5d747a[_0x19dd65(0x16b)]={'value':await this[_0x19dd65(0x110)](_0xa558b8,_0xa5c38a['fluff'],{'isImportText':Config['get'](this['_configGroup'],_0x19dd65(0x11b)),'isImportImages':Config['get'](this[_0x19dd65(0x170)],_0x19dd65(0x161))})},_0x5d747a[_0x19dd65(0x119)]=UtilDataConverter[_0x19dd65(0x143)](_0xa558b8),_0x33f476[_0x19dd65(0x142)]=_0x5d747a;}[_0x228a98(0x182)](_0x482a82,_0x361c94){const _0x373b29=_0x228a98,_0x221c22={};_0x221c22[_0x373b29(0x188)]=UtilActors[_0x373b29(0x14e)][_0x482a82['size']]||'med';switch(_0x482a82[_0x373b29(0x114)]){case _0x373b29(0x10b):{_0x221c22['dimensions']=_0x482a82['weight'][_0x373b29(0x148)]()+_0x373b29(0x15c);break;}case _0x373b29(0x180):{_0x221c22[_0x373b29(0x10f)]=_0x482a82[_0x373b29(0x10f)]?_0x482a82['dimensions'][_0x373b29(0x108)](_0x373b29(0x12b)):'';break;}default:throw new Error(_0x373b29(0x132)+_0x482a82[_0x373b29(0x114)]+'\x22');}this[_0x373b29(0x141)](_0x482a82,_0x221c22),_0x361c94[_0x373b29(0x116)]=_0x221c22;}[_0x228a98(0x120)](_0x145125,_0x5047a9){_0x5047a9['currency']={'pp':0x0,'gp':0x0,'ep':0x0,'sp':0x0,'cp':0x0};}async[_0x228a98(0x184)](_0x350dc5,_0x5b5c72,_0x255ccf,_0x56088c){const _0x1bf108=_0x228a98;await this['_pImportEntry_pFillItems_ship'](_0x350dc5,_0x5b5c72,_0x255ccf,_0x56088c),await this[_0x1bf108(0x168)](_0x350dc5,_0x5b5c72,_0x255ccf,_0x56088c);const _0x5ce3a1=_0x56088c[_0x1bf108(0x15e)]||this[_0x1bf108(0x13e)]!=null;await UtilActors['pAddActorItems'](_0x255ccf[_0x1bf108(0x164)],_0x255ccf[_0x1bf108(0x171)],{'isTemporary':_0x5ce3a1});}async[_0x228a98(0x147)](_0x36c73f,_0x21d664,_0x39d658,_0x1bbc8f){const _0x5619d4=_0x228a98;_0x36c73f[_0x5619d4(0x17b)]&&await _0x36c73f[_0x5619d4(0x17b)]['pSerialAwaitMap'](_0x1104fc=>this['_pAddShipEquipment'](_0x36c73f,_0x21d664,_0x39d658,_0x1bbc8f,_0x1104fc,'control')),_0x36c73f[_0x5619d4(0x16a)]&&await _0x36c73f['movement'][_0x5619d4(0x11f)](_0x214fe8=>this['_pAddShipEquipment'](_0x36c73f,_0x21d664,_0x39d658,_0x1bbc8f,_0x214fe8,_0x5619d4(0x16a))),_0x36c73f['weapon']&&await _0x36c73f[_0x5619d4(0x11e)][_0x5619d4(0x11f)](_0x28b931=>this[_0x5619d4(0x16c)](_0x36c73f,_0x21d664,_0x39d658,_0x1bbc8f,_0x28b931)),_0x36c73f[_0x5619d4(0x130)]&&await _0x36c73f['other'][_0x5619d4(0x11f)](_0x2bc740=>this[_0x5619d4(0x178)](_0x36c73f,_0x21d664,_0x39d658,_0x1bbc8f,_0x2bc740)),_0x36c73f[_0x5619d4(0x115)]&&await this[_0x5619d4(0x140)](_0x36c73f,_0x21d664,_0x39d658,_0x1bbc8f,_0x36c73f['action']);}async[_0x228a98(0x176)](_0xcc3df2,_0x44b2af,_0x18f4dd,_0x57e5a5,_0x10433c,_0x3a0075){const _0x2a712f=_0x228a98,_0x417c3c=await DataConverterVehicle['pGetShipEquipmentItem'](_0xcc3df2,_0x10433c,_0x3a0075);if(!_0x417c3c)return;_0x18f4dd[_0x2a712f(0x171)][_0x2a712f(0x112)](_0x417c3c);}async[_0x228a98(0x16c)](_0x3bb44b,_0x5cc70b,_0x50bdff,_0x5b8ba2,_0x32e8ba){const _0x370dab=_0x228a98,_0x429f6d=await DataConverterVehicle[_0x370dab(0x144)](_0x3bb44b,_0x32e8ba);if(!_0x429f6d)return;_0x50bdff['items'][_0x370dab(0x112)](_0x429f6d);}async[_0x228a98(0x178)](_0x28d997,_0x46b735,_0x3e7900,_0x1458ed,_0x276786){const _0x5b8c3=_0x228a98,_0x520dd8=await DataConverterVehicle[_0x5b8c3(0x17f)](_0x28d997,_0x276786);if(!_0x520dd8)return;_0x3e7900[_0x5b8c3(0x171)][_0x5b8c3(0x112)](_0x520dd8);}async['_pAddShipAction'](_0x3a0f4a,_0x452ee5,_0x4d9226,_0x1fd8e1,_0x42d7e3){const _0x5f4038=_0x228a98,_0x598733=await DataConverterVehicle['pGetShipActionItems'](_0x3a0f4a,_0x42d7e3);if(!_0x598733||!_0x598733[_0x5f4038(0x13b)])return;_0x4d9226[_0x5f4038(0x171)][_0x5f4038(0x112)](..._0x598733);}async['_pImportEntry_pFillItems_infWar'](_0x42953f,_0xbdc772,_0x3a81fd,_0x44f972){const _0x38be6d=_0x228a98;_0x42953f[_0x38be6d(0x11d)]&&await _0x42953f[_0x38be6d(0x11d)][_0x38be6d(0x11f)](_0x44d0ca=>this[_0x38be6d(0x173)](_0x42953f,_0xbdc772,_0x3a81fd,_0x44f972,_0x44d0ca)),_0x42953f['actionStation']&&await _0x42953f[_0x38be6d(0x13d)][_0x38be6d(0x11f)](_0x1774a6=>this[_0x38be6d(0x156)](_0x42953f,_0xbdc772,_0x3a81fd,_0x44f972,_0x1774a6)),_0x42953f[_0x38be6d(0x125)]&&await _0x42953f[_0x38be6d(0x125)][_0x38be6d(0x11f)](_0x1de7d7=>this['_pAddInfWarReaction'](_0x42953f,_0xbdc772,_0x3a81fd,_0x44f972,_0x1de7d7));}async[_0x228a98(0x173)](_0x1b6372,_0x235a56,_0x1db0ab,_0x1e23da,_0xa34c65){const _0x531871=_0x228a98,_0x2ec721=await DataConverter[_0x531871(0x14d)](_0xa34c65,{'fvttType':_0x531871(0x16d),'mode':_0x531871(0x151),'entity':_0x1b6372,'source':_0x1b6372['source'],'actor':{'data':_0x235a56},'img':'modules/'+SharedConsts['MODULE_NAME']+_0x531871(0x11a)});_0x1db0ab[_0x531871(0x171)]['push'](_0x2ec721);}async[_0x228a98(0x156)](_0x42e33f,_0x210bf8,_0x525416,_0x62f142,_0x35d858){const _0x23783b=_0x228a98,_0x4ce50c=await DataConverterVehicle['pGetInfWarActionItem'](_0x42e33f,_0x35d858);if(!_0x4ce50c)return;_0x525416[_0x23783b(0x171)][_0x23783b(0x112)](_0x4ce50c);}async['_pAddInfWarReaction'](_0x44f974,_0x40a479,_0x28293,_0x58cc7e,_0x3e57f2){const _0x160419=_0x228a98,_0x19e99f=await DataConverter[_0x160419(0x14d)](_0x3e57f2,{'activationType':_0x160419(0x125),'activationCost':0x1,'fvttType':_0x160419(0x16d),'mode':_0x160419(0x151),'entity':_0x44f974,'source':_0x44f974['source'],'actor':{'data':_0x40a479},'img':_0x160419(0x117)+SharedConsts[_0x160419(0x10a)]+_0x160419(0x11a)});_0x28293[_0x160419(0x171)]['push'](_0x19e99f);}[_0x228a98(0x150)](_0x2441bb,_0x28ec62){const _0x2da8e2=_0x228a98;_0x28ec62[_0x2da8e2(0x12c)]={'crew':[],'passengers':[]};}}ImportListVehicle['ImportEntryOpts']=class extends ImportListActor[_0x228a98(0x153)]{};function _0x116f(){const _0x46cd95=['\x20lb.','2242096NJXEox','isTemp','hull','pInit','isImportBioImages','pSyncStateFrom','forEach','actor','601210PGeTpQ','string','DISPLAY_NAME_TYPE_PLURAL','_pImportEntry_pFillItems_infWar','capacity','movement','biography','_pAddShipWeapon','feat','dex','_pImportEntry','_configGroup','items','object','_pAddInfWarTrait','isStreamerMode','warn','_pAddShipEquipment','_pImportEntry_fillData_Abilities','_pAddShipOther','foundryVehicle','importVehicle','control','pGetTokenUrl','2811476LTJPBN','actions','pGetShipOtherItem','SHIP','sea','_pImportEntry_fillData_Traits','tokenUrl','_pImportEntry_pFillItems','getInfwarCreatureCapacity','3300417vBsayt','SOURCE_TYP_CUSTOM','size','getAbilityModNumber','join','actionThresholds','MODULE_NAME','INFWAR','_pImportEntry_getVehicleType','terrain','getShipMovement','dimensions','_pGetBiographyValue','Unknown\x20vehicle\x20terrain\x20type\x20\x22','push','attributes','vehicleType','action','traits','modules/','CREATURE','source','/media/icon/gears.svg','isImportBio','copy','trait','weapon','pSerialAwaitMap','_pImportEntry_fillData_Currency','_pImportEntry_pFillData_Details','Import\x20Vehicles','_pGetSourcesHomebrew','permissions','reaction','5etools','capCargo','init','land','822632devsJB','\x20by\x20','cargo','speed','defaultPermission','spelldc','other','pGetFluff','Unhandled\x20vehicle\x20type\x20\x22','Vehicles','registerImpl','DATA_URL_VEHICLES','get','air','ascSort','data','117UsiVHL','length','vehicles','actionStation','_pack','_pImportEntry_fillData_Attributes','_pAddShipAction','_pImportEntry_fillConditionsDamage','details','getSourceWithPagePart','pGetShipWeaponItem','entries','fluff','_pImportEntry_pFillItems_ship','toLocaleString','14EsipfD','permission','pGetVehicleSideData','770012yZTWQp','pGetItemActorPassive','VET_SIZE_TO_ABV','DataSourceUrl','_pImportEntry_fillData_Cargo','vehicle','1432734hxJXuU','ImportEntryOpts','SRD','actors','_pAddInfWarActionStation','_pImportEntry_pFillFolder','OBJECT','PG_VEHICLES','5CNRQiS','isUseTokenImageAsPortrait'];_0x116f=function(){return _0x46cd95;};return _0x116f();}export{ImportListVehicle};