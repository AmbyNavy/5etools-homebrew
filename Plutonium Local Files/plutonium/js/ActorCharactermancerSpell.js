const _0x598a4f=_0x2f97;(function(_0x2bb149,_0x51284b){const _0x514c6d=_0x2f97,_0x545d33=_0x2bb149();while(!![]){try{const _0x244326=parseInt(_0x514c6d(0x26a))/0x1+-parseInt(_0x514c6d(0x1c3))/0x2*(parseInt(_0x514c6d(0x232))/0x3)+parseInt(_0x514c6d(0x20b))/0x4*(parseInt(_0x514c6d(0x1da))/0x5)+parseInt(_0x514c6d(0x1d2))/0x6*(-parseInt(_0x514c6d(0x1d4))/0x7)+parseInt(_0x514c6d(0x268))/0x8*(parseInt(_0x514c6d(0x1fd))/0x9)+parseInt(_0x514c6d(0x21c))/0xa*(-parseInt(_0x514c6d(0x1e3))/0xb)+parseInt(_0x514c6d(0x1fb))/0xc;if(_0x244326===_0x51284b)break;else _0x545d33['push'](_0x545d33['shift']());}catch(_0x248efe){_0x545d33['push'](_0x545d33['shift']());}}}(_0x205f,0xa0bae));import{ActorCharactermancerBaseComponent}from'./ActorCharactermancerUtil.js';import{Charactermancer_AdditionalSpellsSelect}from'./UtilCharactermancerAdditionalSpells.js';import{Charactermancer_Class_Util}from'./UtilCharactermancerClass.js';import{Charactermancer_Spell}from'./UtilCharactermancerSpell.js';function _0x205f(){const _0x394325=['629530iOPaKw','keyup','text','<button\x20class=\x22btn-5et\x20veapp__btn-list-reset\x22>Reset</button>','_state','isIncludeUaEtcSpellLists','_hk_onChangeLevel','_hk_onChangeAbilityScores','spells_isIncludeUaEtcSpellLists','187kfTgRD','_hk_onChangeSubclass_pRenderSpellTable_','getExistingClassTotalLevels_','getMaxLearnedCantrips','<div\x20class=\x22fltr__mini-view\x20btn-group\x22></div>','_compSpellAdditionalSpellRace','_compRace','class_getProps','pGetDereferencedSubclassData','spellLevelLow','_spell_getLocks','EVNT_VALCHANGE','getRenderedClassTableFromDereferenced','_spell_isClassCaster','click','_spell_getFixedLearnedProgression','_compsSpellSpellSlotLevelSelect','_spell_handleFilterChange','_pageFilterSpells','fixedLearnedProgression','forEach','addHookAbilityScores','showVe','compAbility','21280284gltTTi',')</div>','90RBktuk','CASTER_TYPE_TO_PROGRESSION','_actor','[+]','_spell_renderRaceSection','spellsKnownProgression','_spell_getMaxPreparedSpells','targetLevel','subclassSource','parent','<div\x20class=\x22py-1\x20clickable\x20ve-muted\x22>[‒]</div>','$getBtnBool','_spell_isCasterClassAtLevel_additionalSpells','class','4mFsWvb','spellsKnownProgressionFixed','compsSpellSpells','expandedSpellsBackground','info','maxLearnedCantrips','_hk_shared_doRenderClassSubclass','modalFilterSpells','state','[‒]','getCasterProgression','_compBackground','race_ixRace','addHookAlwaysPreparedSpells','casterProgression','_pLock','some','250810VTKRdH','alwaysPreparedSpellsClass','getCleanSearchTerm','alwaysKnownSpellsRace','_filterValuesSpellsCache','Set!','notifications','_hk_onChangeSubclass_pRenderSpellTable','pRender','ixClass','addHookBase','bind','_parent','_spell_isCasterClassAtLevel','<button\x20class=\x22btn\x20btn-default\x20btn-xs\x20mr-1\x22\x20title=\x22Save\x20a\x20copy\x20of\x20the\x20current\x20filters,\x20to\x20use\x20when\x20filtering\x20spell\x20lists\x20during\x20import\x20of\x20&quot;prepared\x20spell&quot;\x20casters.\x20For\x20example,\x20if\x20you\x20want\x20your\x20Cleric\x27s\x20spell\x20list\x20to\x20include\x20only\x20PHB\x20spells,\x20you\x20would\x20filter\x20(using\x20the\x20interface\x20above)\x20for\x20PHB\x20spells,\x20then\x20click\x20this\x20button.\x20Note\x20that\x20all\x20the\x20spells\x20that\x20you\x20have\x20selected\x20as\x20learned\x20or\x20that\x20you\x20have\x20selected\x20as\x20prepared\x20will\x20be\x20imported\x20regardless.\x22>Set\x20Prepared\x20Spell\x20Filter</button>','max','_spell_isCasterClassAtLevel_additionalSpellsBlock','pInitFilterBox','expandedSpellsClass','additionalSpells','getValues','alwaysPreparedSpellsSubclass','3583857rpWDHu','tabSpells','filterBoxSpells','background_pulseBackground','getSubclass_','getTotals','filterValuesSpellsCache','_hk_onChangeSubclass','getExistingCasterMeta','spellLevelHigh','_getDefaultState','addHookExpandedSpells','compBackground','class_pulseChange','source','_modalFilterSpells','pLoad','_lastSearchTermSpells','getClass_','_tabSpells','appendTo','filterBox','classSpells','_spell_renderBackgroundSection','val','expandedSpellsRace','_spell_renderClassSection','toggleVe','_compSpellAdditionalSpellBackground','compSpellAdditionalSpellRace','spellsAlwaysPrepared','alwaysKnownSpellsSubclass','bindTypingEnd','empty','spell','expandedSpellsSubclass','<div\x20class=\x22bold\x20mb-2\x22>Class\x20Spells\x20(','alwaysKnownSpellsClass','_spell_getExistingCasterMeta','_hk_shared_doCleanupClassSubclass','alwaysKnownSpellsBackground','spell_','getFixedLearnedProgression','compsSpellAdditionalSpellClass','render','_spell_renderRaceBackgroundSection','append','getFormData','compSpellAdditionalSpellBackground','data','subclassName','fixedLearnedProgressionDefault','subSubclassSpells','addHookAlwaysKnownSpells','738536pJMTTW','_data','646246DqGbve','curLevel','copy','trimState','spellsKnownProgressionFixedAllowLowerLevel','_compsSpellAdditionalSpellSubclass','_unlock','_compsSpellSpells','handleFilterChange','class_ixMax','subclassShortName','hideVe','actor','2yERfQR','class_totalLevels','alwaysPreparedSpellsBackground','_hk_shared_doUpdateRenderedClassSubclass','_hk_shared_doInitClassSubclass','getMaxPreparedSpells','prepared','_hk_onChangeClass','constructor','spellsAlwaysKnown','name','ActorCharactermancer.spells_page','keys','<button\x20class=\x22btn\x20btn-5et\x22\x20title=\x22Toggle\x20Filter\x20Summary\x20Display\x22><span\x20class=\x22glyphicon\x20glyphicon-resize-small\x22></span></button>','_spell_pRenderFilterBox','6bxctAS','_compsSpellAdditionalSpellClass','8325331LsTBli','filter','compClass','spellsExpanded','shortName','compRace'];_0x205f=function(){return _0x394325;};return _0x205f();}import{Charactermancer_Spell_SlotLevelSelect,Charactermancer_Spell_Util}from'./UtilCharactermancerSpellSlotLevelSelect.js';import{DataConverterClass}from'./DataConverterClass.js';import{ModalFilterSpellsFvtt}from'./UtilModalFilter.js';function _0x2f97(_0x265b58,_0x10bcb0){const _0x205fe1=_0x205f();return _0x2f97=function(_0x2f974e,_0x3c4699){_0x2f974e=_0x2f974e-0x1c3;let _0x18a754=_0x205fe1[_0x2f974e];return _0x18a754;},_0x2f97(_0x265b58,_0x10bcb0);}import{DataConverter}from'./DataConverter.js';import{UtilDataConverter}from'./UtilDataConverter.js';class ActorCharactermancerSpell extends ActorCharactermancerBaseComponent{constructor(_0x3993ab){const _0x38387c=_0x2f97;_0x3993ab=_0x3993ab||{},super(),this['_actor']=_0x3993ab[_0x38387c(0x276)],this[_0x38387c(0x269)]=_0x3993ab[_0x38387c(0x263)],this[_0x38387c(0x228)]=_0x3993ab[_0x38387c(0x206)],this[_0x38387c(0x245)]=_0x3993ab[_0x38387c(0x233)],this['_pageFilterSpells']=new PageFilterSpells(),this['_modalFilterSpells']=new ModalFilterSpellsFvtt({'namespace':'ActorCharactermancer.spells','isRadio':!![],'allData':this['_data'][_0x38387c(0x254)]}),this[_0x38387c(0x220)]=null,this[_0x38387c(0x243)]='',this[_0x38387c(0x271)]=[],this[_0x38387c(0x1f3)]=[],this['_compSpellAdditionalSpellRace']=null,this['_compSpellAdditionalSpellBackground']=null,this[_0x38387c(0x1d3)]=[],this[_0x38387c(0x26f)]=[];}get[_0x598a4f(0x212)](){const _0x36f939=_0x598a4f;return this[_0x36f939(0x241)];}get[_0x598a4f(0x238)](){const _0x3cdbea=_0x598a4f;return this[_0x3cdbea(0x220)];}get[_0x598a4f(0x234)](){const _0x38411f=_0x598a4f;return this[_0x38411f(0x1f5)]?.[_0x38411f(0x247)];}get[_0x598a4f(0x20d)](){const _0x3f100b=_0x598a4f;return this[_0x3f100b(0x271)];}get[_0x598a4f(0x24f)](){const _0x1e67aa=_0x598a4f;return this[_0x1e67aa(0x1e8)];}get[_0x598a4f(0x262)](){const _0x4494e6=_0x598a4f;return this[_0x4494e6(0x24e)];}get[_0x598a4f(0x25d)](){return this['_compsSpellAdditionalSpellClass'];}get['compsSpellAdditionalSpellSubclass'](){const _0x30005b=_0x598a4f;return this[_0x30005b(0x26f)];}async[_0x598a4f(0x242)](){const _0x1533ab=_0x598a4f;await this[_0x1533ab(0x241)]['pPreloadHidden']();}async[_0x598a4f(0x224)](){const _0x260dbf=_0x598a4f,_0x336791=this['_tabSpells']?.['$wrpTab'];if(!_0x336791)return;const _0x49bab0=$$`<div class="ve-flex-col w-100 h-100 px-1 overflow-y-auto ve-grow veapp__bg-foundry smooth-scroll"></div>`,_0x6f97a6=$$`<div class="ve-flex-col w-100"></div>`,_0x54c57c=$$`<div class="ve-flex-col w-100 h-100"></div>`;await this[_0x260dbf(0x1d1)](_0x49bab0);for(let _0xe33f79=0x0;_0xe33f79<this['_parent'][_0x260dbf(0x1d6)][_0x260dbf(0x213)]['class_ixMax']+0x1;++_0xe33f79)this[_0x260dbf(0x24c)](_0x49bab0,_0x6f97a6,_0x54c57c,_0xe33f79);const _0x10309b=()=>{const _0x1a7877=_0x260dbf;this[_0x1a7877(0x24c)](_0x49bab0,_0x6f97a6,_0x54c57c,this[_0x1a7877(0x228)]['compClass']['state'][_0x1a7877(0x273)]);};this[_0x260dbf(0x228)][_0x260dbf(0x1d6)]['addHookBase']('class_ixMax',_0x10309b),this['_spell_renderRaceSection'](_0x49bab0),this['_spell_renderBackgroundSection'](_0x49bab0),this['_spell_handleFilterChange'](),$$`<div class="ve-flex w-100 h-100">
			${_0x49bab0}

			<div class="vr-1"></div>

			<div class="ve-flex-col w-100 h-100 px-1 overflow-y-auto ve-grow veapp__bg-foundry smooth-scroll">
				${_0x6f97a6}
				${_0x54c57c}
			</div>
		</div>`[_0x260dbf(0x246)](_0x336791);}async[_0x598a4f(0x1d1)](_0x5d9b94){const _0x3c7709=_0x598a4f,_0x3a4807=$('<button\x20class=\x22btn-5et\x20veapp__btn-filter\x22>Filter</button>'),_0x4afcc7=$(_0x3c7709(0x1d0)),_0x551fe6=$('<input\x20type=\x22search\x22\x20class=\x22search\x20w-100\x20form-control\x22\x20placeholder=\x22Find\x20spell...\x22>'),_0x1b30a1=$(_0x3c7709(0x1dd))[_0x3c7709(0x1f1)](()=>_0x551fe6[_0x3c7709(0x24a)]('')[_0x3c7709(0x1db)]()),_0x5f1aaf=$(_0x3c7709(0x1e7)),_0x3cbe71=$(_0x3c7709(0x22a))[_0x3c7709(0x1f1)](()=>{const _0x48ac7c=_0x3c7709;this['_filterValuesSpellsCache']=this[_0x48ac7c(0x1f5)][_0x48ac7c(0x247)]['getValues'](),ui[_0x48ac7c(0x222)][_0x48ac7c(0x20f)](_0x48ac7c(0x221));}),_0x2fd7af=ComponentUiUtil[_0x3c7709(0x208)](this,_0x3c7709(0x1e2),{'$ele':$('<button\x20class=\x22btn\x20btn-default\x20btn-xs\x22\x20title=\x22Include\x20spell\x20lists\x20defined\x20in\x20Unearthed\x20Arcana,\x20Plane\x20Shift,\x20and\x20other\x20semi-official\x20products\x20when\x20generating\x20the\x20list\x20of\x20spells\x20which\x20can\x20be\x20learned/prepared.\x22>Include\x20UA/etc.\x20Spell\x20Lists</button>')}),_0x24f423=()=>this['_compsSpellSpells'][_0x3c7709(0x1d5)](Boolean)[_0x3c7709(0x1f7)](_0x2b62da=>_0x2b62da[_0x3c7709(0x1df)]=this[_0x3c7709(0x1de)]['spells_isIncludeUaEtcSpellLists']);this['_addHookBase'](_0x3c7709(0x1e2),_0x24f423),_0x24f423(),$$(_0x5d9b94)`
			<div class="ve-flex-v-stretch input-group input-group--top no-shrink">
				${_0x3a4807}
				${_0x4afcc7}
				${_0x551fe6}
				${_0x1b30a1}
			</div>
			${_0x5f1aaf}
			<div class="ve-flex-v-stretch input-group input-group--bottom mb-1 no-shrink">
				<button class="btn-5et w-100" disabled></button>
			</div>

			<div class="mb-1 ve-flex-v-center">${_0x3cbe71}${_0x2fd7af}</div>
		`,await this['_pageFilterSpells'][_0x3c7709(0x22d)]({'$iptSearch':_0x551fe6,'$btnReset':_0x1b30a1,'$btnOpen':_0x3a4807,'$btnToggleSummaryHidden':_0x4afcc7,'$wrpMiniPills':_0x5f1aaf,'namespace':_0x3c7709(0x1ce)}),this[_0x3c7709(0x269)][_0x3c7709(0x254)]['forEach'](_0x4f26e4=>this[_0x3c7709(0x1f5)]['mutateAndAddToFilters'](_0x4f26e4)),this[_0x3c7709(0x1f5)][_0x3c7709(0x26d)](),this[_0x3c7709(0x1f5)][_0x3c7709(0x247)][_0x3c7709(0x25e)](),this[_0x3c7709(0x220)]=this[_0x3c7709(0x1f5)][_0x3c7709(0x247)]['getValues'](),UiUtil[_0x3c7709(0x252)]({'$ipt':_0x551fe6,'fnKeyup':()=>{const _0x3033dc=_0x3c7709,_0x565914=List[_0x3033dc(0x21e)](_0x551fe6[_0x3033dc(0x24a)]());if(this[_0x3033dc(0x243)]===_0x565914)return;this[_0x3033dc(0x243)]=_0x565914,this[_0x3033dc(0x271)]['filter'](Boolean)[_0x3033dc(0x1f7)](_0x10e90b=>_0x10e90b['handleSearch'](_0x565914));}}),this[_0x3c7709(0x1f5)][_0x3c7709(0x247)]['on'](FilterBox[_0x3c7709(0x1ee)],this[_0x3c7709(0x1f4)][_0x3c7709(0x227)](this));}[_0x598a4f(0x1f4)](){const _0x4f77df=_0x598a4f,_0x49ef84=this['_pageFilterSpells']['filterBox'][_0x4f77df(0x230)]();this[_0x4f77df(0x271)][_0x4f77df(0x1d5)](Boolean)['forEach'](_0x3fac21=>_0x3fac21['handleFilterChange'](_0x49ef84));}[_0x598a4f(0x1f2)](_0x1b03e7,_0x277860,_0x46b906,_0x58c3d4,{isExistingClass:_0x2ccef9,isDefault:isDefault=![]}={}){const _0x4ce264=_0x598a4f,_0x56373e=this[_0x4ce264(0x1f3)][_0x1b03e7]?this[_0x4ce264(0x1f3)][_0x1b03e7][_0x4ce264(0x261)]():null;return Charactermancer_Spell_Util[_0x4ce264(0x25c)]({'cls':_0x277860,'sc':_0x46b906,'targetLevel':_0x58c3d4,'isExistingClass':_0x2ccef9,'isDefault':isDefault,'formDataSlotSelectFromComp':_0x56373e});}['_spell_getMaxPreparedSpells'](_0x3d138d,_0xde93ac,_0x2ae648,{existingAbilityScores:_0x492d0e}={}){const _0x3afb19=_0x598a4f,_0x1fdb94=this[_0x3afb19(0x228)]['compAbility'][_0x3afb19(0x237)]();return Charactermancer_Spell_Util[_0x3afb19(0x1c8)]({'cls':_0x3d138d,'sc':_0xde93ac,'targetLevel':_0x2ae648,'existingAbilityScores':_0x492d0e,'abilityScoresFromComp':_0x1fdb94});}[_0x598a4f(0x24c)](_0x17bb25,_0x88526e,_0x55a577,_0x2a9834){const _0x3004db=_0x598a4f,{propIxClass:_0x21468d,propIxSubclass:_0x38be01,propTargetLevel:_0xdf2720}=ActorCharactermancerBaseComponent[_0x3004db(0x1ea)](_0x2a9834),_0x4cccc6=$('<h2\x20class=\x22m-0\x20b-0\x20py-1\x22></h2>'),_0x5a8c67=$$`<div class="mb-1 ve-muted ve-small manc-sp__disp-prepared ve-flex-v-center"></div>`,_0x355cb0=$$`<div class="mb-1 ve-muted ve-small manc-sp__disp-prepared ve-flex-v-center"></div>`,_0x3510c1=$$`<div class="mb-1 ve-flex-col"></div>`,_0x37b39a=$('<h2\x20class=\x22m-0\x20b-0\x20py-1\x22></h2>'),_0x608c68=$$`<div class="ve-flex-col"></div>`,_0x123793=$$`<div class="ve-flex-col"></div>`['hideVe'](),_0x4ad56e=$$`<div class="ve-flex-col"></div>`['hideVe'](),_0x3c4dae=$$`<div class="ve-flex-col"></div>`,_0x4ef833=$('<div\x20class=\x22py-1\x20clickable\x20ve-muted\x22>[‒]</div>')[_0x3004db(0x1f1)](()=>{const _0x8fed4a=_0x3004db;_0x4ef833[_0x8fed4a(0x1dc)](_0x4ef833[_0x8fed4a(0x1dc)]()===_0x8fed4a(0x200)?_0x8fed4a(0x214):_0x8fed4a(0x200)),_0x3510c1[_0x8fed4a(0x24d)](),_0xe3b3c1[_0x8fed4a(0x24d)]();}),_0xe3b3c1=$$`<div class="ve-flex-col w-100">
			${_0x608c68}
			${_0x123793}
			${_0x4ad56e}
		</div>`,_0x496c13=$$`<div class="ve-flex-col mb-2">
			<div class="split-v-center">
				${_0x4cccc6}
				${_0x4ef833}
			</div>
			${_0x5a8c67}
			${_0x3510c1}

			${_0xe3b3c1}
		</div>`[_0x3004db(0x246)](_0x17bb25),_0x4d020d=$(_0x3004db(0x207))[_0x3004db(0x1f1)](()=>{const _0x1e9d15=_0x3004db;_0x4d020d['text'](_0x4d020d[_0x1e9d15(0x1dc)]()==='[+]'?_0x1e9d15(0x214):_0x1e9d15(0x200)),_0x5b54c3['toggleVe']();}),_0x5b54c3=$$`<div class="ve-flex-col w-100">
			${_0x3c4dae}
		</div>`,_0x2197f8=$$`<div class="ve-flex-col w-100">
			<div class="split-v-center">
				${_0x37b39a}
				${_0x4d020d}
			</div>
			${_0x355cb0}

			${_0x5b54c3}

			<hr class="hr-2">
		</div>`['appendTo'](_0x88526e),_0xb92cfe=this[_0x3004db(0x1ca)]['bind'](this,_0x2a9834,{'$dispClassNameLeft':_0x4cccc6,'$dispClassNameRight':_0x37b39a,'$stgClassAdditionalSpells':_0x123793,'$stgSubclassAdditionalSpells':_0x4ad56e,'$wrpLeftInner':_0x496c13,'$wrpRightInner':_0x2197f8,'$stgClassSpells':_0x608c68,'$stgSpellsTable':_0x3c4dae,'$dispSpell':_0x55a577,'$wrpSlotLevelSelect':_0x3510c1,'$wrpPreparedLearnedLhs':_0x5a8c67,'$wrpPreparedLearnedRhs':_0x355cb0}),_0x53fbe3=this[_0x3004db(0x239)][_0x3004db(0x227)](this,_0x2a9834,{'$dispClassNameLeft':_0x4cccc6,'$dispClassNameRight':_0x37b39a,'$stgSubclassAdditionalSpells':_0x4ad56e,'$wrpLeftInner':_0x496c13,'$wrpRightInner':_0x2197f8,'$stgClassSpells':_0x608c68,'$stgSpellsTable':_0x3c4dae,'$dispSpell':_0x55a577,'$wrpSlotLevelSelect':_0x3510c1,'$wrpPreparedLearnedLhs':_0x5a8c67,'$wrpPreparedLearnedRhs':_0x355cb0}),_0x11e49c=this['_hk_onChangeLevel'][_0x3004db(0x227)](this,_0x2a9834,{'$wrpLeftInner':_0x496c13,'$wrpRightInner':_0x2197f8}),_0x1ed218=this[_0x3004db(0x1e1)]['bind'](this,_0x2a9834);this[_0x3004db(0x228)]['compClass']['addHookBase'](_0x21468d,_0xb92cfe),this['_parent'][_0x3004db(0x1d6)][_0x3004db(0x226)](_0x38be01,_0x53fbe3),this[_0x3004db(0x228)]['compClass'][_0x3004db(0x226)](_0xdf2720,_0x11e49c),this[_0x3004db(0x228)][_0x3004db(0x1fa)][_0x3004db(0x1f8)](_0x1ed218),_0xb92cfe();}[_0x598a4f(0x201)](_0x420451){const _0x257cd6=_0x598a4f;return this[_0x257cd6(0x25f)]({'$wrpLeft':_0x420451,'propPulse':_0x257cd6(0x217),'propCompAdditionalSpells':_0x257cd6(0x1e8),'propAlwaysPreparedSpells':'alwaysPreparedSpellsRace','propExpandedSpells':_0x257cd6(0x24b),'propAlwaysKnownSpells':_0x257cd6(0x21f),'compEntity':this[_0x257cd6(0x228)][_0x257cd6(0x1d9)],'fnGetEntity':()=>this[_0x257cd6(0x228)][_0x257cd6(0x1e9)]['getRace_']()});}[_0x598a4f(0x249)](_0x562d93){const _0x578a72=_0x598a4f;return this[_0x578a72(0x25f)]({'$wrpLeft':_0x562d93,'propPulse':_0x578a72(0x235),'propCompAdditionalSpells':'_compSpellAdditionalSpellBackground','propAlwaysPreparedSpells':_0x578a72(0x1c5),'propExpandedSpells':_0x578a72(0x20e),'propAlwaysKnownSpells':_0x578a72(0x25a),'compEntity':this[_0x578a72(0x228)][_0x578a72(0x23e)],'fnGetEntity':()=>this['_parent'][_0x578a72(0x216)]['getFeatureCustomizedBackground_']({'isAllowStub':![]})});}[_0x598a4f(0x25f)]({$wrpLeft:_0x2981e9,propPulse:_0x5d18e6,propCompAdditionalSpells:_0x4a5f96,propAlwaysPreparedSpells:_0x853129,propExpandedSpells:_0x4965f8,propAlwaysKnownSpells:_0x4f508e,compEntity:_0x6b0b10,fnGetEntity:_0x2620e7}){const _0x2ea053=_0x598a4f,_0x3844e7=$$`<div class="ve-flex-col"></div>`[_0x2ea053(0x275)](),_0x27c4b2=()=>{const _0x3e4f06=_0x2ea053,_0x52c299=this[_0x3e4f06(0x228)][_0x3e4f06(0x1d6)][_0x3e4f06(0x1e5)](),_0x31c5e0=this['_parent'][_0x3e4f06(0x1d6)][_0x3e4f06(0x213)][_0x3e4f06(0x1c4)];if(this[_0x4a5f96]){this[_0x4a5f96][_0x3e4f06(0x26b)]=_0x52c299,this[_0x4a5f96][_0x3e4f06(0x204)]=Math[_0x3e4f06(0x22b)](0x1,_0x31c5e0);const {min:_0x462a85,max:_0xa0a39b}=this[_0x3e4f06(0x228)][_0x3e4f06(0x1d6)]['class_getMinMaxSpellLevel']();this[_0x4a5f96][_0x3e4f06(0x1ec)]=_0x462a85,this[_0x4a5f96][_0x3e4f06(0x23b)]=_0xa0a39b;}};this[_0x2ea053(0x228)][_0x2ea053(0x1d6)][_0x2ea053(0x226)](_0x2ea053(0x1c4),_0x27c4b2),this['_parent'][_0x2ea053(0x1d6)][_0x2ea053(0x226)](_0x2ea053(0x23f),_0x27c4b2);const _0x5f2e45=$('<h2\x20class=\x22m-0\x20b-0\x20py-1\x22></h2>'),_0x6abf20=$(_0x2ea053(0x207))[_0x2ea053(0x1f1)](()=>{const _0x18d1de=_0x2ea053;_0x6abf20[_0x18d1de(0x1dc)](_0x6abf20['text']()==='[+]'?_0x18d1de(0x214):'[+]'),_0x59e381['toggleVe']();}),_0x59e381=$$`<div class="ve-flex-col w-100">
			${_0x3844e7}
		</div>`,_0xc111ae=$$`<div class="ve-flex-col w-100 mb-2">
			<div class="split-v-center">
				${_0x5f2e45}
				${_0x6abf20}
			</div>

			${_0x59e381}
		</div>`['hideVe']()['appendTo'](_0x2981e9),_0x5ed196=()=>{const _0x3db38b=_0x2ea053;_0x3844e7[_0x3db38b(0x253)]();const _0xa265d8=_0x2620e7();let _0x307aac=![];if(_0xa265d8&&_0xa265d8[_0x3db38b(0x22f)]){_0x307aac=!![],_0x3844e7[_0x3db38b(0x1f9)](),this[_0x4a5f96]=new Charactermancer_AdditionalSpellsSelect({'spellDatas':this[_0x3db38b(0x269)]['spell'],'additionalSpells':_0xa265d8[_0x3db38b(0x22f)],'modalFilterSpells':this[_0x3db38b(0x241)]}),this[_0x4a5f96][_0x3db38b(0x25e)](_0x3844e7);const _0x2080cd=()=>this[_0x3db38b(0x271)][_0x3db38b(0x1d5)](Boolean)[_0x3db38b(0x1f7)](_0x374274=>_0x374274[_0x853129]=MiscUtil[_0x3db38b(0x26c)](this[_0x4a5f96][_0x3db38b(0x250)]));this[_0x4a5f96][_0x3db38b(0x218)](_0x2080cd),_0x2080cd();const _0x10c9b4=()=>this[_0x3db38b(0x271)][_0x3db38b(0x1d5)](Boolean)[_0x3db38b(0x1f7)](_0x2a6c39=>_0x2a6c39[_0x4965f8]=MiscUtil[_0x3db38b(0x26c)](this[_0x4a5f96][_0x3db38b(0x1d7)]));this[_0x4a5f96][_0x3db38b(0x23d)](_0x10c9b4),_0x10c9b4();const _0x65e1cb=()=>this[_0x3db38b(0x271)]['filter'](Boolean)['forEach'](_0x1a4c6a=>_0x1a4c6a[_0x4f508e]=MiscUtil[_0x3db38b(0x26c)](this[_0x4a5f96][_0x3db38b(0x1cc)]));this[_0x4a5f96]['addHookAlwaysKnownSpells'](_0x65e1cb),_0x65e1cb();}else _0x3844e7[_0x3db38b(0x275)](),this[_0x4a5f96]=null,this[_0x3db38b(0x271)][_0x3db38b(0x1d5)](Boolean)[_0x3db38b(0x1f7)](_0x3a9d48=>_0x3a9d48[_0x4965f8]=[]);_0xa265d8&&_0x307aac?(_0xc111ae[_0x3db38b(0x1f9)](),_0x5f2e45['text'](_0xa265d8[_0x3db38b(0x1cd)])):_0xc111ae['hideVe'](),_0x27c4b2();};_0x6b0b10[_0x2ea053(0x226)](_0x5d18e6,_0x5ed196),_0x5ed196();}[_0x598a4f(0x1ca)](_0x1f40c9,{$stgClassSpells:_0x1b8501,$stgSpellsTable:_0x446125,$dispClassNameLeft:_0xa48f88,$dispClassNameRight:_0x355975,$stgClassAdditionalSpells:_0x6d7eb8,$stgSubclassAdditionalSpells:_0x3f7039,$wrpLeftInner:_0xac4a3c,$wrpRightInner:_0x1f1d0a,$dispSpell:_0x171aa5,$wrpSlotLevelSelect:_0xa4973b,$wrpPreparedLearnedLhs:_0x495ad0,$wrpPreparedLearnedRhs:_0x48f5d2}){const _0x194d24=_0x598a4f,{propIxClass:_0x53ed61,propIxSubclass:_0x45baba,propTargetLevel:_0x45d10b}=ActorCharactermancerBaseComponent[_0x194d24(0x1ea)](_0x1f40c9),_0x14e508=this[_0x194d24(0x228)][_0x194d24(0x1d6)][_0x194d24(0x244)]({'propIxClass':_0x53ed61}),_0x176f2=this['_parent'][_0x194d24(0x1d6)][_0x194d24(0x236)]({'cls':_0x14e508,'propIxSubclass':_0x45baba});if(!_0x14e508||!this[_0x194d24(0x1cb)][_0x194d24(0x1f0)](_0x14e508,_0x176f2)){this[_0x194d24(0x259)]({'$stgClassSpells':_0x1b8501,'$stgSpellsTable':_0x446125,'$wrpLeftInner':_0xac4a3c,'$wrpRightInner':_0x1f1d0a,'ix':_0x1f40c9});return;}_0x1b8501[_0x194d24(0x253)](),_0x446125['empty'](),this[_0x194d24(0x1c7)]({'ix':_0x1f40c9,'cls':_0x14e508,'sc':_0x176f2,'$wrpPreparedLearnedLhs':_0x495ad0,'$wrpPreparedLearnedRhs':_0x48f5d2,'propTargetLevel':_0x45d10b}),_0x6d7eb8[_0x194d24(0x253)]();if(_0x14e508&&_0x14e508[_0x194d24(0x22f)]){_0x6d7eb8['showVe']()[_0x194d24(0x260)](_0x194d24(0x256)+_0x14e508[_0x194d24(0x1cd)]+')</div>'),this['_compsSpellAdditionalSpellClass'][_0x1f40c9]=new Charactermancer_AdditionalSpellsSelect({'spellDatas':this[_0x194d24(0x269)][_0x194d24(0x254)],'additionalSpells':_0x14e508[_0x194d24(0x22f)],'modalFilterSpells':this[_0x194d24(0x241)]}),this[_0x194d24(0x1d3)][_0x1f40c9][_0x194d24(0x25e)](_0x6d7eb8);const _0x1f8448=()=>{const _0x41b499=_0x194d24;if(this[_0x41b499(0x271)][_0x1f40c9])this[_0x41b499(0x271)][_0x1f40c9][_0x41b499(0x21d)]=MiscUtil[_0x41b499(0x26c)](this[_0x41b499(0x1d3)][_0x1f40c9][_0x41b499(0x250)]);};this[_0x194d24(0x1d3)][_0x1f40c9]['addHookAlwaysPreparedSpells'](_0x1f8448);const _0x1219fd=()=>{const _0x27c5c1=_0x194d24;if(this[_0x27c5c1(0x271)][_0x1f40c9])this[_0x27c5c1(0x271)][_0x1f40c9][_0x27c5c1(0x22e)]=MiscUtil[_0x27c5c1(0x26c)](this['_compsSpellAdditionalSpellClass'][_0x1f40c9][_0x27c5c1(0x1d7)]);};this[_0x194d24(0x1d3)][_0x1f40c9][_0x194d24(0x23d)](_0x1219fd);const _0xbedfe0=()=>{const _0x272aa2=_0x194d24;if(this[_0x272aa2(0x271)][_0x1f40c9])this[_0x272aa2(0x271)][_0x1f40c9][_0x272aa2(0x257)]=MiscUtil[_0x272aa2(0x26c)](this[_0x272aa2(0x1d3)][_0x1f40c9][_0x272aa2(0x1cc)]);};this[_0x194d24(0x1d3)][_0x1f40c9][_0x194d24(0x267)](_0xbedfe0);}else _0x6d7eb8[_0x194d24(0x275)](),this[_0x194d24(0x1d3)][_0x1f40c9]=null;this['_hk_onChangeSubclass'](_0x1f40c9,{'$dispClassNameLeft':_0xa48f88,'$dispClassNameRight':_0x355975,'$stgClassSpells':_0x1b8501,'$stgSpellsTable':_0x446125,'$stgSubclassAdditionalSpells':_0x3f7039,'$wrpLeftInner':_0xac4a3c,'$wrpRightInner':_0x1f1d0a});if(this[_0x194d24(0x271)][_0x1f40c9]&&this[_0x194d24(0x1d3)][_0x1f40c9])this['_compsSpellSpells'][_0x1f40c9][_0x194d24(0x21d)]=MiscUtil[_0x194d24(0x26c)](this[_0x194d24(0x1d3)][_0x1f40c9][_0x194d24(0x250)]),this['_compsSpellSpells'][_0x1f40c9][_0x194d24(0x22e)]=MiscUtil[_0x194d24(0x26c)](this['_compsSpellAdditionalSpellClass'][_0x1f40c9][_0x194d24(0x1d7)]),this[_0x194d24(0x271)][_0x1f40c9][_0x194d24(0x257)]=MiscUtil[_0x194d24(0x26c)](this[_0x194d24(0x1d3)][_0x1f40c9][_0x194d24(0x1cc)]);else{if(this[_0x194d24(0x271)][_0x1f40c9])this[_0x194d24(0x271)][_0x1f40c9][_0x194d24(0x21d)]=[];if(this[_0x194d24(0x271)][_0x1f40c9])this[_0x194d24(0x271)][_0x1f40c9]['expandedSpellsClass']=[];if(this[_0x194d24(0x271)][_0x1f40c9])this[_0x194d24(0x271)][_0x1f40c9][_0x194d24(0x257)]=[];}this['_hk_shared_doRenderClassSubclass']({'ix':_0x1f40c9,'$stgClassSpells':_0x1b8501,'$stgSpellsTable':_0x446125,'$dispSpell':_0x171aa5,'$wrpSlotLevelSelect':_0xa4973b});}[_0x598a4f(0x259)]({$stgClassSpells:_0x326d02,$stgSpellsTable:_0x5397a6,$wrpLeftInner:_0x4d9e44,$wrpRightInner:_0x25bd5b,ix:_0x1dad90}){const _0x20b0a8=_0x598a4f;_0x326d02['empty'](),_0x5397a6['empty'](),_0x4d9e44[_0x20b0a8(0x275)](),_0x25bd5b[_0x20b0a8(0x275)](),this[_0x20b0a8(0x271)][_0x1dad90]=null,this['_compsSpellSpellSlotLevelSelect'][_0x1dad90]=null;}[_0x598a4f(0x1c7)]({ix:_0x1f2cc2,cls:_0x5a9cfa,sc:_0x314a6c,$wrpPreparedLearnedLhs:_0x4c8b77,$wrpPreparedLearnedRhs:_0x4c9592,propTargetLevel:_0x1fb36d}){const _0x5e2527=_0x598a4f,_0x1baaaa=this['_parent']['compClass']['existingClassMetas'][_0x1f2cc2];this[_0x5e2527(0x271)][_0x1f2cc2]=new Charactermancer_Spell({'actor':this[_0x5e2527(0x1ff)],'existingClass':_0x1baaaa?this['_data'][_0x5e2527(0x20a)][_0x1baaaa[_0x5e2527(0x225)]]:null,'existingCasterMeta':this[_0x5e2527(0x258)]({'ix':_0x1f2cc2,'cls':_0x5a9cfa,'sc':_0x314a6c,'existingClassMeta':_0x1baaaa}),'spellDatas':this[_0x5e2527(0x269)][_0x5e2527(0x254)],'className':_0x5a9cfa['name'],'classSource':_0x5a9cfa[_0x5e2527(0x240)],'brewClassSpells':_0x5a9cfa[_0x5e2527(0x248)],'subclassName':_0x314a6c?.[_0x5e2527(0x1cd)],'subclassShortName':_0x314a6c?.[_0x5e2527(0x1d8)],'subclassSource':_0x314a6c?.['source'],'brewSubclassSpells':_0x314a6c?.['subclassSpells'],'brewSubSubclassSpells':_0x314a6c?.[_0x5e2527(0x266)],'pageFilter':this['_pageFilterSpells'],'$wrpsPreparedLearned':[_0x4c8b77,_0x4c9592]}),this['_compsSpellSpellSlotLevelSelect'][_0x1f2cc2]=new Charactermancer_Spell_SlotLevelSelect(_0x5a9cfa[_0x5e2527(0x1cd)]);const _0xcaf200=()=>{const _0x141dd3=_0x5e2527,_0x574bad=this[_0x141dd3(0x228)][_0x141dd3(0x1d6)][_0x141dd3(0x213)][_0x1fb36d];this[_0x141dd3(0x271)][_0x1f2cc2]&&(this[_0x141dd3(0x271)][_0x1f2cc2][_0x141dd3(0x1f6)]=this['_spell_getFixedLearnedProgression'](_0x1f2cc2,_0x5a9cfa,_0x314a6c,_0x574bad),this[_0x141dd3(0x271)][_0x1f2cc2][_0x141dd3(0x265)]=this['_spell_getFixedLearnedProgression'](_0x1f2cc2,_0x5a9cfa,_0x314a6c,_0x574bad,{'isDefault':!![]}));};this[_0x5e2527(0x1f3)][_0x1f2cc2]['addHookPulseFixedLearnedProgression'](_0xcaf200),_0xcaf200();}[_0x598a4f(0x211)]({ix:_0x491dd2,$stgClassSpells:_0x3716a8,$stgSpellsTable:_0x111107,$dispSpell:_0x47a97c,$wrpSlotLevelSelect:_0x526425}){const _0x22770a=_0x598a4f;this[_0x22770a(0x271)][_0x491dd2][_0x22770a(0x25e)](_0x3716a8,_0x47a97c),this[_0x22770a(0x1f3)][_0x491dd2][_0x22770a(0x25e)](_0x526425);const _0x3b54b0=this[_0x22770a(0x1f5)][_0x22770a(0x247)]['getValues']();this[_0x22770a(0x271)][_0x491dd2][_0x22770a(0x272)](_0x3b54b0);if(this['_compSpellAdditionalSpellRace'])this[_0x22770a(0x271)][_0x491dd2][_0x22770a(0x24b)]=MiscUtil['copy'](this[_0x22770a(0x1e8)]['spellsExpanded']);if(this[_0x22770a(0x24e)])this['_compsSpellSpells'][_0x491dd2]['expandedSpellsBackground']=MiscUtil[_0x22770a(0x26c)](this['_compSpellAdditionalSpellBackground'][_0x22770a(0x1d7)]);}[_0x598a4f(0x1c6)]({ix:_0x2e1a34}){const _0x146911=_0x598a4f;if(!this['_compsSpellSpells'][_0x2e1a34])return;const _0x3f6b29=this[_0x146911(0x1f5)][_0x146911(0x247)][_0x146911(0x230)]();this['_compsSpellSpells'][_0x2e1a34]['handleFilterChange'](_0x3f6b29);}[_0x598a4f(0x1e1)](_0x1f1cc8){const _0xe2d38b=_0x598a4f,{propIxClass:_0x2cdb34,propTargetLevel:_0x5a8dba,propIxSubclass:_0x588d3b}=ActorCharactermancerBaseComponent[_0xe2d38b(0x1ea)](_0x1f1cc8),_0x3cf5b5=this[_0xe2d38b(0x228)][_0xe2d38b(0x1d6)][_0xe2d38b(0x244)]({'propIxClass':_0x2cdb34}),_0x6c18f7=this['_parent'][_0xe2d38b(0x1d6)]['getSubclass_']({'cls':_0x3cf5b5,'propIxSubclass':_0x588d3b}),_0x26bba0=this[_0xe2d38b(0x228)][_0xe2d38b(0x1d6)]['state'][_0x5a8dba];if(this[_0xe2d38b(0x271)][_0x1f1cc8])this[_0xe2d38b(0x271)][_0x1f1cc8]['maxPrepared']=this[_0xe2d38b(0x203)](_0x3cf5b5,_0x6c18f7,_0x26bba0);}['_hk_onChangeSubclass'](_0x45757f,{$stgClassSpells:_0x5a7774,$stgSpellsTable:_0x387b84,$dispClassNameLeft:_0x1dc30c,$dispClassNameRight:_0x453428,$stgSubclassAdditionalSpells:_0x41bb68,$wrpLeftInner:_0x3d2060,$wrpRightInner:_0x186b88,$wrpPreparedLearnedLhs:_0x2b0443,$wrpPreparedLearnedRhs:_0x5bd0a2,$dispSpell:_0x66d9aa,$wrpSlotLevelSelect:_0x697fde}){const _0x4788c1=_0x598a4f,{propIxClass:_0x1739cf,propIxSubclass:_0x1f0dd7,propTargetLevel:_0x2fd902}=ActorCharactermancerBaseComponent['class_getProps'](_0x45757f),_0x23a28d=this[_0x4788c1(0x228)]['compClass'][_0x4788c1(0x244)]({'propIxClass':_0x1739cf}),_0x3d5456=this[_0x4788c1(0x228)][_0x4788c1(0x1d6)][_0x4788c1(0x236)]({'cls':_0x23a28d,'propIxSubclass':_0x1f0dd7}),_0x55abbb=_0x23a28d?''+_0x23a28d[_0x4788c1(0x1cd)]+(_0x3d5456?'\x20('+_0x3d5456[_0x4788c1(0x1cd)]+')':''):'';_0x1dc30c[_0x4788c1(0x1dc)](_0x55abbb),_0x453428[_0x4788c1(0x1dc)](_0x55abbb),this[_0x4788c1(0x223)](_0x45757f,{'cls':_0x23a28d,'sc':_0x3d5456,'$stgSpellsTable':_0x387b84});const _0x53afd4=this[_0x4788c1(0x1cb)][_0x4788c1(0x1f0)](_0x23a28d,_0x3d5456),_0x35e4ca=_0x53afd4&&!this[_0x4788c1(0x271)][_0x45757f];if(!_0x53afd4&&this[_0x4788c1(0x271)][_0x45757f]){this[_0x4788c1(0x259)]({'$stgClassSpells':_0x5a7774,'$stgSpellsTable':_0x387b84,'$wrpLeftInner':_0x3d2060,'$wrpRightInner':_0x186b88,'ix':_0x45757f});return;}else _0x35e4ca&&this['_hk_shared_doInitClassSubclass']({'ix':_0x45757f,'cls':_0x23a28d,'sc':_0x3d5456,'$wrpPreparedLearnedLhs':_0x2b0443,'$wrpPreparedLearnedRhs':_0x5bd0a2,'propTargetLevel':_0x2fd902});_0x41bb68[_0x4788c1(0x253)]();if(_0x3d5456&&_0x3d5456[_0x4788c1(0x22f)]){_0x41bb68['showVe']()[_0x4788c1(0x260)]('<div\x20class=\x22bold\x20mb-2\x22>Subclass\x20Spells\x20('+_0x3d5456['name']+_0x4788c1(0x1fc)),this[_0x4788c1(0x26f)][_0x45757f]=new Charactermancer_AdditionalSpellsSelect({'spellDatas':this['_data'][_0x4788c1(0x254)],'additionalSpells':_0x3d5456[_0x4788c1(0x22f)],'modalFilterSpells':this[_0x4788c1(0x241)]}),this[_0x4788c1(0x26f)][_0x45757f][_0x4788c1(0x25e)](_0x41bb68);const _0x1c2f50=()=>{const _0x3e4f92=_0x4788c1;if(this['_compsSpellSpells'][_0x45757f])this[_0x3e4f92(0x271)][_0x45757f][_0x3e4f92(0x231)]=MiscUtil[_0x3e4f92(0x26c)](this[_0x3e4f92(0x26f)][_0x45757f][_0x3e4f92(0x250)]);};this[_0x4788c1(0x26f)][_0x45757f][_0x4788c1(0x218)](_0x1c2f50);const _0x9a3ead=()=>{const _0x56e482=_0x4788c1;if(this['_compsSpellSpells'][_0x45757f])this['_compsSpellSpells'][_0x45757f][_0x56e482(0x255)]=MiscUtil[_0x56e482(0x26c)](this['_compsSpellAdditionalSpellSubclass'][_0x45757f][_0x56e482(0x1d7)]);};this[_0x4788c1(0x26f)][_0x45757f][_0x4788c1(0x23d)](_0x9a3ead);const _0x9c911e=()=>{const _0x5bfb7e=_0x4788c1;if(this[_0x5bfb7e(0x271)][_0x45757f])this[_0x5bfb7e(0x271)][_0x45757f][_0x5bfb7e(0x251)]=MiscUtil[_0x5bfb7e(0x26c)](this[_0x5bfb7e(0x26f)][_0x45757f]['spellsAlwaysKnown']);};this[_0x4788c1(0x26f)][_0x45757f][_0x4788c1(0x267)](_0x9c911e);}else _0x41bb68[_0x4788c1(0x275)](),this['_compsSpellAdditionalSpellSubclass'][_0x45757f]=null;this[_0x4788c1(0x1e0)](_0x45757f,{'$wrpLeftInner':_0x3d2060,'$wrpRightInner':_0x186b88});const _0x54a6ee=DataConverter['getMaxCasterProgression'](_0x23a28d?.[_0x4788c1(0x219)],_0x3d5456?.[_0x4788c1(0x219)]);this['_compsSpellSpells'][_0x45757f]&&(this[_0x4788c1(0x271)][_0x45757f][_0x4788c1(0x264)]=_0x3d5456?.[_0x4788c1(0x1cd)],this[_0x4788c1(0x271)][_0x45757f][_0x4788c1(0x274)]=_0x3d5456?.[_0x4788c1(0x1d8)],this[_0x4788c1(0x271)][_0x45757f][_0x4788c1(0x205)]=_0x3d5456?.[_0x4788c1(0x240)],this[_0x4788c1(0x271)][_0x45757f][_0x4788c1(0x219)]=_0x54a6ee);if(this[_0x4788c1(0x1f3)][_0x45757f])this[_0x4788c1(0x1f3)][_0x45757f]['casterProgression']=_0x54a6ee;if(this[_0x4788c1(0x271)][_0x45757f]&&this[_0x4788c1(0x26f)][_0x45757f])this['_compsSpellSpells'][_0x45757f][_0x4788c1(0x231)]=MiscUtil[_0x4788c1(0x26c)](this['_compsSpellAdditionalSpellSubclass'][_0x45757f][_0x4788c1(0x250)]),this[_0x4788c1(0x271)][_0x45757f][_0x4788c1(0x255)]=MiscUtil[_0x4788c1(0x26c)](this['_compsSpellAdditionalSpellSubclass'][_0x45757f][_0x4788c1(0x1d7)]),this[_0x4788c1(0x271)][_0x45757f]['alwaysKnownSpellsSubclass']=MiscUtil[_0x4788c1(0x26c)](this['_compsSpellAdditionalSpellSubclass'][_0x45757f][_0x4788c1(0x1cc)]);else{if(this[_0x4788c1(0x271)][_0x45757f])this['_compsSpellSpells'][_0x45757f][_0x4788c1(0x231)]=[];if(this[_0x4788c1(0x271)][_0x45757f])this[_0x4788c1(0x271)][_0x45757f][_0x4788c1(0x255)]=[];if(this[_0x4788c1(0x271)][_0x45757f])this[_0x4788c1(0x271)][_0x45757f][_0x4788c1(0x251)]=[];}if(_0x35e4ca)this[_0x4788c1(0x211)]({'ix':_0x45757f,'$stgClassSpells':_0x5a7774,'$dispSpell':_0x66d9aa,'$wrpSlotLevelSelect':_0x697fde});else this[_0x4788c1(0x1c6)]({'ix':_0x45757f});}async[_0x598a4f(0x223)](_0x29bf76,{cls:_0x306218,sc:_0x2e6636,$stgSpellsTable:_0x30ac16}){const _0x1b56cb=_0x598a4f,{lockChangeSubclassTable:_0x11f4e9}=this[_0x1b56cb(0x1cb)]['_spell_getLocks'](_0x29bf76);try{await this[_0x1b56cb(0x21a)](_0x11f4e9),await this[_0x1b56cb(0x1e4)](_0x29bf76,{'cls':_0x306218,'sc':_0x2e6636,'$stgSpellsTable':_0x30ac16});}finally{this[_0x1b56cb(0x270)](_0x11f4e9);}}async[_0x598a4f(0x1e4)](_0x10d307,{cls:_0x43dbf5,sc:_0x59dc84,$stgSpellsTable:_0x2119c4}){const _0x18b581=_0x598a4f,_0x466aad=_0x43dbf5?await DataUtil['class']['pGetDereferencedClassData'](_0x43dbf5):null,_0x2c27b1=_0x59dc84?await DataUtil[_0x18b581(0x20a)][_0x18b581(0x1eb)](_0x59dc84):null,_0x30c681=DataConverterClass[_0x18b581(0x1ef)](_0x466aad,_0x2c27b1,{'isSpellsOnly':!![]});_0x2119c4['html']('')['fastSetHtml'](_0x30c681);}static[_0x598a4f(0x1ed)](_0x582157){const _0x5c0d51=_0x598a4f;return{'lockChangeSubclassTable':_0x5c0d51(0x25b)+_0x582157+'_changeSubclassTable'};}[_0x598a4f(0x1e0)](_0x20cd77,{$wrpLeftInner:_0x381742,$wrpRightInner:_0x25d7f0}){const _0x18d6ed=_0x598a4f,{propIxClass:_0x4d3ddd,propIxSubclass:_0x43bf3a,propCurLevel:_0x53837a,propTargetLevel:_0x5d419d}=ActorCharactermancerBaseComponent[_0x18d6ed(0x1ea)](_0x20cd77),_0x5dc9ff=this['_parent'][_0x18d6ed(0x1d6)][_0x18d6ed(0x244)]({'propIxClass':_0x4d3ddd}),_0x31071a=this['_parent']['compClass']['getSubclass_']({'cls':_0x5dc9ff,'propIxSubclass':_0x43bf3a}),_0x17a052=this[_0x18d6ed(0x228)][_0x18d6ed(0x1d6)][_0x18d6ed(0x213)][_0x53837a]??0x0,_0x369285=this['_parent'][_0x18d6ed(0x1d6)]['state'][_0x5d419d],_0xbefdae=DataConverter['getMaxCasterProgression'](_0x5dc9ff?.[_0x18d6ed(0x219)],_0x31071a?.[_0x18d6ed(0x219)]),_0x529b56=Charactermancer_Spell_Util['getCasterProgressionMeta']({'casterProgression':_0xbefdae,'curLevel':_0x17a052,'targetLevel':_0x369285});if(this[_0x18d6ed(0x271)][_0x20cd77]){if(_0x529b56){const {spellLevelLow:_0x518203,spellLevelHigh:_0x405d60}=_0x529b56;this['_compsSpellSpells'][_0x20cd77][_0x18d6ed(0x1ec)]=_0x518203,this[_0x18d6ed(0x271)][_0x20cd77][_0x18d6ed(0x23b)]=_0x405d60;}else this[_0x18d6ed(0x271)][_0x20cd77][_0x18d6ed(0x1ec)]=null,this[_0x18d6ed(0x271)][_0x20cd77][_0x18d6ed(0x23b)]=null;this[_0x18d6ed(0x271)][_0x20cd77][_0x18d6ed(0x210)]=Charactermancer_Spell_Util[_0x18d6ed(0x1e6)]({'cls':_0x5dc9ff,'sc':_0x31071a,'targetLevel':_0x369285}),this[_0x18d6ed(0x271)][_0x20cd77]['fixedLearnedProgression']=this[_0x18d6ed(0x1f2)](_0x20cd77,_0x5dc9ff,_0x31071a,_0x369285),this['_compsSpellSpells'][_0x20cd77][_0x18d6ed(0x265)]=this[_0x18d6ed(0x1f2)](_0x20cd77,_0x5dc9ff,_0x31071a,_0x369285,{'isDefault':!![]}),this['_compsSpellSpells'][_0x20cd77][_0x18d6ed(0x1df)]=this[_0x18d6ed(0x1de)]['spells_isIncludeUaEtcSpellLists'];}this[_0x18d6ed(0x1e1)](_0x20cd77);this['_compsSpellSpellSlotLevelSelect'][_0x20cd77]&&(this['_compsSpellSpellSlotLevelSelect'][_0x20cd77][_0x18d6ed(0x26b)]=_0x17a052,this[_0x18d6ed(0x1f3)][_0x20cd77]['targetLevel']=_0x369285,this[_0x18d6ed(0x1f3)][_0x20cd77][_0x18d6ed(0x202)]=_0x5dc9ff?.[_0x18d6ed(0x202)]||_0x31071a?.[_0x18d6ed(0x202)],this[_0x18d6ed(0x1f3)][_0x20cd77]['casterProgression']=_0xbefdae,this[_0x18d6ed(0x1f3)][_0x20cd77][_0x18d6ed(0x20c)]=_0x5dc9ff?.[_0x18d6ed(0x20c)]||_0x31071a?.[_0x18d6ed(0x20c)],this[_0x18d6ed(0x1f3)][_0x20cd77][_0x18d6ed(0x26e)]=_0x5dc9ff?.[_0x18d6ed(0x26e)]||_0x31071a?.['spellsKnownProgressionFixedAllowLowerLevel']);if(this[_0x18d6ed(0x1d3)][_0x20cd77]){this['_compsSpellAdditionalSpellClass'][_0x20cd77][_0x18d6ed(0x26b)]=_0x17a052,this[_0x18d6ed(0x1d3)][_0x20cd77]['targetLevel']=_0x369285;if(_0x529b56){const {spellLevelLow:_0x3e3acb,spellLevelHigh:_0x4141ea}=_0x529b56;this[_0x18d6ed(0x1d3)][_0x20cd77][_0x18d6ed(0x1ec)]=_0x3e3acb,this['_compsSpellAdditionalSpellClass'][_0x20cd77][_0x18d6ed(0x23b)]=_0x4141ea;}else this[_0x18d6ed(0x1d3)][_0x20cd77][_0x18d6ed(0x1ec)]=null,this[_0x18d6ed(0x1d3)][_0x20cd77][_0x18d6ed(0x23b)]=null;}if(this[_0x18d6ed(0x26f)][_0x20cd77]){this[_0x18d6ed(0x26f)][_0x20cd77][_0x18d6ed(0x26b)]=_0x17a052,this['_compsSpellAdditionalSpellSubclass'][_0x20cd77][_0x18d6ed(0x204)]=_0x369285;if(_0x529b56){const {spellLevelLow:_0x3eee7b,spellLevelHigh:_0x2d4cd8}=_0x529b56;this[_0x18d6ed(0x26f)][_0x20cd77][_0x18d6ed(0x1ec)]=_0x3eee7b,this[_0x18d6ed(0x26f)][_0x20cd77]['spellLevelHigh']=_0x2d4cd8;}else this[_0x18d6ed(0x26f)][_0x20cd77]['spellLevelLow']=null,this['_compsSpellAdditionalSpellSubclass'][_0x20cd77][_0x18d6ed(0x23b)]=null;}if(_0x5dc9ff){const _0x44f884=this[_0x18d6ed(0x1cb)][_0x18d6ed(0x229)](_0x5dc9ff,_0x31071a,_0x369285);_0x381742['toggleVe'](_0x44f884);const _0x4dea17=this[_0x18d6ed(0x1cb)][_0x18d6ed(0x1f0)](_0x5dc9ff,_0x31071a);_0x25d7f0[_0x18d6ed(0x24d)](_0x4dea17);}}static[_0x598a4f(0x1f0)](_0x468d7f,_0x43bac3){const _0x2f3046=_0x598a4f;return _0x468d7f?.[_0x2f3046(0x219)]||_0x43bac3?.[_0x2f3046(0x219)]||_0x468d7f?.[_0x2f3046(0x22f)]||_0x43bac3?.[_0x2f3046(0x22f)];}static[_0x598a4f(0x229)](_0x2ce7a7,_0x27ce46,_0x9fdc8b){const _0x39c230=_0x598a4f;if(!this[_0x39c230(0x1f0)](_0x2ce7a7,_0x27ce46))return![];if(_0x9fdc8b==null)return![];const {casterProgression:_0x4fbb7e}=Charactermancer_Class_Util[_0x39c230(0x215)](_0x2ce7a7,_0x27ce46,{'targetLevel':_0x9fdc8b}),_0x346712=UtilDataConverter[_0x39c230(0x1fe)][_0x4fbb7e];if((_0x346712?.[_0x9fdc8b-0x1]||[])[_0x39c230(0x21b)](Boolean))return!![];if(this[_0x39c230(0x209)](_0x2ce7a7?.[_0x39c230(0x22f)],_0x9fdc8b))return!![];if(this[_0x39c230(0x209)](_0x27ce46?.['additionalSpells'],_0x9fdc8b))return!![];return![];}static[_0x598a4f(0x209)](_0x42a141,_0x5ed571){const _0x1cc65d=_0x598a4f;if(!_0x42a141)return![];if(_0x5ed571==null)return![];return _0x42a141[_0x1cc65d(0x21b)](_0x20ad77=>this[_0x1cc65d(0x22c)](_0x20ad77,_0x5ed571));}static[_0x598a4f(0x22c)](_0x2b6d18,_0x19329f){const _0x173d76=_0x598a4f,_0x5ab487=Object[_0x173d76(0x1cf)](_0x2b6d18);for(const _0x1ae8c5 of _0x5ab487){switch(_0x1ae8c5){case'innate':case _0x173d76(0x1c9):case'expanded':{const _0x1d1345=Object['keys'](_0x2b6d18[_0x1ae8c5]||{})[_0x173d76(0x21b)](_0x50c8c3=>{const _0x1cf3f8=/^s(\d+)$/i['exec'](_0x50c8c3);if(_0x1cf3f8)return![];if(isNaN(_0x50c8c3))return![];return Number(_0x50c8c3)<=_0x19329f;});if(_0x1d1345)return!![];}}}return![];}[_0x598a4f(0x258)]({ix:_0x1861c9,cls:_0x1000c6,sc:_0x43c7ca,existingClassMeta:_0x25b6be}){const _0x3e2b85=_0x598a4f;if(!_0x25b6be?.['level'])return null;const _0x2021d9=this[_0x3e2b85(0x1f3)][_0x1861c9]?this[_0x3e2b85(0x1f3)][_0x1861c9][_0x3e2b85(0x261)]():null,_0x25b28b=this[_0x3e2b85(0x228)][_0x3e2b85(0x1fa)][_0x3e2b85(0x237)]();return Charactermancer_Spell_Util[_0x3e2b85(0x23a)]({'cls':_0x1000c6,'sc':_0x43c7ca,'actor':this[_0x3e2b85(0x1ff)],'targetLevel':_0x25b6be['level'],'formDataSlotSelectFromComp':_0x2021d9,'abilityScoresFromComp':_0x25b28b});}[_0x598a4f(0x23c)](){return{'spells_isIncludeUaEtcSpellLists':![]};}}export{ActorCharactermancerSpell};