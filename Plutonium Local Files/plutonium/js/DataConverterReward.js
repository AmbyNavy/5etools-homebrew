const _0x4b14f2=_0x144a;(function(_0x271d36,_0x14e303){const _0x18defd=_0x144a,_0x21da83=_0x271d36();while(!![]){try{const _0x49a03d=parseInt(_0x18defd(0xf2))/0x1*(-parseInt(_0x18defd(0xed))/0x2)+parseInt(_0x18defd(0xcb))/0x3*(parseInt(_0x18defd(0xd2))/0x4)+parseInt(_0x18defd(0xd8))/0x5+parseInt(_0x18defd(0xc8))/0x6+parseInt(_0x18defd(0xe2))/0x7*(-parseInt(_0x18defd(0xf6))/0x8)+parseInt(_0x18defd(0xc9))/0x9+-parseInt(_0x18defd(0xeb))/0xa;if(_0x49a03d===_0x14e303)break;else _0x21da83['push'](_0x21da83['shift']());}catch(_0x2ab63f){_0x21da83['push'](_0x21da83['shift']());}}}(_0xb975,0x72504));import{UtilApplications}from'./UtilApplications.js';import{SharedConsts}from'../shared/SharedConsts.js';import{Config}from'./Config.js';import{Vetools}from'./Vetools.js';import{UtilActiveEffects}from'./UtilActiveEffects.js';import{PageFilterClassesFoundry}from'./UtilCharactermancerClass.js';import{DataConverterFeature}from'./DataConverterFeature.js';import{UtilDataConverter}from'./UtilDataConverter.js';import{DataConverter}from'./DataConverter.js';class DataConverterReward extends DataConverterFeature{static ['_SIDE_LOAD_OPTS']={'propBrew':'foundryReward','fnLoadJson':async()=>this[_0x4b14f2(0xd5)](),'propJson':_0x4b14f2(0xe9)};static[_0x4b14f2(0xe0)](){const _0x1cb075=_0x4b14f2;PageFilterClassesFoundry[_0x1cb075(0xdc)]('reward',this);}static async['pGetDereferencedRewardFeatureItem'](_0x331d7d){const _0x21085b=_0x4b14f2;if(_0x331d7d['entries'])return MiscUtil[_0x21085b(0xdd)](_0x331d7d);const _0x135b05=UrlUtil[_0x21085b(0xf0)][UrlUtil['PG_REWARDS']](_0x331d7d);return Renderer[_0x21085b(0xca)]['pCacheAndGet'](UrlUtil[_0x21085b(0xf5)],_0x331d7d[_0x21085b(0xcf)],_0x135b05,{'isCopy':!![]});}static async[_0x4b14f2(0xf4)](_0x55ef68,{actor:actor=null}={}){const _0x2aa8a6=_0x4b14f2,_0x2d13fc={'reward':_0x55ef68[_0x2aa8a6(0xcc)]+'|'+_0x55ef68[_0x2aa8a6(0xcf)]};return await PageFilterClassesFoundry[_0x2aa8a6(0xd1)]({'reward':_0x2d13fc,'raw':_0x55ef68,'actor':actor}),_0x2d13fc;}static async[_0x4b14f2(0xd4)](_0x26530d,_0x45e831){const _0x2f816b=_0x4b14f2;_0x45e831=_0x45e831||{};if(_0x45e831[_0x2f816b(0xde)])_0x45e831[_0x2f816b(0xd3)]=!![];const _0x35742f=await this['_pGetGenericDescription'](_0x26530d,_0x2f816b(0xd0)),_0x5e1175=await this[_0x2f816b(0xe5)](_0x26530d,{'propCompendium':'reward'}),_0x93e956=await this[_0x2f816b(0xe7)](_0x26530d),_0x2db140=await this[_0x2f816b(0xe8)](_0x26530d),_0x4225f4=_0x45e831['isActorItem']?[]:await this['_pGetEffectsSideLoaded']({'ent':_0x26530d,'img':_0x5e1175});DataConverter[_0x2f816b(0xdf)](_0x4225f4,'importReward');const _0x42c05a={'name':UtilApplications['getCleanEntityName'](UtilDataConverter[_0x2f816b(0xf8)](_0x26530d,{'isActorItem':_0x45e831[_0x2f816b(0xd3)]})),'data':{'source':UtilDataConverter['getSourceWithPagePart'](_0x26530d),'description':{'value':_0x35742f,'chat':'','unidentified':''},'activation':{'type':'','cost':0x0,'condition':''},'duration':{'value':0x0,'units':''},'target':{'value':0x0,'units':'','type':''},'range':{'value':0x0,'long':0x0,'units':null},'uses':{'value':0x0,'max':0x0,'per':''},'ability':'','actionType':'','attackBonus':null,'chatFlavor':'','critical':{'threshold':null,'damage':''},'damage':{'parts':[],'versatile':''},'formula':'','save':{'ability':'','dc':null},'requirements':'','recharge':{'value':0x0,'charged':!![]},..._0x93e956},'permission':{'default':0x0},'type':'feat','img':_0x5e1175,'flags':{...this[_0x2f816b(0xcd)](_0x26530d,_0x45e831),..._0x2db140},'effects':_0x4225f4};if(_0x45e831[_0x2f816b(0xe4)]!=null)_0x42c05a[_0x2f816b(0xf1)]={'default':_0x45e831[_0x2f816b(0xe4)]};else{if(_0x45e831[_0x2f816b(0xf3)])_0x42c05a['permission']={'default':Config[_0x2f816b(0xe3)]('importReward','permissions')};}return _0x42c05a;}static async[_0x4b14f2(0xee)](_0x16e016,_0x1f0234,_0x4bd1ff,_0x58e1b9){const _0x489899=await this['pGetSideLoadedMatch'](_0x4bd1ff);this['mutActorUpdate'](_0x16e016,_0x1f0234,_0x4bd1ff,{'sideData':_0x489899});}static[_0x4b14f2(0xcd)](_0x517347,_0x25bb0b){const _0x256272=_0x4b14f2;_0x25bb0b=_0x25bb0b||{};const _0x467be6={[SharedConsts[_0x256272(0xce)]]:{'page':UrlUtil['PG_REWARDS'],'source':_0x517347[_0x256272(0xcf)],'hash':UrlUtil[_0x256272(0xf0)][UrlUtil[_0x256272(0xf5)]](_0x517347)}};return _0x25bb0b[_0x256272(0xf7)]&&(_0x467be6[SharedConsts[_0x256272(0xce)]][_0x256272(0xea)]=_0x256272(0xe9),_0x467be6[SharedConsts[_0x256272(0xce)]]['filterValues']=_0x25bb0b[_0x256272(0xd9)]),_0x467be6;}static async['pGetSideLoadedMatch'](_0x4821e3){const _0x5152ab=_0x4b14f2;return this[_0x5152ab(0xe1)](_0x4821e3,this[_0x5152ab(0xdb)]);}static async['pHasRewardSideLoadedEffects'](_0x1ff649,_0x194686){const _0x3cc320=_0x4b14f2;return(await this[_0x3cc320(0xd7)](_0x194686,this[_0x3cc320(0xdb)]))?.[_0x3cc320(0xda)]>0x0;}static async[_0x4b14f2(0xec)](_0x532211,_0x4f1fb0,_0x51d574,{additionalData:_0x58eee6,img:_0x405318}={}){const _0xc37460=_0x4b14f2,_0x463471=await this[_0xc37460(0xd7)](_0x4f1fb0,{'propBrew':_0xc37460(0xe6),'fnLoadJson':Vetools['pGetRewardSideData'],'propJson':_0xc37460(0xe9)});return UtilActiveEffects[_0xc37460(0xc7)](_0x463471||[],{'actor':_0x532211,'sheetItem':_0x51d574,'parentName':_0x4f1fb0[_0xc37460(0xcc)],'additionalData':_0x58eee6,'img':_0x405318});}static async[_0x4b14f2(0xd5)](){const _0x6fc791=_0x4b14f2;if(!this[_0x6fc791(0xef)])this[_0x6fc791(0xef)]=await Vetools[_0x6fc791(0xd6)]();return this[_0x6fc791(0xef)];}}function _0x144a(_0x2f3072,_0x1a4d22){const _0xb975a4=_0xb975();return _0x144a=function(_0x144af2,_0x1d3309){_0x144af2=_0x144af2-0xc7;let _0x4f9f5a=_0xb975a4[_0x144af2];return _0x4f9f5a;},_0x144a(_0x2f3072,_0x1a4d22);}export{DataConverterReward};function _0xb975(){const _0x36b340=['source','importReward','pInitRewardLoadeds','329288dBadLb','isActorItem','pGetRewardItem','_pGetPreloadSideData','pGetRewardSideData','_pGetEffectsRawSideLoaded_','3426050trlxrr','filterValues','length','_SIDE_LOAD_OPTS','setImplSideData','copy','actor','mutEffectsDisabledTransfer','init','_pGetSideLoadedMatch','6370504TIqESG','get','defaultPermission','_pGetSaveImagePath','foundryReward','_pGetDataSideLoaded','_pGetFlagsSideLoaded','reward','propDroppable','877970qDGQzW','pGetRewardItemEffects','2PRcgvU','pMutActorUpdateReward','_SIDE_DATA','URL_TO_HASH_BUILDER','permission','529055nYgGrg','isAddPermission','pGetInitRewardFeatureLoadeds','PG_REWARDS','8IOKhIA','isAddDataFlags','getNameWithSourcePart','getExpandedEffects','3941694JXiLGX','3654243uOGbjk','hover','9IjjxzT','name','_getRewardFlags','MODULE_NAME_FAKE'];_0xb975=function(){return _0x36b340;};return _0xb975();}