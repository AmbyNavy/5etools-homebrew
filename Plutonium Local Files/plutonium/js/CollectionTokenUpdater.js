const _0x191ef5=_0x2991;(function(_0x18d96b,_0x3789fc){const _0x5f5a6b=_0x2991,_0x32a4ad=_0x18d96b();while(!![]){try{const _0x2c7cac=-parseInt(_0x5f5a6b(0x12a))/0x1+-parseInt(_0x5f5a6b(0x173))/0x2+-parseInt(_0x5f5a6b(0x1b1))/0x3+parseInt(_0x5f5a6b(0x16a))/0x4+parseInt(_0x5f5a6b(0x148))/0x5+parseInt(_0x5f5a6b(0x16d))/0x6*(-parseInt(_0x5f5a6b(0x15b))/0x7)+parseInt(_0x5f5a6b(0x191))/0x8;if(_0x2c7cac===_0x3789fc)break;else _0x32a4ad['push'](_0x32a4ad['shift']());}catch(_0x43bf9d){_0x32a4ad['push'](_0x32a4ad['shift']());}}}(_0x3b2c,0xa3aaa));import{SharedConsts}from'../shared/SharedConsts.js';import{Util}from'./Util.js';import{AppFilterBasic}from'./FilterApplications.js';import{BaseCollectionTool}from'./BaseCollectionTool.js';import{UtilApplications}from'./UtilApplications.js';function _0x2991(_0x5b0037,_0x43ed69){const _0x3b2c6f=_0x3b2c();return _0x2991=function(_0x29912a,_0x390044){_0x29912a=_0x29912a-0x116;let _0x257fec=_0x3b2c6f[_0x29912a];return _0x257fec;},_0x2991(_0x5b0037,_0x43ed69);}import{UtilActors}from'./UtilActors.js';import{UtilDocuments}from'./UtilDocuments.js';class CollectionTokenUpdater extends BaseCollectionTool{constructor(){const _0x59c487=_0x2991;super({'title':'Bulk\x20Prototype\x20Token\x20Editor','template':SharedConsts[_0x59c487(0x164)]+_0x59c487(0x135),'width':0x3c0,'height':Util['getMaxWindowHeight'](),'resizable':!![]},_0x59c487(0x186)),this[_0x59c487(0x13a)]=new AppFilterBasic(),this[_0x59c487(0x1b3)]=null,this['_$btnReset']=null;}[_0x191ef5(0x13d)](_0x3d2309){const _0x1622f6=_0x191ef5;super[_0x1622f6(0x13d)](_0x3d2309),this[_0x1622f6(0x163)](_0x3d2309),this[_0x1622f6(0x11d)](_0x3d2309),this[_0x1622f6(0x12d)](_0x3d2309),this[_0x1622f6(0x13f)](_0x3d2309);}[_0x191ef5(0x163)](_0xd65ef6){const _0x3f3870=_0x191ef5;_0xd65ef6[_0x3f3870(0x12e)]('[name=\x22btn-run\x22]')[_0x3f3870(0x172)](async()=>{const _0x30b51a=_0x3f3870;if(!this[_0x30b51a(0x1b3)])return;const _0x399ad4=this[_0x30b51a(0x19f)]();if(!_0x399ad4[_0x30b51a(0x15f)])return ui[_0x30b51a(0x126)]['warn']('Please\x20select\x20something\x20to\x20update!');const _0x4831af=await CollectionTokenUpdater['Template']['pGetState']();if(_0x4831af[_0x30b51a(0x128)]){const _0x405f33=await InputUiUtil['pGetUserBoolean']({'title':_0x30b51a(0x1a4),'htmlDescription':_0x30b51a(0x192),'textNo':_0x30b51a(0x18a),'textYes':'Continue'});if(!_0x405f33)return;}this[_0x30b51a(0x178)](),ui['sidebar']['activateTab'](this['_sidebarTab']);const _0x380b86=_0x399ad4[_0x30b51a(0x117)](({id:_0x2cc033,name:_0x5e77da})=>new Util[(_0x30b51a(0x1ba))](_0x5e77da,()=>this[_0x30b51a(0x155)](_0x2cc033,_0x4831af)));await UtilApplications['pRunTasks'](_0x380b86,{'titleInitial':_0x30b51a(0x162),'titleComplete':_0x30b51a(0x184),'fnGetRowRunningText':_0x1adcc3=>'Updating\x20'+_0x1adcc3+'...','fnGetRowSuccessText':_0xa75d0e=>_0x30b51a(0x140)+_0xa75d0e+'.','fnGetRowErrorText':_0x22d854=>_0x30b51a(0x1a6)+_0x22d854+'!\x20'+VeCt[_0x30b51a(0x1bc)]}),game[this[_0x30b51a(0x198)]]['render']();});}['_activateListeners_initBtnEditTemplate'](_0x2e4fb7){const _0x2e266d=_0x191ef5;_0x2e4fb7[_0x2e266d(0x12e)](_0x2e266d(0x132))['click'](()=>{const _0x19e8bb=_0x2e266d,_0x44721f=new CollectionTokenUpdater[(_0x19e8bb(0x119))]();_0x44721f['render'](!![]);});}[_0x191ef5(0x193)](){const _0x23f3c9=_0x191ef5;return this[_0x23f3c9(0x15d)]=this[_0x23f3c9(0x15d)]=this[_0x23f3c9(0x139)](),{...super['getData'](),'titleSearch':this[_0x23f3c9(0x1c0)]+'s','rows':this[_0x23f3c9(0x15d)]};}async[_0x191ef5(0x155)](_0xef7936,_0x50806b){const _0x1bc928=_0x191ef5,_0xf39208=CONFIG['Actor'][_0x1bc928(0x1bd)][_0x1bc928(0x196)]['get'](_0xef7936);if(!_0xf39208)return;const _0x1984c2={},_0x4a395a={},_0x28804e=[this[_0x1bc928(0x121)](_0xf39208,_0x50806b,_0x1984c2,_0x4a395a),this['_pUpdateToken_populateNameUpdate'](_0xf39208,_0x50806b,_0x1984c2,_0x4a395a),this['_pUpdateToken_populateDispositionUpdate'](_0xf39208,_0x50806b,_0x1984c2,_0x4a395a),this[_0x1bc928(0x1b5)](_0xf39208,_0x50806b,_0x1984c2,_0x4a395a),this[_0x1bc928(0x147)](_0xf39208,_0x50806b,_0x1984c2,_0x4a395a),this[_0x1bc928(0x14a)](_0xf39208,_0x50806b,_0x1984c2,_0x4a395a)];if(!_0x28804e['some'](Boolean))return;await UtilDocuments[_0x1bc928(0x1b4)](_0xf39208,{..._0x4a395a,'token':_0x1984c2});}[_0x191ef5(0x121)](_0x2aa17f,_0x154ebc,_0x2371d9){const _0x2bc95a=_0x191ef5;if(!_0x154ebc[_0x2bc95a(0x141)])return![];return _0x2371d9[_0x2bc95a(0x18e)]=_0x154ebc[_0x2bc95a(0x174)],!![];}[_0x191ef5(0x12f)](_0x1ed700,_0x317349,_0x589f31){const _0x257865=_0x191ef5;if(!_0x317349['isNameActive'])return![];let _0xa94dca=![];const _0x200de9=()=>_0x1ed700[_0x257865(0x166)][_0x257865(0x151)]('\x20')[0x0][_0x257865(0x15e)]()[_0x257865(0x138)](/,;$/,'')[_0x257865(0x15e)](),_0x3ac2aa=()=>_0x1ed700[_0x257865(0x166)][_0x257865(0x151)]('\x20')[_0x257865(0x17f)]()[_0x257865(0x15e)](),_0x32045e=()=>{const _0x552202=_0x257865,_0x186866=_0x317349[_0x552202(0x1c4)]&&_0x317349[_0x552202(0x197)]?_0x552202(0x12c):_0x317349['isNameParseDoubleQuotes']?_0x552202(0x159):_0x317349['isNameParseSingleQuotes']?_0x552202(0x1a2):'^$',_0x2843d8=new RegExp(_0x186866)[_0x552202(0x17d)](_0x1ed700[_0x552202(0x166)]);if(!_0x2843d8)return null;return _0x2843d8[0x1][_0x552202(0x15e)]();};if(_0x317349['nameMode']!=null){_0xa94dca=!![];switch(_0x317349[_0x257865(0x199)]){case _0x257865(0x1a5):_0x589f31[_0x257865(0x166)]=_0x1ed700[_0x257865(0x166)];break;case _0x257865(0x1b7):_0x589f31[_0x257865(0x166)]=_0x200de9();break;case _0x257865(0x18c):_0x589f31['name']=_0x3ac2aa();break;case _0x257865(0x188):{const _0x1899d6=_0x32045e();_0x589f31[_0x257865(0x166)]=_0x1899d6||_0x1ed700[_0x257865(0x166)];break;}case _0x257865(0x18d):{const _0x160313=_0x32045e();_0x589f31['name']=_0x160313||_0x200de9();break;}case _0x257865(0x1b2):{const _0x231288=_0x32045e();_0x589f31[_0x257865(0x166)]=_0x231288||_0x3ac2aa();break;}case _0x257865(0x149):{const _0x4d0d36=new RegExp(_0x317349[_0x257865(0x146)],_0x317349[_0x257865(0x1b0)]?'i':'')[_0x257865(0x17d)](_0x1ed700[_0x257865(0x166)]);if(_0x4d0d36)_0x589f31[_0x257865(0x166)]=_0x4d0d36[0x1];break;}}}return _0x317349['namePermissions']!=null&&(_0xa94dca=!![],_0x589f31['displayName']=Number(_0x317349['namePermissions'])),_0xa94dca;}[_0x191ef5(0x15a)](_0xb2c7d,_0x28657e,_0x21a2d3){const _0x42fb42=_0x191ef5;if(!_0x28657e['isDispositionActive'])return![];if(_0x28657e[_0x42fb42(0x1b6)]!=null)return _0x21a2d3[_0x42fb42(0x1b6)]=_0x28657e[_0x42fb42(0x1b6)],!![];return![];}['_pUpdateToken_populateImageUpdate'](_0x5915d4,_0x307764,_0x442741,_0x143f91){const _0x530458=_0x191ef5;if(!_0x307764[_0x530458(0x195)])return![];let _0x41334c=![];if(_0x307764['imageSyncMode']===0x0)_0x442741[_0x530458(0x1c2)]=_0x5915d4[_0x530458(0x1c2)],_0x41334c=!![];else _0x307764[_0x530458(0x19a)]===0x1&&(_0x143f91[_0x530458(0x1c2)]=_0x5915d4[_0x530458(0x1aa)][_0x530458(0x1bb)][_0x530458(0x1c2)],_0x41334c=!![]);return _0x307764[_0x530458(0x116)]!=null&&(_0x442741[_0x530458(0x116)]=_0x307764[_0x530458(0x116)],_0x41334c=!![]),_0x41334c;}[_0x191ef5(0x147)](_0x4f648a,_0x40fe22,_0x22a688){const _0x3cbba5=_0x191ef5;if(!_0x40fe22['isResourcesActive'])return![];let _0x21c89f=![];return _0x40fe22[_0x3cbba5(0x157)]!=null&&(_0x21c89f=!![],_0x22a688[_0x3cbba5(0x150)]=Number(_0x40fe22[_0x3cbba5(0x157)])),_0x4f648a[_0x3cbba5(0x1aa)][_0x3cbba5(0x1be)]===_0x3cbba5(0x122)&&(_0x40fe22[_0x3cbba5(0x18b)]!=null&&(_0x21c89f=!![],_0x22a688[_0x3cbba5(0x131)]={'attribute':_0x40fe22['barAttributeCharacter1']==='(None)'?null:_0x40fe22['barAttributeCharacter1']}),_0x40fe22['barAttributeCharacter2']!=null&&(_0x21c89f=!![],_0x22a688[_0x3cbba5(0x14b)]={'attribute':_0x40fe22[_0x3cbba5(0x11a)]===_0x3cbba5(0x1a7)?null:_0x40fe22[_0x3cbba5(0x11a)]})),_0x4f648a[_0x3cbba5(0x1aa)]['type']===_0x3cbba5(0x11b)&&(_0x40fe22[_0x3cbba5(0x14e)]!=null&&(_0x21c89f=!![],_0x22a688[_0x3cbba5(0x131)]={'attribute':_0x40fe22['barAttributeNpc1']===_0x3cbba5(0x1a7)?null:_0x40fe22[_0x3cbba5(0x14e)]}),_0x40fe22['barAttributeNpc2']!=null&&(_0x21c89f=!![],_0x22a688['bar2']={'attribute':_0x40fe22[_0x3cbba5(0x167)]===_0x3cbba5(0x1a7)?null:_0x40fe22[_0x3cbba5(0x167)]})),_0x21c89f;}[_0x191ef5(0x14a)](_0x27620d,_0x46d364,_0x1a022d){const _0x25b7da=_0x191ef5;if(!_0x46d364[_0x25b7da(0x133)])return![];let _0x139cd0=![];return _0x46d364[_0x25b7da(0x14d)]!=null&&(_0x27620d[_0x25b7da(0x1aa)][_0x25b7da(0x1bb)][_0x25b7da(0x11c)]!==_0x46d364['isHasVision']&&(_0x1a022d['vision']=_0x46d364[_0x25b7da(0x14d)],_0x139cd0=!![])),_0x46d364['visionDim']!=null&&(_0x27620d['data'][_0x25b7da(0x1bb)][_0x25b7da(0x14c)]!==_0x46d364[_0x25b7da(0x19e)]&&(_0x1a022d[_0x25b7da(0x14c)]=_0x46d364[_0x25b7da(0x19e)],_0x139cd0=!![])),_0x46d364['visionBright']!=null&&(_0x27620d['data'][_0x25b7da(0x1bb)][_0x25b7da(0x180)]!==_0x46d364[_0x25b7da(0x1a9)]&&(_0x1a022d['brightSight']=_0x46d364[_0x25b7da(0x1a9)],_0x139cd0=!![])),_0x46d364[_0x25b7da(0x185)]!=null&&(_0x27620d[_0x25b7da(0x1aa)][_0x25b7da(0x1bb)][_0x25b7da(0x175)]!==_0x46d364[_0x25b7da(0x185)]&&(_0x1a022d[_0x25b7da(0x175)]=_0x46d364['visionAngle'],_0x139cd0=!![])),_0x46d364[_0x25b7da(0x19c)]!=null&&(_0x27620d[_0x25b7da(0x1aa)][_0x25b7da(0x1bb)][_0x25b7da(0x171)]!==_0x46d364[_0x25b7da(0x19c)]&&(_0x1a022d['dimLight']=_0x46d364[_0x25b7da(0x19c)],_0x139cd0=!![])),_0x46d364[_0x25b7da(0x183)]!=null&&(_0x27620d[_0x25b7da(0x1aa)][_0x25b7da(0x1bb)][_0x25b7da(0x177)]!==_0x46d364[_0x25b7da(0x183)]&&(_0x1a022d[_0x25b7da(0x177)]=_0x46d364[_0x25b7da(0x183)],_0x139cd0=!![])),_0x46d364[_0x25b7da(0x176)]!=null&&(_0x27620d[_0x25b7da(0x1aa)][_0x25b7da(0x1bb)][_0x25b7da(0x176)]!==_0x46d364[_0x25b7da(0x176)]&&(_0x1a022d[_0x25b7da(0x176)]=_0x46d364[_0x25b7da(0x176)],_0x139cd0=!![])),_0x46d364['lightOpacity']!=null&&(_0x27620d[_0x25b7da(0x1aa)]['token'][_0x25b7da(0x11f)]!==_0x46d364[_0x25b7da(0x19b)]&&(_0x1a022d['lightAlpha']=_0x46d364[_0x25b7da(0x19b)],_0x139cd0=!![])),_0x139cd0;}[_0x191ef5(0x178)](..._0x63cb5e){const _0x1ad615=_0x191ef5;return this[_0x1ad615(0x13a)]['teardown'](),super[_0x1ad615(0x178)](..._0x63cb5e);}}CollectionTokenUpdater[_0x191ef5(0x119)]=class extends Application{constructor(){const _0x52d313=_0x191ef5;super({'title':_0x52d313(0x17e),'template':SharedConsts['MODULE_LOCATION']+_0x52d313(0x1b8),'width':0x258,'height':Util[_0x52d313(0x179)](0x384),'resizable':!![]});}['activateListeners'](_0x2465a0){const _0x5349ec=_0x191ef5;_0x2465a0[_0x5349ec(0x118)](),this[_0x5349ec(0x18f)](_0x2465a0);}static async[_0x191ef5(0x123)](){const _0x49ff19=_0x191ef5,_0x3aa088=await StorageUtil[_0x49ff19(0x19d)](CollectionTokenUpdater[_0x49ff19(0x119)]['_STORAGE_KEY']);return _0x3aa088||CollectionTokenUpdater[_0x49ff19(0x119)][_0x49ff19(0x1a1)];}async[_0x191ef5(0x18f)](_0x1e94c0){const _0x32d435=_0x191ef5,_0x3ce2a0=await StorageUtil[_0x32d435(0x19d)](CollectionTokenUpdater[_0x32d435(0x119)][_0x32d435(0x144)]),_0x539df1=BaseComponent[_0x32d435(0x143)](_0x3ce2a0||CollectionTokenUpdater[_0x32d435(0x119)][_0x32d435(0x1a1)]),_0x1f8dae=_0x539df1['getPod'](),_0x44c12f=()=>{const _0x1b7af4=_0x32d435,_0x4b2f57=_0x539df1['toObject']();delete _0x4b2f57[_0x1b7af4(0x128)],StorageUtil['pSet'](CollectionTokenUpdater[_0x1b7af4(0x119)][_0x1b7af4(0x144)],_0x4b2f57);},_0x39b7e0=MiscUtil[_0x32d435(0x137)](_0x44c12f,0x64);_0x539df1[_0x32d435(0x145)](_0x32d435(0x1ad),_0x39b7e0);const _0x10ba3d=ComponentUiUtil[_0x32d435(0x129)](_0x539df1,_0x32d435(0x168)),_0x71ecaa=ComponentUiUtil[_0x32d435(0x129)](_0x539df1,_0x32d435(0x1c4)),_0x896941=ComponentUiUtil[_0x32d435(0x129)](_0x539df1,_0x32d435(0x197)),_0x1f4174=$$`<div class="ve-flex-v-center toku__row">
			<label class="ve-flex-v-center mr-2 ml-auto"><div class="mr-1">Accept Double Quotes</div>${_0x71ecaa}</label>
			<label class="ve-flex-v-center"><div class="mr-1">Accept Single Quotes</div>${_0x896941}</label>
		</div>`,_0x6ae08e=ComponentUiUtil[_0x32d435(0x187)](_0x539df1,_0x32d435(0x146),{'html':_0x32d435(0x169)}),_0x502ef1=ComponentUiUtil['$getCbBool'](_0x539df1,_0x32d435(0x1b0)),_0xf07396=$$`<div class="ve-flex-col w=100">
			<label class="ve-flex-v-center ve-flex-h-right toku__row">
				<div class="mr-2 help" title="The first capture group will be used, if the expression matches">Expression</div>${_0x6ae08e}
			</label>

			<label class="ve-flex-v-center ve-flex-h-right toku__row">
				<div class="mr-1">Ignore Case</div>${_0x502ef1}
			</label>
		</div>`,_0x59cf63=[new CollectionTokenUpdater[(_0x32d435(0x119))][(_0x32d435(0x182))](_0x32d435(0x1a5),_0x1f4174,_0xf07396),new CollectionTokenUpdater[(_0x32d435(0x119))][(_0x32d435(0x182))]('First\x20Name',_0x1f4174,_0xf07396),new CollectionTokenUpdater[(_0x32d435(0x119))][(_0x32d435(0x182))](_0x32d435(0x18c),_0x1f4174,_0xf07396),new CollectionTokenUpdater['Template']['NameUpdateMode']('Quoted\x20Part\x20or\x20Full\x20Name',_0x1f4174,_0xf07396),new CollectionTokenUpdater[(_0x32d435(0x119))]['NameUpdateMode'](_0x32d435(0x18d),_0x1f4174,_0xf07396),new CollectionTokenUpdater['Template'][(_0x32d435(0x182))](_0x32d435(0x1b2),_0x1f4174,_0xf07396),new CollectionTokenUpdater['Template'][(_0x32d435(0x182))]('Regex',_0x1f4174,_0xf07396)],_0x453477=ComponentUiUtil[_0x32d435(0x13c)](_0x539df1,_0x32d435(0x199),{'values':_0x59cf63[_0x32d435(0x117)](_0x5c1211=>_0x5c1211['name']),'isAllowNull':!![],'displayNullAs':'(No\x20update)'}),_0x31c929=()=>{const _0x3ebc21=_0x32d435,_0x3891c2=_0x59cf63[_0x3ebc21(0x12e)](_0x54cc67=>_0x1f8dae['get'](_0x3ebc21(0x199))===_0x54cc67[_0x3ebc21(0x166)]);if(_0x3891c2)_0x3891c2[_0x3ebc21(0x181)]();else _0x1f4174[_0x3ebc21(0x161)](),_0xf07396[_0x3ebc21(0x161)]();};_0x539df1[_0x32d435(0x17b)](_0x32d435(0x199),_0x31c929),_0x31c929();const _0x1c1f27={};Object['entries'](CONST[_0x32d435(0x16b)])[_0x32d435(0x142)](([,_0x8f7105],[,_0x47772d])=>SortUtil['ascSort'](_0x8f7105,_0x47772d))[_0x32d435(0x1a3)](([_0x527ef5,_0x5a18cf])=>_0x1c1f27[_0x5a18cf]=game[_0x32d435(0x11e)][_0x32d435(0x189)](_0x32d435(0x1af)+_0x527ef5));const _0x31b654=ComponentUiUtil['$getSelEnum'](_0x539df1,'namePermissions',{'values':Object[_0x32d435(0x160)](_0x1c1f27),'fnDisplay':_0x14791e=>_0x1c1f27[_0x14791e],'isAllowNull':!![],'displayNullAs':_0x32d435(0x130)}),_0x202db5=ComponentUiUtil[_0x32d435(0x129)](_0x539df1,_0x32d435(0x141)),_0x23d925=ComponentUiUtil[_0x32d435(0x129)](_0x539df1,_0x32d435(0x174)),_0x53509a=ComponentUiUtil[_0x32d435(0x129)](_0x539df1,_0x32d435(0x1b9)),_0xae33dd=[_0x32d435(0x158),'Neutral',_0x32d435(0x17c)],_0x15c18f=ComponentUiUtil[_0x32d435(0x13c)](_0x539df1,_0x32d435(0x1b6),{'values':[-0x1,0x0,0x1],'fnDisplay':_0xa8bf36=>_0xae33dd[_0xa8bf36+0x1],'isAllowNull':!![],'displayNullAs':'(No\x20update)'}),_0x5cc55c=ComponentUiUtil[_0x32d435(0x129)](_0x539df1,_0x32d435(0x195)),_0x58731b=[_0x32d435(0x152),_0x32d435(0x14f)],_0x28cafb=ComponentUiUtil['$getSelEnum'](_0x539df1,_0x32d435(0x19a),{'values':[0x0,0x1],'isAllowNull':!![],'fnDisplay':_0x1c7db5=>_0x58731b[_0x1c7db5],'displayNullAs':'(No\x20update)'}),_0x18af36=ComponentUiUtil['$getSliderNumber'](_0x539df1,_0x32d435(0x116),{'min':0.2,'max':0x3,'step':0.1}),_0x383813=ComponentUiUtil[_0x32d435(0x124)](_0x539df1,'scale',null,{'$ele':$(_0x32d435(0x194)),'isAllowNull':!![],'fallbackOnNaN':null,'min':0.2,'max':0x3}),_0x3057e6=()=>_0x383813[_0x32d435(0x154)](_0x539df1['_state']['scale']==null?'(No\x20update)':'Set\x20scale\x20to\x20'+_0x539df1[_0x32d435(0x1bf)][_0x32d435(0x116)]);_0x539df1[_0x32d435(0x17b)](_0x32d435(0x116),_0x3057e6),_0x3057e6();const _0x343394=$(_0x32d435(0x1ae))[_0x32d435(0x172)](()=>_0x539df1[_0x32d435(0x1bf)]['scale']=null),_0x1f5c23=ComponentUiUtil['$getCbBool'](_0x539df1,_0x32d435(0x134)),_0x28ec9b=ComponentUiUtil[_0x32d435(0x13c)](_0x539df1,_0x32d435(0x157),{'values':Object['keys'](_0x1c1f27),'fnDisplay':_0xc92bb0=>_0x1c1f27[_0xc92bb0],'isAllowNull':!![],'displayNullAs':_0x32d435(0x130)}),_0x4034a2=CollectionTokenUpdater[_0x32d435(0x119)][_0x32d435(0x165)](_0x32d435(0x122)),_0x2bf48=[_0x32d435(0x1a7),...Object[_0x32d435(0x120)](_0x4034a2)[_0x32d435(0x16c)]()],_0x2fbd28=CollectionTokenUpdater['Template']['_getAllAvailableActorBarAttributes'](_0x32d435(0x11b)),_0x16ff09=[_0x32d435(0x1a7),...Object[_0x32d435(0x120)](_0x2fbd28)['flat']()],_0x2f488d=ComponentUiUtil[_0x32d435(0x13c)](_0x539df1,_0x32d435(0x18b),{'values':_0x2bf48,'isAllowNull':!![],'displayNullAs':_0x32d435(0x130)}),_0x95d9d2=ComponentUiUtil[_0x32d435(0x13c)](_0x539df1,_0x32d435(0x11a),{'values':_0x2bf48,'isAllowNull':!![],'displayNullAs':_0x32d435(0x130)}),_0x438ceb=ComponentUiUtil[_0x32d435(0x13c)](_0x539df1,_0x32d435(0x14e),{'values':_0x16ff09,'isAllowNull':!![],'displayNullAs':'(No\x20update)'}),_0x44cf1e=ComponentUiUtil[_0x32d435(0x13c)](_0x539df1,'barAttributeNpc2',{'values':_0x16ff09,'isAllowNull':!![],'displayNullAs':_0x32d435(0x130)}),_0x1835c8=ComponentUiUtil['$getCbBool'](_0x539df1,_0x32d435(0x133)),_0x3c9fbf=ComponentUiUtil[_0x32d435(0x129)](_0x539df1,_0x32d435(0x14d)),_0x3e5302=ComponentUiUtil['$getIptInt'](_0x539df1,'visionDim',null,{'min':0x0,'isAllowNull':!![],'html':_0x32d435(0x15c)}),_0x105f7d=ComponentUiUtil[_0x32d435(0x12b)](_0x539df1,_0x32d435(0x1a9),null,{'min':0x0,'isAllowNull':!![],'html':_0x32d435(0x15c)}),_0x289421=ComponentUiUtil[_0x32d435(0x12b)](_0x539df1,'visionAngle',null,{'min':0x0,'max':0x168,'isAllowNull':!![],'html':_0x32d435(0x15c)}),_0x5b46b7=ComponentUiUtil[_0x32d435(0x12b)](_0x539df1,_0x32d435(0x19c),null,{'min':0x0,'isAllowNull':!![],'html':_0x32d435(0x15c)}),_0x3b134a=ComponentUiUtil[_0x32d435(0x12b)](_0x539df1,_0x32d435(0x183),null,{'min':0x0,'isAllowNull':!![],'html':_0x32d435(0x15c)}),_0x5bdc1f=ComponentUiUtil[_0x32d435(0x12b)](_0x539df1,'lightAngle',null,{'min':0x0,'max':0x168,'isAllowNull':!![],'html':_0x32d435(0x15c)}),_0x57369c=ComponentUiUtil[_0x32d435(0x124)](_0x539df1,_0x32d435(0x19b),null,{'min':0x0,'max':0x1,'isAllowNull':!![],'html':_0x32d435(0x15c)}),_0x4a9831=$('<button\x20class=\x22btn-5et\x20w-100\x22>Save</button>')[_0x32d435(0x172)](async()=>{const _0x25b50a=_0x32d435;try{await _0x44c12f(),ui[_0x25b50a(0x126)]['info'](_0x25b50a(0x16e));}catch(_0xc1a6a4){ui[_0x25b50a(0x126)][_0x25b50a(0x16f)](_0x25b50a(0x156)+VeCt[_0x25b50a(0x1bc)]);throw _0xc1a6a4;}this[_0x25b50a(0x178)]();});_0x1e94c0[_0x32d435(0x1a0)](_0x32d435(0x17a)),$$(_0x1e94c0)`
		<label class="split-v-center mb-1" title="Update Token Name">
			<div class="toku__sect-head">Name</div>
			${_0x10ba3d[_0x32d435(0x1a0)]('toku__cb-head')}
		</label>
		<div class="ve-flex-col w-100">
			<label class="my-1 split-v-center toku__row"><div>Update Mode</div>${_0x453477}</label>
			${_0x1f4174}
			${_0xf07396}
			<label class="my-1 split-v-center toku__row"><div>Display Name</div>${_0x31b654}</label>
		</div>

		<hr class="hr-1">

		<label class="split-v-center mb-1" title="Update Token Link">
			<div class="toku__sect-head">Link</div>
			${_0x202db5[_0x32d435(0x1a0)](_0x32d435(0x13e))}
		</label>
		<div class="ve-flex-col w-100">
			<label class="my-1 split-v-center toku__row"><div>Link Actor Data</div>${_0x23d925}</label>
		</div>

		<hr class="hr-1">

		<label class="split-v-center mb-1" title="Update Token Disposition">
			<div class="toku__sect-head">Disposition</div>
			${_0x53509a[_0x32d435(0x1a0)](_0x32d435(0x13e))}
		</label>
		<div class="ve-flex-col w-100">
			<label class="my-1 split-v-center toku__row"><div>Token Disposition</div>${_0x15c18f}</label>
		</div>

		<hr class="hr-1">

		<label class="split-v-center mb-1" title="Update Token Image">
			<div class="toku__sect-head">Image</div>
			${_0x5cc55c[_0x32d435(0x1a0)]('toku__cb-head')}
		</label>
		<div class="ve-flex-col w-100">
			<label class="my-1 split-v-center toku__row"><div>Image</div>${_0x28cafb}</label>
			<label class="my-1 split-v-center toku__row">
				<div>Scale</div>
				<div class="ve-flex-v-center max-w-200p w-100">${_0x18af36}${_0x383813}${_0x343394}</div>
			</label>
		</div>

		<hr class="hr-1">

		<label class="split-v-center mb-1" title="Update Token Resources">
			<div class="toku__sect-head">Resources</div>
			${_0x1f5c23[_0x32d435(0x1a0)]('toku__cb-head')}
		</label>
		<div class="ve-flex-col w-100">
			<label class="my-1 split-v-center toku__row"><div>Display Bars</div>${_0x28ec9b}</label>
			<label class="my-1 split-v-center toku__row"><div>Bar 1 Attribute (Characters)</div>${_0x2f488d}</label>
			<label class="my-1 split-v-center toku__row"><div>Bar 2 Attribute (Characters)</div>${_0x95d9d2}</label>
			<label class="my-1 split-v-center toku__row"><div>Bar 1 Attribute (NPCs)</div>${_0x438ceb}</label>
			<label class="my-1 split-v-center toku__row"><div>Bar 2 Attribute (NPCs)</div>${_0x44cf1e}</label>
		</div>

		<hr class="hr-1">

		<label class="split-v-center mb-1" title="Update Token Vision">
			<div class="toku__sect-head">Vision</div>
			${_0x1835c8[_0x32d435(0x1a0)](_0x32d435(0x13e))}
		</label>
		<div class="ve-flex-col w-100">
			<label class="my-1 split-v-center toku__row"><div>Has Vision</div>${_0x3c9fbf}</label>
			<label class="my-1 split-v-center toku__row"><div>Dim Vision <span class="ve-muted ve-small">(Distance)</span></div>${_0x3e5302}</label>
			<label class="my-1 split-v-center toku__row"><div>Bright Vision <span class="ve-muted ve-small">(Distance)</span></div>${_0x105f7d}</label>
			<label class="my-1 split-v-center toku__row"><div>Sight Angle <span class="ve-muted ve-small">(Degrees)</span></div>${_0x289421}</label>
			<label class="my-1 split-v-center toku__row"><div>Emit Dim <span class="ve-muted ve-small">(Distance)</span></div>${_0x5b46b7}</label>
			<label class="my-1 split-v-center toku__row"><div>Emit Bright <span class="ve-muted ve-small">(Distance)</span></div>${_0x3b134a}</label>
			<label class="my-1 split-v-center toku__row"><div>Emission Angle <span class="ve-muted ve-small">(Degrees)</span></div>${_0x5bdc1f}</label>
			<label class="my-1 split-v-center toku__row"><div>Light Opacity <span class="ve-muted ve-small">(0-1)</span></div>${_0x57369c}</label>
		</div>

		<div class="mt-auto">
			${_0x4a9831}
		</div>
		`;}static[_0x191ef5(0x165)](_0x2e8d61){const _0x173658=_0x191ef5,_0x991e89=CONFIG[_0x173658(0x170)][_0x173658(0x1bd)][_0x173658(0x196)][_0x173658(0x127)][_0x173658(0x153)](_0x5d6388=>_0x5d6388[_0x173658(0x1aa)]['type']===_0x2e8d61);_0x991e89[_0x173658(0x1ab)]({'data':{'data':game['system'][_0x173658(0x190)][_0x173658(0x170)][_0x2e8d61]}});const _0x214f01={},_0x2d4d96={},_0x4070f7=[game[_0x173658(0x11e)]['localize'](_0x173658(0x13b)),game[_0x173658(0x11e)]['localize'](_0x173658(0x1c3))];return _0x991e89[_0x173658(0x1a3)](_0x4024fb=>{const _0x44a9b0=_0x173658,_0x4164ab=UtilActors['getActorBarAttributes'](_0x4024fb);_0x4070f7[_0x44a9b0(0x1a3)](_0x3def60=>{const _0x297fb3=_0x44a9b0;(_0x4164ab[_0x3def60]||[])[_0x297fb3(0x1a3)](_0xd9c916=>{const _0x5484a2=_0x297fb3,_0x48315b=_0x2d4d96[_0x3def60]=_0x2d4d96[_0x3def60]||new Set();if(_0x48315b[_0x5484a2(0x1a8)](_0xd9c916))return;_0x48315b['add'](_0xd9c916),(_0x214f01[_0x3def60]=_0x214f01[_0x3def60]||[])[_0x5484a2(0x1ab)](_0xd9c916);});});}),_0x4070f7[_0x173658(0x1a3)](_0x35f946=>{const _0x2ac9c0=_0x173658;(_0x214f01[_0x35f946]||[])[_0x2ac9c0(0x142)]((_0x4faf8a,_0x111b98)=>_0x4faf8a[_0x2ac9c0(0x125)](_0x111b98));}),_0x214f01;}},CollectionTokenUpdater[_0x191ef5(0x119)][_0x191ef5(0x144)]='collection_token_updater',CollectionTokenUpdater[_0x191ef5(0x119)][_0x191ef5(0x1a1)]={'IS_DEFAULT':!![],'isCharacterActive':![],'isNameActive':!![],'isDispositionActive':!![],'isImageActive':!![],'isResourcesActive':!![],'isVisionActive':!![],'isNameParseDoubleQuotes':!![],'isNameParseSingleQuotes':!![]},CollectionTokenUpdater[_0x191ef5(0x119)]['NameUpdateMode']=class{constructor(_0x34baa0,_0x24cfbf,_0x37ca31){const _0x7c83b2=_0x191ef5;this[_0x7c83b2(0x166)]=_0x34baa0,this[_0x7c83b2(0x1ac)]=_0x24cfbf,this[_0x7c83b2(0x1c1)]=_0x37ca31;}[_0x191ef5(0x181)](){const _0x194229=_0x191ef5;switch(this['name']){case _0x194229(0x1a5):case _0x194229(0x1b7):case _0x194229(0x18c):this[_0x194229(0x1ac)][_0x194229(0x161)](),this[_0x194229(0x1c1)][_0x194229(0x161)]();break;case _0x194229(0x188):case _0x194229(0x18d):case _0x194229(0x1b2):this[_0x194229(0x1ac)][_0x194229(0x136)](),this[_0x194229(0x1c1)][_0x194229(0x161)]();break;case'Regex':this[_0x194229(0x1ac)]['hideVe'](),this['_$stageNameRegex'][_0x194229(0x136)]();break;}}};export{CollectionTokenUpdater};function _0x3b2c(){const _0x4f8144=['Quoted\x20Part\x20or\x20Full\x20Name','localize','Cancel','barAttributeCharacter1','Last\x20Name','Quoted\x20Part\x20or\x20First\x20Name','actorLink','_activateListeners_pDoLoadAndRender','model','19256584YEODwZ','You\x20have\x20not\x20yet\x20configured\x20the\x20updater.\x20Are\x20you\x20sure\x20you\x20wish\x20to\x20proceed?','getData','<input\x20class=\x22range-value\x20ml-2\x20form-control\x20form-control--minimal\x22>','isImageActive','instance','isNameParseSingleQuotes','_gameProp','nameMode','imageSyncMode','lightOpacity','lightDim','pGet','visionDim','_getSelectedIds','addClass','_DEFAULTS','\x27([^\x27]*?)\x27','forEach','Updated\x20Not\x20Configured','Full\x20Name','Failed\x20to\x20update\x20','(None)','has','visionBright','data','push','_$stageNameQuotes','state','<button\x20class=\x22btn\x20btn-5et\x20btn-xs\x20ml-2\x22\x20title=\x22Reset\x20to\x20&quot;Do\x20not\x20update&quot;\x22><span\x20class=\x22glyphicon\x20glyphicon-refresh\x22></span></button>','TOKEN.DISPLAY_','isNameRegexIgnoreCase','3486738ZgXkHX','Quoted\x20Part\x20or\x20Last\x20Name','_list','pUpdateDocument','_pUpdateToken_populateImageUpdate','disposition','First\x20Name','/template/CollectionTokenUpdaterTemplate.hbs','isDispositionActive','Task','token','STR_SEE_CONSOLE','collection','type','_state','_collectionName','_$stageNameRegex','img','TOKEN.BarValues','isNameParseDoubleQuotes','scale','map','empty','Template','barAttributeCharacter2','npc','vision','_activateListeners_initBtnEditTemplate','i18n','lightAlpha','values','_pUpdateToken_populateLinkUpdate','character','pGetState','$getIptNumber','localeCompare','notifications','contents','IS_DEFAULT','$getCbBool','1111247NqMDQk','$getIptInt','[\x22\x27]([^\x22\x27]*?)[\x22\x27]','_activateListeners_initBtnReset','find','_pUpdateToken_populateNameUpdate','(No\x20update)','bar1','[name=\x22btn-set-template\x22]','isVisionActive','isResourcesActive','/template/CollectionTokenUpdater.hbs','showVe','debounce','replace','_mapEntitiesToRows','_pageFilter','TOKEN.BarAttributes','$getSelEnum','activateListeners','toku__cb-head','_activateListeners_pInitListAndFilters','Updated\x20','isLinkActive','sort','fromObject','_STORAGE_KEY','_addHookAll','nameRegexFormula','_pUpdateToken_populateResourcesUpdate','2786340WTruen','Regex','_pUpdateToken_populateVisionUpdate','bar2','dimSight','isHasVision','barAttributeNpc1','Set\x20Sheet\x20to\x20Use\x20Token\x20Image\x20(Update\x20Actor\x20from\x20Token)','displayBars','split','Use\x20Sheet\x20Image','filter','title','_pUpdateToken','Failed\x20to\x20save!\x20','barPermissions','Hostile','\x22([^\x22]*?)\x22','_pUpdateToken_populateDispositionUpdate','1012326AaiiJU','<input\x20class=\x22code\x20text-right\x22\x20type=\x22text\x22\x20placeholder=\x22(No\x20update)\x22>','_rows','trim','length','keys','hideVe','Updating...','_activateListeners_initBtnRun','MODULE_LOCATION','_getAllAvailableActorBarAttributes','name','barAttributeNpc2','isNameActive','<input\x20class=\x22code\x22\x20type=\x22text\x22>','4029328OvRjPd','TOKEN_DISPLAY_MODES','flat','24aXBHpn','Saved!','error','Actor','dimLight','click','898660gQlLRU','isLinkActorData','sightAngle','lightAngle','brightLight','close','getMaxWindowHeight','toku__form','_addHookBase','Friendly','exec','Prototype\x20Token\x20Updater\x20Configuration','last','brightSight','activate','NameUpdateMode','lightBright','Update\x20Complete','visionAngle','actor','$getIptStr'];_0x3b2c=function(){return _0x4f8144;};return _0x3b2c();}