const _0x81a4a6=_0x1d6e;(function(_0x2361f7,_0x243172){const _0x2dbeb4=_0x1d6e,_0x5b86bc=_0x2361f7();while(!![]){try{const _0xa9eb6b=-parseInt(_0x2dbeb4(0xa4))/0x1*(-parseInt(_0x2dbeb4(0xc3))/0x2)+-parseInt(_0x2dbeb4(0xa1))/0x3*(parseInt(_0x2dbeb4(0xb7))/0x4)+-parseInt(_0x2dbeb4(0xd4))/0x5*(-parseInt(_0x2dbeb4(0xc8))/0x6)+-parseInt(_0x2dbeb4(0xa8))/0x7+parseInt(_0x2dbeb4(0xb4))/0x8+parseInt(_0x2dbeb4(0x9d))/0x9+-parseInt(_0x2dbeb4(0xae))/0xa;if(_0xa9eb6b===_0x243172)break;else _0x5b86bc['push'](_0x5b86bc['shift']());}catch(_0x4d92bd){_0x5b86bc['push'](_0x5b86bc['shift']());}}}(_0x533a,0x91ff0));import{Config}from'./Config.js';import{SharedConsts}from'../shared/SharedConsts.js';class Patcher_ChatMessage{static['handleConfigUpdate']({isInit:isInit=![]}={}){const _0x50cb10=_0x1d6e;try{return this[_0x50cb10(0xa9)]();}catch(_0x8f9c0c){if(!isInit)throw _0x8f9c0c;Config[_0x50cb10(0xd0)]('ui',_0x50cb10(0xba),_0x8f9c0c);}}static[_0x81a4a6(0xa9)](){const _0x482ac7=_0x81a4a6;if(Patcher_ChatMessage[_0x482ac7(0xd9)]==null||Patcher_ChatMessage[_0x482ac7(0xd9)]!==Config[_0x482ac7(0xc4)]('ui','isCompactChat')){Patcher_ChatMessage[_0x482ac7(0xd9)]=Config[_0x482ac7(0xc4)]('ui',_0x482ac7(0xba));if(Patcher_ChatMessage[_0x482ac7(0xd9)])this[_0x482ac7(0xd3)]();else this[_0x482ac7(0xc6)]();}}static[_0x81a4a6(0xd3)](){const _0x541005=_0x81a4a6,_0x33f90b=ui[_0x541005(0xc5)][_0x541005(0xbc)][_0x541005(0xc1)](_0x541005(0xa2));_0x33f90b['each']((_0x346ba2,_0x504bdd)=>{const _0x24f57c=_0x541005,_0x416ad7=$(_0x504bdd),_0x898560=CONFIG['ChatMessage'][_0x24f57c(0xb1)][_0x24f57c(0xb0)]['get'](_0x504bdd['dataset'][_0x24f57c(0xbf)]);this[_0x24f57c(0xcb)](_0x898560,_0x416ad7,!![]);});}static[_0x81a4a6(0xc6)](){const _0x355223=_0x81a4a6,_0x52c5c3=ui[_0x355223(0xc5)][_0x355223(0xbc)][_0x355223(0xc1)](_0x355223(0xa2));_0x52c5c3['each']((_0x23f7c0,_0x4553dc)=>{const _0x18e5a7=_0x355223;_0x4553dc[_0x18e5a7(0xb3)]['remove']('chatmsg__trim-top'),_0x4553dc[_0x18e5a7(0xb3)][_0x18e5a7(0xb2)](_0x18e5a7(0xce)),$(_0x4553dc)[_0x18e5a7(0xaa)](_0x18e5a7(0xa0)+Patcher_ChatMessage[_0x18e5a7(0xa3)])[_0x18e5a7(0xaa)](_0x18e5a7(0xad)+Patcher_ChatMessage['_EVENT_NAMESPACE'])[_0x18e5a7(0xaa)](_0x18e5a7(0xa5)+Patcher_ChatMessage['_EVENT_NAMESPACE']);});}static['init'](){Hooks['on']('renderChatMessage',(_0x39679c,_0x35aa0f)=>{const _0x59424b=_0x1d6e;if(!Config[_0x59424b(0xc4)]('ui',_0x59424b(0xba)))return;this['_handleRenderChatMessage'](_0x39679c,_0x35aa0f);}),Hooks['on']('deleteChatMessage',(..._0x4c6e1d)=>{const _0x467ce8=_0x1d6e;if(!Config[_0x467ce8(0xc4)]('ui',_0x467ce8(0xba)))return;this[_0x467ce8(0xab)](..._0x4c6e1d);});}static[_0x81a4a6(0xcb)](_0x44e923,_0x52b02e,_0x318d0b){const _0xcaf9dc=_0x81a4a6;if(!_0x318d0b){const _0x92596e=this[_0xcaf9dc(0xd5)](_0x44e923);if(_0x92596e&&_0x92596e[_0xcaf9dc(0xd1)])return this[_0xcaf9dc(0xcd)](_0x44e923,_0x52b02e,_0x92596e);}if(!this[_0xcaf9dc(0xac)](_0x44e923)){Patcher_ChatMessage['_LAST_MESSAGE_META']=this[_0xcaf9dc(0xc9)](_0x44e923,_0x52b02e);return;}Patcher_ChatMessage['_LAST_MESSAGE_META']['$ele'][_0xcaf9dc(0xd6)]('chatmsg__trim-bottom');const _0x4369f7=this[_0xcaf9dc(0xc9)](_0x44e923,_0x52b02e);_0x4369f7[_0xcaf9dc(0xb9)][_0xcaf9dc(0xd6)](_0xcaf9dc(0xbe)),this[_0xcaf9dc(0xbd)](_0x4369f7['$ele']),Patcher_ChatMessage[_0xcaf9dc(0xd8)]=_0x4369f7;}static[_0x81a4a6(0xc9)](_0x1c329f,_0x464113){const _0x2c19bc=_0x81a4a6,_0x630087=_0x464113[_0x2c19bc(0xc1)](_0x2c19bc(0xa6));return{'$ele':_0x464113,'$header':_0x630087,'chatMessage':_0x1c329f};}static['_$getExistingRender'](_0x2fd6d3){const _0x1ec4ea=_0x81a4a6;return ui[_0x1ec4ea(0xc5)][_0x1ec4ea(0xbc)][_0x1ec4ea(0xc1)](_0x1ec4ea(0xc2)+_0x2fd6d3['id']+'\x22]');}static['_doHandleExistingMessage'](_0xc7915b,_0xab16e9,_0x574a50){const _0x1e0fb5=_0x81a4a6;if(_0x574a50[_0x1e0fb5(0xda)]('chatmsg__trim-bottom'))_0xab16e9[_0x1e0fb5(0xd6)](_0x1e0fb5(0xce));_0x574a50['hasClass'](_0x1e0fb5(0xbe))&&(_0xab16e9[_0x1e0fb5(0xd6)]('chatmsg__trim-top'),this[_0x1e0fb5(0xbd)](_0xab16e9));}static['_isMetaMatch'](_0x89fd9c){const _0x55bb3e=_0x81a4a6;if(!Patcher_ChatMessage[_0x55bb3e(0xd8)])return![];const {chatMessage:_0xe44a4a}=Patcher_ChatMessage[_0x55bb3e(0xd8)];if(!_0xe44a4a?.[_0x55bb3e(0xc7)]||!_0x89fd9c?.[_0x55bb3e(0xc7)])return![];if(_0xe44a4a[_0x55bb3e(0xc7)][_0x55bb3e(0xb5)]<_0x89fd9c['data'][_0x55bb3e(0xb5)]-Patcher_ChatMessage[_0x55bb3e(0xbb)])return![];if(_0xe44a4a[_0x55bb3e(0xd7)]?.['id']!==_0x89fd9c[_0x55bb3e(0xd7)]?.['id'])return![];if(_0xe44a4a[_0x55bb3e(0xd7)]?.[_0x55bb3e(0xb8)]!==_0x89fd9c['user']?.['color'])return![];if(_0xe44a4a[_0x55bb3e(0xd2)]?.['id']!==_0x89fd9c[_0x55bb3e(0xd2)]?.['id'])return![];if(_0xe44a4a[_0x55bb3e(0x9f)]!==_0x89fd9c[_0x55bb3e(0x9f)])return![];if(!CollectionUtil['deepEquals'](_0xe44a4a[_0x55bb3e(0xc7)]?.[_0x55bb3e(0xca)],_0x89fd9c[_0x55bb3e(0xc7)]?.[_0x55bb3e(0xca)]))return![];if(_0xe44a4a[_0x55bb3e(0xc7)]?.[_0x55bb3e(0xc0)]!==_0x89fd9c['data']?.[_0x55bb3e(0xc0)])return![];return!![];}static[_0x81a4a6(0xab)](_0x481be0){const _0x34f296=_0x81a4a6,_0x518695=ui[_0x34f296(0xc5)][_0x34f296(0xbc)][_0x34f296(0xc1)](_0x34f296(0xc2)+_0x481be0['id']+'\x22]'),_0x59dbff=_0x518695[_0x34f296(0x9e)](),_0x17e145=_0x518695[_0x34f296(0xcc)]();_0x17e145[_0x34f296(0xd1)]&&(!_0x518695[_0x34f296(0xda)]('chatmsg__trim-top')&&_0x518695[_0x34f296(0xda)]('chatmsg__trim-bottom')&&_0x17e145[_0x34f296(0xaf)](_0x34f296(0xbe)));_0x59dbff[_0x34f296(0xd1)]&&(_0x518695[_0x34f296(0xda)](_0x34f296(0xbe))&&!_0x518695[_0x34f296(0xda)](_0x34f296(0xce))&&_0x59dbff[_0x34f296(0xaf)](_0x34f296(0xce)));if(Patcher_ChatMessage[_0x34f296(0xd8)]){const {chatMessage:_0x1c50ea}=Patcher_ChatMessage[_0x34f296(0xd8)];if(_0x1c50ea===_0x481be0)Patcher_ChatMessage['_LAST_MESSAGE_META']=null;}}static[_0x81a4a6(0xbd)](_0x40031b){const _0x5eb604=_0x81a4a6;_0x40031b['on'](_0x5eb604(0xa0)+Patcher_ChatMessage[_0x5eb604(0xa3)],_0x381e75=>{const _0x1ac087=_0x5eb604;if(!_0x381e75[_0x1ac087(0xcf)])return;_0x40031b[_0x1ac087(0xd6)]('chatmsg__trim-top--inspecting');})['on']('mouseover.'+Patcher_ChatMessage[_0x5eb604(0xa3)],_0x458c7c=>{const _0x1a485d=_0x5eb604;if(!_0x458c7c[_0x1a485d(0xcf)])return;_0x40031b[_0x1a485d(0xd6)]('chatmsg__trim-top--inspecting');})['on'](_0x5eb604(0xa5)+Patcher_ChatMessage[_0x5eb604(0xa3)],()=>{const _0x3c172e=_0x5eb604;_0x40031b['removeClass'](_0x3c172e(0xa7));});}}function _0x533a(){const _0x9a4e48=['length','author','_doAddToExistingMessages','55rRYbYV','_$getExistingRender','addClass','user','_LAST_MESSAGE_META','_LAST_CONFIG_STATE','hasClass','10744326cRGTKA','prev','alias','mousemove.','15BACOHa','.message','_EVENT_NAMESPACE','1zpUjTz','mouseleave.','header.message-header','chatmsg__trim-top--inspecting','94857fhHoUW','_handleConfigUpdate_','off','_handleDeleteChatMessage','_isMetaMatch','mouseover.','18780810IPzfBb','removeClass','instance','collection','remove','classList','6307160ZbmRWG','timestamp','-chat','337996VgYqsD','color','$ele','isCompactChat','_SPEAKER_TIMEOUT_MSEC','element','_doBindTrimmedTopEventHandlers','chatmsg__trim-top','messageId','blind','find','.message[data-message-id=\x22','1817838Dujfcd','get','chat','_doRemoveFromExistingMessages','data','11454MEsjNg','_getMessageMeta','whisper','_handleRenderChatMessage','next','_doHandleExistingMessage','chatmsg__trim-bottom','shiftKey','handleFailedInitConfigApplication'];_0x533a=function(){return _0x9a4e48;};return _0x533a();}Patcher_ChatMessage[_0x81a4a6(0xd9)]=null,Patcher_ChatMessage['_SPEAKER_TIMEOUT_MSEC']=0x7530,Patcher_ChatMessage[_0x81a4a6(0xd8)]=null,Patcher_ChatMessage[_0x81a4a6(0xa3)]=SharedConsts['MODULE_NAME']+_0x81a4a6(0xb6);function _0x1d6e(_0x12ff5f,_0x425375){const _0x533a6b=_0x533a();return _0x1d6e=function(_0x1d6ef3,_0x3fcd80){_0x1d6ef3=_0x1d6ef3-0x9d;let _0x2312ef=_0x533a6b[_0x1d6ef3];return _0x2312ef;},_0x1d6e(_0x12ff5f,_0x425375);}export{Patcher_ChatMessage};